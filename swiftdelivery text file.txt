```my-frontend\0

```

```my-frontend\.env.example
# Backend URL
VITE_API_BASE_URL=http://localhost:5000

```

```my-frontend\.env
VITE_API_BASE_URL=http://localhost:5000

```

```my-frontend\.gitignore
.vercel

```

```my-frontend\ctx.querySelector(sel)

```

```my-frontend\.vercel\README.txt
> Why do I have a folder named ".vercel" in my project?
The ".vercel" folder is created when you link a directory to a Vercel project.

> What does the "project.json" file contain?
The "project.json" file contains:
- The ID of the Vercel project that you linked ("projectId")
- The ID of the user or team your Vercel project is owned by ("orgId")

> Should I commit the ".vercel" folder?
No, you should not share the ".vercel" folder with anyone.
Upon creation, it will be automatically added to your ".gitignore" file.

```

```my-frontend\.vercel\project.json
{"projectId":"prj_Wu2nyzfoHECGsMC4RVCyPS0HXV6d","orgId":"team_bLQSkCvfaiWzqL5EgBSI6ZnD","projectName":"my-frontend"}
```

```my-frontend\courier-tracking.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üöö Live Courier Tracking - SwiftDelivery</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    .header {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }
    .header h1 {
      font-size: 28px;
      margin-bottom: 10px;
    }
    .header p {
      font-size: 16px;
      opacity: 0.9;
    }
    .content {
      padding: 30px;
    }
    .search-section {
      margin-bottom: 30px;
    }
    .search-form {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }
    input[type="text"] {
      flex: 1;
      padding: 12px 15px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s;
    }
    input[type="text"]:focus {
      outline: none;
      border-color: #4f46e5;
    }
    button {
      padding: 12px 24px;
      background: #4f46e5;
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #4338ca;
    }
    button:disabled {
      background: #cbd5e1;
      cursor: not-allowed;
    }
    #courierMap {
      height: 500px;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .info-section {
      display: none;
      margin-top: 30px;
    }
    .info-section.active {
      display: block;
    }
    .info-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 12px;
      border-left: 4px solid #4f46e5;
    }
    .info-card h3 {
      margin: 0 0 15px 0;
      color: #1f2937;
    }
    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }
    .info-item {
      background: white;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
    }
    .info-item strong {
      color: #4f46e5;
      display: block;
      margin-bottom: 5px;
    }
    .info-item span {
      color: #6b7280;
      font-size: 14px;
    }
    .status-badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      margin-top: 5px;
    }
    .status-active {
      background: #dcfce7;
      color: #166534;
    }
    .error-message {
      color: #dc2626;
      padding: 15px;
      background: #fee2e2;
      border-radius: 8px;
      display: none;
      margin-bottom: 15px;
    }
    .error-message.show {
      display: block;
    }
    .success-message {
      color: #059669;
      padding: 15px;
      background: #d1fae5;
      border-radius: 8px;
      display: none;
      margin-bottom: 15px;
    }
    .success-message.show {
      display: block;
    }
    .clear-btn {
      background: #ef4444;
      margin-top: 15px;
    }
    .clear-btn:hover {
      background: #dc2626;
    }
    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.5); }
      50% { box-shadow: 0 0 0 8px rgba(255, 107, 107, 0.2); }
    }
    .animated-courier-icon { animation: pulse 1.5s infinite; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üöö Live Courier Tracking</h1>
      <p>Real-time package delivery tracking with animated courier movement</p>
    </div>

    <div class="content">
      <div class="search-section">
        <div class="error-message" id="errorMessage"></div>
        <div class="success-message" id="successMessage"></div>
        <form id="courierTrackingForm" class="search-form">
          <input type="text" id="courierTrackingId" placeholder="Enter Tracking ID (e.g., SWIFT-1234567890-ABCDE)" required />
          <button type="submit">Track Courier</button>
        </form>
      </div>

      <div id="courierMap"></div>

      <div class="info-section" id="courierInfo">
        <div class="info-card">
          <h3>üì¶ Package Details</h3>
          <div class="info-grid">
            <div class="info-item">
              <strong>Tracking ID</strong>
              <span id="infoTrackingId">-</span>
            </div>
            <div class="info-item">
              <strong>Status</strong>
              <span id="infoStatus">-</span>
              <div id="statusBadge"></div>
            </div>
            <div class="info-item">
              <strong>Recipient</strong>
              <span id="infoRecipient">-</span>
            </div>
            <div class="info-item">
              <strong>Email</strong>
              <span id="infoEmail">-</span>
            </div>
            <div class="info-item">
              <strong>Location</strong>
              <span id="infoLocation">-</span>
            </div>
            <div class="info-item">
              <strong>Last Updated</strong>
              <span id="infoUpdated">-</span>
            </div>
          </div>
          <button class="clear-btn" onclick="clearTracking()">Clear Search</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
  <script>
    const API_BASE_URL = 'http://localhost:5000';
    let courierMap = null;
    let courierMarker = null;
    let animatedMarker = null;
    let courierAnimationInterval = null;

    function initCourierMap() {
      if (courierMap) return;
      
      courierMap = L.map('courierMap').setView([6.5244, 3.3792], 11);
      
      const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '¬© OpenStreetMap contributors',
        maxZoom: 19,
        name: 'Street Map'
      });
      
      const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: '¬© Esri',
        maxZoom: 18,
        name: 'Satellite'
      });
      
      osm.addTo(courierMap);
      L.control.layers({ 'Street Map': osm, 'Satellite': satellite }).addTo(courierMap);
    }

    function getMarkerIcon(status) {
      const colorMap = {
        'Pending Pickup': '#f59e0b',
        'Pickup Assigned': '#3b82f6',
        'Pickup Accepted': '#10b981',
        'Enroute to Facility': '#8b5cf6',
        'Arrived at Hub or Facility': '#6366f1',
        'In Transit': '#06b6d4',
        'Out for Delivery': '#f97316',
        'Delivered': '#22c55e',
        'Awaiting Receipt': '#14b8a6',
        'Delivery Failed': '#ef4444',
        'Returned to Sender': '#64748b'
      };
      const color = colorMap[status] || '#9ca3af';
      
      return L.divIcon({
        html: `<div style="background-color: ${color}; width: 30px; height: 30px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center; font-size: 16px;">üì¶</div>`,
        iconSize: [36, 36]
      });
    }

    function getCourierIcon() {
      return L.divIcon({
        html: `<div style="background-color: #ff6b6b; width: 28px; height: 28px; border-radius: 50%; border: 2px solid white; box-shadow: 0 0 0 3px #ff6b6b, 0 2px 6px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; font-size: 14px; animation: pulse 1.5s infinite;">üöö</div>`,
        iconSize: [32, 32],
        className: 'animated-courier-icon'
      });
    }

    function animateCourierMovement(location) {
      if (courierAnimationInterval) clearInterval(courierAnimationInterval);
      if (animatedMarker) courierMap.removeLayer(animatedMarker);
      
      const centerLat = location.lat;
      const centerLng = location.lng;
      const radius = 0.005;
      let angle = 0;
      
      animatedMarker = L.marker([centerLat, centerLng], { 
        icon: getCourierIcon(), 
        zIndexOffset: 1000 
      }).addTo(courierMap);
      
      animatedMarker.bindPopup('<div style="font-size: 12px; text-align: center;"><strong>üöö Courier En Route</strong><br/><span style="color: #ff6b6b;">Moving to delivery location</span></div>');
      
      courierAnimationInterval = setInterval(() => {
        angle = (angle + 2) % 360;
        const rad = (angle * Math.PI) / 180;
        const newLat = centerLat + radius * Math.cos(rad);
        const newLng = centerLng + radius * Math.sin(rad);
        animatedMarker.setLatLng([newLat, newLng]);
      }, 100);
    }

    function showMessage(type, message) {
      const errorEl = document.getElementById('errorMessage');
      const successEl = document.getElementById('successMessage');
      
      if (type === 'error') {
        errorEl.textContent = message;
        errorEl.classList.add('show');
        successEl.classList.remove('show');
      } else {
        successEl.textContent = message;
        successEl.classList.add('show');
        errorEl.classList.remove('show');
      }
    }

    document.getElementById('courierTrackingForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const trackingId = document.getElementById('courierTrackingId').value.trim();
      if (!trackingId) return;
      
      try {
        initCourierMap();
        
        const response = await fetch(`${API_BASE_URL}/api/tracking/${trackingId}`);
        if (!response.ok) throw new Error('Tracking ID not found');
        
        const data = await response.json();
        
        if (courierMarker) courierMap.removeLayer(courierMarker);
        
        const location = [data.location.lat, data.location.lng];
        courierMarker = L.marker(location, { icon: getMarkerIcon(data.status) }).addTo(courierMap);
        courierMarker.bindPopup(`<strong>${data.user.fullName}</strong><br/>Status: ${data.status}<br/>Tracking: ${data.trackingId}`).openPopup();
        
        courierMap.setView(location, 14);
        
        document.getElementById('infoTrackingId').textContent = data.trackingId;
        document.getElementById('infoStatus').textContent = data.status;
        document.getElementById('infoRecipient').textContent = data.user.fullName;
        document.getElementById('infoEmail').textContent = data.user.email;
        document.getElementById('infoLocation').textContent = `${data.location.lat.toFixed(4)}, ${data.location.lng.toFixed(4)}`;
        document.getElementById('infoUpdated').textContent = new Date(data.updatedAt).toLocaleString();
        
        const activeStatuses = ['Out for Delivery', 'In Transit', 'Enroute to Facility'];
        if (activeStatuses.includes(data.status)) {
          document.getElementById('statusBadge').innerHTML = '<span class="status-badge status-active">üöö Active Delivery</span>';
          setTimeout(() => animateCourierMovement(data.location), 500);
        } else if (data.status === 'Delivered') {
          document.getElementById('statusBadge').innerHTML = '<span class="status-badge" style="background: #d1d5db; color: #374151;">‚úì Delivered</span>';
        } else {
          document.getElementById('statusBadge').innerHTML = '';
        }
        
        document.getElementById('courierInfo').classList.add('active');
        document.getElementById('courierTrackingId').value = '';
        showMessage('success', '‚úì Tracking information loaded!');
      } catch (err) {
        showMessage('error', 'Error: ' + err.message);
        document.getElementById('courierInfo').classList.remove('active');
      }
    });

    function clearTracking() {
      document.getElementById('courierTrackingId').value = '';
      document.getElementById('courierInfo').classList.remove('active');
      if (courierMarker) courierMap.removeLayer(courierMarker);
      if (animatedMarker) courierMap.removeLayer(animatedMarker);
      if (courierAnimationInterval) clearInterval(courierAnimationInterval);
      courierMap.setView([6.5244, 3.3792], 11);
      document.getElementById('errorMessage').classList.remove('show');
      document.getElementById('successMessage').classList.remove('show');
    }

    initCourierMap();
  </script>
</body>
</html>

```

```my-frontend\clearInterval(autoTimer))

```

```my-frontend\CHATBOT_NAVIGATION_TEST.md
# SwiftDelivery Chatbot Navigation Testing Guide

## How to Test the Intelligent Navigation

The SwiftDelivery chatbot now has intelligent navigation built into `script.js`. Open your browser's **Developer Console** (F12 or Cmd+Option+I) to see detailed logs.

### Test Phrases

Try typing these in the chatbot and watch the console logs:

#### ‚úÖ Gallery Navigation
- "show me gallery"
- "show photos"
- "view gallery"
- "see our facilities"

**Expected**: Page scrolls to Gallery section, shows animation pulse

#### ‚úÖ Services Navigation
- "show services"
- "what services do you offer"
- "tell me about services"

**Expected**: Page scrolls to Services section

#### ‚úÖ Tracking Navigation
- "track my package"
- "where is my shipment"
- "delivery status"

**Expected**: Page scrolls to Tracking section

#### ‚úÖ FAQ Navigation
- "show faq"
- "frequently asked questions"
- "how do i"

**Expected**: Page scrolls to FAQ section

#### ‚úÖ Contact Navigation
- "contact us"
- "get in touch"
- "contact information"

**Expected**: Page scrolls to Contact section

#### ‚úÖ Booking Navigation
- "book shipment"
- "schedule delivery"
- "new shipment"

**Expected**: Page scrolls to Booking section

#### ‚úÖ Home Navigation
- "go home"
- "show me home"

**Expected**: Page scrolls to Home section

### Console Output to Look For

When you send a message, check the console for:

```
ü§ñ SwiftDelivery Bot Intent: {
  intent: "navigate_gallery",
  confidence: 1,
  section: "gallery",
  shouldNavigate: true
}

‚úÖ Navigated to: gallery

üó∫Ô∏è Navigation executed: {
  success: true,
  section: "gallery"
}
```

### Troubleshooting

**If navigation doesn't work:**

1. **Check Console Logs** - Open Developer Console and look for any errors
2. **Verify Sections Exist** - Check that `<section id="gallery">`, etc. exist in index.html
3. **Clear Cache** - Hard refresh (Ctrl+Shift+R) to clear browser cache
4. **Check Confidence Score** - If confidence is below 0.3, navigation won't trigger

### How It Works

1. User types a message
2. `detectChatbotIntent()` analyzes the text
3. Scores based on:
   - **Exact phrase matches** (10 points each)
   - **Keyword matches** (1 point each)
4. If confidence > 30%, the chatbot:
   - Scrolls smoothly to the section (300ms delay for UX)
   - Adds pulse animation highlight
   - Sends message to AI backend for response

### Integration Details

- **NLU Engine**: Inline in `script.js` (lines 1270-1405)
- **Navigation Function**: `navigateToChatbotSection()` 
- **Intent Detection**: `detectChatbotIntent()`
- **Highlight Animation**: Auto-added CSS with pulse effect
- **No External Dependencies**: Works with vanilla JS

### Supported Sections

- `home` - Hero/Homepage
- `gallery` - Photos and facilities
- `services` - Service offerings
- `track` - Package tracking
- `contact` - Contact information
- `faq` - Frequently asked questions
- `booking` - Booking dashboard
- `testimonials` - Customer testimonials

All section IDs match the HTML structure in index.html

```

```my-frontend\d.classList.toggle('open'

```

```my-frontend\Array.from((ctx

```

```my-frontend\applyTranslations(savedLang))

```

```my-frontend\applyTheme(themeToggle.checked))

```

```my-frontend\admin.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SwiftDelivery Admin Dashboard</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      background-color: #f5f7fa;
      color: #333;
    }

    header {
      background-color: #4f46e5;
      color: white;
      padding: 1rem 2rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: bold;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .user-info button {
      background-color: rgba(255,255,255,0.2);
      border: none;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .user-info button:hover {
      background-color: rgba(255,255,255,0.3);
    }

    .container {
      display: flex;
      height: calc(100vh - 70px);
    }

    .sidebar {
      width: 250px;
      background-color: white;
      box-shadow: 2px 0 4px rgba(0,0,0,0.05);
      padding: 1.5rem 0;
    }

    .nav-item {
      padding: 0.75rem 1.5rem;
      cursor: pointer;
      transition: background-color 0.2s;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .nav-item:hover, .nav-item.active {
      background-color: #f0f4ff;
    }

    .nav-item.active {
      border-left: 3px solid #4f46e5;
      font-weight: 600;
    }

    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .content-header {
      padding: 1.5rem 2rem;
      background-color: white;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .content-body {
      flex: 1;
      padding: 2rem;
      overflow-y: auto;
    }

    .card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .card-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    /* Messaging Styles */
    .messaging-container {
      display: flex;
      height: 100%;
    }

    .conversations-list {
      width: 300px;
      border-right: 1px solid #e5e7eb;
      overflow-y: auto;
    }

    .conversation-item {
      padding: 1rem;
      border-bottom: 1px solid #f0f0f0;
      cursor: pointer;
      transition: background-color 0.2s;
      display: flex;
      justify-content: space-between;
    }

    .conversation-item:hover {
      background-color: #f9f9f9;
    }

    .conversation-item.active {
      background-color: #f0f4ff;
    }

    .conversation-info {
      flex: 1;
    }

    .conversation-name {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .conversation-preview {
      font-size: 0.875rem;
      color: #666;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 200px;
    }

    .conversation-time {
      font-size: 0.75rem;
      color: #999;
    }

    .unread-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: #4f46e5;
      margin-top: 0.5rem;
    }

    .chat-window {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .chat-header {
      padding: 1rem;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .chat-messages {
      flex: 1;
      padding: 1rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .message {
      max-width: 70%;
      padding: 0.75rem 1rem;
      border-radius: 18px;
      word-wrap: break-word;
    }

    .message-customer {
      align-self: flex-start;
      background-color: #f1f3f5;
      color: #333;
    }

    .message-admin {
      align-self: flex-end;
      background-color: #4f46e5;
      color: white;
    }

    .message-time {
      font-size: 0.75rem;
      color: #999;
      margin-top: 0.25rem;
    }

    .message-admin .message-time {
      color: rgba(255,255,255,0.7);
      text-align: right;
    }

    .chat-input-container {
      padding: 1rem;
      border-top: 1px solid #e5e7eb;
      display: flex;
      gap: 0.5rem;
    }

    .chat-input {
      flex: 1;
      padding: 0.75rem;
      border: 1px solid #e5e7eb;
      border-radius: 24px;
      outline: none;
      font-size: 0.95rem;
    }

    .chat-send-button {
      padding: 0.75rem 1.25rem;
      background-color: #4f46e5;
      color: white;
      border: none;
      border-radius: 24px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.2s;
    }

    .chat-send-button:hover {
      background-color: #4338ca;
    }

    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      color: #999;
    }

    .empty-state-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    /* User Management Styles */
    .users-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    .user-card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      padding: 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .user-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background-color: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      color: #4f46e5;
    }

    .user-details h3 {
      margin-bottom: 0.25rem;
    }

    .user-details p {
      font-size: 0.875rem;
      color: #666;
    }

    .user-actions {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .btn {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s;
    }

    .btn-primary {
      background-color: #4f46e5;
      color: white;
    }

    .btn-primary:hover {
      background-color: #4338ca;
    }

    .btn-secondary {
      background-color: #e5e7eb;
      color: #333;
    }

    .btn-secondary:hover {
      background-color: #d1d5db;
    }

    .btn-success {
      background-color: #10b981;
      color: white;
    }

    .btn-success:hover {
      background-color: #059669;
    }

    .notification-badge {
      background-color: #ef4444;
      color: white;
      font-size: 0.75rem;
      padding: 0.125rem 0.5rem;
      border-radius: 12px;
      margin-left: 0.5rem;
    }

    /* Status indicator */
    .status-indicator {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      margin-right: 0.5rem;
    }

    .status-online {
      background-color: #10b981;
    }

    .status-offline {
      background-color: #6b7280;
    }

    .status-away {
      background-color: #f59e0b;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">SwiftDelivery Admin Dashboard</div>
    <div class="user-info">
      <span id="adminName">Admin User</span>
      <button id="logoutBtn">Logout</button>
    </div>
  </header>

  <div class="container">
    <div class="sidebar">
      <div class="nav-item active" data-page="messaging">
        <span>üí¨</span>
        <span>Direct Messaging</span>
      </div>
      <div class="nav-item" data-page="users">
        <span>üë•</span>
        <span>User Management</span>
      </div>
      <div class="nav-item" data-page="tracking">
        <span>üìç</span>
        <span>Package Tracking</span>
      </div>
    </div>

    <div class="main-content">
      <!-- Messaging Page -->
      <div id="messaging-page" class="page-content">
        <div class="content-header">
          <h2>Direct Messaging</h2>
          <button id="refreshConversations" class="btn btn-secondary">Refresh</button>
        </div>
        <div class="content-body">
          <div class="messaging-container">
            <div class="conversations-list" id="conversationsList">
              <!-- Conversations will be loaded here -->
            </div>
            <div class="chat-window" id="chatWindow">
              <div class="empty-state" id="emptyChatState">
                <div class="empty-state-icon">üí¨</div>
                <h3>Select a conversation to start messaging</h3>
                <p>Choose a customer from the list to view and send messages</p>
              </div>
              <div id="activeChat" style="display: none;">
                <div class="chat-header">
                  <div>
                    <h3 id="chatCustomerName">Customer Name</h3>
                    <p id="chatCustomerEmail">customer@example.com</p>
                  </div>
                  <div>
                    <span class="status-indicator status-online"></span>
                    <span>Online</span>
                  </div>
                </div>
                <div class="chat-messages" id="chatMessages">
                  <!-- Messages will be loaded here -->
                </div>
                <div class="chat-input-container">
                  <input type="text" id="messageInput" class="chat-input" placeholder="Type a message...">
                  <button id="sendMessage" class="chat-send-button">Send</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- User Management Page -->
      <div id="users-page" class="page-content" style="display: none;">
        <div class="content-header">
          <h2>User Management</h2>
          <div>
            <button id="refreshUsers" class="btn btn-secondary">Refresh</button>
            <button id="addUser" class="btn btn-primary">Add User</button>
          </div>
        </div>
        <div class="content-body">
          <div class="users-grid" id="usersGrid">
            <!-- Users will be loaded here -->
          </div>
        </div>
      </div>

      <!-- Tracking Page -->
      <div id="tracking-page" class="page-content" style="display: none;">
        <div class="content-header">
          <h2>Package Tracking</h2>
          <button id="refreshTracking" class="btn btn-secondary">Refresh</button>
        </div>
        <div class="content-body">
          <div class="card">
            <h3 class="card-title">Active Shipments</h3>
            <div id="trackingList">
              <!-- Tracking information will be loaded here -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Configuration
    const BASE_URL = "http://localhost:5000";
    let currentConversation = null;
    let adminToken = localStorage.getItem('adminToken');
    let adminData = JSON.parse(localStorage.getItem('adminData') || '{}');
    
    // Store admin ID for conversation IDs
    if (adminData.id) {
      localStorage.setItem('adminId', adminData.id);
    }

    // Check if admin is logged in
    function checkAuth() {
      if (!adminToken) {
        // Redirect to login page
        window.location.href = "admin-login.html";
        return false;
      }
      return true;
    }

    // Initialize admin dashboard
    document.addEventListener('DOMContentLoaded', () => {
      if (!checkAuth()) return;

      // Set admin name
      if (adminData.name) {
        document.getElementById('adminName').textContent = adminData.name;
      }

      // Setup navigation
      setupNavigation();

      // Load initial data
      loadConversations();

      // Setup messaging
      setupMessaging();

      // Setup user management
      setupUserManagement();

      // Setup tracking
      setupTracking();

      // Setup logout
      document.getElementById('logoutBtn').addEventListener('click', logout);

      // Auto-refresh conversations every 10 seconds
      setInterval(() => {
        if (document.getElementById('messaging-page').style.display !== 'none') {
          loadConversations();
          if (currentConversation) {
            loadMessages(currentConversation.id);
          }
        }
      }, 10000);
    });

    // Setup navigation
    function setupNavigation() {
      const navItems = document.querySelectorAll('.nav-item');

      navItems.forEach(item => {
        item.addEventListener('click', () => {
          // Remove active class from all items
          navItems.forEach(nav => nav.classList.remove('active'));

          // Add active class to clicked item
          item.classList.add('active');

          // Hide all pages
          document.querySelectorAll('.page-content').forEach(page => {
            page.style.display = 'none';
          });

          // Show selected page
          const pageId = `${item.dataset.page}-page`;
          document.getElementById(pageId).style.display = 'block';

          // Load data for selected page
          if (item.dataset.page === 'messaging') {
            loadConversations();
          } else if (item.dataset.page === 'users') {
            loadUsers();
          } else if (item.dataset.page === 'tracking') {
            loadTrackingData();
          }
        });
      });
    }

    // Setup messaging functionality
    function setupMessaging() {
      // Refresh conversations button
      document.getElementById('refreshConversations').addEventListener('click', loadConversations);

      // Send message button
      document.getElementById('sendMessage').addEventListener('click', sendMessage);

      // Enter key to send message
      document.getElementById('messageInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          sendMessage();
        }
      });
    }

    // Logout function
    function logout() {
      localStorage.removeItem('adminToken');
      localStorage.removeItem('adminData');
      window.location.href = "admin-login.html";
    }
    let adminToken = null;
    let adminData = null;

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      // Check if admin is logged in
      adminToken = localStorage.getItem('adminToken');
      if (!adminToken) {
        // For demo purposes, create a mock admin token
        adminToken = 'mock-admin-token';
        localStorage.setItem('adminToken', adminToken);
        adminData = { id: 'admin123', name: 'Admin User', email: 'admin@swiftdelivery.com' };
        localStorage.setItem('adminData', JSON.stringify(adminData));
      } else {
        adminData = JSON.parse(localStorage.getItem('adminData'));
      }
      
      // Store admin ID for conversation IDs
      localStorage.setItem('adminId', adminData.id);

      // Update UI with admin info
      if (adminData) {
        document.getElementById('adminName').textContent = adminData.name;
      }

      // Setup navigation
      setupNavigation();

      // Setup logout
      document.getElementById('logoutBtn').addEventListener('click', () => {
        localStorage.removeItem('adminToken');
        localStorage.removeItem('adminData');
        window.location.reload();
      });

      // Load initial data
      loadConversations();
      loadUsers();
      loadTrackingData();

      // Set up refresh intervals
      setInterval(() => {
        loadConversations();
        if (currentConversation) {
          loadMessages(currentConversation.id);
        }
      }, 5000);

      // Setup messaging functionality
      setupMessaging();

      // Setup user management
      setupUserManagement();

      // Setup tracking
      setupTracking();

      // Auto-refresh every 30 seconds
      setInterval(() => {
        loadConversations();
        if (currentConversation) {
          loadMessages(currentConversation.id);
        }
      }, 30000);
    });

    // Navigation setup
    function setupNavigation() {
      const navItems = document.querySelectorAll('.nav-item');
      navItems.forEach(item => {
        item.addEventListener('click', () => {
          // Remove active class from all items and pages
          navItems.forEach(navItem => navItem.classList.remove('active'));
          document.querySelectorAll('.page-content').forEach(page => {
            page.style.display = 'none';
          });

          // Add active class to clicked item
          item.classList.add('active');

          // Show corresponding page
          const pageName = item.getAttribute('data-page');
          document.getElementById(`${pageName}-page`).style.display = 'block';
        });
      });
    }

    // Messaging functionality
    function setupMessaging() {
      // Refresh conversations button
      document.getElementById('refreshConversations').addEventListener('click', loadConversations);

      // Send message button
      document.getElementById('sendMessage').addEventListener('click', sendMessage);

      // Enter key to send message
      document.getElementById('messageInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          sendMessage();
        }
      });
    }

    // Load conversations
    async function loadConversations() {
      try {
        // Get verified users list
        const response = await fetch(`${BASE_URL}/api/verified-users-list`, {
          headers: {
            'Authorization': `Bearer ${adminToken}`
          }
        });

        if (!response.ok) {
          throw new Error('Failed to fetch conversations');
        }

        const users = await response.json();
        const conversationsList = document.getElementById('conversationsList');

        if (users.length === 0) {
          conversationsList.innerHTML = '<div class="empty-state"><p>No conversations yet</p></div>';
          return;
        }

        // Create conversation items with message preview
        const conversationPromises = users.map(async user => {
          const adminId = localStorage.getItem('adminId');
          const conversationId = [adminId, user._id].sort().join('_');
          
          // Get last message and unread count
          try {
            const messagesResponse = await fetch(`${BASE_URL}/api/conversation/${user._id}`, {
              headers: {
                'Authorization': `Bearer ${adminToken}`
              }
            });
            
            let preview = 'No messages yet';
            let time = '-';
            let unreadCount = 0;
            
            if (messagesResponse.ok) {
              const messages = await messagesResponse.json();
              if (messages.length > 0) {
                const lastMessage = messages[messages.length - 1];
                preview = lastMessage.message.length > 30 
                  ? lastMessage.message.substring(0, 30) + '...' 
                  : lastMessage.message;
                time = new Date(lastMessage.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                // Count unread messages (from customer)
                unreadCount = messages.filter(msg => !msg.isFromAdmin && !msg.read).length;
              }
            }
            
            return `
              <div class="conversation-item" data-user-id="${user._id}" data-conversation-id="${conversationId}">
                <div class="conversation-info">
                  <div class="conversation-name">${user.name}</div>
                  <div class="conversation-preview">${preview}</div>
                </div>
                <div>
                  <div class="conversation-time">${time}</div>
                  <div class="unread-indicator" style="display: ${unreadCount > 0 ? 'flex' : 'none'};">${unreadCount}</div>
                </div>
              </div>
            `;
          } catch (error) {
            console.error(`Error fetching conversation for ${user.name}:`, error);
            return `
              <div class="conversation-item" data-user-id="${user._id}" data-conversation-id="${conversationId}">
                <div class="conversation-info">
                  <div class="conversation-name">${user.name}</div>
                  <div class="conversation-preview">No messages yet</div>
                </div>
                <div>
                  <div class="conversation-time">-</div>
                  <div class="unread-indicator" style="display: none;"></div>
                </div>
              </div>
            `;
          }
        });
        
        // Wait for all conversations to be processed
        const conversations = await Promise.all(conversationPromises);
        conversationsList.innerHTML = conversations.join('');

        // Add click event to conversation items
        document.querySelectorAll('.conversation-item').forEach(item => {
          item.addEventListener('click', () => {
            const userId = item.getAttribute('data-user-id');
            const conversationId = item.getAttribute('data-conversation-id');
            const userName = item.querySelector('.conversation-name').textContent;
            openConversation(userId, conversationId, userName);

            // Update active state
            document.querySelectorAll('.conversation-item').forEach(conv => {
              conv.classList.remove('active');
            });
            item.classList.add('active');
          });
        });
      } catch (error) {
        console.error('Error loading conversations:', error);
        document.getElementById('conversationsList').innerHTML = '<div class="empty-state"><p>Error loading conversations</p></div>';
      }
    }

    // Open conversation
    async function openConversation(userId, conversationId, userName) {
      currentConversation = {
        id: userId,
        conversationId: conversationId,
        name: userName
      };

      // Show active chat, hide empty state
      document.getElementById('emptyChatState').style.display = 'none';
      document.getElementById('activeChat').style.display = 'flex';

      // Update chat header
      document.getElementById('chatCustomerName').textContent = userName;

      // Load messages
      loadMessages(userId);
    }

    // Load messages
    async function loadMessages(userId) {
      try {
        const response = await fetch(`${BASE_URL}/api/conversation/${userId}`, {
          headers: {
            'Authorization': `Bearer ${adminToken}`
          }
        });

        if (!response.ok) {
          throw new Error('Failed to load messages');
        }

        const messages = await response.json();
        const chatMessages = document.getElementById('chatMessages');

        if (messages.length === 0) {
          chatMessages.innerHTML = '<div class="empty-state"><p>No messages yet. Start the conversation!</p></div>';
          return;
        }

        chatMessages.innerHTML = messages.map(msg => {
          const isAdmin = msg.senderId.isAdmin;
          const time = new Date(msg.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
          const status = msg.read ? 'read' : (msg.isFromAdmin ? 'delivered' : 'sent');

          return `
            <div class="message ${isAdmin ? 'message-admin' : 'message-customer'}">
              <div>${msg.message}</div>
              <div class="message-time">${time} - ${status}</div>
            </div>
          `;
        }).join('');

        // Scroll to bottom
        chatMessages.scrollTop = chatMessages.scrollHeight;

        // Mark messages as read
        markMessagesAsRead(currentConversation.conversationId);
      } catch (error) {
        console.error('Error loading messages:', error);
        document.getElementById('chatMessages').innerHTML = '<div class="empty-state"><p>Error loading messages</p></div>';
      }
    }

    // Send message
    async function sendMessage() {
      if (!currentConversation) return;

      const messageInput = document.getElementById('messageInput');
      const messageText = messageInput.value.trim();

      if (!messageText) return;

      try {
        const response = await fetch(`${BASE_URL}/api/direct-message`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${adminToken}`
          },
          body: JSON.stringify({
            recipientId: currentConversation.id,
            message: messageText
          })
        });

        if (!response.ok) {
          throw new Error('Failed to send message');
        }

        // Clear input
        messageInput.value = '';

        // Reload messages
        loadMessages(currentConversation.id);

        // Update conversation preview
        updateConversationPreview(currentConversation.id, messageText);
        
        // Refresh conversation list to update time and preview
        loadConversations();
      } catch (error) {
        console.error('Error sending message:', error);
        alert('Failed to send message. Please try again.');
      }
    }

    // Mark messages as read
    async function markMessagesAsRead(conversationId) {
      try {
        await fetch(`${BASE_URL}/api/messages-read/${conversationId}`, {
          method: 'PUT',
          headers: {
            'Authorization': `Bearer ${adminToken}`
          }
        });
        
        // Update read status in UI
        const customerMessages = document.querySelectorAll('.message-customer');
        customerMessages.forEach(msg => {
          const timeElement = msg.querySelector('.message-time');
          if (timeElement) {
            const currentText = timeElement.textContent;
            if (!currentText.includes('read')) {
              timeElement.textContent = currentText.replace(/(sent|delivered)/, 'read');
            }
          }
        });
      } catch (error) {
        console.error('Error marking messages as read:', error);
      }
    }

    // Update conversation preview
    function updateConversationPreview(userId, messageText) {
      const conversationItem = document.querySelector(`.conversation-item[data-user-id="${userId}"]`);
      if (conversationItem) {
        const preview = conversationItem.querySelector('.conversation-preview');
        const time = conversationItem.querySelector('.conversation-time');

        if (preview) {
          preview.textContent = messageText;
        }

        if (time) {
          time.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }
      }
    }

    // User Management functionality
    function setupUserManagement() {
      // Refresh users button
      document.getElementById('refreshUsers').addEventListener('click', loadUsers);

      // Add user button
      document.getElementById('addUser').addEventListener('click', () => {
        alert('Add User functionality would open a modal to create a new user');
      });
    }

    // Load users
    async function loadUsers() {
      try {
        const response = await fetch(`${BASE_URL}/api/admin/users`, {
          headers: {
            'Authorization': `Bearer ${adminToken}`
          }
        });

        if (!response.ok) {
          throw new Error('Failed to fetch users');
        }

        const users = await response.json();
        const usersGrid = document.getElementById('usersGrid');

        if (users.length === 0) {
          usersGrid.innerHTML = '<div class="empty-state"><p>No users found</p></div>';
          return;
        }

        usersGrid.innerHTML = users.map(user => `
          <div class="user-card">
            <div class="user-info">
              <div class="user-avatar">${user.name.charAt(0).toUpperCase()}</div>
              <div class="user-details">
                <h3>${user.name}</h3>
                <p>${user.email}</p>
              </div>
            </div>
            <div class="user-actions">
              <button class="btn ${user.isVerified ? 'btn-secondary' : 'btn-success'}" onclick="toggleVerification('${user._id}', ${user.isVerified})">
                ${user.isVerified ? 'Verified' : 'Verify'}
              </button>
              <button class="btn btn-primary" onclick="messageUser('${user._id}', '${user.name}')">
                Message
              </button>
            </div>
          </div>
        `).join('');
      } catch (error) {
        console.error('Error loading users:', error);
        document.getElementById('usersGrid').innerHTML = '<div class="empty-state"><p>Error loading users</p></div>';
      }
    }

    // Toggle user verification
    async function toggleVerification(userId, isVerified) {
      if (isVerified) return; // Already verified

      try {
        const response = await fetch(`${BASE_URL}/api/admin/verify-user/${userId}`, {
          method: 'PUT',
          headers: {
            'Authorization': `Bearer ${adminToken}`
          }
        });

        if (!response.ok) {
          throw new Error('Failed to verify user');
        }

        // Reload users
        loadUsers();
      } catch (error) {
        console.error('Error verifying user:', error);
        alert('Failed to verify user. Please try again.');
      }
    }

    // Message user from user management
    function messageUser(userId, userName) {
      // Switch to messaging page
      document.querySelector('[data-page="messaging"]').click();

      // Find and open conversation
      setTimeout(() => {
        const conversationItem = document.querySelector(`.conversation-item[data-user-id="${userId}"]`);
        if (conversationItem) {
          conversationItem.click();
        }
      }, 100);
    }

    // Tracking functionality
    function setupTracking() {
      // Refresh tracking button
      document.getElementById('refreshTracking').addEventListener('click', loadTrackingData);
    }

    // Load tracking data
    async function loadTrackingData() {
      try {
        const response = await fetch(`${BASE_URL}/api/admin/tracking`, {
          headers: {
            'Authorization': `Bearer ${adminToken}`
          }
        });

        if (!response.ok) {
          throw new Error('Failed to fetch tracking data');
        }

        const trackingData = await response.json();
        const trackingList = document.getElementById('trackingList');

        if (trackingData.length === 0) {
          trackingList.innerHTML = '<p>No active shipments</p>';
          return;
        }

        trackingList.innerHTML = trackingData.map(tracking => `
          <div class="card" style="margin-bottom: 1rem;">
            <h4>Tracking ID: ${tracking.trackingId}</h4>
            <p>Status: ${tracking.status}</p>
            <p>Customer: ${tracking.user.fullName}</p>
            <p>Email: ${tracking.user.email}</p>
            <p>Location: ${tracking.location.lat}, ${tracking.location.lng}</p>
            <p>Last Updated: ${new Date(tracking.updatedAt).toLocaleString()}</p>
          </div>
        `).join('');
      } catch (error) {
        console.error('Error loading tracking data:', error);
        document.getElementById('trackingList').innerHTML = '<p>Error loading tracking data</p>';
      }
    }
  </script>
</body>
</html>

```

```my-frontend\admin-login.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SwiftDelivery Admin Login</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      background-color: #f5f7fa;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .login-container {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 400px;
      padding: 2rem;
    }

    .logo {
      text-align: center;
      margin-bottom: 2rem;
    }

    .logo h1 {
      color: #4f46e5;
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
    }

    .logo p {
      color: #666;
      font-size: 0.9rem;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    .form-group input {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid #e5e7eb;
      border-radius: 4px;
      font-size: 1rem;
      outline: none;
      transition: border-color 0.2s;
    }

    .form-group input:focus {
      border-color: #4f46e5;
    }

    .login-btn {
      width: 100%;
      padding: 0.75rem;
      background-color: #4f46e5;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .login-btn:hover {
      background-color: #4338ca;
    }

    .error-message {
      background-color: #fee;
      color: #ef4444;
      padding: 0.75rem;
      border-radius: 4px;
      margin-bottom: 1rem;
      display: none;
    }

    .back-link {
      text-align: center;
      margin-top: 1.5rem;
    }

    .back-link a {
      color: #4f46e5;
      text-decoration: none;
    }

    .back-link a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="login-container">
    <div class="logo">
      <h1>SwiftDelivery</h1>
      <p>Admin Dashboard</p>
    </div>

    <div id="errorMessage" class="error-message"></div>

    <form id="loginForm">
      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required>
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" name="password" required>
      </div>

      <button type="submit" class="login-btn">Login</button>
    </form>

    <div class="back-link">
      <a href="index.html">Back to Home</a>
    </div>
  </div>

  <script>
    const BASE_URL = "http://localhost:5000";

    document.addEventListener('DOMContentLoaded', () => {
      const loginForm = document.getElementById('loginForm');
      const errorMessage = document.getElementById('errorMessage');

      loginForm.addEventListener('submit', async (e) => {
        e.preventDefault();

        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        try {
          const response = await fetch(`${BASE_URL}/api/login`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ email, password })
          });

          const data = await response.json();

          if (response.ok) {
            // Store token and user data
            localStorage.setItem('adminToken', data.token);
            localStorage.setItem('adminData', JSON.stringify(data.user));

            // Redirect to admin dashboard
            window.location.href = 'admin.html';
          } else {
            errorMessage.textContent = data.message || 'Login failed. Please try again.';
            errorMessage.style.display = 'block';
          }
        } catch (error) {
          errorMessage.textContent = 'Network error. Please try again later.';
          errorMessage.style.display = 'block';
        }
      });
    });
  </script>
</body>
</html>
```

```my-frontend\.firebaserc
{
  "projects": {
    "default": "swift-delivery-38345"
  }
}

```

```my-frontend\chatbot.style.display

```

```my-frontend\{

```

```my-frontend\vercel.json
{
  "routes": [
    { "src": "/style.css", "dest": "/style.css" },
    { "src": "/script.js", "dest": "/script.js" },
    { "src": "/.*", "dest": "/index.html" }
  ]
}

```

```my-frontend\vercel

```

```my-frontend\translations_30_languages.js
// Hindi
window.translations.hi = window.translations.hi || {};
Object.assign(window.translations.hi, {
  home: '‡§π‡•ã‡§Æ', gallery: '‡§ó‡•à‡§≤‡§∞‡•Ä', services: '‡§∏‡•á‡§µ‡§æ‡§è‡§Ç', track: '‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç', login: '‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç',
  register: '‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç', welcome: 'SwiftDelivery - ‡§è‡§Ø‡§∞ ‡§´‡•ç‡§∞‡•á‡§ü ‡§≤‡•â‡§ú‡§ø‡§∏‡•ç‡§ü‡§ø‡§ï‡•ç‡§∏', intro: '‡§ó‡§§‡§ø, ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§î‡§∞ ‡§∏‡§ü‡•Ä‡§ï‡§§‡§æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§µ‡§ø‡§∂‡•ç‡§µ‡§µ‡•ç‡§Ø‡§æ‡§™‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§ó‡•ã ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§®‡•§',
  trackTitle: '‡§™‡§ø‡§ï‡§Ö‡§™ ‡§î‡§∞ ‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó', trackButton: '‡§∂‡§ø‡§™‡§Æ‡•á‡§Ç‡§ü ‡§ï‡•ã ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç'
});

// Portuguese
window.translations.pt = window.translations.pt || {};
Object.assign(window.translations.pt, {
  home: 'In√≠cio', gallery: 'Galeria', services: 'Servi√ßos', track: 'Rastrear', login: 'Fazer Login',
  register: 'Registrar', welcome: 'SwiftDelivery - Log√≠stica A√©rea', intro: 'Solu√ß√µes de carga global com velocidade, seguran√ßa e precis√£o.',
  trackTitle: 'Rastreamento de Coleta e Entrega', trackButton: 'Rastrear Envio'
});

// Russian
window.translations.ru = window.translations.ru || {};
Object.assign(window.translations.ru, {
  home: '–ì–ª–∞–≤–Ω–∞—è', gallery: '–ì–∞–ª–µ—Ä–µ—è', services: '–£—Å–ª—É–≥–∏', track: '–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ', login: '–í—Ö–æ–¥',
  register: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è', welcome: 'SwiftDelivery - –ê–≤–∏–∞–≥—Ä—É–∑–æ–≤—ã–µ –ª–æ–≥–∏—Å—Ç–∏–∫–∞', intro: '–†–µ—à–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –≥—Ä—É–∑–æ–≤ —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ —Ç–æ—á–Ω–æ—Å—Ç—å—é.',
  trackTitle: '–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è', trackButton: '–û—Ç—Å–ª–µ–¥–∏—Ç—å –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ'
});

// Japanese
window.translations.ja = window.translations.ja || {};
Object.assign(window.translations.ja, {
  home: '„Éõ„Éº„É†', gallery: '„ÇÆ„É£„É©„É™„Éº', services: '„Çµ„Éº„Éì„Çπ', track: '„Éà„É©„ÉÉ„ÇØ', login: '„É≠„Ç∞„Ç§„É≥',
  register: 'ÁôªÈå≤', welcome: 'SwiftDelivery - Ëà™Á©∫Ë≤®Áâ©„É≠„Ç∏„Çπ„ÉÜ„Ç£„ÇØ„Çπ', intro: 'ÈÄüÂ∫¶„ÄÅÂÆâÂÖ®ÊÄß„ÄÅÁ≤æÂ∫¶„ÇíÂÇô„Åà„Åü„Ç∞„É≠„Éº„Éê„É´„Ç´„Éº„Ç¥„ÇΩ„É™„É•„Éº„Ç∑„Éß„É≥„ÄÇ',
  trackTitle: '„Éî„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Å®ÈÖçÈÄÅ„ÅÆËøΩË∑°', trackButton: 'ÈÖçÈÄÅ„ÇíËøΩË∑°'
});

// Italian
window.translations.it = window.translations.it || {};
Object.assign(window.translations.it, {
  home: 'Home', gallery: 'Galleria', services: 'Servizi', track: 'Traccia', login: 'Accedi',
  register: 'Registrati', welcome: 'SwiftDelivery - Logistica Merci Aerea', intro: 'Soluzioni di carico globale con velocit√†, sicurezza e precisione.',
  trackTitle: 'Tracciamento Ritiro e Consegna', trackButton: 'Traccia Spedizione'
});

// Polish
window.translations.pl = window.translations.pl || {};
Object.assign(window.translations.pl, {
  home: 'Strona g≈Ç√≥wna', gallery: 'Galeria', services: 'Us≈Çugi', track: '≈öledzenie', login: 'Zaloguj siƒô',
  register: 'Zarejestruj siƒô', welcome: 'SwiftDelivery - Logistyka Transportu Lotniczego', intro: 'Globalne rozwiƒÖzania ≈Çadunkowe z szybko≈õciƒÖ, bezpiecze≈Ñstwem i precyzjƒÖ.',
  trackTitle: '≈öledzenie Odbioru i Dostawy', trackButton: '≈öled≈∫ Przesy≈Çkƒô'
});

// Korean
window.translations.ko = window.translations.ko || {};
Object.assign(window.translations.ko, {
  home: 'Ìôà', gallery: 'Í∞§Îü¨Î¶¨', services: 'ÏÑúÎπÑÏä§', track: 'Ï∂îÏ†Å', login: 'Î°úÍ∑∏Ïù∏',
  register: 'Í∞ÄÏûÖ', welcome: 'SwiftDelivery - Ìï≠Í≥µÌôîÎ¨º Î¨ºÎ•ò', intro: 'ÏÜçÎèÑ, ÏïàÏ†ÑÏÑ± Î∞è Ï†ïÌôïÏÑ±ÏùÑ Í∞ñÏ∂ò Í∏ÄÎ°úÎ≤å ÌôîÎ¨º ÏÜîÎ£®ÏÖò.',
  trackTitle: 'ÌîΩÏóÖ Î∞è Î∞∞ÏÜ° Ï∂îÏ†Å', trackButton: 'Î∞∞ÏÜ° Ï∂îÏ†Å'
});

// Vietnamese
window.translations.vi = window.translations.vi || {};
Object.assign(window.translations.vi, {
  home: 'Trang ch·ªß', gallery: 'Th∆∞ vi·ªán ·∫£nh', services: 'D·ªãch v·ª•', track: 'Theo d√µi', login: 'ƒêƒÉng nh·∫≠p',
  register: 'ƒêƒÉng k√Ω', welcome: 'SwiftDelivery - Logistics V·∫≠n chuy·ªÉn H√†ng kh√¥ng', intro: 'Gi·∫£i ph√°p h√†ng h√≥a to√†n c·∫ßu v·ªõi t·ªëc ƒë·ªô, an to√†n v√† ƒë·ªô ch√≠nh x√°c.',
  trackTitle: 'Theo d√µi Thu th·∫≠p v√† Giao h√†ng', trackButton: 'Theo d√µi L√¥ h√†ng'
});

// Thai
window.translations.th = window.translations.th || {};
Object.assign(window.translations.th, {
  home: '‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å', gallery: '‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà', services: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£', track: '‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°', login: '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö',
  register: '‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô', welcome: 'SwiftDelivery - ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏ó‡∏≤‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®', intro: '‡πÇ‡∏ã‡∏•‡∏π‡∏ä‡∏±‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏∏‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥',
  trackTitle: '‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö', trackButton: '‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á'
});

// Turkish
window.translations.tr = window.translations.tr || {};
Object.assign(window.translations.tr, {
  home: 'Anasayfa', gallery: 'Galeri', services: 'Hizmetler', track: 'ƒ∞zle', login: 'Giri≈ü Yap',
  register: 'Kaydol', welcome: 'SwiftDelivery - Hava Kargo Lojistiƒüi', intro: 'Hƒ±z, g√ºvenlik ve hassasiyetle global kargo √ß√∂z√ºmleri.',
  trackTitle: 'Alƒ±m ve Teslimat Takibi', trackButton: 'G√∂nderiyi ƒ∞zle'
});

// Indonesian
window.translations.id = window.translations.id || {};
Object.assign(window.translations.id, {
  home: 'Beranda', gallery: 'Galeri', services: 'Layanan', track: 'Lacak', login: 'Masuk',
  register: 'Daftar', welcome: 'SwiftDelivery - Logistik Kargo Udara', intro: 'Solusi kargo global dengan kecepatan, keamanan, dan presisi.',
  trackTitle: 'Pelacakan Pengambilan dan Pengiriman', trackButton: 'Lacak Pengiriman'
});

// Dutch
window.translations.nl = window.translations.nl || {};
Object.assign(window.translations.nl, {
  home: 'Home', gallery: 'Galerij', services: 'Diensten', track: 'Volgen', login: 'Inloggen',
  register: 'Registreren', welcome: 'SwiftDelivery - Luchtvracht Logistiek', intro: 'Globale vracht oplossingen met snelheid, veiligheid en precisie.',
  trackTitle: 'Afhaal- en Bezorgtracking', trackButton: 'Zending volgen'
});

// Swedish
window.translations.sv = window.translations.sv || {};
Object.assign(window.translations.sv, {
  home: 'Hem', gallery: 'Galleri', services: 'Tj√§nster', track: 'Sp√•ra', login: 'Logga in',
  register: 'Registrera', welcome: 'SwiftDelivery - Flygfrakt Logistik', intro: 'Globala fraktl√∂sningar med hastighet, s√§kerhet och precision.',
  trackTitle: 'Sp√•rning av Avh√§mtning och Leverans', trackButton: 'Sp√•ra F√∂rs√§ndelse'
});

// Greek
window.translations.el = window.translations.el || {};
Object.assign(window.translations.el, {
  home: 'ŒëœÅœáŒπŒ∫ŒÆ œÉŒµŒªŒØŒ¥Œ±', gallery: 'ŒìŒ∫Œ±ŒªŒµœÅŒØ', services: 'Œ•œÄŒ∑œÅŒµœÉŒØŒµœÇ', track: 'Œ†Œ±œÅŒ±Œ∫ŒøŒªŒøœçŒ∏Œ∑œÉŒ∑', login: 'Œ£œçŒΩŒ¥ŒµœÉŒ∑',
  register: 'ŒïŒ≥Œ≥œÅŒ±œÜŒÆ', welcome: 'SwiftDelivery - ŒëŒµœÅŒø-Œ¶œÅŒµŒπœÑ ŒõŒøŒ≥ŒπœÉœÑŒπŒ∫ŒÆ', intro: 'Œ†Œ±Œ≥Œ∫œåœÉŒºŒπŒµœÇ ŒªœçœÉŒµŒπœÇ œÜŒøœÅœÑŒØŒøœÖ ŒºŒµ œÑŒ±œáœçœÑŒ∑œÑŒ±, Œ±œÉœÜŒ¨ŒªŒµŒπŒ± Œ∫Œ±Œπ Œ±Œ∫œÅŒØŒ≤ŒµŒπŒ±.',
  trackTitle: 'Œ†Œ±œÅŒ±Œ∫ŒøŒªŒøœçŒ∏Œ∑œÉŒ∑ ŒîŒπŒ±ŒΩŒøŒºŒÆœÇ Œ∫Œ±Œπ Œ†Œ±œÅŒ±ŒªŒ±Œ≤ŒÆœÇ', trackButton: 'Œ†Œ±œÅŒ±Œ∫ŒøŒªŒøœçŒ∏Œ∑œÉŒ∑ ŒëœÄŒøœÉœÑŒøŒªŒÆœÇ'
});

// Czech
window.translations.cs = window.translations.cs || {};
Object.assign(window.translations.cs, {
  home: 'Dom≈Ø', gallery: 'Galerie', services: 'Slu≈æby', track: 'Sledovat', login: 'P≈ôihl√°≈°en√≠',
  register: 'Registrace', welcome: 'SwiftDelivery - Leteck√° p≈ôeprava logistika', intro: 'Glob√°ln√≠ ≈ôe≈°en√≠ pro p≈ôepravu s rychlost√≠, bezpeƒçnost√≠ a p≈ôesnost√≠.',
  trackTitle: 'Sledov√°n√≠ Vyzvednut√≠ a Doruƒçen√≠', trackButton: 'Sledovat Z√°silku'
});

// Hungarian
window.translations.hu = window.translations.hu || {};
Object.assign(window.translations.hu, {
  home: 'F≈ëoldal', gallery: 'Gal√©ria', services: 'Szolg√°ltat√°sok', track: 'Nyomon k√∂vet√©s', login: 'Bejelentkez√©s',
  register: 'Regisztr√°ci√≥', welcome: 'SwiftDelivery - L√©gi Tehersz√°ll√≠t√°s Logisztika', intro: 'Glob√°lis sz√°ll√≠t√°si megold√°sok sebess√©ggel, biztons√°ggal √©s pontoss√°ggal.',
  trackTitle: 'Felv√©tel √©s Sz√°ll√≠t√°s Nyomon K√∂vet√©se', trackButton: 'Sz√°ll√≠tm√°ny Nyomon K√∂vet√©se'
});

// Romanian
window.translations.ro = window.translations.ro || {};
Object.assign(window.translations.ro, {
  home: 'AcasƒÉ', gallery: 'Galerie', services: 'Servicii', track: 'UrmƒÉrire', login: 'Conectare',
  register: '√énregistrare', welcome: 'SwiftDelivery - LogisticƒÉ Cargo Aerian', intro: 'Solu»õii globale de marfƒÉ cu vitezƒÉ, siguran»õƒÉ »ôi precizie.',
  trackTitle: 'UrmƒÉrire Preluare »ôi Livrare', trackButton: 'UrmƒÉrire Expediere'
});

// Ukrainian
window.translations.uk = window.translations.uk || {};
Object.assign(window.translations.uk, {
  home: '–î–æ–º–∞—à–Ω—è', gallery: '–ì–∞–ª–µ—Ä–µ—è', services: '–ü–æ—Å–ª—É–≥–∏', track: '–í—ñ–¥—Å–ª—ñ–¥–∫—É–≤–∞–Ω–Ω—è', login: '–í—Ö—ñ–¥',
  register: '–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è', welcome: 'SwiftDelivery - –ê–≤—ñ–∞–∫–∞—Ä–≥–æ –ª–æ–≥—ñ—Å—Ç–∏–∫–∞', intro: '–ì–ª–æ–±–∞–ª—å–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è –≤–∞–Ω—Ç–∞–∂—É –∑—ñ —à–≤–∏–¥–∫—ñ—Å—Ç—é, –±–µ–∑–ø–µ–∫–æ—é —Ç–∞ —Ç–æ—á–Ω—ñ—Å—Ç—é.',
  trackTitle: '–í—ñ–¥—Å–ª—ñ–¥–∫—É–≤–∞–Ω–Ω—è –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–∞ –î–æ—Å—Ç–∞–≤–∫–∏', trackButton: '–í—ñ–¥—Å–ª—ñ–¥–∫—É–≤–∞—Ç–∏ –ü–æ—Å–∏–ª–∫—É'
});

// Bengali
window.translations.bn = window.translations.bn || {};
Object.assign(window.translations.bn, {
  home: '‡¶π‡ßã‡¶Æ', gallery: '‡¶ó‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶∞‡¶ø', services: '‡¶∏‡ßá‡¶¨‡¶æ', track: '‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï', login: '‡¶≤‡¶ó‡¶á‡¶®',
  register: '‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶®', welcome: 'SwiftDelivery - ‡¶¨‡¶æ‡¶Ø‡¶º‡ßÅ ‡¶ï‡¶æ‡¶∞‡ßç‡¶ó‡ßã ‡¶≤‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶ø‡¶ï‡¶∏', intro: '‡¶ó‡¶§‡¶ø, ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶Ø‡¶•‡¶æ‡¶∞‡ßç‡¶•‡¶§‡¶æ ‡¶∏‡¶π ‡¶¨‡ßà‡¶∂‡ßç‡¶¨‡¶ø‡¶ï ‡¶ï‡¶æ‡¶∞‡ßç‡¶ó‡ßã ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®‡•§',
  trackTitle: '‡¶™‡¶ø‡¶ï‡¶Ü‡¶™ ‡¶è‡¶¨‡¶Ç ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç', trackButton: '‡¶∂‡¶ø‡¶™‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®'
});

// Swahili
window.translations.sw = window.translations.sw || {};
Object.assign(window.translations.sw, {
  home: 'Nyumbani', gallery: 'Mlangoni', services: 'Huduma', track: 'Fuatilia', login: 'Ingia',
  register: 'Jisajili', welcome: 'SwiftDelivery - Ushindi wa Ndege', intro: 'Suluhisho za malodi ya kimataifa na kasi, usalama na usahihi.',
  trackTitle: 'Fuatilia Mkutano na Utoaji', trackButton: 'Fuatilia Mtumaji'
});

// Urdu
window.translations.ur = window.translations.ur || {};
Object.assign(window.translations.ur, {
  home: '€ÅŸàŸÖ', gallery: '⁄Ø€åŸÑÿ±€å', services: 'ÿÆÿØŸÖÿßÿ™', track: 'Ÿπÿ±€å⁄©', login: 'ŸÑÿß⁄Ø ÿßŸÜ',
  register: 'ÿ±ÿ¨ÿ≥Ÿπÿ±', welcome: 'SwiftDelivery - €ÅŸàÿßÿ¶€å ÿ≥ÿßŸÖÿßŸÜ ŸÑÿßÿ¨ÿ≥Ÿπ⁄©ÿ≥', intro: 'ÿ±ŸÅÿ™ÿßÿ±ÿå ÿ≠ŸÅÿßÿ∏ÿ™ ÿßŸàÿ± ÿØÿ±ÿ≥ÿ™⁄Ø€å ⁄©€í ÿ≥ÿßÿ™⁄æ ÿπÿßŸÑŸÖ€å ÿ≥ÿßŸÖÿßŸÜ ⁄©€í ÿ≠ŸÑ€î',
  trackTitle: 'Ÿæ⁄©⁄ëŸÜ€í ÿßŸàÿ± ⁄à€åŸÑ€åŸàÿ±€å ⁄©€å ŸÜ⁄Øÿ±ÿßŸÜ€å', trackButton: 'ÿ¥ŸæŸÖŸÜŸπ ⁄©Ÿà Ÿπÿ±€å⁄© ⁄©ÿ±€å⁄∫'
});

// Amharic
window.translations.am = window.translations.am || {};
Object.assign(window.translations.am, {
  home: '·ãã·äì ·åà·åΩ', gallery: '·åã·àà·à™', services: '·â∞·åç·â£·à´·âµ', track: '·àò·äï·åà·ãµ', login: '·åç·â£',
  register: '·àà·àò·àò·ãù·åà·â•', welcome: 'SwiftDelivery - ·ä†·ã®·à≠ ·ãà·çç·à´ ·àé·åÖ·àµ·â≤·ä≠·àµ', intro: '·â†·çç·å•·äê·âµ·ç£ ·â†·à∞·àã·àù ·ä•·äì ·â†·âµ·ä≠·ä≠·àç·äê·âµ ·ãì·àà·àù·ä†·âÄ·çç ·å≠·äê·âµ ·àò·çç·âµ·àî·ãé·âΩ·ç¢',
  trackTitle: '·àò·à∞·â•·à∞·â¢·ã´ ·ä•·äì ·àõ·àµ·à®·ä®·â¢·ã´ ·ãµ·à≠·àª', trackButton: '·àù·àç·àç·àµ ·ãà·ã∞·çä·âµ'
});

// Filipino
window.translations.fil = window.translations.fil || {};
Object.assign(window.translations.fil, {
  home: 'Tahanan', gallery: 'Gallery', services: 'Mga Serbisyo', track: 'Sumubaybay', login: 'Magsimula',
  register: 'Magparehistro', welcome: 'SwiftDelivery - Air Cargo Logistics', intro: 'Pandaigdigang solusyon sa karga na may bilis, kaligtasan at katumpakan.',
  trackTitle: 'Sumubaybay sa Pagkuha at Paghahatid', trackButton: 'Sumubaybay sa Kargo'
});

// Punjabi
window.translations.pa = window.translations.pa || {};
Object.assign(window.translations.pa, {
  home: '‡®Æ‡©Ç‡®≤ ‡®™‡©∞‡®®‡®æ', gallery: '‡®ó‡©à‡®≤‡®∞‡©Ä', services: '‡®∏‡©á‡®µ‡®æ‡®µ‡®æ‡®Ç', track: '‡®ü‡®∞‡©à‡®ï', login: '‡®≤‡®æ‡®ó ‡®á‡®®',
  register: '‡®∞‡®ú‡®ø‡®∏‡®ü‡®∞ ‡®ï‡®∞‡©ã', welcome: 'SwiftDelivery - ‡®è‡®Ö‡®∞ ‡®ï‡®æ‡®∞‡®ó‡©ã ‡®≤‡©ã‡®ú‡®ø‡®∏‡®ü‡®ø‡®ï‡®∏', intro: '‡®ó‡®§‡©Ä, ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü ‡®Ö‡®§‡©á ‡®∏‡®º‡©Å‡©±‡®ß‡®§‡®æ ‡®¶‡©á ‡®®‡®æ‡®≤ ‡®ó‡®≤‡©ã‡®¨‡®≤ ‡®ï‡®æ‡®∞‡®ó‡©ã ‡®π‡©±‡®≤‡•§',
  trackTitle: '‡®™‡®ø‡®ï ‡®Ö‡®™ ‡®Ö‡®§‡©á ‡®°‡®ø‡®≤‡®ø‡®µ‡®∞‡©Ä ‡®ü‡©ç‡®∞‡©à‡®ï‡®ø‡©∞‡®ó', trackButton: '‡®∏‡®º‡®ø‡®™‡®Æ‡©à‡®Ç‡®ü ‡®ü‡©ç‡®∞‡©à‡®ï ‡®ï‡®∞‡©ã'
});

// Marathi
window.translations.mr = window.translations.mr || {};
Object.assign(window.translations.mr, {
  home: '‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§™‡•É‡§∑‡•ç‡§†', gallery: '‡§ó‡•Ö‡§≤‡§∞‡•Ä', services: '‡§∏‡•á‡§µ‡§æ', track: '‡§ü‡•ç‡§∞‡•Ö‡§ï', login: '‡§≤‡•â‡§ó‡§ø‡§®',
  register: '‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä ‡§ï‡§∞‡§æ', welcome: 'SwiftDelivery - ‡§è‡§Ö‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§ó‡•ã ‡§≤‡•â‡§ú‡§ø‡§∏‡•ç‡§ü‡§ø‡§ï‡•ç‡§∏', intro: '‡§ó‡§§‡•Ä, ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§Ü‡§£‡§ø ‡§Ö‡§ö‡•Ç‡§ï‡§§‡•á‡§∏‡§π ‡§ú‡§æ‡§ó‡§§‡§ø‡§ï ‡§Æ‡§æ‡§≤‡§µ‡§π‡§® ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§®‡•§',
  trackTitle: '‡§™‡§ø‡§ï‡§Ö‡§™ ‡§Ü‡§£‡§ø ‡§°‡§ø‡§≤‡§ø‡§µ‡•ç‡§π‡§∞‡•Ä ‡§ü‡•ç‡§∞‡•Ö‡§ï‡§ø‡§Ç‡§ó', trackButton: '‡§∂‡§ø‡§™‡§Æ‡•á‡§Ç‡§ü ‡§ü‡•ç‡§∞‡•Ö‡§ï ‡§ï‡§∞‡§æ'
});

// Tamil
window.translations.ta = window.translations.ta || {};
Object.assign(window.translations.ta, {
  home: '‡ÆÆ‡ØÅ‡Æï‡Æ™‡Øç‡Æ™‡ØÅ', gallery: '‡Æï‡Øá‡Æ≤‡Æ∞‡Æø', services: '‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡Øç', track: '‡Æ§‡Æü‡ÆØ‡ÆÆ‡Øç', login: '‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà‡Æï',
  register: '‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ', welcome: 'SwiftDelivery - ‡Æµ‡Æø‡ÆÆ‡Ææ‡Æ©‡ÆÆ‡Øç ‡Æö‡Æ∞‡Æï‡Øç‡Æï‡ØÅ ‡Æ™‡Æ∞‡Æø‡ÆÆ‡Ææ‡Æ±‡Øç‡Æ±‡ÆÆ‡Øç', intro: '‡Æµ‡Øá‡Æï‡ÆÆ‡Øç, ‡Æ™‡Ææ‡Æ§‡ØÅ‡Æï‡Ææ‡Æ™‡Øç‡Æ™‡ØÅ ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Æø‡Æ±‡ØÅ‡Æ§‡Øç‡Æ§‡Æ§‡Øç‡Æ§‡ØÅ‡Æü‡Æ©‡Øç ‡Æâ‡Æ≤‡Æï‡Æ≥‡Ææ‡Æµ‡Æø‡ÆØ ‡Æö‡Æ∞‡Æï‡Øç‡Æï‡ØÅ ‡Æ§‡ØÄ‡Æ∞‡Øç‡Æµ‡ØÅ‡Æï‡Æ≥‡Øç‡•§',
  trackTitle: '‡Æé‡Æü‡ØÅ‡Æï‡Øç‡Æï ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æµ‡Æø‡Æ®‡Æø‡ÆØ‡Øã‡Æï ‡Æ§‡Æü‡ÆØ‡ÆÆ‡Øç', trackButton: '‡Æö‡Æø‡Æ™‡Øç‡ÆÆ‡ØÜ‡Æ£‡Øç‡Æü‡Øç ‡Æ§‡Æü‡ÆØ‡ÆÆ‡Øç'
});

// Kannada
window.translations.kn = window.translations.kn || {};
Object.assign(window.translations.kn, {
  home: '‡≤Æ‡≥Å‡≤ñ‡≥ç‡≤Ø ‡≤™‡≥Å‡≤ü', gallery: '‡≤ó‡≥ç‡≤Ø‡≤æ‡≤≤‡≤∞‡≤ø', services: '‡≤∏‡≥á‡≤µ‡≥Ü‡≤ó‡≤≥‡≥Å', track: '‡≤ü‡≥ç‡≤∞‡≥ç‡≤Ø‡≤æ‡≤ï‡≥ç', login: '‡≤≤‡≤æ‡≤ó‡≤ø‡≤®‡≥ç',
  register: '‡≤®‡≥ã‡≤Ç‡≤¶‡≤£‡≤ø', welcome: 'SwiftDelivery - ‡≤è‡≤∞‡≥ç ‡≤ï‡≤æ‡≤∞‡≥ç‡≤ó‡≥ã ‡≤≤‡≤æ‡≤ú‡≤ø‡≤∏‡≥ç‡≤ü‡≤ø‡≤ï‡≥ç‡≤∏‡≥ç', intro: '‡≤µ‡≥á‡≤ó, ‡≤∏‡≥Å‡≤∞‡≤ï‡≥ç‡≤∑‡≥Ü ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤®‡≤ø‡≤ñ‡≥Å‡≤∞‡≤§‡≥Ü‡≤Ø‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤ú‡≤æ‡≤ó‡≤§‡≤ø‡≤ï ‡≤∏‡≤∞‡≤ï‡≥Å‡≤ó‡≤≥‡≥Å ‡≤∏‡≤Æ‡≤æ‡≤ß‡≤æ‡≤®‡≤ó‡≤≥‡≥Å‡•§',
  trackTitle: '‡≤™‡≤ø‡≤ï‡≤Ö‡≤™‡≥ç ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤°‡≥Ü‡≤≤‡≤ø‡≤µ‡≤∞‡≤ø ‡≤ü‡≥ç‡≤∞‡≥ç‡≤Ø‡≤æ‡≤ï‡≤ø‡≤Ç‡≤ó‡≥ç', trackButton: '‡≤∂‡≤ø‡≤™‡≥ç‡≤Æ‡≥Ü‡≤Ç‡≤ü‡≥ç ‡≤ü‡≥ç‡≤∞‡≥ç‡≤Ø‡≤æ‡≤ï‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø'
});

// Telugu
window.translations.te = window.translations.te || {};
Object.assign(window.translations.te, {
  home: '‡∞π‡±ã‡∞Æ‡±ç', gallery: '‡∞ó‡±ç‡∞Ø‡∞æ‡∞≤‡∞∞‡±Ä', services: '‡∞∏‡±á‡∞µ‡∞≤‡±Å', track: '‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡±ç', login: '‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç',
  register: '‡∞®‡∞Æ‡±ã‡∞¶‡±Å', welcome: 'SwiftDelivery - ‡∞é‡∞Ø‡∞ø‡∞∞‡±ç ‡∞ï‡∞æ‡∞∞‡±ç‡∞ó‡±ã ‡∞≤‡∞æ‡∞ú‡∞ø‡∞∏‡±ç‡∞ü‡∞ø‡∞ï‡±ç‚Äå‡∞≤‡±Å', intro: '‡∞µ‡±á‡∞ó‡∞Ç, ‡∞≠‡∞¶‡±ç‡∞∞‡∞§ ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞ñ‡∞ö‡±ç‡∞ö‡∞ø‡∞§‡∞§‡±ç‡∞µ‡∞Ç‡∞§‡±ã ‡∞ó‡±ç‡∞≤‡±ã‡∞¨‡∞≤‡±ç ‡∞ï‡∞æ‡∞∞‡±ç‡∞ó‡±ã ‡∞∏‡∞Æ‡∞æ‡∞ß‡∞æ‡∞®‡∞æ‡∞≤‡±Å.',
  trackTitle: '‡∞™‡∞ø‡∞ï‡∞™‡±ç ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞°‡±Ü‡∞≤‡∞ø‡∞µ‡∞∞‡±Ä ‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç', trackButton: '‡∞∑‡∞ø‡∞™‡±ç‚Äå‡∞Æ‡±Ü‡∞Ç‡∞ü‡±ç ‡∞ü‡±ç‡∞∞‡∞æ‡∞ï‡±ç ‡∞ö‡±á‡∞Ø‡∞ø'
});

// Odia
window.translations.or = window.translations.or || {};
Object.assign(window.translations.or, {
  home: '‡¨π‡≠ã‡¨Æ', gallery: '‡¨ó‡≠ç‡≠ü‡¨æ‡¨≤‡≠á‡¨∞‡≠Ä', services: '‡¨∏‡≠á‡¨¨‡¨æ', track: '‡¨ü‡≠ç‡¨∞‡¨æ‡¨ï', login: '‡¨≤‡¨ó‡¨á‡¨®',
  register: '‡¨®‡¨ø‡¨¨‡¨®‡≠ç‡¨ß‡¨®', welcome: 'SwiftDelivery - ‡¨¨‡¨æ‡≠ü‡≠Å ‡¨∏‡¨æ‡¨Æ‡¨ó‡≠ç‡¨∞‡≠Ä ‡¨≤‡¨ú‡¨ø‡¨∑‡≠ç‡¨ü‡¨ø‡¨ï‡≠ç‡¨∏', intro: '‡¨ó‡¨§‡¨ø, ‡¨∏‡≠Å‡¨∞‡¨ï‡≠ç‡¨∑‡¨æ ‡¨è‡¨¨‡¨Ç ‡¨®‡¨ø‡¨∞‡≠ç‡¨≠‡≠Å‡¨≤‡¨§‡¨æ ‡¨∏‡¨π‡¨ø‡¨§ ‡¨¨‡¨ø‡¨∂‡≠ç‡¨¨ ‡¨∏‡¨æ‡¨Æ‡¨ó‡≠ç‡¨∞‡≠Ä ‡¨∏‡¨Æ‡¨æ‡¨ß‡¨æ‡¨®‡•§',
  trackTitle: '‡¨™‡¨ø‡¨ï‡¨Ö‡¨™‡≠ç ‡¨è‡¨¨‡¨Ç ‡¨¨‡¨ø‡¨§‡¨∞‡¨£ ‡¨ü‡≠ç‡¨∞‡¨æ‡¨ï‡¨ø‡¨Ç', trackButton: '‡¨∂‡¨ø‡¨™‡¨Æ‡≠á‡¨£‡≠ç‡¨ü ‡¨ü‡≠ç‡¨∞‡¨æ‡¨ï'
});

// Gujarati
window.translations.gu = window.translations.gu || {};
Object.assign(window.translations.gu, {
  home: '‡™π‡´ã‡™Æ', gallery: '‡™ó‡´á‡™≤‡´á‡™∞‡´Ä', services: '‡™∏‡´á‡™µ‡™æ‡™ì', track: '‡™ü‡´ç‡™∞‡´á‡™ï', login: '‡™≤‡´â‡™ó‡™á‡™®',
  register: '‡™®‡´ã‡™Ç‡™ß‡™£‡´Ä', welcome: 'SwiftDelivery - ‡™è‡™∞ ‡™ï‡™æ‡™∞‡´ç‡™ó‡´ã ‡™≤‡´ã‡™ú‡™ø‡™∏‡´ç‡™ü‡™ø‡™ï‡´ç‡™∏', intro: '‡™ó‡™§‡™ø, ‡™∏‡´Å‡™∞‡™ï‡´ç‡™∑‡™æ ‡™Ö‡™®‡´á ‡™ö‡´ã‡™ï‡™∏‡™æ‡™à ‡™∏‡™æ‡™•‡´á ‡™µ‡´à‡™∂‡´ç‡™µ‡™ø‡™ï ‡™ï‡™æ‡™∞‡´ç‡™ó‡´ã ‡™â‡™ï‡´á‡™≤‡´ã.',
  trackTitle: '‡™™‡´Ä‡™ï‡§Ö‡™™ ‡™Ö‡™®‡´á ‡™°‡™ø‡™≤‡™ø‡™µ‡™∞‡´Ä ‡™ü‡´ç‡™∞‡´á‡™ï‡™ø‡™Ç‡™ó', trackButton: '‡™∂‡™ø‡™™‡™Æ‡´á‡™®‡´ç‡™ü ‡™ü‡´ç‡™∞‡´á‡™ï ‡™ï‡™∞‡´ã'
});

// Malay
window.translations.ms = window.translations.ms || {};
Object.assign(window.translations.ms, {
  home: 'Rumah', gallery: 'Galeri', services: 'Layanan', track: 'Jejak', login: 'Masuk',
  register: 'Daftar', welcome: 'SwiftDelivery - Logistik Kargo Udara', intro: 'Solusi muatan global dengan kecepatan, keamanan dan ketepatan.',
  trackTitle: 'Pelacakan Pengambilan dan Pengiriman', trackButton: 'Jejak Pengiriman'
});

// Myanmar
window.translations.my = window.translations.my || {};
Object.assign(window.translations.my, {
  home: '·Ä°·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏·Ä°·Ä¨·ÄÄ·Ä¨·Äû', gallery: '·Äï·ÄØ·Ä∂·Äê·Ä≠·ÄØ·ÄÄ·Ä∫', services: '·Äù·Äî·Ä∫·ÄÜ·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äæ·ÄØ·Äô·Äª·Ä¨·Ä∏', track: '·Äú·Ä≠·ÄØ·ÄÄ·Ä∫·Äï·Äº·ÄÆ·Ä∏', login: '·Äù·ÄÑ·Ä∫·Äõ·Ä±·Ä¨·ÄÄ·Ä∫·Äõ·Äî·Ä∫',
  register: '·Äô·Äæ·Äê·Ä∫·Äï·ÄØ·Ä∂·Äê·ÄÑ·Ä∫·Äõ·Äî·Ä∫', welcome: 'SwiftDelivery - ·Äú·Ä±·Äö·Ä¨·Äâ·Ä∫·ÄÄ·ÄØ·Äî·Ä∫·ÄÖ·Ää·Ä∫·Äë·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äô·Äæ·ÄØ', intro: '·Ä°·Äú·Äª·ÄÑ·Ä∫·Åä ·ÄÄ·ÄØ·Ä∂·Ä∏·ÄÖ·Ä≠·ÄØ·Ä∏·Äô·Äõ·Äæ·ÄØ·Ä∂·Ä∏·Äô·Äæ·ÄØ ·Äî·Äæ·ÄÑ·Ä∑·Ä∫ ·Äê·Ä≠·ÄÄ·Äª·Äô·Äæ·ÄØ·Äê·ÄΩ·ÄÑ·Ä∫ ·ÄÄ·Äô·Äπ·Äò·Ä¨·Ä∑·ÄÄ·ÄØ·Äî·Ä∫·ÄÖ·Ää·Ä∫·Äñ·Äº·Ä±·Äõ·Äæ·ÄÑ·Ä∫·Ä∏·ÄÅ·Äª·ÄÄ·Ä∫·Åã',
  trackTitle: '·Äõ·Äö·Ä∞·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏·Äî·Äæ·ÄÑ·Ä∑·Ä∫ ·Äï·Ä≠·ÄØ·Ä∑·ÄÜ·Ä±·Ä¨·ÄÑ·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏', trackButton: '·ÄÖ·Ä¨·Äê·Ä≠·ÄØ·ÄÄ·Ä∫·Äï·Ä≠·ÄØ·Ä∑·ÄÜ·Ä±·Ä¨·ÄÑ·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏·ÄÄ·Ä≠·ÄØ·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏'
});

// Finnish
window.translations.fi = window.translations.fi || {};
Object.assign(window.translations.fi, {
  home: 'Koti', gallery: 'Galleria', services: 'Palvelut', track: 'Seurata', login: 'Kirjaudu',
  register: 'Rekister√∂i', welcome: 'SwiftDelivery - Ilmarahti Logistiikka', intro: 'Globaalit rahti ratkaisut nopeudella, turvallisuudella ja tarkkuudella.',
  trackTitle: 'Nouto- ja toimitusten seuranta', trackButton: 'Seurata L√§hetyst√§'
});

// Danish
window.translations.da = window.translations.da || {};
Object.assign(window.translations.da, {
  home: 'Hjem', gallery: 'Galleri', services: 'Tjenester', track: 'Spor', login: 'Log ind',
  register: 'Tilmeld', welcome: 'SwiftDelivery - Luftfragt Logistik', intro: 'Globale fragtl√∏sninger med hastighed, sikkerhed og n√∏jagtighed.',
  trackTitle: 'Sporing af afhentning og levering', trackButton: 'Spor forsendelse'
});

// Norwegian
window.translations.no = window.translations.no || {};
Object.assign(window.translations.no, {
  home: 'Hjem', gallery: 'Galleri', services: 'Tjenester', track: 'Spor', login: 'Logg inn',
  register: 'Registrer', welcome: 'SwiftDelivery - Luftfraktlogistikk', intro: 'Globale frachtl√∏sninger med hastighet, sikkerhet og presisjon.',
  trackTitle: 'Sporing av avhenting og levering', trackButton: 'Spor forsendelse'
});

// Hebrew
window.translations.he = window.translations.he || {};
Object.assign(window.translations.he, {
  home: '◊ë◊ô◊™', gallery: '◊í◊ú◊®◊ô◊î', services: '◊©◊ô◊®◊ï◊™◊ô◊ù', track: '◊¢◊ß◊ï◊ë', login: '◊î◊™◊ó◊ë◊®◊ï◊™',
  register: '◊î◊®◊©◊û◊î', welcome: 'SwiftDelivery - ◊ú◊ï◊í◊ô◊°◊ò◊ô◊ß◊™ ◊û◊ò◊¢◊†◊ï◊™ ◊ê◊ï◊ï◊ô◊®', intro: '◊§◊™◊®◊ï◊†◊ï◊™ ◊û◊ò◊¢◊†◊ï◊™ ◊¢◊ï◊ú◊û◊ô◊ô◊ù ◊¢◊ù ◊û◊î◊ô◊®◊ï◊™, ◊ë◊ô◊ò◊ó◊ï◊ü ◊ï◊ì◊ô◊ï◊ß.',
  trackTitle: '◊û◊¢◊ß◊ë ◊ê◊ô◊°◊ï◊£ ◊ï◊°◊ô◊ú◊ï◊ß', trackButton: '◊¢◊ß◊ï◊ë ◊ê◊ó◊® ◊î◊û◊©◊ú◊ï◊ó'
});

// Persian
window.translations.fa = window.translations.fa || {};
Object.assign(window.translations.fa, {
  home: 'ÿÆÿßŸÜŸá', gallery: '⁄ØÿßŸÑÿ±€å', services: 'ÿÆÿØŸÖÿßÿ™', track: 'Ÿæ€å⁄Ø€åÿ±€å', login: 'Ÿàÿ±ŸàÿØ',
  register: 'ÿ´ÿ®ÿ™ ŸÜÿßŸÖ', welcome: 'SwiftDelivery - ŸÑÿ¨ÿ≥ÿ™€å⁄© ÿ≠ŸÖŸÑ Ÿà ŸÜŸÇŸÑ ŸáŸàÿß€å€å', intro: 'ÿ±ÿßŸá ÿ≠ŸÑ Ÿáÿß€å ŸÖÿ≠ŸÖŸàŸÑŸá ÿ¨ŸáÿßŸÜ€å ÿ®ÿß ÿ≥ÿ±ÿπÿ™ÿå ÿß€åŸÖŸÜ€å Ÿà ÿØŸÇÿ™.',
  trackTitle: 'ÿ±ÿØ€åÿßÿ®€å ÿ¨ŸÖÿπ ÿ¢Ÿàÿ±€å Ÿà ÿ™ÿ≠Ÿà€åŸÑ', trackButton: 'ÿ±ÿØ€åÿßÿ®€å ŸÖÿ≠ŸÖŸàŸÑŸá'
});

```

```my-frontend\tracking.js
let map;
let marker;

function initMap() {
  map = L.map('map').setView([6.5244, 3.3792], 13); // Default center (Lagos)

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© OpenStreetMap contributors'
  }).addTo(map);
}

async function trackPackage() {
  const trackingId = document.getElementById('trackingId').value;

  try {
    const res = await fetch(`http://localhost:5000/api/package/${trackingId}`);
    const data = await res.json();

    if (!data || !data.lat || !data.lng) {
      alert("Package not found or location not updated yet.");
      return;
    }

    // Remove old marker if exists
    if (marker) {
      map.removeLayer(marker);
    }

    // Add new marker
    marker = L.marker([data.lat, data.lng]).addTo(map)
      .bindPopup(`Status: ${data.status}<br>Updated: ${data.updated_at}`)
      .openPopup();

    // Center map on package
    map.setView([data.lat, data.lng], 15);

  } catch (err) {
    console.error("Error fetching package:", err);
    alert("Could not fetch package location.");
  }
}

initMap();

```

```my-frontend\style.css
/* ===============================
   Base Reset and Theme Variables
================================= */
:root {
  --primary-color: #0078d7;
  --accent-color: #00b6f1;
  --text-light: #222;
  --text-dark: #eee;
  --bg-light: #ffffff;
  --bg-dark: #121212;
  --blur-bg: rgba(255, 255, 255, 0.6);
  --transition-speed: 0.5s;
  --border-radius: 8px;
  --shadow-light: 0 2px 8px rgba(0, 0, 0, 0.1);
  --shadow-dark: 0 2px 8px rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] {
  --primary-color: #00b6f1;
  --accent-color: #0078d7;
  --text-light: #eee;
  --text-dark: #222;
  --bg-light: #121212;
  --bg-dark: #ffffff;
  --blur-bg: rgba(18, 18, 18, 0.6);
}

/* ===============================
   Global Styles
================================= */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', sans-serif;
  background-color: var(--bg-light);
  color: var(--text-light);
  transition: background-color var(--transition-speed), color var(--transition-speed);
}

[data-theme="dark"] body {
  background-color: var(--bg-dark);
  color: var(--text-dark);
}

body.tracking-page-blurred {
  filter: blur(3px);
}

a {
  text-decoration: none;
  color: inherit;
}

button {
  cursor: pointer;
  font-family: inherit;
}

/* ===============================
   Header with Blur Effect
================================= */
.header {
  position: fixed;
  top: 0;
  width: 100%;
  backdrop-filter: blur(10px);
  background-color: var(--blur-bg);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  z-index: 2000;
  transition: background-color var(--transition-speed);
}

.logo {
  font-size: 1.5rem;
  font-weight: bold;
}

.top-nav ul {
  display: flex;
  gap: 1rem;
  list-style: none;
}

.top-nav a {
  padding: 0.5rem 1rem;
  border-radius: var(--border-radius);
  transition: background-color 0.3s ease;
}

.top-nav a:hover {
  background-color: var(--primary-color);
  color: #fff;
}

.theme-switcher {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

#themeToggle {
  width: 40px;
  height: 20px;
  appearance: none;
  background-color: #ccc;
  border-radius: 10px;
  position: relative;
  outline: none;
  transition: background-color var(--transition-speed);
}

#themeToggle:checked {
  background-color: var(--primary-color);
}

#themeToggle::before {
  content: "";
  position: absolute;
  top: 2px;
  left: 2px;
  width: 16px;
  height: 16px;
  background-color: #fff;
  border-radius: 50%;
  transition: transform var(--transition-speed);
}

#themeToggle:checked::before {
  transform: translateX(20px);
}

#menuToggle {
  font-size: 1.5rem;
  background: none;
  border: none;
  color: var(--text-light);
}

[data-theme="dark"] #menuToggle {
  color: var(--text-dark);
}

/* ===============================
   Sidebar Menu
================================= */
#sideMenu {
  position: fixed;
  top: 0;
  left: -100%;
  width: 250px;
  height: 100%;
  background-color: var(--bg-light);
  box-shadow: var(--shadow-light);
  transition: left var(--transition-speed);
  z-index: 1999;
  padding: 2rem 1rem;
}

[data-theme="dark"] #sideMenu {
  background-color: var(--bg-dark);
  box-shadow: var(--shadow-dark);
}

#sideMenu.open {
  left: 0;
}

#closeMenu {
  background: none;
  border: none;
  font-size: 1.5rem;
  float: right;
  cursor: pointer;
  margin-bottom: 1rem;
}

#sideMenu ul {
  list-style: none;
  padding: 0;
}

#sideMenu li {
  margin-bottom: 1rem;
}

#sideMenu a {
  display: block;
  padding: 0.5rem 1rem;
  border-radius: var(--border-radius);
  transition: background-color 0.3s ease;
}

#sideMenu a:hover {
  background-color: var(--primary-color);
  color: #fff;
}
.side-menu {
  width: 250px;
  background: #222;
  color: white;
  position: fixed;
  left: 0;
  top: 0;
  bottom: 0;
  overflow-y: auto;
  transform: translateX(0); /* visible */
  transition: transform 0.3s ease;
}

.side-menu.hidden {
  transform: translateX(-100%);
}

#menu-toggle {
  position: fixed;
  top: 16px;
  left: 16px;
  background: #2566ff;
  color: white;
  border: none;
  font-size: 24px;
  cursor: pointer;
  z-index: 3000;
}

/* ===============================
   Hero Section
================================= */
.hero {
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(to right, var(--primary-color), var(--accent-color));
  color: #fff;
  text-align: center;
  padding-top: 5rem;
}

.hero-content h1 {
  font-size: 3rem;
  margin-bottom: 1rem;
}

.hero-content p {
  font-size: 1.2rem;
  margin-bottom: 2rem;
}

.cta-button {
  background-color: #fff;
  color: var(--primary-color);
  padding: 0.75rem 1.5rem;
  border-radius: var(--border-radius);
  font-weight: bold;
  transition: background-color var(--transition-speed), color var(--transition-speed);
}

.cta-button:hover {
  background-color: var(--primary-color);
  color: #fff;
}

/* ===============================
   Gallery Section
================================= */
.gallery {
  padding: 4rem 2rem;
  background-color: var(--bg-light);
}

[data-theme="dark"] .gallery {
  background-color: var(--bg-dark);
}

.gallery h2 {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 2rem;
  color: var(--primary-color);
}

.gallery-slider {
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  gap: 1rem;
  padding: 1rem 0;
}

.gallery-slider .slide {
  flex: 0 0 auto;
  scroll-snap-align: center;
  width: 300px;
  height: 200px;
  border-radius: var(--border-radius);
  overflow: hidden;
  box-shadow: var(--shadow-light);
}

[data-theme="dark"] .gallery-slider .slide {
  box-shadow: var(--shadow-dark);
}

.gallery-slider img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
/* ===============================
   Services Section
================================= */
.services {
  padding: 4rem 2rem;
  background-color: var(--bg-light);
}

[data-theme="dark"] .services {
  background-color: var(--bg-dark);
}

.services h2 {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 2rem;
  color: var(--primary-color);
}

.service-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 2rem;
  justify-content: center;
}

.service-card {
  background-color: #f9f9f9;
  padding: 1.5rem;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-light);
  max-width: 300px;
  text-align: center;
}

[data-theme="dark"] .service-card {
  background-color: #1e1e1e;
  box-shadow: var(--shadow-dark);
  color: #eee;
}

.service-card h3 {
  margin-bottom: 1rem;
  color: var(--primary-color);
}

.service-card p {
  font-size: 1rem;
  line-height: 1.5;
}

/* ===============================
   Booking Dashboard
================================= */
.booking {
  padding: 4rem 2rem;
  background-color: var(--bg-light);
}

[data-theme="dark"] .booking {
  background-color: var(--bg-dark);
}

.booking h2 {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 2rem;
  color: var(--primary-color);
}

.booking form {
  max-width: 500px;
  margin: auto;
  background-color: #fff;
  padding: 2rem;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-light);
}

[data-theme="dark"] .booking form {
  background-color: #1e1e1e;
  color: #eee;
  box-shadow: var(--shadow-dark);
}

.booking input,
.booking textarea {
  width: 100%;
  padding: 0.75rem;
  margin-bottom: 1rem;
  border: 1px solid #ccc;
  border-radius: var(--border-radius);
}

.booking button {
  background-color: var(--primary-color);
  color: #fff;
  border: none;
  padding: 0.75rem;
  border-radius: var(--border-radius);
  cursor: pointer;
  font-weight: bold;
  transition: background-color var(--transition-speed);
}

.booking button:hover {
  background-color: var(--accent-color);
}

/* ===============================
   Testimonials Section
================================= */
.testimonials {
  padding: 4rem 2rem;
  background-color: var(--bg-light);
}

[data-theme="dark"] .testimonials {
  background-color: var(--bg-dark);
}

.testimonials h2 {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 2rem;
  color: var(--primary-color);
}

.testimonial-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 2rem;
  justify-content: center;
}

.testimonial-card {
  background-color: #f9f9f9;
  padding: 1.5rem;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-light);
  max-width: 300px;
  text-align: center;
}

[data-theme="dark"] .testimonial-card {
  background-color: #1e1e1e;
  box-shadow: var(--shadow-dark);
  color: #eee;
}

.testimonial-card p {
  font-style: italic;
  margin-bottom: 1rem;
}

.testimonial-card span {
  font-weight: bold;
  color: var(--primary-color);
}

/* ===============================
   Contact, Login, Registration Forms
================================= */
.contact, .login, .register {
  padding: 4rem 2rem;
  background-color: var(--bg-light);
}

[data-theme="dark"] .contact,
[data-theme="dark"] .login,
[data-theme="dark"] .register {
  background-color: var(--bg-dark);
}

.contact h2, .login h2, .register h2 {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 2rem;
  color: var(--primary-color);
}

.contact form,
.login form,
.register form {
  max-width: 500px;
  margin: auto;
  background-color: #fff;
  padding: 2rem;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-light);
}

[data-theme="dark"] .contact form,
[data-theme="dark"] .login form,
[data-theme="dark"] .register form {
  background-color: #1e1e1e;
  color: #eee;
  box-shadow: var(--shadow-dark);
}

form input,
form textarea {
  width: 100%;
  padding: 0.75rem;
  margin-bottom: 1rem;
  border: 1px solid #ccc;
  border-radius: var(--border-radius);
}

form button {
  background-color: var(--primary-color);
  color: #fff;
  border: none;
  padding: 0.75rem;
  border-radius: var(--border-radius);
  cursor: pointer;
  font-weight: bold;
  transition: background-color var(--transition-speed);
}

form button:hover {
  background-color: var(--accent-color);
}

/* ===============================
   Pickup & Delivery Tracking
================================= */
.tracking {
  padding: 4rem 2rem;
  background-color: var(--bg-light);
}

[data-theme="dark"] .tracking {
  background-color: var(--bg-dark);
}

.tracking h2 {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 2rem;
  color: var(--primary-color);
}

.tracking form {
  max-width: 500px;
  margin: auto;
  background-color: #fff;
  padding: 2rem;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-light);
  pointer-events: auto;
}

[data-theme="dark"] .tracking form {
  background-color: #1e1e1e;
  color: #eee;
  box-shadow: var(--shadow-dark);
}

.tracking .form-row {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
}

.tracking .form-row input {
  flex: 1;
}

.tracking input,
.tracking textarea {
  width: 100%;
  padding: 0.75rem;
  margin-bottom: 1rem;
  border: 1px solid #ccc;
  border-radius: var(--border-radius);
  pointer-events: auto;
}

.tracking button {
  background-color: var(--primary-color);
  color: #fff;
  border: none;
  padding: 0.75rem;
  border-radius: var(--border-radius);
  cursor: pointer;
  font-weight: bold;
  transition: background-color var(--transition-speed);
  pointer-events: auto;
}

.tracking button:hover {
  background-color: var(--accent-color);
}

.map-container {
  margin-top: 2rem;
  border-radius: var(--border-radius);
  overflow: hidden;
  box-shadow: var(--shadow-light);
}

[data-theme="dark"] .map-container {
  box-shadow: var(--shadow-dark);
}
/* ===============================
   FAQ Section ‚Äî Animated Styling
================================= */
.faq {
  padding: 4rem 2rem;
  background-color: var(--bg-light);
  max-width: 800px;
  margin: auto;
}

[data-theme="dark"] .faq {
  background-color: var(--bg-dark);
}

.faq h2 {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 2rem;
  color: var(--primary-color);
}

.faq details {
  margin-bottom: 1.5rem;
  border-radius: var(--border-radius);
  background-color: #f9f9f9;
  border: 1px solid #ddd;
  box-shadow: var(--shadow-light);
  overflow: hidden;
  transition: all 0.3s ease;
}

[data-theme="dark"] .faq details {
  background-color: #1e1e1e;
  border-color: #444;
  box-shadow: var(--shadow-dark);
}

.faq summary {
  padding: 1rem 1.5rem;
  font-weight: 600;
  font-size: 1.1rem;
  cursor: pointer;
  position: relative;
  list-style: none;
}

.faq summary::marker {
  display: none;
}

.faq summary::after {
  content: "‚ûï";
  position: absolute;
  right: 1.5rem;
  font-size: 1.2rem;
  transition: transform 0.3s ease;
}

.faq details[open] summary::after {
  content: "‚ûñ";
  transform: rotate(180deg);
}

.faq p {
  padding: 0 1.5rem 1rem;
  font-size: 1rem;
  line-height: 1.6;
  color: var(--text-light);
  animation: fadeIn 0.4s ease-in;
}

[data-theme="dark"] .faq p {
  color: var(--text-dark);
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-5px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes containerPopOut {
  0% {
    opacity: 0;
    transform: scale(0.5) translateY(80px);
    filter: blur(20px);
  }
  40% {
    filter: blur(10px);
  }
  70% {
    filter: blur(3px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0px);
  }
}

/* ===============================
   Chatbot Styling
   - Default: anchored to the right for normal users
   - When body has .admin-bot-left: move to the left (for admin views)
================================= */
.chatbot {
  position: fixed;
  bottom: 1rem;
  right: 1rem;
  left: auto;
  width: 300px;
  background-color: var(--bg-light);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-light);
  overflow: hidden;
  z-index: 2200;
  display: flex;
  flex-direction: column;
}

body.admin-bot-left .chatbot {
  right: auto;
  left: 1rem;
}

[data-theme="dark"] .chatbot {
  background-color: var(--bg-dark);
  box-shadow: var(--shadow-dark);
}

.chat-header {
  background-color: var(--primary-color);
  color: #fff;
  padding: 0.75rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.chat-body {
  padding: 1rem;
  height: 200px;
  overflow-y: auto;
}

.chat-input {
  display: flex;
  border-top: 1px solid #ccc;
}

.chat-input input {
  flex: 1;
  padding: 0.5rem;
  border: none;
  outline: none;
}

.chat-input button {
  background-color: var(--primary-color);
  color: #fff;
  border: none;
  padding: 0.5rem 1rem;
  cursor: pointer;
  z-index: 2220;
}

.user-message,
.bot-message {
  margin-bottom: 0.5rem;
  padding: 0.5rem;
  border-radius: var(--border-radius);
}

.user-message {
  background-color: #e0f7fa;
  align-self: flex-end;
}

.bot-message {
  background-color: #f1f1f1;
  align-self: flex-start;
}

/* ===============================
   Newsletter Section
================================= */
.newsletter {
  padding: 4rem 2rem;
  background-color: var(--bg-light);
  text-align: center;
}

[data-theme="dark"] .newsletter {
  background-color: var(--bg-dark);
}

.newsletter h2 {
  font-size: 2rem;
  margin-bottom: 1rem;
  color: var(--primary-color);
}

.newsletter p {
  font-size: 1rem;
  margin-bottom: 1.5rem;
}

.newsletter form {
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.newsletter input {
  padding: 0.75rem;
  border: 1px solid #ccc;
  border-radius: var(--border-radius);
  width: 250px;
}

.newsletter button {
  background-color: var(--primary-color);
  color: #fff;
  border: none;
  padding: 0.75rem 1.5rem;
  border-radius: var(--border-radius);
  font-weight: bold;
  transition: background-color var(--transition-speed);
}

.newsletter button:hover {
  background-color: var(--accent-color);
}

/* ===============================
   Social Media Section
================================= */
.social-media {
  padding: 2rem;
  text-align: center;
}

.social-media h2 {
  font-size: 1.5rem;
  margin-bottom: 1rem;
  color: var(--primary-color);
}

.social-icons {
  display: flex;
  justify-content: center;
  gap: 1rem;
  list-style: none;
  padding: 0;
}

.social-icons a {
  font-size: 2rem;
  color: var(--primary-color);
  transition: transform 0.3s ease;
}

.social-icons a:hover {
  transform: scale(1.2);
}

/* ===============================
   Footer Section
================================= */
.footer {
  background-color: var(--primary-color);
  color: #fff;
  padding: 2rem;
}

.footer-links {
  display: flex;
  justify-content: space-around;
  flex-wrap: wrap;
  gap: 2rem;
}

.footer-column h4 {
  margin-bottom: 1rem;
  font-size: 1.2rem;
}

.footer-column ul {
  list-style: none;
  padding: 0;
}

.footer-column li {
  margin-bottom: 0.5rem;
}

.footer-column a {
  color: #fff;
  text-decoration: none;
  transition: text-decoration 0.3s ease;
}

.footer-column a:hover {
  text-decoration: underline;
}

.footer-bottom {
  text-align: center;
  margin-top: 2rem;
  font-size: 0.9rem;
}

/* ===============================
   Responsive Adjustments
================================= */
@media (max-width: 768px) {
  .top-nav ul {
    display: none;
  }

  #menuToggle {
    display: block;
  }

  .footer-links {
    flex-direction: column;
    align-items: center;
  }

  .gallery-slider {
    flex-direction: column;
    align-items: center;
  }

  .chatbot {
    width: 90%;
    right: 5%;
    left: auto;
  }

  body.admin-bot-left .chatbot {
    right: auto;
    left: 5%;
  }

  .newsletter form {
    flex-direction: column;
    align-items: center;
  }

  .newsletter input {
    width: 100%;
    max-width: 300px;
  }

  .tracking .form-row {
    flex-direction: column;
  }

  .testimonial-grid {
    flex-direction: column;
    align-items: center;
  }

  .booking form,
  .livechat form {
    width: 100%;
    padding: 1rem;
  }
}

/* ===============================
   Accessibility and Transitions
================================= */
button, input, select, a, summary {
  outline: none;
}

button:focus, input:focus, select:focus, a:focus, summary:focus {
  box-shadow: 0 0 0 2px var(--accent-color);
}

body.theme-transition {
  transition: background-color 0.6s ease, color 0.6s ease;
}
/* Reset some basics and apply smooth transitions globally */
*,
*::before,
*::after {
  box-sizing: border-box;
  transition-timing-function: ease-in-out;
}

/* Body typography and background */
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  line-height: 1.6;
  color: #333;
  background: linear-gradient(135deg, #f0f4f8 0%, #ffffff 100%);
  padding: 20px;
  transition: background-color 0.3s ease, color 0.3s ease;
  margin: 0;
}

/* Headings style */
h1, h2, h3, h4, h5, h6 {
  font-weight: 600;
  margin-bottom: 0.75em;
  color: #222;
  letter-spacing: 0.02em;
}

/* Links */
a {
  color: #0056b3;
  text-decoration: none;
  transition: color 0.3s ease, transform 0.3s ease;
  cursor: pointer;
}
a:hover,
a:focus {
  color: #023e8a;
  text-decoration: underline;
  transform: scale(1.05);
  outline: none;
}

/* Buttons and button-like elements */
button, .btn {
  background-color: #007bff;
  color: #fff;
  border: none;
  padding: 0.6em 1.2em;
  font-size: 1em;
  border-radius: 4px;
  box-shadow: 0 4px 6px rgb(0 123 255 / 0.4);
  cursor: pointer;
  transition: background-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
}
button:hover, .btn:hover,
button:focus, .btn:focus {
  background-color: #0056b3;
  box-shadow: 0 6px 10px rgb(0 86 179 / 0.7);
  transform: translateY(-2px);
  outline: none;
}

/* Gentle shadows and subtle background for sections/cards */
section, .card {
  box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
  border-radius: 6px;
  padding: 20px;
  margin-bottom: 24px;
  background-color: #fafafa;
  transition: box-shadow 0.3s ease;
}
section:hover, .card:hover {
  box-shadow: 0 6px 16px rgb(0 0 0 / 0.15);
}

/* Accessibility: visible focus outlines */
:focus-visible {
  outline: 3px solid #0056b3;
  outline-offset: 3px;
}

/* Smooth scrolling for anchor links */
html {
  scroll-behavior: smooth;
}

/* High-Contrast Mode (toggle with .high-contrast on body, and mirror for prefers-contrast where supported) */
body.high-contrast {
  background: #000 !important;
  color: #fff !important;
}

@media (prefers-contrast: more) {
  body {
    background: #000 !important;
    color: #fff !important;
  }
}

body.high-contrast a {
  color: #ffff00 !important; /* Yellow links for visibility */
}

@media (prefers-contrast: more) {
  body a {
    color: #ffff00 !important; /* Yellow links for visibility */
  }
}

body.high-contrast .btn {
  background: #fff !important;
  color: #000 !important;
  border: 3px solid #ff0 !important;
}

@media (prefers-contrast: more) {
  body .btn {
    background: #fff !important;
    color: #000 !important;
    border: 3px solid #ff0 !important;
  }
}

/* Larger Clickable Elements for Buttons and Inputs */
button, .btn, input[type="button"],
input[type="submit"], label, select, .nav-link {
  min-width: 48px;
  min-height: 48px;
  font-size: 1.2rem;
  padding: 0.75em 1.2em;
  border-radius: var(--border-radius, 8px);
}

/* Accessible Focus States (keyboard navigation) */
a:focus, button:focus, input:focus, select:focus, textarea:focus, .btn:focus, .nav-link:focus {
  outline: 3px solid #00b6f1;
  outline-offset: 3px;
  box-shadow: 0 0 0 4px rgba(0,182,241,0.2);
  border-radius: var(--border-radius, 8px);
}

/* Hide unnecessary focus for mouse, only show for keyboard */
:focus:not(:focus-visible) {
  outline: none;
  box-shadow: none;
}

/* Screen Reader Support - only for extra content or landmarks */
.sr-only {
  position: absolute !important;
  left: -10000px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

/* Optional: Add skip-to-content link for keyboard users */
.skip-to-content {
  position: absolute;
  top: -40px;
  left: 0;
  background: #00b6f1;
  color: #fff;
  padding: 8px 16px;
  z-index: 1000;
  transition: top 0.2s;
}
.skip-to-content:focus {
  top: 0;
}
/* Smooth Theme Animations - Light & Dark Mode */
body {
  transition: background 0.5s cubic-bezier(0.77, 0, 0.175, 1), color 0.4s;
  background: #f4f7fa;
  color: #222;
}

body.dark-mode {
  background: #131c26;
  color: #e7eaf1;
}

header, nav, .card, .btn, input, textarea, select {
  transition: background 0.5s, color 0.4s, box-shadow 0.4s;
}

/* Example: make header translucent with animated blur */
header {
  background: rgba(255,255,255,0.7);
  backdrop-filter: blur(16px);
  box-shadow: 0 2px 16px rgba(20, 24, 28, 0.08);
}
body.dark-mode header {
  background: rgba(25,28,34,0.85);
  backdrop-filter: blur(20px);
  box-shadow: 0 2px 20px rgba(10,12,18,0.26);
}

/* Button styling (animated) */
.btn {
  background: #2566ff;
  color: #fff;
  border: none;
  transition: background 0.3s, color 0.3s;
}
body.dark-mode .btn {
  background: #0052b1;
  color: #f6f8fc;
}

/* Card styling (animated) */
.card {
  background: #fff;
  color: #222;
  box-shadow: 0 2px 10px rgba(74,146,255,0.04);
}
body.dark-mode .card {
  background: #202b3e;
  color: #f4f7fa;
  box-shadow: 0 2px 20px rgba(10,12,18,0.21);
}

/* Form fields (animated) */
input, textarea, select {
  background: #fff;
  color: #222;
}
body.dark-mode input,
body.dark-mode textarea,
body.dark-mode select {
  background: #192029;
  color: #e7eaf1;
  border: 1px solid #224477;
}

/* Links */
a {
  color: #2a60e0;
  transition: color 0.3s;
}
body.dark-mode a {
  color: #7bc9ff;
}

/* Optional: Animate SVG/icon fill or other UI elements */

/* Smoothly fade overlays or modals for both themes */
.modal, .overlay {
  transition: background 0.4s, color 0.4s;
}

/* Animate theme toggle button */
.theme-toggle {
  transition: background 0.3s, color 0.25s;
}

body.dark-mode .theme-toggle {
  background: #223354;
  color: #e9f1ff;
}
/* High-Contrast Mode for Dark Theme (when body has BOTH .dark-mode and .high-contrast) */
body.dark-mode.high-contrast {
  background: #000 !important;
  color: #fff700 !important;
}
body.dark-mode.high-contrast header,
body.dark-mode.high-contrast nav,
body.dark-mode.high-contrast .card {
  background: #222 !important;
  color: #ffe600 !important;
  border: 3px solid #ffd800 !important;
  box-shadow: 0 2px 16px #ff0a !important;
}
body.dark-mode.high-contrast a,
body.dark-mode.high-contrast .btn {
  color: #ffff00 !important;
  background: #0d0d0d !important;
  border: 3px solid #25f4ee !important;
  font-weight: bold !important;
  text-shadow: 1px 1px 4px #000, 0 0 2px #fff700;
}
body.dark-mode.high-contrast input,
body.dark-mode.high-contrast select,
body.dark-mode.high-contrast textarea {
  background: #222 !important;
  color: #fff700 !important;
  border: 3px solid #ffe600 !important;
}

/* More noticeable focus outlines */
body.dark-mode.high-contrast :focus {
  outline: 4px solid #25f4ee !important;
  outline-offset: 2px !important;
  box-shadow: 0 0 0 5px #ffe60099 !important;
}
body.dark-mode.high-contrast {
  background: #000 !important;
  color: #bfa42b !important; /* Dark amber gold */
}

body.dark-mode.high-contrast header,
body.dark-mode.high-contrast nav,
body.dark-mode.high-contrast .card {
  background: #111 !important;
  color: #bfa42b !important;
  border: 3px solid #bfa42b !important;
  box-shadow: 0 0 12px #bfa42bcc !important;
}

body.dark-mode.high-contrast a,
body.dark-mode.high-contrast .btn {
  color: #bfa42b !important;
  background: #1a1a0d !important; /* very dark olive-ish */
  border: 3px solid #42985a !important; /* subtle contrasting green */
  font-weight: bold !important;
  text-shadow: 1px 1px 4px #000, 0 0 3px #bfa42b;
}

body.dark-mode.high-contrast input,
body.dark-mode.high-contrast select,
body.dark-mode.high-contrast textarea {
  background: #222 !important;
  color: #bfa42b !important;
  border: 3px solid #d1b84c !important; /* lighter golden border */
}

body.dark-mode.high-contrast :focus {
  outline: 4px solid #42985a !important; /* greenish outline for focus */
  outline-offset: 2px !important;
  box-shadow: 0 0 0 6px #ffe60099 !important;
}
body.dark-mode.high-contrast {
  background: #000 !important;
  color: #bfa42b !important;
}
body.dark-mode.high-contrast header,
body.dark-mode.high-contrast nav,
body.dark-mode.high-contrast .card {
  background: #111 !important;
  color: #bfa42b !important;
  border: 3px solid #ffd800 !important;
  box-shadow: 0 0 12px #ff0a !important;
}

body.dark-mode.high-contrast a,
body.dark-mode.high-contrast .btn {
  color: #ff0 !important;
  background: #0e0e0e !important;
  border: 3px solid #25f4ee !important;
  font-weight: bold !important;
  text-shadow: 1px 1px 4px #000, 0 0 3px #fff700;
}

body.dark-mode.high-contrast input,
body.dark-mode.high-contrast select,
body.dark-mode.high-contrast textarea {
  background: #222 !important;
  color: #fff700 !important;
  border: 3px solid #ffe600 !important;
}
body.dark-mode.high-contrast :focus {
  outline: 4px solid #42985a !important;
  outline-offset: 2px !important;
  box-shadow: 0 0 0 6px #ffe60099 !important;
}
body.dark-mode.high-contrast {
  background: #000 !important;
  color: #bfa42b !important; /* Dark amber gold */
}

body.dark-mode.high-contrast header,
body.dark-mode.high-contrast nav,
body.dark-mode.high-contrast .card {
  background: #111 !important;
  color: #bfa42b !important;
  border: 3px solid #bfa42b !important;
  box-shadow: 0 0 12px #bfa42bcc !important;
}

body.dark-mode.high-contrast a,
body.dark-mode.high-contrast .btn {
  color: #bfa42b !important;
  background: #1a1a0d !important; /* very dark olive-ish */
  border: 3px solid #42985a !important; /* subtle contrasting green */
  font-weight: bold !important;
  text-shadow: 1px 1px 4px #000, 0 0 3px #bfa42b;
}

/* Style register section container same as login */
.register {
  padding: 4rem 2rem;
  background-color: var(--bg-light);
  max-width: 500px;
  margin: 2rem auto; /* center horizontally with some top-bottom spacing */
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-light);
  transition: background-color var(--transition-speed), box-shadow var(--transition-speed);
}

[data-theme="dark"] .register {
  background-color: var(--bg-dark);
  box-shadow: var(--shadow-dark);
}

.register h2 {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 2rem;
  color: var(--primary-color);
}

/* Style input fields same as other forms */
#registerSection input {
  width: 100%;
  padding: 0.75rem;
  margin-bottom: 1rem;
  border: 1px solid #ccc;
  border-radius: var(--border-radius);
  font-size: 1rem;
  box-sizing: border-box;
}

/* Dark mode input styling */
[data-theme="dark"] #registerSection input {
  background-color: #192029;
  color: #e7eaf1;
  border-color: #224477;
}

/* Style button */
#registerBtn {
  display: block;
  width: 100%;
  background-color: var(--primary-color);
  color: #fff;
  border: none;
  padding: 0.75rem;
  font-size: 1.1rem;
  font-weight: bold;
  border-radius: var(--border-radius);
  cursor: pointer;
  transition: background-color 0.3s ease;
}

#registerBtn:hover {
  background-color: var(--accent-color);
}

[data-theme="dark"] #registerBtn:hover {
  background-color: var(--primary-color);
}
.chatbot {
  width: 300px;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-family: Arial, sans-serif;
  display: flex;
  flex-direction: column;
}

.chat-header {
  background: #4CAF50;
  color: white;
  padding: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.chat-body {
  flex: 1;
  padding: 10px;
  overflow-y: auto;
  background: #f9f9f9;
}

.chat-input {
  display: flex;
  border-top: 1px solid #ccc;
}

.chat-input input {
  flex: 1;
  padding: 8px;
  border: none;
}

.chat-input button {
  padding: 8px 12px;
  background: #4CAF50;
  color: white;
  border: none;
  cursor: pointer;
}

.user-message {
  text-align: right;
  margin: 5px 0;
  color: #333;
}

.bot-message {
  text-align: left;
  margin: 5px 0;
  color: #555;
}

.chatbox-container {
  border: 1px solid #ccc;
  padding: 1rem;
  max-width: 500px;
  margin: 0 auto;
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 0 8px rgba(0, 0, 0, 0.05);
}

.chatbox-messages {
  height: 300px;
  overflow-y: auto;
  margin-bottom: 1rem;
  padding-right: 8px;
}

.chatbox-message {
  margin: 0.5rem 0;
  font-size: 0.95rem;
}

.chatbox-user {
  text-align: right;
  color: #333;
}

.chatbox-bot {
  text-align: left;
  color: #555;
}

.chatbox-input {
  display: flex;
  gap: 8px;
}

.chatbox-input input {
  flex: 1;
  padding: 0.5rem;
  border: 1px solid #aaa;
  border-radius: 4px;
}

.chatbox-input button {
  padding: 0.5rem 1rem;
  background-color: #0077cc;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.chatbox-input button:hover {
  background-color: #005fa3;
}

.track-btn {
  display: inline-block;
  background-color: #007bff;
  color: white;
  padding: 10px 20px;
  margin-top: 20px;
  border-radius: 6px;
  text-decoration: none;
  font-weight: bold;
  transition: background-color 0.3s ease;
}

.track-btn:hover {
  background-color: #0056b3;
}

body {
  background-color: #121212;
  color: #f0f0f0;
  font-family: Arial, sans-serif;
  text-align: center;
  padding-top: 50px;
}

.track-btn {
  display: inline-block;
  background-color: #007bff;
  color: white;
  padding: 10px 20px;
  margin-top: 20px;
  border-radius: 6px;
  text-decoration: none;
  font-weight: bold;
  transition: background-color 0.3s ease;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}

.track-btn:hover {
  background-color: #0056b3;
}

/* Enhanced Chat Interface Styles */
:root {
  --chat-primary: #2563eb;
  --chat-primary-hover: #1d4ed8;
  --chat-secondary: #f8fafc;
  --chat-border: #e2e8f0;
  --chat-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  --chat-shadow-hover: 0 20px 40px rgba(0, 0, 0, 0.15);
  --chat-radius: 16px;
  --chat-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Chat Toggle Button Enhancement */
#chatToggleBtn {
  position: fixed !important;
  bottom: 32px !important;
  right: 32px !important;
  z-index: 2100 !important;
  padding: 16px 24px !important;
  border-radius: 50px !important;
  background: linear-gradient(135deg, var(--chat-primary), var(--chat-primary-hover)) !important;
  color: white !important;
  border: none !important;
  cursor: pointer !important;
  font-weight: 600 !important;
  font-size: 16px !important;
  box-shadow: var(--chat-shadow) !important;
  transition: var(--chat-transition) !important;
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
}

#chatToggleBtn:hover {
  transform: translateY(-2px) !important;
  box-shadow: var(--chat-shadow-hover) !important;
}

#chatToggleBtn:active {
  transform: translateY(0) !important;
}

/* Enhanced Chatbot Container */
#chatbot {
  position: fixed !important;
  bottom: 100px !important;
  right: 32px !important;
  z-index: 2000 !important;
  width: 380px !important;
  max-width: calc(100vw - 64px) !important;
  height: 600px !important;
  max-height: calc(100vh - 200px) !important;
  background: white !important;
  border-radius: var(--chat-radius) !important;
  box-shadow: var(--chat-shadow-hover) !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
  border: 1px solid var(--chat-border) !important;
  backdrop-filter: blur(10px) !important;
}

/* Chat Header */
.chat-header {
  background: linear-gradient(135deg, var(--chat-primary), var(--chat-primary-hover));
  color: white;
  padding: 20px 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-radius: var(--chat-radius) var(--chat-radius) 0 0;
}

.chat-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.chat-status {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  opacity: 0.9;
}

.status-dot {
  width: 8px;
  height: 8px;
  background: #10b981;
  border-radius: 50%;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

#closeChatbot {
  background: none !important;
  border: none !important;
  color: white !important;
  font-size: 24px !important;
  cursor: pointer !important;
  padding: 4px !important;
  border-radius: 6px !important;
  transition: var(--chat-transition) !important;
  width: 32px !important;
  height: 32px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

#closeChatbot:hover {
  background: rgba(255, 255, 255, 0.1) !important;
}

/* Chat Body */
.chat-body, #chatBody {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
  background: #fafbfc;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.chat-body::-webkit-scrollbar, #chatBody::-webkit-scrollbar {
  width: 6px;
}

.chat-body::-webkit-scrollbar-track, #chatBody::-webkit-scrollbar-track {
  background: transparent;
}

.chat-body::-webkit-scrollbar-thumb, #chatBody::-webkit-scrollbar-thumb {
  background: var(--chat-border);
  border-radius: 3px;
}

.chat-body::-webkit-scrollbar-thumb:hover, #chatBody::-webkit-scrollbar-thumb:hover {
  background: #cbd5e1;
}

/* Message Styles */
.chat-message, .user-message, .bot-message {
  max-width: 85%;
  padding: 12px 16px;
  border-radius: 18px;
  font-size: 14px;
  line-height: 1.4;
  word-wrap: break-word;
  animation: messageSlide 0.3s ease-out;
  margin-bottom: 8px;
}

@keyframes messageSlide {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.user-message {
  background: linear-gradient(135deg, var(--chat-primary), var(--chat-primary-hover));
  color: white;
  align-self: flex-end;
  border-bottom-right-radius: 6px;
  margin-left: auto;
}

.bot-message {
  background: white;
  color: #374151;
  align-self: flex-start;
  border: 1px solid var(--chat-border);
  border-bottom-left-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.system-message {
  background: #fef3c7;
  color: #92400e;
  align-self: center;
  font-size: 12px;
  padding: 8px 12px;
  border-radius: 12px;
  text-align: center;
  max-width: 90%;
}

/* Typing Indicator */
.typing-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: white;
  border: 1px solid var(--chat-border);
  border-radius: 18px;
  border-bottom-left-radius: 6px;
  align-self: flex-start;
  max-width: 85%;
}

.typing-dots {
  display: flex;
  gap: 4px;
}

.typing-dot {
  width: 6px;
  height: 6px;
  background: #9ca3af;
  border-radius: 50%;
  animation: typingBounce 1.4s infinite ease-in-out;
}

.typing-dot:nth-child(1) { animation-delay: -0.32s; }
.typing-dot:nth-child(2) { animation-delay: -0.16s; }

@keyframes typingBounce {
  0%, 80%, 100% {
    transform: scale(0.8);
    opacity: 0.5;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Chat Input */
.chat-input {
  padding: 20px;
  background: white;
  border-top: 1px solid var(--chat-border);
  display: flex;
  gap: 12px;
  align-items: flex-end;
}

#chatMessage {
  flex: 1 !important;
  padding: 12px 16px !important;
  border: 2px solid var(--chat-border) !important;
  border-radius: 24px !important;
  font-size: 14px !important;
  resize: none !important;
  outline: none !important;
  transition: var(--chat-transition) !important;
  max-height: 100px !important;
  min-height: 44px !important;
  font-family: inherit !important;
}

#chatMessage:focus {
  border-color: var(--chat-primary) !important;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1) !important;
}

#sendChat {
  background: var(--chat-primary) !important;
  color: white !important;
  border: none !important;
  border-radius: 50% !important;
  width: 44px !important;
  height: 44px !important;
  cursor: pointer !important;
  transition: var(--chat-transition) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-size: 18px !important;
}

#sendChat:hover {
  background: var(--chat-primary-hover) !important;
  transform: scale(1.05) !important;
}

#sendChat:active {
  transform: scale(0.95) !important;
}

#sendChat:disabled {
  background: #9ca3af !important;
  cursor: not-allowed !important;
  transform: none !important;
}

/* Quick Actions */
.quick-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 16px;
}

.quick-action {
  background: white;
  border: 1px solid var(--chat-border);
  color: var(--chat-primary);
  padding: 8px 12px;
  border-radius: 16px;
  font-size: 12px;
  cursor: pointer;
  transition: var(--chat-transition);
}

.quick-action:hover {
  background: var(--chat-primary);
  color: white;
  transform: translateY(-1px);
}

/* Agent Handoff Styles */
.agent-request {
  background: linear-gradient(135deg, #f59e0b, #d97706);
  color: white;
  padding: 16px;
  border-radius: 12px;
  text-align: center;
  margin: 16px 0;
}

.agent-status {
  background: #ecfdf5;
  border: 1px solid #10b981;
  color: #065f46;
  padding: 12px;
  border-radius: 8px;
  font-size: 13px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.agent-status.connecting {
  background: #fef3c7;
  border-color: #f59e0b;
  color: #92400e;
}

/* Dark Theme Support */
[data-theme="dark"] #chatbot {
  background: #1f2937 !important;
  border-color: #374151 !important;
}

[data-theme="dark"] .chat-body,
[data-theme="dark"] #chatBody {
  background: #111827 !important;
}

[data-theme="dark"] .bot-message {
  background: #374151 !important;
  color: #f9fafb !important;
  border-color: #4b5563 !important;
}

[data-theme="dark"] .chat-input {
  background: #1f2937 !important;
  border-color: #374151 !important;
}

[data-theme="dark"] #chatMessage {
  background: #374151 !important;
  color: #f9fafb !important;
  border-color: #4b5563 !important;
}

[data-theme="dark"] #chatMessage:focus {
  border-color: var(--chat-primary) !important;
}

[data-theme="dark"] .quick-action {
  background: #374151 !important;
  border-color: #4b5563 !important;
  color: #f9fafb !important;
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
  #chatbot {
    width: calc(100vw - 32px) !important;
    height: calc(100vh - 120px) !important;
    bottom: 16px !important;
    right: 16px !important;
  }
  
  #chatToggleBtn {
    bottom: 16px !important;
    right: 16px !important;
  }
}
/* Header layout */
.main-header {
  position: sticky;          /* or fixed if you want it always visible */
  top: 0;
  z-index: 1000;
  display: flex;
  justify-content: space-between; /* title left, controls right */
  align-items: center;
  padding: 0.75rem 1.5rem;
  background: var(--header-bg, #ffffff);
  color: var(--header-text, #111111);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.06);
}

.site-title {
  font-size: 1.5rem;
  font-weight: 800;
}

/* Right side of header: toggle + menu button */
.header-right {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

#menuToggle {
  font-size: 1.4rem;
  background: transparent;
  border: none;
  cursor: pointer;
  color: inherit;
}

/* Right sidebar */
.right-sidebar {
  position: fixed;
  top: 0;
  right: 0;               /* key part: on the right */
  height: 100vh;
  width: 260px;
  background: var(--sidebar-bg, #ffffff);
  box-shadow: -2px 0 6px rgba(0, 0, 0, 0.12);
  transform: translateX(100%);  /* hidden by default */
  transition: transform 0.3s ease;
  z-index: 999;
  padding: 1rem;
}

/* Add a class .open with JS when menuToggle is clicked */
.right-sidebar.open {
  transform: translateX(0);
}

#closeMenu {
  background: transparent;
  border: none;
  font-size: 1.2rem;
  cursor: pointer;
  float: right;
}

#sideMenu ul {
  list-style: none;
  padding: 0;
  margin: 2.5rem 0 0;
}

#sideMenu li {
  margin-bottom: 0.75rem;
}

#sideMenu a {
  text-decoration: none;
  color: inherit;
}

/* Day/Night toggle switch */
.theme-toggle {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 26px;
}

/* hide checkbox */
.theme-toggle input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* slider background */
.theme-toggle .slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: 0.4s;
  border-radius: 34px;
}

/* circle knob */
.theme-toggle .slider::before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 4px;
  bottom: 3px;
  background-color: #fff;
  transition: 0.4s;
  border-radius: 50%;
}

/* checked state: dark mode */
.theme-toggle input:checked + .slider {
  background-color: #111827; /* dark */
}

.theme-toggle input:checked + .slider::before {
  transform: translateX(22px);
}

/* optional: main content padding so it doesn't sit under fixed header */
main {
  padding-top: 4rem;
}

/* simple light/dark background examples using data-theme on html element */
html[data-theme="light"] {
  --header-bg: #ffffff;
  --header-text: #111111;
  --sidebar-bg: #ffffff;
}

html[data-theme="dark"] {
  --header-bg: #111827;
  --header-text: #f9fafb;
  --sidebar-bg: #030712;
  background: #020617;
  color: #e5e7eb;
}
.main-header {
  position: sticky;          /* or fixed if you prefer */
  top: 0;
  z-index: 1000;

  display: flex;
  justify-content: space-between;
  align-items: center;

  padding: 0.75rem 1.5rem;

  /* Glassmorphism / blur transparent effect */
  background: rgba(15, 23, 42, 0.45);              /* semi‚Äëtransparent */
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);            /* Safari support */
  border-bottom: 1px solid rgba(255, 255, 255, 0.18);

  color: var(--header-text, #f9fafb);
}

/* Optional: rounded + subtle shadow to enhance the glass look */
body {
  background: radial-gradient(circle at top, #0f172a 0, #020617 45%, #000 100%);
}

.site-title {
  font-size: 1.6rem;
  font-weight: 800;
  letter-spacing: 0.04em;
}
/* Sidebar is always on the LEFT, regardless of RTL/LTR */
#sideMenu,
.right-sidebar {
  position: fixed;
  top: 0;
  left: 0;               /* <-- force left side */
  right: auto;           /* make sure right is not used */
  height: 100vh;
  width: 260px;
  transform: translateX(-100%);  /* hidden by default */
  transition: transform 0.3s ease;
  z-index: 999;
}

/* when open, slide in from the left */
#sideMenu.open,
.right-sidebar.open {
  transform: translateX(0);
}

/* if you previously had right:0; for the sidebar, remove/override it */
html[dir="rtl"] #sideMenu,
html[dir="rtl"] .right-sidebar {
  left: 0;
  right: auto;
}
.tracking-modal-overlay.active,
.tracking-modal-overlay.active *,
.messaging-overlay,
.messaging-container,
.floating-messaging-btn {
  pointer-events: auto !important;
  z-index: 99999 !important;
}

/* Highlight Section - Swift Delivery */
.highlight {
  padding: 2rem 1rem;
  background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
  color: white;
  text-align: center;
}

.highlight h1 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
  font-style: italic;
}

.highlight p {
  font-size: 1rem;
  margin-bottom: 1rem;
  font-style: italic;
  opacity: 0.95;
}

.track-btn {
  display: inline-block;
  padding: 10px 20px;
  background: white;
  color: #4f46e5;
  border-radius: 6px;
  font-weight: 600;
  text-decoration: none;
  transition: background 0.3s, transform 0.3s;
}

.track-btn:hover {
  background: #f0f0f0;
  transform: translateY(-2px);
}

/* ===============================
   Tracking Modal Styles
================================= */
.tracking-modal-overlay {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  background: rgba(0, 0, 0, 0.5) !important;
  backdrop-filter: blur(5px);
  z-index: 3000 !important;
  animation: fadeIn 0.3s ease;
  overflow-y: auto;
  padding: 20px;
  visibility: hidden !important;
  opacity: 0 !important;
  display: none !important;
  align-items: center;
  justify-content: center;
  transition: visibility 0.3s ease, opacity 0.3s ease;
  pointer-events: none !important;
}

.tracking-modal-overlay.active {
  visibility: visible !important;
  opacity: 1 !important;
  display: flex !important;
  pointer-events: auto !important;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(50px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.tracking-modal-container {
  background: white;
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  width: 95vw;
  max-width: 1400px;
  max-height: 95vh;
  display: flex;
  flex-direction: column;
  animation: slideUp 0.4s ease;
  overflow: hidden;
}

[data-theme="dark"] .tracking-modal-container {
  background: #1a1a1a;
  color: #eee;
}

.tracking-modal-header {
  padding: 24px;
  background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
  color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.tracking-modal-title {
  font-size: 24px;
  font-weight: 700;
  margin: 0;
}

.tracking-modal-close {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  font-size: 24px;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
}

.tracking-modal-close:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: rotate(90deg);
}

.tracking-modal-content {
  display: grid;
  grid-template-columns: 1fr 450px;
  gap: 24px;
  padding: 28px;
  overflow-y: auto;
  flex: 1;
}

@media (max-width: 1200px) {
  .tracking-modal-content {
    grid-template-columns: 1fr 380px;
    gap: 20px;
    padding: 20px;
  }
}

@media (max-width: 992px) {
  .tracking-modal-content {
    grid-template-columns: 1fr;
    gap: 20px;
    padding: 20px;
  }
}

@media (max-width: 768px) {
  .tracking-modal-content {
    grid-template-columns: 1fr;
    gap: 16px;
    padding: 16px;
  }
}

.tracking-modal-map-section {
  position: relative;
  background: #f0f0f0;
  border-radius: 12px;
  overflow: hidden;
  min-height: 400px;
}

[data-theme="dark"] .tracking-modal-map-section {
  background: #2a2a2a;
}

.tracking-modal-map {
  width: 100%;
  height: 100%;
  min-height: 400px;
}

.tracking-modal-map-controls {
  position: absolute;
  top: 12px;
  right: 12px;
  display: flex;
  gap: 8px;
  z-index: 10;
}

.map-control-btn {
  background: white;
  border: none;
  padding: 10px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  font-size: 13px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

.map-control-btn:hover {
  background: #f5f5f5;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.map-control-btn.active {
  background: #4f46e5;
  color: white;
}

.tracking-modal-info-section {
  display: flex;
  flex-direction: column;
  gap: 16px;
  overflow-y: auto;
  max-height: 100%;
}

.tracking-info-card {
  background: #f8f9fa;
  border-radius: 12px;
  padding: 16px;
  border: 1px solid #e0e0e0;
}

[data-theme="dark"] .tracking-info-card {
  background: #2a2a2a;
  border-color: #444;
}

.info-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.info-card-header h2 {
  font-size: 16px;
  font-weight: 700;
  margin: 0;
  color: #333;
  font-style: italic;
}

[data-theme="dark"] .info-card-header h2 {
  color: #eee;
}

.status-badge {
  display: inline-block;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  background: #dcfce7;
  color: #166534;
}

.status-badge.pending {
  background: #fef3c7;
  color: #92400e;
}

.status-badge.in-transit {
  background: #dbeafe;
  color: #0c4a6e;
}

.status-badge.delivered {
  background: #dcfce7;
  color: #166534;
}

.status-badge.failed {
  background: #fee2e2;
  color: #991b1b;
}

.info-card-content {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.info-row {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
  font-size: 13px;
}

.info-label {
  font-weight: 600;
  color: #666;
  min-width: 120px;
  font-style: italic;
}

[data-theme="dark"] .info-label {
  color: #aaa;
}

.info-value {
  color: #333;
  text-align: right;
  flex: 1;
  word-break: break-word;
  font-style: italic;
}

[data-theme="dark"] .info-value {
  color: #eee;
}

.tracking-modal-action-btn {
  padding: 12px 20px;
  background: #ef4444;
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  margin-top: auto;
  width: 100%;
}

.tracking-modal-action-btn:hover {
  background: #dc2626;
  transform: translateY(-2px);
}

/* Loading state */
.tracking-modal-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 400px;
}

.tracking-modal-loading::after {
  content: '';
  width: 40px;
  height: 40px;
  border: 4px solid #f3f3f3;
  border-top: 4px solid #4f46e5;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* Courier animation styles */
@keyframes courierPulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.7);
  }
  50% {
    box-shadow: 0 0 0 10px rgba(79, 70, 229, 0);
  }
}

.courier-marker-active {
  animation: courierPulse 2s infinite;
}

/* ===============================
   Admin-Customer Messaging System
================================= */
.messaging-overlay {
  position: fixed;
  top: 70px;
  right: 350px;
  width: 320px;
  height: 500px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  z-index: 1500;
  display: flex;
  flex-direction: column;
  visibility: hidden;
  opacity: 0;
  transform: translateY(-20px) scale(0.95);
  transition: all 0.3s ease;
  pointer-events: none;
  user-select: none;
}

.messaging-overlay.active {
  visibility: visible;
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
  user-select: auto;
}

[data-theme="dark"] .messaging-overlay {
  background: #1a1a1a;
  color: #eee;
}

.messaging-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
}

.messaging-header {
  padding: 16px 20px;
  background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
  color: white;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  border-radius: 12px 12px 0 0;
  cursor: move;
}

.messaging-header-info {
  flex: 1;
}

.messaging-title {
  font-size: 16px;
  font-weight: 700;
  margin: 0 0 4px 0;
}

.messaging-status {
  font-size: 12px;
  opacity: 0.9;
  display: block;
}

.messaging-close {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  font-size: 18px;
}

.messaging-close:hover {
  background: rgba(255, 255, 255, 0.4);
  transform: rotate(90deg);
}

.messaging-body {
  flex: 1;
  overflow-y: auto;
  padding: 16px 20px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  background: #f8f9fa;
}

[data-theme="dark"] .messaging-body {
  background: #2a2a2a;
}

.message-item {
  display: flex;
  animation: slideInMessage 0.3s ease;
}

@keyframes slideInMessage {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.message-item.customer {
  justify-content: flex-end;
}

.message-item.admin {
  justify-content: flex-start;
}

.message-bubble {
  max-width: 80%;
  padding: 10px 14px;
  border-radius: 12px;
  font-size: 13px;
  line-height: 1.4;
  word-wrap: break-word;
}

.message-item.customer .message-bubble {
  background: #4f46e5;
  color: white;
  border-radius: 12px 12px 0 12px;
}

.message-item.admin .message-bubble {
  background: white;
  color: #333;
  border: 1px solid #e0e0e0;
  border-radius: 12px 12px 12px 0;
}

[data-theme="dark"] .message-item.admin .message-bubble {
  background: #333;
  color: #eee;
  border-color: #444;
}

.system-message {
  text-align: center;
  font-size: 12px;
  color: #999;
  padding: 8px 0;
  font-style: italic;
}

[data-theme="dark"] .system-message {
  color: #666;
}

.message-time {
  font-size: 11px;
  color: #999;
  margin-top: 4px;
  text-align: right;
}

[data-theme="dark"] .message-time {
  color: #666;
}

.messaging-input-section {
  padding: 16px 20px;
  border-top: 1px solid #e0e0e0;
  background: white;
  border-radius: 0 0 16px 16px;
}

[data-theme="dark"] .messaging-input-section {
  background: #1a1a1a;
  border-top-color: #333;
}

.messaging-form {
  display: flex;
  gap: 8px;
  pointer-events: auto;
}

.messaging-input {
  flex: 1;
  padding: 10px 14px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  font-size: 13px;
  font-family: inherit;
  transition: border-color 0.3s ease;
  pointer-events: auto;
}

.messaging-input:focus {
  outline: none;
  border-color: #4f46e5;
  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

[data-theme="dark"] .messaging-input {
  background: #2a2a2a;
  border-color: #444;
  color: #eee;
}

.messaging-send-btn {
  padding: 10px 16px;
  background: #7c3aed;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  font-size: 13px;
  transition: all 0.3s ease;
  pointer-events: auto;
}

.messaging-send-btn:hover {
  background: #6d28d9;
  transform: translateY(-2px);
}

.messaging-send-btn:active {
  transform: translateY(0);
}

@media (max-width: 480px) {
  .messaging-overlay {
    width: calc(100% - 40px);
    height: 400px;
    right: 20px;
    top: 70px;
  }

  .message-bubble {
    max-width: 100%;
  }
}

/* ===============================
   Floating Messaging Button
================================= */
.floating-messaging-btn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
  color: white;
  border: none;
  font-size: 24px;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4);
  display: none !important;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  z-index: 1400;
  visibility: hidden !important;
  pointer-events: none !important;
}

.floating-messaging-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 20px rgba(124, 58, 237, 0.6);
}

.floating-messaging-btn:active {
  transform: scale(0.95);
}

.floating-messaging-btn.visible {
  display: none !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

#messagingSystemOverlay,
.messaging-overlay {
  display: none !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

@media (max-width: 1200px) {
  .messaging-overlay {
    right: 20px;
  }

  .floating-messaging-btn {
    right: 20px;
    bottom: 520px;
  }
}

@media (max-width: 480px) {
  .floating-messaging-btn {
    width: 48px;
    height: 48px;
    font-size: 20px;
    bottom: 420px;
  }
}

/* ===============================
   Tracking Enhancements Animations
================================= */

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideInDown {
  from {
    opacity: 0;
    transform: translateY(-30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes staggerFadeIn {
  0% { opacity: 0; transform: translateY(10px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

@keyframes glow {
  0%, 100% { box-shadow: 0 0 5px rgba(0, 120, 215, 0.5); }
  50% { box-shadow: 0 0 20px rgba(0, 120, 215, 0.8); }
}

@keyframes lineAnimation {
  from { stroke-dashoffset: 1000; }
  to { stroke-dashoffset: 0; }
}

@keyframes shimmer {
  0% { background-position: -1000px 0; }
  100% { background-position: 1000px 0; }
}

@keyframes expandHeight {
  from { max-height: 0; opacity: 0; }
  to { max-height: 500px; opacity: 1; }
}

@keyframes collapseHeight {
  from { max-height: 500px; opacity: 1; }
  to { max-height: 0; opacity: 0; }
}

@keyframes toastSlideIn {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes toastSlideOut {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(100%);
  }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(-45deg); opacity: 0; }
  50% { transform: scale(1.2); }
  100% { transform: scale(1) rotate(0); opacity: 1; }
}

/* Loading Spinner */
.tracking-spinner {
  width: 40px;
  height: 40px;
  border: 4px solid rgba(0, 120, 215, 0.2);
  border-top-color: #0078d7;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto;
}

/* Pulse Animation */
.pulse-btn {
  animation: pulse 2s infinite;
}

/* Modal Entry Animation */
.tracking-modal-overlay.active {
  animation: fadeIn 0.3s ease-out;
}

.tracking-modal-container {
  animation: slideInUp 0.5s ease-out;
}

/* Staggered Content Reveals */
.tracking-modal-map-section {
  animation: slideInDown 0.6s ease-out 0.1s both;
}

.tracking-info-card {
  animation: staggerFadeIn 0.6s ease-out both;
}

.tracking-info-card:nth-child(1) { animation-delay: 0.3s; }
.tracking-info-card:nth-child(2) { animation-delay: 0.5s; }

.tracking-modal-action-btn {
  animation: staggerFadeIn 0.6s ease-out 0.7s both;
}

/* Tracking Timeline Styles */
.tracking-timeline {
  position: relative;
  padding: 20px 0;
}

.timeline-container {
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 20px;
  background: var(--bg-light);
  border-radius: 12px;
  border: 1px solid rgba(0, 120, 215, 0.2);
}

[data-theme="dark"] .timeline-container {
  background: var(--bg-dark);
  border-color: rgba(0, 182, 241, 0.2);
}

.timeline-item {
  display: flex;
  gap: 15px;
  position: relative;
  animation: slideInUp 0.5s ease-out;
}

.timeline-item::before {
  content: '';
  position: absolute;
  left: 8px;
  top: 35px;
  width: 2px;
  height: calc(100% + 20px);
  background: rgba(0, 120, 215, 0.2);
}

.timeline-item:last-child::before {
  display: none;
}

.timeline-marker {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #0078d7;
  border: 3px solid var(--bg-light);
  flex-shrink: 0;
  position: relative;
  z-index: 1;
  margin-top: 2px;
  box-shadow: 0 0 0 4px rgba(0, 120, 215, 0.1);
}

[data-theme="dark"] .timeline-marker {
  border-color: var(--bg-dark);
}

.timeline-marker.completed {
  background: #10b981;
  animation: checkmark 0.6s ease-out;
}

.timeline-marker.current {
  background: #f59e0b;
  animation: pulse 2s infinite;
}

.timeline-content {
  flex: 1;
  padding-top: 5px;
}

.timeline-label {
  font-weight: 600;
  color: var(--text-light);
  margin-bottom: 4px;
  font-size: 14px;
}

[data-theme="dark"] .timeline-label {
  color: var(--text-dark);
}

.timeline-time {
  font-size: 12px;
  color: #888;
  margin-bottom: 4px;
}

.timeline-location {
  font-size: 12px;
  color: #666;
}

[data-theme="dark"] .timeline-location {
  color: #aaa;
}

/* Progress Bar */
.progress-container {
  width: 100%;
  height: 8px;
  background: rgba(0, 120, 215, 0.1);
  border-radius: 10px;
  overflow: hidden;
  margin: 15px 0;
}

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, #0078d7, #00b6f1);
  border-radius: 10px;
  transition: width 0.6s ease-out;
  position: relative;
}

.progress-bar::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: shimmer 2s infinite;
}

/* Event Log */
.event-log-container {
  padding: 20px;
  background: var(--bg-light);
  border-radius: 12px;
  border: 1px solid rgba(0, 120, 215, 0.2);
  margin-top: 20px;
}

[data-theme="dark"] .event-log-container {
  background: var(--bg-dark);
  border-color: rgba(0, 182, 241, 0.2);
}

.event-log-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  user-select: none;
  font-weight: 600;
  color: var(--text-light);
  margin-bottom: 0;
}

[data-theme="dark"] .event-log-header {
  color: var(--text-dark);
}

.event-log-header:hover {
  color: #0078d7;
}

.event-log-toggle {
  font-size: 20px;
  transition: transform 0.3s ease;
}

.event-log-toggle.expanded {
  transform: rotate(180deg);
}

.event-log-items {
  max-height: 0;
  overflow: hidden;
  animation: expandHeight 0.3s ease-out forwards;
}

.event-log-items.collapsed {
  animation: collapseHeight 0.3s ease-out forwards;
}

.event-log-item {
  display: flex;
  gap: 15px;
  padding: 12px 0;
  border-bottom: 1px solid rgba(0, 120, 215, 0.1);
  font-size: 14px;
}

.event-log-item:last-child {
  border-bottom: none;
}

.event-log-icon {
  font-size: 18px;
  flex-shrink: 0;
}

.event-log-details {
  flex: 1;
}

.event-log-title {
  font-weight: 600;
  margin-bottom: 4px;
  color: var(--text-light);
}

[data-theme="dark"] .event-log-title {
  color: var(--text-dark);
}

.event-log-time {
  font-size: 12px;
  color: #888;
}

/* Toast Notifications */
.toast-container {
  position: fixed;
  top: 80px;
  right: 20px;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.toast {
  background: #10b981;
  color: white;
  padding: 14px 20px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  animation: toastSlideIn 0.3s ease-out;
  display: flex;
  align-items: center;
  gap: 10px;
  max-width: 350px;
  word-wrap: break-word;
}

.toast.error {
  background: #ef4444;
}

.toast.warning {
  background: #f59e0b;
}

.toast.info {
  background: #0078d7;
}

.toast.remove {
  animation: toastSlideOut 0.3s ease-out forwards;
}

.toast-icon {
  font-size: 18px;
  flex-shrink: 0;
}

/* Loading State */
.tracking-form-loading .track-btn {
  animation: pulse 1.5s infinite;
  opacity: 0.8;
}

.track-btn {
  transition: all 0.3s ease;
}

/* Skeleton Loading */
.skeleton {
  background: linear-gradient(90deg, rgba(0, 120, 215, 0.1), rgba(0, 120, 215, 0.3), rgba(0, 120, 215, 0.1));
  background-size: 200% 100%;
  animation: shimmer 2s infinite;
  border-radius: 8px;
}

.skeleton-text {
  height: 16px;
  margin: 8px 0;
  border-radius: 4px;
}

.skeleton-bar {
  height: 8px;
  margin: 10px 0;
  border-radius: 4px;
}

/* Glow Effect */
.glow-effect {
  animation: glow 2s infinite;
}

/* Status Badges with Animation */
.status-badge {
  display: inline-block;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  animation: slideInDown 0.4s ease-out;
}

.status-badge.pending {
  background: rgba(249, 158, 11, 0.2);
  color: #f59e0b;
  border: 1px solid #f59e0b;
}

.status-badge.in-transit {
  background: rgba(59, 130, 246, 0.2);
  color: #3b82f6;
  border: 1px solid #3b82f6;
  animation: pulse 2s infinite;
}

.status-badge.delivered {
  background: rgba(16, 185, 129, 0.2);
  color: #10b981;
  border: 1px solid #10b981;
}

.status-badge.failed {
  background: rgba(239, 68, 68, 0.2);
  color: #ef4444;
  border: 1px solid #ef4444;
}

/* Map Controls with Animation */
.tracking-modal-map-controls {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.map-control-btn {
  padding: 8px 12px;
  border: none;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.9);
  color: #222;
  cursor: pointer;
  font-size: 12px;
  font-weight: 600;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.map-control-btn:hover {
  background: white;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.map-control-btn:active {
  transform: translateY(0);
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .tracking-modal-content {
    flex-direction: column;
  }

  .toast-container {
    right: 10px;
    left: 10px;
  }

  .toast {
    max-width: 100%;
  }

  .timeline-item {
    gap: 12px;
  }

  .timeline-marker {
    width: 14px;
    height: 14px;
  }
}

@media (max-width: 480px) {
  .tracking-info-card {
    padding: 12px;
  }

  .toast {
    padding: 12px 16px;
    font-size: 13px;
  }

  .event-log-container {
    padding: 15px;
  }

  .progress-container {
    margin: 10px 0;
  }
}

```

```my-frontend\src\ChatBox.jsx
import React, { useEffect, useMemo, useRef, useState } from "react";
import { auth, db } from "./firebase";
import VoiceAssistant from "./VoiceAssistant";
import {
  collection,
  doc,
  setDoc,
  getDoc,
  updateDoc,
  addDoc,
  onSnapshot,
  serverTimestamp,
  query,
  orderBy,
} from "firebase/firestore";

/*
Firestore data model
- threads/{uid}: { userId, agentRequested: boolean, updatedAt }
- threads/{uid}/messages/{messageId}: {
    from: 'customer' | 'admin' | 'bot',
    text: string,
    ts: Timestamp,
    status: 'sent' | 'delivered' | 'read'
  }

Behavior
- Customer can send messages and request a human agent (sets agentRequested=true)
- When customer receives admin/bot messages, client marks them as delivered/read
- Status for customer-sent messages gets updated by the admin console
*/

function StatusTick({ status }) {
  // Minimal status indicator
  if (!status || status === "sent") return <span title="Sent">‚úì</span>;
  if (status === "delivered") return <span title="Delivered">‚úì‚úì</span>;
  if (status === "read") return <span title="Read">‚úì‚úì</span>;
  return null;
}

function ChatBox() {
  const user = auth.currentUser;
  const uid = user?.uid || "anonymous"; // requires login for per-user thread
  const [messages, setMessages] = useState([]);
  const [input, setInput] = useState("");
  const [agentRequested, setAgentRequested] = useState(false);
  const [loading, setLoading] = useState(true);
  const [botResponse, setBotResponse] = useState("");
  const listRef = useRef(null);

  useEffect(() => {
    console.log("‚úÖ ChatBox mounted, VoiceAssistant should be visible");
  }, []);

  const threadRef = useMemo(() => doc(db, "threads", uid), [db, uid]);
  const messagesCol = useMemo(
    () => collection(db, "threads", uid, "messages"),
    [db, uid]
  );

  // Ensure thread doc exists and subscribe to messages
  useEffect(() => {
    let unsub = () => {};
    let mounted = true;

    (async () => {
      try {
        // Ensure thread doc exists
        const snap = await getDoc(threadRef);
        if (!snap.exists()) {
          await setDoc(threadRef, {
            userId: uid,
            agentRequested: false,
            updatedAt: serverTimestamp(),
          });
        } else {
          const data = snap.data();
          if (mounted) setAgentRequested(!!data.agentRequested);
        }

        // Subscribe to messages ordered by timestamp
        const q = query(messagesCol, orderBy("ts", "asc"));
        unsub = onSnapshot(q, async (snapshot) => {
          const docs = snapshot.docs.map((d) => ({ id: d.id, ...d.data() }));
          setMessages(docs);

          // Auto-scroll to latest
          if (listRef.current) {
            listRef.current.scrollTop = listRef.current.scrollHeight;
          }

          // Mark incoming admin/bot messages as delivered then read
          const updates = [];
          for (const d of snapshot.docs) {
            const m = d.data();
            if (m.from !== "customer") {
              if (m.status === "sent") {
                updates.push(
                  updateDoc(doc(messagesCol, d.id), { status: "delivered" })
                );
              }
              // Consider them read when chat is open and message is visible
              if (m.status !== "read") {
                updates.push(
                  updateDoc(doc(messagesCol, d.id), { status: "read" })
                );
              }
            }
          }
          if (updates.length) {
            // Execute sequentially to avoid contention
            for (const u of updates) {
              try {
                await u;
              } catch (e) {
                // best-effort
                console.warn("message status update failed", e);
              }
            }
          }
        });
      } catch (e) {
        console.error("Chat init failed", e);
      } finally {
        if (mounted) setLoading(false);
      }
    })();

    return () => {
      mounted = false;
      try {
        unsub();
      } catch {}
    };
  }, [threadRef, messagesCol, uid]);

  const sendMessage = async () => {
    const text = input.trim();
    if (!text) return;
    setInput("");

    try {
      // Add customer message
      await addDoc(messagesCol, {
        from: "customer",
        text,
        ts: serverTimestamp(),
        status: "sent",
      });
      await updateDoc(threadRef, { updatedAt: serverTimestamp() });

      const lower = text.toLowerCase();

      // Track-related phrases for bot to provide tracking info
      const trackingPhrases = [
        "tracking",
        "track my package",
        "where is my package",
        "package status",
        "delivery status",
        "is my package",
        "when will my package",
      ];

      const trackingDetected = trackingPhrases.some((p) => lower.includes(p));

      if (trackingDetected) {
        try {
          // Try to fetch tracking info by customer name
          const response = await fetch(
            `http://localhost:5000/api/bot/tracking-suggestions?customerName=${encodeURIComponent(
              user?.displayName || "Customer"
            )}`
          );

          if (response.ok) {
            const trackingData = await response.json();

            if (Array.isArray(trackingData) && trackingData.length > 0) {
              const tracking = trackingData[0];
              const botMessage = `üì¶ **Your Package Tracking**\n\nüÜî Tracking ID: ${tracking.trackingId}\nüìç Status: ${tracking.status}\nüìß Recipient: ${tracking.user.fullName}\nüïê Last Updated: ${new Date(
                tracking.updatedAt
              ).toLocaleString()}\n\nLocation: ${tracking.location.lat.toFixed(
                4
              )}, ${tracking.location.lng.toFixed(4)}`;

              await addDoc(messagesCol, {
                from: "bot",
                text: botMessage,
                ts: serverTimestamp(),
                status: "sent",
              });
            }
          }
        } catch (e) {
          console.warn("Tracking lookup failed:", e);
        }
        return;
      }

      // Intent detection to auto-escalate to admin
      const escalatePhrases = [
        "speak with agent",
        "speak with human",
        "speak to agent",
        "talk to agent",
        "talk to human",
        "talk with human",
        "human agent",
        "live agent",
      ];

      if (escalatePhrases.some((p) => lower.includes(p))) {
        try {
          await setDoc(
            threadRef,
            { agentRequested: true, updatedAt: serverTimestamp() },
            { merge: true }
          );
          setAgentRequested(true);
          await addDoc(messagesCol, {
            from: "bot",
            text: "üöÄ I've connected you with our support team. An agent will be with you shortly!",
            ts: serverTimestamp(),
            status: "sent",
          });
        } catch (e) {
          console.warn("auto-escalation setDoc failed", e);
        }
        return;
      }

      // General AI chat for non-tracking, non-escalation messages
      let botReply = "I'm here to help! How can I assist you?";

      try {
        console.log("ü§ñ Calling AI endpoint with message:", text);
        const aiResponse = await fetch("http://localhost:5000/api/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: text }),
        });

        console.log("ü§ñ AI response status:", aiResponse.status);

        if (aiResponse.ok) {
          const data = await aiResponse.json();
          console.log("ü§ñ AI response data:", data);
          if (data.reply && data.reply.trim()) {
            botReply = data.reply;
          }
        } else {
          console.warn(
            "‚ö†Ô∏è AI endpoint returned non-ok status:",
            aiResponse.status
          );
          botReply =
            "I'm experiencing a temporary issue, but I'm here to help. What do you need?";
        }
      } catch (e) {
        console.error("‚ùå AI chat error:", e);
        botReply =
          "I'm temporarily unavailable. Would you like to connect with a human agent?";
      }

      // Always send a bot response
      console.log("üì§ Sending bot response:", botReply);
      setBotResponse(botReply);
      await addDoc(messagesCol, {
        from: "bot",
        text: botReply,
        ts: serverTimestamp(),
        status: "sent",
      });
    } catch (e) {
      console.error("sendMessage failed", e);
    }
  };

  const onRequestAgent = async () => {
    try {
      await setDoc(
        threadRef,
        { agentRequested: true, updatedAt: serverTimestamp() },
        { merge: true }
      );
      setAgentRequested(true);
    } catch (e) {
      console.error("request agent failed", e);
    }
  };

  return (
    <div
      className="chatbox-container"
      style={{
        border: "1px solid #ddd",
        borderRadius: 8,
        maxWidth: 480,
        display: "flex",
        flexDirection: "column",
      }}
    >
      <div
        style={{
          display: "flex",
          alignItems: "center",
          padding: 8,
          borderBottom: "1px solid #eee",
        }}
      >
        <strong style={{ flex: 1 }}>Support Chat</strong>
        <button onClick={onRequestAgent} disabled={agentRequested}>
          {agentRequested ? "Agent Requested" : "Request Human Agent"}
        </button>
      </div>

      <div
        ref={listRef}
        className="chatbox-messages"
        style={{ height: 320, overflowY: "auto", padding: 12, flex: 1 }}
      >
        {loading && <p>Loading chat‚Ä¶</p>}
        {!loading && messages.length === 0 && (
          <p style={{ color: "#666" }}>
            No messages yet. Start the conversation.
          </p>
        )}
        {messages.map((m) => {
          const hasLocation =
            m.meta &&
            m.meta.location &&
            typeof m.meta.location.lat === "number" &&
            typeof m.meta.location.lng === "number";
          const hasPkgStatus = m.meta && m.meta.pkgStatus;
          const mapsHref = hasLocation
            ? `https://www.google.com/maps?q=${m.meta.location.lat},${m.meta.location.lng}`
            : null;
          return (
            <div
              key={m.id}
              className={`chatbox-message ${
                m.from === "customer"
                  ? "chatbox-user"
                  : m.from === "admin"
                  ? "chatbox-admin"
                  : "chatbox-bot"
              }`}
              style={{
                display: "flex",
                flexDirection: "column",
                alignItems: m.from === "customer" ? "flex-end" : "flex-start",
                marginBottom: 8,
              }}
            >
              <div
                style={{
                  background:
                    m.from === "customer"
                      ? "#daf1ff"
                      : m.from === "admin"
                      ? "#f4f6ff"
                      : "#f9f9f9",
                  padding: "6px 10px",
                  borderRadius: 8,
                  maxWidth: "80%",
                  whiteSpace: "pre-wrap",
                }}
              >
                <strong>
                  {m.from === "customer"
                    ? "You"
                    : m.from === "admin"
                    ? "Admin"
                    : "SwiftBot"}
                </strong>
                <div style={{ fontStyle: "italic" }}>{m.text}</div>
                {hasPkgStatus && (
                  <div style={{ marginTop: 6 }}>
                    <span
                      style={{
                        fontSize: 12,
                        color: "#0c5460",
                        background: "#d1ecf1",
                        padding: "2px 6px",
                        borderRadius: 6,
                      }}
                    >
                      Status: {String(m.meta.pkgStatus).replace("_", " ")}
                    </span>
                  </div>
                )}
                {hasLocation && (
                  <div style={{ marginTop: 6 }}>
                    <a
                      href={mapsHref}
                      target="_blank"
                      rel="noreferrer"
                      style={{ fontSize: 12 }}
                    >
                      View package location on map
                    </a>
                  </div>
                )}
              </div>
              {m.from === "customer" && (
                <div
                  style={{ fontSize: 12, color: "#888", marginTop: 2 }}
                >
                  <StatusTick status={m.status} />
                </div>
              )}
            </div>
          );
        })}
      </div>

      <div
        style={{
          padding: 12,
          borderTop: "2px solid #06b6d4",
          backgroundColor: "#fff",
        }}
      >
        <p
          style={{
            margin: "0 0 10px 0",
            fontSize: 13,
            fontWeight: 600,
            color: "#0369a1",
          }}
        >
          üé§ Voice Commands:
        </p>
        <VoiceAssistant
          onSendMessage={(voiceText) => {
            if (voiceText.trim()) {
              addDoc(messagesCol, {
                from: "customer",
                text: voiceText.trim(),
                ts: serverTimestamp(),
                status: "sent",
              }).then(() => {
                updateDoc(threadRef, { updatedAt: serverTimestamp() });
              });
            }
          }}
          userId={uid}
        />
      </div>

      <div
        className="chatbox-input"
        style={{
          display: "flex",
          gap: 8,
          padding: 8,
          borderTop: "1px solid #eee",
        }}
      >
        <input
          type="text"
          value={input}
          onChange={(e) => setInput(e.target.value)}
          onKeyDown={(e) => {
            if (e.key === "Enter") sendMessage();
          }}
          placeholder="Type your message‚Ä¶"
          style={{ flex: 1, padding: 8 }}
        />
        <button onClick={sendMessage}>Send</button>
      </div>
    </div>
  );
}

export default ChatBox;

```

```my-frontend\src\components\AdminRoute.jsx

```

```my-frontend\src\components\SideMenu.jsx
import React from 'react';
import { Link } from 'react-router-dom'; // Assuming navigation will use react-router-dom

function SideMenu() {
  return (
    <aside id="sideMenu" className="animated-sidebar">
      <button id="closeMenu">‚úñ</button>
      <ul>
        <li><Link to="/" data-i18n="home">Home</Link></li>
        <li><Link to="/gallery" data-i18n="gallery">Gallery</Link></li>
        <li><Link to="/services" data-i18n="services">Services</Link></li>
        <li><Link to="/track" data-i18n="track">Track</Link></li>
        <li><Link to="/login" data-i18n="login">Login</Link></li>
        <li><Link to="/register" data-i18n="register">Register</Link></li>
        <li>
          <select id="sidebarLanguageSelect">
            <option value="en">English</option>
            <option value="fr">Fran√ßais</option>
            <option value="es">Espa√±ol</option>
            <option value="de">Deutsch</option>
            <option value="zh">‰∏≠Êñá</option>
            <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
          </select>
        </li>
      </ul>
    </aside>
  );
}

export default SideMenu;
```

```my-frontend\src\components\Login.jsx

```

```my-frontend\src\components\Header.jsx
import React from 'react';
import { Link } from 'react-router-dom'; // Assuming navigation will use react-router-dom

function Header() {
  return (
    <header className="header blur-header">
      <div className="logo">‚úàÔ∏è SwiftDelivery</div>
      <nav className="top-nav">
        <ul>
          <li><Link to="/" data-i18n="home">Home</Link></li>
          <li><Link to="/gallery" data-i18n="gallery">Gallery</Link></li>
          <li><Link to="/services" data-i18n="services">Services</Link></li>
          <li><Link to="/track" data-i18n="track">Track</Link></li>
          <li><Link to="/login" data-i18n="login">Login</Link></li>
          <li><Link to="/register" data-i18n="register">Register</Link></li>
          <li>
            <select id="languageSelect">
              <option value="en">English</option>
              <option value="fr">Fran√ßais</option>
              <option value="es">Espa√±ol</option>
              <option value="de">Deutsch</option>
              <option value="zh">‰∏≠Êñá</option>
              <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            </select>
          </li>
        </ul>
      </nav>
      <div className="theme-switcher">
        <label htmlFor="themeToggle">üåô</label>
        <input type="checkbox" id="themeToggle" />
      </div>
      <button id="menuToggle">‚ò∞</button>
    </header>
  );
}

export default Header;
```

```my-frontend\src\main.jsx
// main.jsx
import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App.jsx";

ReactDOM.createRoot(document.getElementById("root")).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);


```

```my-frontend\src\LoginForm.jsx
import React, { useState } from "react";

function LoginForm({ onLogin }) {
  const [formData, setFormData] = useState({
    email: "",
    password: ""
  });
  const [message, setMessage] = useState("");
  const [loading, setLoading] = useState(false);

  const handleChange = (e) => {
    setFormData({ ...formData, [e.target.name]: e.target.value });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    setMessage("");

    try {
      const response = await fetch("http://localhost:5000/api/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          email: formData.email,
          password: formData.password
        }),
      });

      const data = await response.json();
      if (response.ok) {
        localStorage.setItem("token", data.token); // Save JWT
        setMessage("‚úÖ Logged in successfully!");
        if (onLogin) onLogin(data.token);
        // Smoothly scroll to top or show a success state; profile navigation occurs in parent after token set
        try { window.location.hash = ''; } catch {}
      } else {
        setMessage(`‚ùå Error: ${data.error || "Login failed"}`);
      }
    } catch (err) {
      setMessage("‚ùå Backend not reachable. Make sure it's running on port 5000.");
      console.error(err);
    } finally {
      setLoading(false);
    }
  };

  return (
    <form onSubmit={handleSubmit} style={{ maxWidth: "400px", margin: "20px auto", padding: "20px", border: "1px solid #ccc", borderRadius: "8px" }}>
      <h2>Login</h2>
      <input 
        id="loginEmail" 
        name="email" 
        type="email" 
        placeholder="Email" 
        value={formData.email}
        onChange={handleChange} 
        required
        style={{ width: "100%", padding: "8px", marginBottom: "10px", boxSizing: "border-box" }}
      />
      <input 
        id="loginPassword" 
        name="password" 
        type="password" 
        placeholder="Password" 
        value={formData.password}
        onChange={handleChange} 
        required
        style={{ width: "100%", padding: "8px", marginBottom: "10px", boxSizing: "border-box" }}
      />
      <button 
        id="loginButton"
        type="submit" 
        disabled={loading}
        style={{ width: "100%", padding: "10px", backgroundColor: "#2566ff", color: "white", border: "none", borderRadius: "4px", cursor: "pointer" }}
      >
        {loading ? "Logging in..." : "Login"}
      </button>
      {message && <p style={{ marginTop: "10px", textAlign: "center" }}>{message}</p>}
    </form>
  );
}

export default LoginForm;

```

```my-frontend\src\LiveTrackingMap.jsx
import React, { useState, useEffect, useRef, useCallback } from 'react';
import L from 'leaflet';
import 'leaflet/dist/leaflet.css';
import './LiveTrackingMap.css';

const PACKAGE_STATUSES = [
  'Pending Pickup',
  'Pickup Assigned',
  'Pickup Accepted',
  'Enroute to Facility',
  'Arrived at Hub or Facility',
  'In Transit',
  'Out for Delivery',
  'Delivered',
  'Awaiting Receipt',
  'Delivery Failed',
  'Returned to Sender'
];

const API_BASE_URL = 'http://localhost:5000';

const LiveTrackingMap = () => {
  const mapRef = useRef(null);
  const [map, setMap] = useState(null);
  const [verifiedUsers, setVerifiedUsers] = useState([]);
  const [selectedUser, setSelectedUser] = useState(null);
  const [selectedStatus, setSelectedStatus] = useState(PACKAGE_STATUSES[0]);
  const [isPinMode, setIsPinMode] = useState(false);
  const [currentMarker, setCurrentMarker] = useState(null);
  const [allMarkers, setAllMarkers] = useState([]);
  const [generatedTrackingId, setGeneratedTrackingId] = useState(null);
  const [trackingRecords, setTrackingRecords] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [successMessage, setSuccessMessage] = useState(null);

  // Get auth token
  const getToken = () => localStorage.getItem('token');

  // Initialize Leaflet Map
  useEffect(() => {
    try {
      if (!mapRef.current) {
        console.warn('Map ref not available');
        return;
      }

      const newMap = L.map(mapRef.current).setView([6.5244, 3.3792], 11);
      
      const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '¬© OpenStreetMap contributors',
        maxZoom: 19,
        name: 'Street Map'
      });

      const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: '¬© Esri',
        maxZoom: 18,
        name: 'Satellite'
      });

      osm.addTo(newMap);

      L.control.layers({ 'Street Map': osm, 'Satellite': satellite }).addTo(newMap);

      setMap(newMap);

      return () => {
        newMap.remove();
      };
    } catch (err) {
      console.error('Error initializing Leaflet map:', err);
      setError('Failed to initialize map: ' + err.message);
    }
  }, []);

  // Add click listener to map when isPinMode changes
  useEffect(() => {
    if (!map) return;

    const handleClick = (e) => {
      if (isPinMode && selectedUser) {
        handleMapClick(e);
      }
    };

    map.on('click', handleClick);

    return () => {
      map.off('click', handleClick);
    };
  }, [map, isPinMode, selectedUser, selectedStatus]);

  // Fetch verified users
  useEffect(() => {
    fetchVerifiedUsers();
    fetchTrackingRecords();
  }, []);

  // Display existing tracking records on map
  useEffect(() => {
    if (!map || !trackingRecords.length) return;

    // Clear existing markers
    allMarkers.forEach(marker => map.removeLayer(marker));

    const newMarkers = trackingRecords.map(record => {
      const icon = getMarkerIcon(record.status);
      const marker = L.marker([record.location.lat, record.location.lng], { icon })
        .addTo(map);

      const popupContent = `
        <div style="font-size: 13px;">
          <strong style="color: #4f46e5;">${record.user.fullName}</strong><br/>
          <div style="margin-top: 6px;">
            <strong>üìß Email:</strong> ${record.user.email}<br/>
            <strong>üì¶ Status:</strong> <span style="color: ${getStatusColor(record.status)}; font-weight: 600;">${record.status}</span><br/>
            <strong>üÜî Tracking:</strong> <span style="font-family: monospace; color: #4f46e5;">${record.trackingId}</span><br/>
            <strong>üïê Updated:</strong> ${new Date(record.updatedAt).toLocaleString()}
          </div>
        </div>
      `;

      marker.bindPopup(popupContent);
      return marker;
    });

    setAllMarkers(newMarkers);
  }, [map, trackingRecords]);

  const getMarkerIcon = (status) => {
    const colorMap = {
      'Pending Pickup': '#f59e0b',
      'Pickup Assigned': '#3b82f6',
      'Pickup Accepted': '#10b981',
      'Enroute to Facility': '#8b5cf6',
      'Arrived at Hub or Facility': '#6366f1',
      'In Transit': '#06b6d4',
      'Out for Delivery': '#f97316',
      'Delivered': '#22c55e',
      'Awaiting Receipt': '#14b8a6',
      'Delivery Failed': '#ef4444',
      'Returned to Sender': '#64748b'
    };
    const color = colorMap[status] || '#9ca3af';
    
    return L.divIcon({
      html: `<div style="
        background-color: ${color};
        width: 30px;
        height: 30px;
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
      ">üì¶</div>`,
      iconSize: [36, 36],
      className: 'custom-icon'
    });
  };

  const getStatusColor = (status) => {
    const statusColors = {
      'Pending Pickup': '#f59e0b',
      'Pickup Assigned': '#3b82f6',
      'Pickup Accepted': '#10b981',
      'Enroute to Facility': '#8b5cf6',
      'Arrived at Hub or Facility': '#6366f1',
      'In Transit': '#06b6d4',
      'Out for Delivery': '#f97316',
      'Delivered': '#22c55e',
      'Awaiting Receipt': '#14b8a6',
      'Delivery Failed': '#ef4444',
      'Returned to Sender': '#64748b'
    };
    return statusColors[status] || '#9ca3af';
  };

  const fetchVerifiedUsers = async () => {
    try {
      setError(null);
      const token = getToken();
      const response = await fetch(`${API_BASE_URL}/api/admin/verified-users`, {
        headers: {
          'Authorization': `Bearer ${token}`
        }
      });
      
      if (!response.ok) {
        throw new Error('Failed to fetch verified users');
      }
      
      const data = await response.json();
      setVerifiedUsers(Array.isArray(data) ? data : []);
    } catch (err) {
      console.error('Error fetching verified users:', err);
      setError('Failed to load verified users. Make sure you are logged in as admin.');
    }
  };

  const fetchTrackingRecords = async () => {
    try {
      const token = getToken();
      if (!token) {
        console.warn('No token available for fetching tracking records');
        setTrackingRecords([]);
        return;
      }

      const response = await fetch(`${API_BASE_URL}/api/admin/tracking`, {
        headers: {
          'Authorization': `Bearer ${token}`
        }
      });
      
      if (!response.ok) {
        throw new Error(`Failed to fetch tracking records (${response.status})`);
      }
      
      const data = await response.json();
      setTrackingRecords(Array.isArray(data) ? data : []);
    } catch (err) {
      console.error('Error fetching tracking records:', err);
      setTrackingRecords([]);
    }
  };

  const handleUserSelect = (user) => {
    setSelectedUser(user);
    setGeneratedTrackingId(null);
    setSuccessMessage(null);
    setError(null);
  };

  const handleMapClick = useCallback(async (e) => {
    try {
      console.log('Map clicked. isPinMode:', isPinMode, 'selectedUser:', selectedUser ? selectedUser.name : null);
      
      if (!isPinMode || !selectedUser || !map) {
        console.log('Skipping click - isPinMode:', isPinMode, 'selectedUser:', !!selectedUser, 'map:', !!map);
        return;
      }

      const location = {
        lat: e.latlng.lat,
        lng: e.latlng.lng
      };
      
      console.log('Creating marker at:', location);

      // Remove previous temporary marker
      if (currentMarker) {
        map.removeLayer(currentMarker);
      }

      // Create a temporary marker
      const icon = getMarkerIcon(selectedStatus);
      const marker = L.marker([location.lat, location.lng], { icon }).addTo(map);

      const popupContent = `
        <div style="font-size: 13px;">
          <strong style="color: #4f46e5;">${selectedUser.name}</strong><br/>
          <strong>üìß Email:</strong> ${selectedUser.email}<br/>
          <strong>üì¶ Status:</strong> <span style="color: ${getStatusColor(selectedStatus)}; font-weight: 600;">${selectedStatus}</span><br/>
          <strong>üìç Location:</strong> ${location.lat.toFixed(4)}, ${location.lng.toFixed(4)}
        </div>
      `;

      marker.bindPopup(popupContent).openPopup();
      setCurrentMarker(marker);
      
      console.log('Saving tracking record...');
      // Save the tracking record
      await saveTrackingRecord(location);
      setIsPinMode(false);
    } catch (err) {
      console.error('Error in handleMapClick:', err);
      setError('Failed to process map click. Please try again.');
      setIsPinMode(false);
    }
  }, [isPinMode, selectedUser, map, selectedStatus, currentMarker]);

  const saveTrackingRecord = async (location) => {
    setLoading(true);
    setError(null);
    
    try {
      const token = getToken();
      if (!token) {
        throw new Error('No authentication token found. Please log in again.');
      }

      if (!selectedUser || !selectedUser._id) {
        throw new Error('No user selected. Please select a verified user.');
      }

      console.log('Sending tracking request:', { userId: selectedUser._id, status: selectedStatus, location });

      const response = await fetch(`${API_BASE_URL}/api/admin/tracking`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${token}`
        },
        body: JSON.stringify({
          userId: selectedUser._id,
          status: selectedStatus,
          location
        })
      });

      console.log('Response status:', response.status);

      if (!response.ok) {
        let errorMessage = `Failed to save tracking record (${response.status})`;
        try {
          const errorData = await response.json();
          errorMessage = errorData.message || errorMessage;
        } catch (jsonErr) {
          const textError = await response.text();
          console.error('Error response text:', textError);
        }
        throw new Error(errorMessage);
      }

      const data = await response.json();
      console.log('Response data:', data);
      
      if (!data.trackingId) {
        throw new Error('No tracking ID returned from server');
      }

      console.log('Tracking ID generated:', data.trackingId);
      setGeneratedTrackingId(data.trackingId);
      setSuccessMessage('‚úÖ Tracking record created successfully!');
      setError(null);
      
      // Refresh tracking records
      await fetchTrackingRecords();
    } catch (err) {
      const errorMsg = err.message || 'Failed to save tracking record';
      console.error('Error saving tracking record:', err);
      setError(errorMsg);
      setGeneratedTrackingId(null);
    } finally {
      setLoading(false);
    }
  };

  const handlePinModeToggle = () => {
    if (!selectedUser) {
      setError('Please select a verified user first.');
      return;
    }
    setIsPinMode(!isPinMode);
    setError(null);
  };

  const copyTrackingId = async () => {
    if (generatedTrackingId) {
      try {
        await navigator.clipboard.writeText(generatedTrackingId);
        setSuccessMessage('Tracking ID copied to clipboard!');
        setTimeout(() => setSuccessMessage(null), 3000);
      } catch (err) {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = generatedTrackingId;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        setSuccessMessage('Tracking ID copied to clipboard!');
        setTimeout(() => setSuccessMessage(null), 3000);
      }
    }
  };

  return (
    <section className="live-tracking-section">
      <h2 className="section-title">üìç Live Package Tracking Map</h2>
      
      {error && <div className="error-message">‚ö†Ô∏è {error}</div>}
      {successMessage && <div className="success-message">‚úÖ {successMessage}</div>}
      
      <div className="tracking-layout">
        {/* Sidebar - Verified Users */}
        <div className="tracking-sidebar">
          <h3 className="sidebar-title">üë• Verified Users ({verifiedUsers.length})</h3>
          <p className="sidebar-hint">Select a user to assign package tracking</p>
          <div className="users-list">
            {verifiedUsers.length === 0 ? (
              <div className="no-users">
                <span className="no-users-icon">üì≠</span>
                <p>No verified users available</p>
                <small>Verify users in the Users tab first</small>
              </div>
            ) : (
              verifiedUsers.map((user) => (
                <button
                  key={user._id}
                  className={`user-item ${selectedUser?._id === user._id ? 'active' : ''}`}
                  onClick={() => handleUserSelect(user)}
                  title={`${user.name} - ${user.email}`}
                >
                  <div className="user-avatar">
                    {user.name?.charAt(0)?.toUpperCase() || '?'}
                  </div>
                  <div className="user-info">
                    <strong>{user.name}</strong>
                    <span className="user-email">{user.email}</span>
                  </div>
                  {selectedUser?._id === user._id && (
                    <span className="selected-badge">‚úì</span>
                  )}
                </button>
              ))
            )}
          </div>
        </div>

        {/* Map Area */}
        <div className="tracking-map-wrapper">
          <div ref={mapRef} className="tracking-map" id="adminMap">
            {!map && (
              <div className="map-loading">
                <div className="loading-spinner"></div>
                <p>Loading map...</p>
              </div>
            )}
          </div>

          {/* Controls */}
          <div className="tracking-controls">
            <div className="selected-user-display">
              {selectedUser ? (
                <div className="selected-user-info">
                  <span className="label">Selected:</span>
                  <span className="user-name">{selectedUser.name}</span>
                </div>
              ) : (
                <span className="no-selection">No user selected</span>
              )}
            </div>

            <div className="status-control">
              <label htmlFor="statusSelect">üì¶ Package Status:</label>
              <select
                id="statusSelect"
                className="status-select"
                value={selectedStatus}
                onChange={(e) => setSelectedStatus(e.target.value)}
                disabled={!selectedUser}
              >
                {PACKAGE_STATUSES.map((status) => (
                  <option key={status} value={status}>
                    {status}
                  </option>
                ))}
              </select>
            </div>

            <button
              className={`pin-button ${isPinMode ? 'active' : ''}`}
              onClick={handlePinModeToggle}
              disabled={!selectedUser || loading}
            >
              {loading ? (
                <>‚è≥ Saving...</>
              ) : isPinMode ? (
                <>üìç Click on Map to Pin Location</>
              ) : (
                <>üìå Pin Package Location</>
              )}
            </button>
          </div>

          {/* Tracking ID Display */}
          <div className="tracking-id-box">
            <div className="id-header">
              <div className="id-label">üÜî Generated Tracking ID</div>
              {trackingRecords.length > 0 && (
                <span className="records-count">{trackingRecords.length} active packages</span>
              )}
            </div>
            {generatedTrackingId ? (
              <div className="id-display">
                <span className="tracking-id">{generatedTrackingId}</span>
                <button
                  className="copy-button"
                  onClick={copyTrackingId}
                  title="Copy to clipboard"
                >
                  üìã Copy
                </button>
              </div>
            ) : (
              <div className="id-placeholder">
                <span className="placeholder-icon">üì¶</span>
                <span>Select a user, set status, and click on the map to generate a tracking ID</span>
              </div>
            )}
          </div>

          {/* Instructions */}
          <div className="instructions-box">
            <h4>üìã How to Create a Tracking Record:</h4>
            <ol>
              <li>Select a verified user from the left sidebar</li>
              <li>Choose the package status from the dropdown</li>
              <li>Click "Pin Package Location" button</li>
              <li>Click on the map to pin the exact package location</li>
              <li>Copy the generated tracking ID and share with the customer</li>
            </ol>
          </div>
        </div>
      </div>
    </section>
  );
};

export default LiveTrackingMap;

```

```my-frontend\src\LiveTrackingMap.css
/* Live Tracking Map Styles */

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.live-tracking-section {
  background: linear-gradient(135deg, #f5f7fb 0%, #e9ecef 100%);
  padding: 24px;
  border-radius: 16px;
  margin-bottom: 24px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
}

.section-title {
  font-size: 24px;
  font-weight: 700;
  color: #1a202c;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.error-message {
  background-color: #fed7d7;
  color: #c53030;
  padding: 12px 16px;
  border-radius: 8px;
  margin-bottom: 16px;
  border-left: 4px solid #c53030;
  font-size: 14px;
}

.success-message {
  background-color: #c6f6d5;
  color: #22543d;
  padding: 12px 16px;
  border-radius: 8px;
  margin-bottom: 16px;
  border-left: 4px solid #22c55e;
  font-size: 14px;
}

.tracking-layout {
  display: grid;
  grid-template-columns: 280px minmax(0, 1fr);
  gap: 20px;
}

/* Sidebar Styles */
.tracking-sidebar {
  background: #ffffff;
  border-radius: 12px;
  padding: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
  height: fit-content;
  position: sticky;
  top: 20px;
}

.sidebar-title {
  font-size: 16px;
  font-weight: 600;
  color: #2d3748;
  margin-bottom: 12px;
  padding-bottom: 12px;
  border-bottom: 2px solid #e2e8f0;
}

.sidebar-hint {
  font-size: 12px;
  color: #a0aec0;
  margin-bottom: 12px;
  padding: 0 4px;
}

.users-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: calc(100vh - 300px);
  overflow-y: auto;
}

.users-list::-webkit-scrollbar {
  width: 6px;
}

.users-list::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 10px;
}

.users-list::-webkit-scrollbar-thumb {
  background: #cbd5e0;
  border-radius: 10px;
}

.users-list::-webkit-scrollbar-thumb:hover {
  background: #a0aec0;
}

.user-item {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  padding: 10px 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: left;
  font-size: 13px;
}

.user-item:hover {
  background: #edf2f7;
  border-color: #cbd5e0;
  transform: translateX(2px);
}

.user-item.active {
  background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%);
  color: #ffffff;
  border-color: #4f46e5;
  box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
}

.user-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.user-info strong {
  font-weight: 600;
  display: block;
}

.user-email {
  font-size: 12px;
  opacity: 0.8;
  word-break: break-all;
}

.user-item.active .user-email {
  opacity: 0.9;
}

.no-users {
  text-align: center;
  color: #718096;
  font-size: 14px;
  padding: 20px 10px;
  font-style: italic;
}

.no-users-icon {
  font-size: 32px;
  display: block;
  margin-bottom: 8px;
}

.no-users small {
  font-size: 12px;
  color: #a0aec0;
  display: block;
  margin-top: 8px;
}

.user-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 14px;
  flex-shrink: 0;
}

.user-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.selected-badge {
  margin-left: auto;
  font-size: 16px;
}

/* Map Wrapper */
.tracking-map-wrapper {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.tracking-map {
  width: 100%;
  height: 400px;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  background: #e0e7ff;
  position: relative;
}

.map-loading {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  color: #718096;
}

.loading-spinner {
  width: 40px;
  height: 40px;
  border: 4px solid #e2e8f0;
  border-top: 4px solid #4f46e5;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 12px;
}

/* Controls Section */
.tracking-controls {
  display: flex;
  gap: 12px;
  align-items: center;
  background: #ffffff;
  padding: 16px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
  flex-wrap: wrap;
}

.selected-user-display {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: #f0f4ff;
  border-radius: 8px;
  border: 1px solid #c7d2fe;
}

.selected-user-info {
  display: flex;
  align-items: center;
  gap: 8px;
}

.label {
  font-size: 12px;
  font-weight: 600;
  color: #718096;
  text-transform: uppercase;
}

.user-name {
  font-size: 14px;
  font-weight: 600;
  color: #4f46e5;
}

.no-selection {
  font-size: 14px;
  color: #a0aec0;
  font-style: italic;
}

.status-control {
  display: flex;
  flex-direction: column;
  gap: 6px;
  flex: 1;
  min-width: 200px;
}

.status-control label {
  font-size: 13px;
  font-weight: 600;
  color: #2d3748;
}

.status-select {
  padding: 10px 12px;
  border: 1px solid #cbd5e0;
  border-radius: 8px;
  font-size: 14px;
  color: #2d3748;
  background: #ffffff;
  cursor: pointer;
  transition: all 0.2s ease;
}

.status-select:hover:not(:disabled) {
  border-color: #4f46e5;
  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

.status-select:focus {
  outline: none;
  border-color: #4f46e5;
  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

.status-select:disabled {
  background: #f7fafc;
  color: #a0aec0;
  cursor: not-allowed;
}

/* Pin Button */
.pin-button {
  padding: 10px 16px;
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  color: #ffffff;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
  white-space: nowrap;
}

.pin-button:hover:not(:disabled) {
  background: linear-gradient(135deg, #059669 0%, #047857 100%);
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
}

.pin-button:active:not(:disabled) {
  transform: translateY(0);
}

.pin-button.active {
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
  animation: pulse 2s infinite;
}

.pin-button:disabled {
  background: #cbd5e0;
  cursor: not-allowed;
  opacity: 0.6;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.8;
  }
}

/* Tracking ID Box */
.tracking-id-box {
  background: #ffffff;
  padding: 16px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
  border-left: 4px solid #4f46e5;
}

.id-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.records-count {
  font-size: 11px;
  color: #a0aec0;
  background: #f7fafc;
  padding: 4px 8px;
  border-radius: 4px;
  font-weight: 500;
}

.id-label {
  font-size: 13px;
  font-weight: 600;
  color: #718096;
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.id-display {
  display: flex;
  gap: 8px;
  align-items: center;
}

.tracking-id {
  font-family: 'Monaco', 'Courier New', monospace;
  font-size: 16px;
  font-weight: 700;
  color: #4f46e5;
  word-break: break-all;
  padding: 8px 12px;
  background: #f0f4ff;
  border-radius: 6px;
  flex: 1;
}

.copy-button {
  padding: 8px 12px;
  background: #4f46e5;
  color: #ffffff;
  border: none;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
}

.copy-button:hover {
  background: #3f35d6;
  box-shadow: 0 2px 8px rgba(79, 70, 229, 0.3);
}

.id-placeholder {
  color: #a0aec0;
  font-size: 14px;
  font-style: italic;
  display: flex;
  align-items: center;
  gap: 8px;
}

.placeholder-icon {
  font-size: 24px;
}

/* Instructions Box */
.instructions-box {
  background: #f0f4ff;
  padding: 16px;
  border-radius: 12px;
  border: 1px solid #c7d2fe;
  margin-top: 16px;
}

.instructions-box h4 {
  margin-top: 0;
  margin-bottom: 12px;
  font-size: 13px;
  font-weight: 600;
  color: #4f46e5;
}

.instructions-box ol {
  margin: 0;
  padding-left: 20px;
}

.instructions-box li {
  margin-bottom: 8px;
  font-size: 13px;
  color: #4a5568;
  line-height: 1.5;
}

/* Responsive Design */
@media (max-width: 1200px) {
  .tracking-layout {
    grid-template-columns: 1fr;
  }

  .tracking-sidebar {
    position: static;
  }
}

@media (max-width: 768px) {
  .live-tracking-section {
    padding: 16px;
  }

  .section-title {
    font-size: 20px;
  }

  .tracking-map {
    height: 300px;
  }

  .tracking-controls {
    flex-direction: column;
  }

  .status-control {
    min-width: unset;
    width: 100%;
  }

  .pin-button {
    width: 100%;
  }

  .users-list {
    max-height: 300px;
  }
}

@media (max-width: 480px) {
  .tracking-map {
    height: 250px;
  }

  .id-display {
    flex-direction: column;
  }

  .copy-button {
    width: 100%;
  }
}
```

```my-frontend\src\Home.jsx

import React from "react";

function Home() {
  // The real homepage layout (hero, sections, etc.) is in index.html,
  // so this component intentionally renders nothing extra.
  return null;
}

export default Home;

```

```my-frontend\src\TestModal.jsx
import React, { useEffect } from 'react';
import './TrackingModal.css';

const TestModal = ({ isOpen, onClose }) => {
  useEffect(() => {
    if (isOpen) {
      const handleEscape = (e) => {
        if (e.key === 'Escape') {
          onClose();
        }
      };
      
      document.addEventListener('keydown', handleEscape);
      document.body.style.overflow = 'hidden';
      
      return () => {
        document.removeEventListener('keydown', handleEscape);
        document.body.style.overflow = 'unset';
      };
    }
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  const handleOverlayClick = (e) => {
    if (e.target === e.currentTarget) {
      onClose();
    }
  };

  return (
    <div className="tracking-modal-overlay" onClick={handleOverlayClick}>
      <div className="tracking-modal-content" onClick={(e) => e.stopPropagation()}>
        <div className="tracking-modal-header">
          <h2 className="tracking-modal-title">‚úÖ Test Modal</h2>
          <button 
            className="tracking-modal-close" 
            onClick={onClose} 
            title="Close (ESC)"
            type="button"
          >
            ‚úï
          </button>
        </div>
        <div className="tracking-modal-body" style={{ textAlign: 'center', padding: '40px 20px' }}>
          <p style={{ fontSize: '16px', color: '#2d3748' }}>
            ‚úÖ Modal is working!
          </p>
          <p style={{ fontSize: '14px', color: '#718096', marginBottom: '20px' }}>
            The modal overlay and popup infrastructure is functioning correctly.
          </p>
          <p style={{ fontSize: '13px', color: '#a0aec0', marginBottom: '20px' }}>
            If you can see this message, the modal system itself is working.
          </p>
          <div style={{
            backgroundColor: '#f0f4ff',
            border: '1px solid #c7d2fe',
            padding: '16px',
            borderRadius: '8px',
            marginBottom: '20px'
          }}>
            <p style={{ margin: '0', fontSize: '12px', color: '#4f46e5', fontFamily: 'monospace' }}>
              If the main tracking map disappears when you try to open it,<br />
              the issue is likely with the Google Maps API configuration.
            </p>
          </div>
          <button
            onClick={onClose}
            style={{
              backgroundColor: '#4f46e5',
              color: '#fff',
              border: 'none',
              padding: '10px 20px',
              borderRadius: '8px',
              cursor: 'pointer',
              fontWeight: '600'
            }}
          >
            Close Test Modal
          </button>
        </div>
      </div>
    </div>
  );
};

export default TestModal;

```

```my-frontend\src\TopRightProfileMenu.jsx
import React, { useState, useEffect, useRef } from "react";
import { auth, db } from "./firebase";
import {
  collection,
  doc,
  setDoc,
  getDoc,
  updateDoc,
  addDoc,
  onSnapshot,
  serverTimestamp,
  query,
  orderBy,
} from "firebase/firestore";

function TopRightProfileMenu({ user }) {
  const [isOpen, setIsOpen] = useState(false);
  const [messages, setMessages] = useState([]);
  const [input, setInput] = useState("");
  const [loading, setLoading] = useState(true);
  const [userData, setUserData] = useState(null);
  const messagesEndRef = useRef(null);
  const currentUser = auth.currentUser;
  const uid = currentUser?.uid || user?._id || "anonymous";

  const threadRef = doc(db, "threads", uid);
  const messagesCol = collection(db, "threads", uid, "messages");

  useEffect(() => {
    if (!currentUser && !user) {
      setLoading(false);
      return;
    }

    let unsub = () => {};
    let mounted = true;

    (async () => {
      try {
        const snap = await getDoc(threadRef);
        if (!snap.exists()) {
          await setDoc(threadRef, {
            userId: uid,
            agentRequested: false,
            updatedAt: serverTimestamp(),
          });
        }

        const q = query(messagesCol, orderBy("ts", "asc"));
        unsub = onSnapshot(q, async (snapshot) => {
          const docs = snapshot.docs.map((d) => ({ id: d.id, ...d.data() }));
          if (mounted) {
            setMessages(docs);
            setTimeout(() => {
              messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            }, 100);
          }

          const updates = [];
          for (const d of snapshot.docs) {
            const m = d.data();
            if (m.from !== "customer" && m.status !== "read") {
              updates.push(
                updateDoc(doc(messagesCol, d.id), { status: "read" })
              );
            }
          }
          if (updates.length) {
            for (const u of updates) {
              try {
                await u;
              } catch (e) {
                console.warn("message status update failed", e);
              }
            }
          }
        });
      } catch (e) {
        console.error("Chat init failed", e);
      } finally {
        if (mounted) setLoading(false);
      }
    })();

    return () => {
      mounted = false;
      try {
        unsub();
      } catch {}
    };
  }, [currentUser, user, uid, threadRef, messagesCol]);

  useEffect(() => {
    if (user) {
      setUserData(user);
    }
  }, [user]);

  const sendMessage = async () => {
    const text = input.trim();
    if (!text) return;
    setInput("");

    try {
      await addDoc(messagesCol, {
        from: "customer",
        text,
        ts: serverTimestamp(),
        status: "sent",
      });
      await updateDoc(threadRef, { updatedAt: serverTimestamp() });

      const lower = text.toLowerCase();
      const agentKeywords = [
        "request agent",
        "speak with agent",
        "speak to agent",
        "request human",
        "human agent",
        "talk to agent",
        "i need help",
      ];

      if (agentKeywords.some((keyword) => lower.includes(keyword))) {
        try {
          await setDoc(
            threadRef,
            { agentRequested: true, updatedAt: serverTimestamp() },
            { merge: true }
          );
          await addDoc(messagesCol, {
            from: "bot",
            text: "üöÄ I've connected you with our support team. An agent will be with you shortly!",
            ts: serverTimestamp(),
            status: "sent",
          });
        } catch (e) {
          console.warn("auto-escalation failed", e);
        }
        return;
      }

      try {
        const aiResponse = await fetch("http://localhost:5000/api/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            message: text,
            userId: user?._id,
          }),
        });

        let botReply = "I'm here to help! How can I assist you?";

        if (aiResponse.ok) {
          const data = await aiResponse.json();
          if (data.reply && data.reply.trim()) {
            botReply = data.reply;
          }
        }

        await addDoc(messagesCol, {
          from: "bot",
          text: botReply,
          ts: serverTimestamp(),
          status: "sent",
        });
      } catch (e) {
        console.error("AI chat error:", e);
        await addDoc(messagesCol, {
          from: "bot",
          text: "I'm temporarily unavailable. Would you like to connect with a human agent?",
          ts: serverTimestamp(),
          status: "sent",
        });
      }
    } catch (e) {
      console.error("sendMessage failed", e);
    }
  };

  const userInitials = userData?.name
    ? userData.name
        .split(" ")
        .map((n) => n[0])
        .join("")
        .toUpperCase()
        .slice(0, 2)
    : "SD";

  return (
    <div
      style={{
        position: "fixed",
        top: "80px",
        right: "20px",
        zIndex: 9999,
        fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
      }}
    >
      {!isOpen ? (
        <button
          onClick={() => setIsOpen(true)}
          style={{
            display: "flex",
            alignItems: "center",
            gap: "10px",
            padding: "8px 16px",
            background: "linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)",
            color: "#fff",
            border: "none",
            borderRadius: "50px",
            cursor: "pointer",
            boxShadow: "0 4px 12px rgba(79, 70, 229, 0.4)",
            fontSize: "14px",
            fontWeight: "600",
            transition: "all 0.3s ease",
          }}
          onMouseEnter={(e) => {
            e.target.style.boxShadow = "0 6px 20px rgba(79, 70, 229, 0.6)";
            e.target.style.transform = "translateY(-2px)";
          }}
          onMouseLeave={(e) => {
            e.target.style.boxShadow = "0 4px 12px rgba(79, 70, 229, 0.4)";
            e.target.style.transform = "translateY(0)";
          }}
        >
          <div
            style={{
              width: "32px",
              height: "32px",
              borderRadius: "50%",
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              fontSize: "12px",
              fontWeight: "bold",
              color: "#fff",
              backgroundSize: "cover",
              backgroundPosition: "center",
              border: "2px solid rgba(255, 255, 255, 0.8)",
              position: "relative",
              backgroundImage: userData?.profilePicture
                ? `url(${userData.profilePicture})`
                : "none",
              backgroundColor: userData?.profilePicture
                ? "transparent"
                : "rgba(255, 255, 255, 0.3)",
            }}
          >
            {!userData?.profilePicture && userInitials}
            {userData?.isVerified && (
              <div
                style={{
                  position: "absolute",
                  bottom: "-2px",
                  right: "-2px",
                  width: "16px",
                  height: "16px",
                  background: "#10b981",
                  borderRadius: "50%",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                  fontSize: "11px",
                  color: "#fff",
                  border: "2px solid #fff",
                }}
              >
                ‚úì
              </div>
            )}
          </div>
        </button>
      ) : (
        <div
          style={{
            width: "380px",
            height: "600px",
            background: "#fff",
            borderRadius: "12px",
            boxShadow: "0 10px 40px rgba(0, 0, 0, 0.16)",
            display: "flex",
            flexDirection: "column",
            overflow: "hidden",
            border: "1px solid #e5e7eb",
          }}
        >
          <div
            style={{
              background: "linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)",
              color: "#fff",
              padding: "16px 20px",
              display: "flex",
              alignItems: "center",
              justifyContent: "space-between",
              borderRadius: "12px 12px 0 0",
            }}
          >
            <div style={{ display: "flex", alignItems: "center", gap: "12px" }}>
              <div
                style={{
                  width: "40px",
                  height: "40px",
                  borderRadius: "50%",
                  background: userData?.profilePicture
                    ? `url(${userData.profilePicture}) center/cover`
                    : "rgba(255, 255, 255, 0.3)",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                  fontSize: "14px",
                  fontWeight: "bold",
                  color: "#fff",
                  border: "2px solid rgba(255, 255, 255, 0.8)",
                  position: "relative",
                  backgroundImage: userData?.profilePicture
                    ? `url(${userData.profilePicture})`
                    : "none",
                  backgroundColor: userData?.profilePicture
                    ? "transparent"
                    : "rgba(255, 255, 255, 0.3)",
                  backgroundSize: "cover",
                  backgroundPosition: "center",
                }}
              >
                {!userData?.profilePicture && userInitials}
                {userData?.isVerified && (
                  <div
                    style={{
                      position: "absolute",
                      bottom: "-4px",
                      right: "-4px",
                      width: "18px",
                      height: "18px",
                      background: "#10b981",
                      borderRadius: "50%",
                      display: "flex",
                      alignItems: "center",
                      justifyContent: "center",
                      fontSize: "12px",
                      color: "#fff",
                      border: "2px solid #fff",
                    }}
                  >
                    ‚úì
                  </div>
                )}
              </div>
              <div>
                <div style={{ fontSize: "14px", fontWeight: "600" }}>
                  {userData?.name || "Support"}
                </div>
                <div style={{ fontSize: "12px", opacity: 0.9 }}>
                  {userData?.isVerified ? "‚úì Verified" : "Pending Verification"}
                </div>
              </div>
            </div>
            <button
              onClick={() => setIsOpen(false)}
              style={{
                background: "none",
                border: "none",
                color: "#fff",
                fontSize: "20px",
                cursor: "pointer",
                padding: "0",
                width: "32px",
                height: "32px",
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
              }}
            >
              ‚úï
            </button>
          </div>

          <div
            style={{
              flex: 1,
              overflowY: "auto",
              padding: "16px",
              backgroundColor: "#f9fafb",
              display: "flex",
              flexDirection: "column",
              gap: "12px",
            }}
          >
            {loading && (
              <p
                style={{
                  textAlign: "center",
                  color: "#6b7280",
                  fontSize: "14px",
                }}
              >
                Loading chat‚Ä¶
              </p>
            )}
            {!loading && messages.length === 0 && (
              <p
                style={{
                  textAlign: "center",
                  color: "#6b7280",
                  fontSize: "14px",
                }}
              >
                üëã Start the conversation!
              </p>
            )}
            {messages.map((m) => (
              <div
                key={m.id}
                style={{
                  display: "flex",
                  justifyContent:
                    m.from === "customer" ? "flex-end" : "flex-start",
                  marginBottom: "4px",
                }}
              >
                <div
                  style={{
                    maxWidth: "75%",
                    padding: "10px 14px",
                    borderRadius: "12px",
                    fontSize: "13px",
                    lineHeight: "1.4",
                    background:
                      m.from === "customer"
                        ? "#4f46e5"
                        : m.from === "admin"
                        ? "#f3f4f6"
                        : "#e5e7eb",
                    color:
                      m.from === "customer"
                        ? "#fff"
                        : m.from === "admin"
                        ? "#111827"
                        : "#374151",
                    wordWrap: "break-word",
                  }}
                >
                  {m.from === "customer" ? null : (
                    <strong style={{ display: "block", marginBottom: "4px" }}>
                      {m.from === "admin" ? "Support" : "Bot"}
                    </strong>
                  )}
                  {m.text}
                </div>
              </div>
            ))}
            <div ref={messagesEndRef} />
          </div>

          <div
            style={{
              padding: "12px",
              borderTop: "1px solid #e5e7eb",
              display: "flex",
              gap: "8px",
            }}
          >
            <input
              type="text"
              value={input}
              onChange={(e) => setInput(e.target.value)}
              onKeyDown={(e) => {
                if (e.key === "Enter") sendMessage();
              }}
              placeholder="Type your message‚Ä¶"
              style={{
                flex: 1,
                padding: "10px 12px",
                border: "1px solid #e5e7eb",
                borderRadius: "8px",
                fontSize: "13px",
                outline: "none",
              }}
              onFocus={(e) => {
                e.target.style.borderColor = "#4f46e5";
                e.target.style.boxShadow = "0 0 0 3px rgba(79, 70, 229, 0.1)";
              }}
              onBlur={(e) => {
                e.target.style.borderColor = "#e5e7eb";
                e.target.style.boxShadow = "none";
              }}
            />
            <button
              onClick={sendMessage}
              style={{
                background: "#4f46e5",
                color: "#fff",
                border: "none",
                borderRadius: "8px",
                padding: "10px 16px",
                cursor: "pointer",
                fontSize: "13px",
                fontWeight: "600",
                transition: "background 0.2s ease",
              }}
              onMouseEnter={(e) => {
                e.target.style.background = "#6366f1";
              }}
              onMouseLeave={(e) => {
                e.target.style.background = "#4f46e5";
              }}
            >
              Send
            </button>
          </div>
        </div>
      )}
    </div>
  );
}

export default TopRightProfileMenu;

```

```my-frontend\src\RegisterForm.jsx
import React, { useState } from "react";
import { useNavigate } from "react-router-dom";

function RegisterForm({ onRegisterSuccess }) {
  const navigate = useNavigate();
  const [formData, setFormData] = useState({
    name: "",
    email: "",
    password: "",
    confirmPassword: ""
  });
  const [message, setMessage] = useState("");
  const [loading, setLoading] = useState(false);

  const handleChange = (e) => {
    setFormData({ ...formData, [e.target.name]: e.target.value });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    setMessage("");

    if (formData.password !== formData.confirmPassword) {
      setMessage("‚ùå Passwords do not match");
      setLoading(false);
      return;
    }

    try {
      const response = await fetch("http://localhost:5000/api/register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          name: formData.name,      // ‚úÖ send 'name' instead of 'username'
          email: formData.email,
          password: formData.password
        }),
      });

      const data = await response.json();
      if (response.ok) {
        setMessage("‚úÖ Registration successful! Please log in.");
        setFormData({ name: "", email: "", password: "", confirmPassword: "" });
        if (onRegisterSuccess) onRegisterSuccess();
      } else {
        setMessage(`‚ùå Error: ${data.error || "Registration failed"}`);
      }
    } catch (err) {
      setMessage("‚ùå Backend not reachable. Make sure it's running on port 5000.");
      console.error(err);
    } finally {
      setLoading(false);
    }
  };

  return (
    <form
      onSubmit={handleSubmit}
      style={{
        maxWidth: "400px",
        margin: "20px auto",
        padding: "20px",
        border: "1px solid #ccc",
        borderRadius: "8px"
      }}
    >
      <h2>Register</h2>
      <input
        id="registerName"
        name="name"
        placeholder="Name"
        value={formData.name}
        onChange={handleChange}
        required
        style={{
          width: "100%",
          padding: "8px",
          marginBottom: "10px",
          boxSizing: "border-box"
        }}
      />
      <input
        id="registerEmail"
        name="email"
        type="email"
        placeholder="Email"
        value={formData.email}
        onChange={handleChange}
        required
        style={{
          width: "100%",
          padding: "8px",
          marginBottom: "10px",
          boxSizing: "border-box"
        }}
      />
      <input
        id="registerPassword"
        name="password"
        type="password"
        placeholder="Password"
        value={formData.password}
        onChange={handleChange}
        required
        style={{
          width: "100%",
          padding: "8px",
          marginBottom: "10px",
          boxSizing: "border-box"
        }}
      />
      <input
        id="registerConfirmPassword"
        name="confirmPassword"
        type="password"
        placeholder="Confirm Password"
        value={formData.confirmPassword}
        onChange={handleChange}
        required
        style={{
          width: "100%",
          padding: "8px",
          marginBottom: "10px",
          boxSizing: "border-box"
        }}
      />
      <button
        id="registerButton"
        type="submit"
        disabled={loading}
        style={{
          width: "100%",
          padding: "10px",
          backgroundColor: "#2566ff",
          color: "white",
          border: "none",
          borderRadius: "4px",
          cursor: "pointer"
        }}
      >
        {loading ? "Registering..." : "Register"}
      </button>
      {message && (
        <p style={{ marginTop: "10px", textAlign: "center" }}>{message}</p>
      )}
    </form>
  );
}

export default RegisterForm;

```

```my-frontend\src\Profile.jsx
import React, { useEffect, useState } from "react";
import { useNavigate } from "react-router-dom";

function Profile({ onLogout }) {
  const [profile, setProfile] = useState(null);
  const [error, setError] = useState("");
  const [uploading, setUploading] = useState(false);
  const navigate = useNavigate();

  useEffect(() => {
    const token = localStorage.getItem("token");
    if (!token) {
      navigate("/"); // redirect to login
      return;
    }

    fetch("http://localhost:5000/api/user/profile", {
      method: "GET",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${token}`
      }
    })
      .then(res => {
        if (res.status === 401 || res.status === 403) {
          localStorage.removeItem("token");
          navigate("/"); // redirect to login
          return;
        }
        return res.json();
      })
      .then(data => {
        if (data?.user) setProfile(data.user);
        else if (data) setProfile(data);
      })
      .catch(err => {
        console.error(err);
        navigate("/"); // fallback redirect
      });
  }, [navigate]);

  const handleProfilePictureUpload = async (e) => {
    const file = e.target.files?.[0];
    if (!file) return;

    setUploading(true);
    try {
      const reader = new FileReader();
      reader.onload = async (event) => {
        const base64 = event.target?.result;
        const token = localStorage.getItem("token");

        const res = await fetch("http://localhost:5000/api/user/profile-picture", {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${token}`
          },
          body: JSON.stringify({ profilePicture: base64 })
        });

        if (res.ok) {
          const data = await res.json();
          setProfile(data.user);
          alert("Profile picture updated!");
        } else {
          alert("Failed to update profile picture");
        }
      };
      reader.readAsDataURL(file);
    } catch (err) {
      console.error("Error uploading profile picture:", err);
      alert("Error uploading profile picture");
    } finally {
      setUploading(false);
    }
  };

  if (!profile) return <p style={{ textAlign: "center" }}>Loading profile...</p>;

  if (profile.isAdmin) {
    return (
      <div style={{
        maxWidth: "560px",
        margin: "40px auto",
        padding: "30px",
        background: "linear-gradient(to right, #2566ff, #4f9cff)",
        color: "white",
        borderRadius: "12px",
        boxShadow: "0 4px 12px rgba(0,0,0,0.2)",
        fontFamily: "'Segoe UI', sans-serif",
        position: 'relative'
      }}>
        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: 16 }}>
          <h2 style={{ margin: 0 }}>Welcome, Admin</h2>
          <button
            onClick={() => {
              if (typeof onLogout === 'function') {
                onLogout();
              } else {
                try { localStorage.removeItem('token'); } catch {}
                try { window.location.hash = ''; } catch {}
                try { window.location.reload(); } catch {}
              }
            }}
            style={{ padding: '8px 12px', borderRadius: 8, border: 'none', background: '#e53935', color: '#fff', cursor: 'pointer', boxShadow: '0 2px 6px rgba(0,0,0,0.2)' }}
            aria-label="Logout"
            title="Logout"
          >
            Logout
          </button>
        </div>
        <p><strong>Email:</strong> {profile.email}</p>
        <p><strong>Role:</strong> Admin</p>
      </div>
    );
  }

  return (
    <div style={{
      maxWidth: "800px",
      margin: "40px auto",
      padding: "30px",
      background: "linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)",
      color: "white",
      borderRadius: "12px",
      boxShadow: "0 4px 12px rgba(0,0,0,0.2)",
      fontFamily: "'Segoe UI', sans-serif",
    }}>
      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: 24 }}>
        <div>
          <h2 style={{ margin: 0, fontSize: "28px" }}>Welcome, {profile.name || "Customer"}</h2>
          <p style={{ margin: "8px 0 0 0", opacity: 0.9 }}>Manage your deliveries & track packages</p>
        </div>
        <button
          onClick={() => {
            if (typeof onLogout === 'function') {
              onLogout();
            } else {
              try { localStorage.removeItem('token'); } catch {}
              try { window.location.hash = ''; } catch {}
              try { window.location.reload(); } catch {}
            }
          }}
          style={{ padding: '10px 20px', borderRadius: 8, border: 'none', background: '#ff6b6b', color: '#fff', cursor: 'pointer', boxShadow: '0 2px 6px rgba(0,0,0,0.2)', fontWeight: 600 }}
          aria-label="Logout"
          title="Logout"
        >
          Logout
        </button>
      </div>
      
      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 16, marginBottom: 24 }}>
        <div style={{ background: 'rgba(255,255,255,0.15)', padding: 16, borderRadius: 8, backdropFilter: 'blur(10px)' }}>
          <p style={{ margin: 0, opacity: 0.9, fontSize: 12 }}>EMAIL</p>
          <p style={{ margin: '8px 0 0 0', fontSize: 16, fontWeight: 600 }}>{profile.email}</p>
        </div>
        <div style={{ background: 'rgba(255,255,255,0.15)', padding: 16, borderRadius: 8, backdropFilter: 'blur(10px)' }}>
          <p style={{ margin: 0, opacity: 0.9, fontSize: 12 }}>STATUS</p>
          <p style={{ margin: '8px 0 0 0', fontSize: 16, fontWeight: 600 }}>
            {profile.isVerified ? '‚úì Verified' : '‚è≥ Pending Verification'}
          </p>
        </div>
      </div>
      
      <div style={{ background: 'rgba(255,255,255,0.1)', padding: 16, borderRadius: 8, marginBottom: 24 }}>
        <p style={{ margin: 0, fontSize: 14 }}>Use the chat in the top-right corner to track packages or contact support</p>
      </div>
    </div>
  );
}

export default Profile;

```

```my-frontend\src\TrackingMap.jsx
// src/TrackingMap.jsx
import React, { useState, useEffect } from "react";
import { GoogleMap, Marker, useJsApiLoader } from "@react-google-maps/api";

const containerStyle = {
  width: "100%",
  height: "400px"
};

function TrackingMap({ idToken, packageId }) {
  const { isLoaded } = useJsApiLoader({
    googleMapsApiKey: "AIzaSyCPCAkpYgOMTapv5Y6v5bWVJ6pbSMTtL74" // üîë Replace this
  });

  const [location, setLocation] = useState(null);

  useEffect(() => {
    const fetchLocation = async () => {
      try {
        const res = await fetch(
          `http://localhost:5000/api/client/package-location/${packageId}`,
          {
            headers: { Authorization: `Bearer ${idToken}` }
          }
        );
        const data = await res.json();
        setLocation(data.location);
      } catch (err) {
        console.error("Error fetching package location:", err);
      }
    };
    fetchLocation();
  }, [idToken, packageId]);

  return isLoaded && location ? (
    <GoogleMap mapContainerStyle={containerStyle} center={location} zoom={14}>
      <Marker position={location} />
    </GoogleMap>
  ) : (
    <p>Loading package location...</p>
  );
}

export default TrackingMap;

```

```my-frontend\src\TrackPackage.jsx
import React, { useState, useRef, useEffect } from 'react';
import './TrackPackage.css';

const TrackPackage = () => {
  const mapRef = useRef(null);
  const sectionRef = useRef(null);
  const [trackingId, setTrackingId] = useState('');
  const [trackingData, setTrackingData] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [map, setMap] = useState(null);
  const [marker, setMarker] = useState(null);
  const [isModalOpen, setIsModalOpen] = useState(false);

  // Initialize Google Map when modal opens
  useEffect(() => {
    if (!isModalOpen || !mapRef.current) return;

    const loadGoogleMaps = async () => {
      if (!window.google) {
        const script = document.createElement('script');
        script.src = `https://maps.googleapis.com/maps/api/js?key=${process.env.REACT_APP_GOOGLE_MAPS_API_KEY || 'YOUR_API_KEY'}`;
        script.async = true;
        script.defer = true;
        script.onload = () => initMap();
        document.head.appendChild(script);
      } else {
        initMap();
      }
    };

    const initMap = () => {
      if (!mapRef.current) return;
      const newMap = new window.google.maps.Map(mapRef.current, {
        center: { lat: 0, lng: 0 },
        zoom: 2,
        mapTypeId: 'satellite',
        styles: [
          {
            featureType: 'all',
            elementType: 'labels.text.fill',
            stylers: [{ color: '#ffffff' }]
          }
        ]
      });
      setMap(newMap);
    };

    loadGoogleMaps();
  }, [isModalOpen]);

  // Handle Escape key to close modal
  useEffect(() => {
    const handleEscape = (e) => {
      if (e.key === 'Escape') {
        closeModal();
      }
    };
    if (isModalOpen) {
      document.addEventListener('keydown', handleEscape);
      document.body.style.overflow = 'hidden';
      return () => {
        document.removeEventListener('keydown', handleEscape);
        document.body.style.overflow = 'unset';
      };
    }
  }, [isModalOpen]);

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!trackingId.trim()) {
      setError('Please enter a tracking ID');
      return;
    }

    setLoading(true);
    setError(null);
    setTrackingData(null);

    try {
      const response = await fetch(`/api/tracking/${encodeURIComponent(trackingId.trim())}`);
      if (!response.ok) {
        if (response.status === 404) {
          throw new Error('Tracking ID not found. Please check and try again.');
        }
        throw new Error('Failed to fetch tracking information');
      }

      const data = await response.json();
      setTrackingData(data);
      
      setTimeout(() => {
        if (sectionRef.current) {
          sectionRef.current.classList.remove('animate-pop');
          void sectionRef.current.offsetWidth;
          sectionRef.current.classList.add('animate-pop');
          console.log('Animation triggered on section');
        }
      }, 100);
      
      setTimeout(() => {
        setIsModalOpen(true);
      }, 200);
    } catch (err) {
      console.error('Error fetching tracking data:', err);
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  const closeModal = () => {
    setIsModalOpen(false);
    setTrackingData(null);
    setTrackingId('');
    setError(null);
    if (marker) {
      marker.setMap(null);
    }
  };

  // Update map when tracking data is available and modal is open
  useEffect(() => {
    if (!isModalOpen || !trackingData || !map) return;

    if (trackingData.location) {
      const position = { lat: trackingData.location.lat, lng: trackingData.location.lng };
      map.setCenter(position);
      map.setZoom(13);

      if (marker) {
        marker.setMap(null);
      }

      const newMarker = new window.google.maps.Marker({
        position: position,
        map: map,
        title: trackingData.status,
        icon: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'
      });

      const infoWindow = new window.google.maps.InfoWindow({
        content: `
          <div style="color: #000; font-size: 14px;">
            <strong>${trackingData.user.fullName}</strong><br/>
            <strong>Status:</strong> ${trackingData.status}<br/>
            <strong>Last Updated:</strong> ${new Date(trackingData.updatedAt).toLocaleString()}
          </div>
        `
      });

      newMarker.addListener('click', () => {
        infoWindow.open(map, newMarker);
      });

      setMarker(newMarker);
    }
  }, [isModalOpen, trackingData, map]);

  const getStatusColor = (status) => {
    const statusColors = {
      'Pending Pickup': '#f59e0b',
      'Pickup Assigned': '#3b82f6',
      'Pickup Accepted': '#10b981',
      'Enroute to Facility': '#8b5cf6',
      'Arrived at Hub or Facility': '#6366f1',
      'In Transit': '#06b6d4',
      'Out for Delivery': '#f97316',
      'Delivered': '#22c55e',
      'Awaiting Receipt': '#14b8a6',
      'Delivery Failed': '#ef4444',
      'Returned to Sender': '#64748b'
    };
    return statusColors[status] || '#9ca3af';
  };

  return (
    <div className="track-package-container">
      <section className="track-package-section" ref={sectionRef}>
        <div className="tracking-content">
          {/* Header */}
          <div className="tracking-header">
            <div className="header-icon">üì¶</div>
            <div>
              <h1 className="tracking-title">Track Your Package</h1>
              <p className="tracking-subtitle">Enter your tracking ID to locate your delivery</p>
            </div>
          </div>

          {/* Search Form */}
          <form onSubmit={handleSubmit} className="tracking-form">
            <div className="form-group">
              <input
                type="text"
                value={trackingId}
                onChange={(e) => setTrackingId(e.target.value)}
                onKeyPress={(e) => {
                  if (e.key === 'Enter') {
                    e.preventDefault();
                    handleSubmit(e);
                  }
                }}
                placeholder="Enter tracking ID (e.g., SWIFT-1234567890)"
                className="tracking-input"
                disabled={loading}
                autoFocus
              />
              <button type="submit" className="search-button" disabled={loading}>
                {loading ? 'Searching...' : 'üîç Track Package'}
              </button>
            </div>
          </form>

          {error && (
            <div className="alert alert-error">
              <span className="alert-icon">‚ö†Ô∏è</span>
              {error}
            </div>
          )}

          {!trackingData && !error && !loading && (
            <div className="empty-state">
              <div className="empty-icon">üîç</div>
              <p className="empty-text">Enter a tracking ID above to view your package status and location</p>
            </div>
          )}
        </div>
      </section>

      {isModalOpen && trackingData && (
        <div className="tracking-modal-overlay" onClick={closeModal}>
          <div className="tracking-modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="tracking-modal-header">
              <h2 className="tracking-modal-title">üì¶ Package Details</h2>
              <button className="tracking-modal-close" onClick={closeModal} title="Close (ESC)">
                ‚úï
              </button>
            </div>
            <div className="tracking-modal-body">
              {/* Status Card */}
              <div className="modal-status-card">
                <div
                  className="modal-status-badge"
                  style={{ backgroundColor: getStatusColor(trackingData.status) }}
                >
                  {trackingData.status}
                </div>
                <div className="modal-package-info">
                  <div className="modal-info-item">
                    <span className="modal-info-label">üìÆ Recipient</span>
                    <span className="modal-info-value">{trackingData.user.fullName}</span>
                  </div>
                  <div className="modal-info-item">
                    <span className="modal-info-label">üìß Email</span>
                    <span className="modal-info-value">{trackingData.user.email}</span>
                  </div>
                  <div className="modal-info-item">
                    <span className="modal-info-label">üÜî Tracking ID</span>
                    <span className="modal-info-value tracking-id">{trackingData.trackingId}</span>
                  </div>
                  <div className="modal-info-item">
                    <span className="modal-info-label">üïê Last Updated</span>
                    <span className="modal-info-value">{new Date(trackingData.updatedAt).toLocaleString()}</span>
                  </div>
                </div>
              </div>

              {/* Map */}
              <div className="modal-map-container">
                <h3 className="modal-map-title">üìç Package Location</h3>
                <div ref={mapRef} className="tracking-map"></div>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default TrackPackage;
```

```my-frontend\src\TrackPackage.css
/* Track Package Customer Page Styles */

.track-package-container {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

@keyframes sectionPopOut {
  0% {
    opacity: 0;
    transform: scale(0.5) translateY(80px);
    filter: blur(20px);
  }
  40% {
    filter: blur(10px);
  }
  70% {
    filter: blur(3px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0px);
  }
}

.track-package-section {
  width: 100%;
  max-width: 900px;
  background: #ffffff;
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  transform-origin: center center;
  will-change: transform, opacity, filter;
}

.track-package-section.animate-pop {
  animation: sectionPopOut 1.2s cubic-bezier(0.12, 0.65, 0.25, 1.08) forwards;
}

.tracking-content {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

/* Header */
.tracking-header {
  display: flex;
  align-items: flex-start;
  gap: 16px;
  padding-bottom: 24px;
  border-bottom: 2px solid #e2e8f0;
}

.header-icon {
  font-size: 48px;
  line-height: 1;
}

.tracking-title {
  font-size: 32px;
  font-weight: 700;
  color: #1a202c;
  margin-bottom: 4px;
}

.tracking-subtitle {
  font-size: 16px;
  color: #718096;
  margin: 0;
}

/* Form */
.tracking-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.form-group {
  display: flex;
  gap: 12px;
}

.tracking-input {
  flex: 1;
  padding: 14px 16px;
  border: 2px solid #e2e8f0;
  border-radius: 10px;
  font-size: 15px;
  transition: all 0.3s ease;
  font-family: inherit;
}

.tracking-input:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.tracking-input:disabled {
  background: #f7fafc;
  color: #a0aec0;
  cursor: not-allowed;
}

.tracking-input::placeholder {
  color: #cbd5e0;
}

.search-button {
  padding: 14px 28px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #ffffff;
  border: none;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  white-space: nowrap;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}

.search-button:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}

.search-button:active:not(:disabled) {
  transform: translateY(0);
}

.search-button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Alert */
.alert {
  padding: 14px 16px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 14px;
}

.alert-icon {
  font-size: 18px;
}

.alert-error {
  background: #fed7d7;
  color: #c53030;
  border: 1px solid #fc8181;
}

/* Tracking Results */
.tracking-results {
  display: flex;
  flex-direction: column;
  gap: 24px;
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Status Card */
.status-card {
  background: linear-gradient(135deg, #f5f7fb 0%, #e9ecef 100%);
  border-radius: 15px;
  padding: 24px;
  border-left: 5px solid #667eea;
}

.status-badge {
  display: inline-block;
  padding: 8px 16px;
  border-radius: 20px;
  color: #ffffff;
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 16px;
}

.package-info {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
}

.info-item {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.info-label {
  font-size: 12px;
  font-weight: 600;
  color: #718096;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.info-value {
  font-size: 16px;
  color: #1a202c;
  font-weight: 500;
}

.info-value.tracking-id {
  font-family: 'Monaco', 'Courier New', monospace;
  background: #e9ecef;
  padding: 6px 10px;
  border-radius: 6px;
  word-break: break-all;
}

/* Map Container */
.map-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.map-title {
  font-size: 18px;
  font-weight: 600;
  color: #1a202c;
  margin: 0;
}

.tracking-map {
  width: 100%;
  height: 350px;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  background: #e0e7ff;
  border: 2px solid #e2e8f0;
}

/* Empty State */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  text-align: center;
  color: #718096;
}

.empty-icon {
  font-size: 64px;
  margin-bottom: 16px;
  opacity: 0.6;
}

.empty-text {
  font-size: 18px;
  max-width: 400px;
}

/* Responsive Design */
@media (max-width: 768px) {
  .track-package-section {
    padding: 24px;
  }

  .tracking-title {
    font-size: 24px;
  }

  .tracking-header {
    flex-direction: column;
    gap: 12px;
  }

  .header-icon {
    font-size: 40px;
  }

  .form-group {
    flex-direction: column;
  }

  .search-button {
    width: 100%;
  }

  .package-info {
    grid-template-columns: 1fr;
  }

  .tracking-map {
    height: 300px;
  }
}

@media (max-width: 480px) {
  .track-package-container {
    padding: 12px;
  }

  .track-package-section {
    padding: 16px;
    border-radius: 16px;
  }

  .tracking-title {
    font-size: 20px;
  }

  .tracking-subtitle {
    font-size: 14px;
  }

  .tracking-input,
  .search-button {
    font-size: 14px;
    padding: 12px;
  }

  .tracking-map {
    height: 250px;
  }

  .info-value {
    font-size: 14px;
  }
}

/* Modal Styles */
.tracking-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  padding: 20px;
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes popOut {
  0% {
    opacity: 0;
    transform: scale(0.6) translateY(40px);
    filter: blur(10px);
  }
  50% {
    filter: blur(5px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0px);
  }
}

.tracking-modal-overlay {
  animation: fadeIn 0.5s ease;
}

.tracking-modal-content {
  background: #ffffff;
  border-radius: 20px;
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
  max-width: 900px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  animation: popOut 0.8s cubic-bezier(0.13, 0.68, 0.27, 1.04);
  transform-origin: center center;
}

.tracking-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 24px;
  border-bottom: 2px solid #e2e8f0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 20px 20px 0 0;
}

.tracking-modal-title {
  font-size: 24px;
  font-weight: 700;
  color: #ffffff;
  margin: 0;
}

.tracking-modal-close {
  background: rgba(255, 255, 255, 0.2);
  color: #ffffff;
  border: none;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  font-size: 24px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
}

.tracking-modal-close:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

.tracking-modal-body {
  padding: 32px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

/* Modal Status Card */
.modal-status-card {
  background: linear-gradient(135deg, #f5f7fb 0%, #e9ecef 100%);
  border-radius: 15px;
  padding: 24px;
  border-left: 5px solid #667eea;
}

.modal-status-badge {
  display: inline-block;
  padding: 8px 16px;
  border-radius: 20px;
  color: #ffffff;
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 16px;
}

.modal-package-info {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
}

.modal-info-item {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.modal-info-label {
  font-size: 12px;
  font-weight: 600;
  color: #718096;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.modal-info-value {
  font-size: 16px;
  color: #1a202c;
  font-weight: 500;
}

.modal-info-value.tracking-id {
  font-family: 'Monaco', 'Courier New', monospace;
  background: #e9ecef;
  padding: 6px 10px;
  border-radius: 6px;
  word-break: break-all;
}

/* Modal Map Container */
.modal-map-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.modal-map-title {
  font-size: 18px;
  font-weight: 600;
  color: #1a202c;
  margin: 0;
}

.modal-map-container .tracking-map {
  height: 450px;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
  background: #1a1a2e;
  border: 2px solid #e2e8f0;
}

@media (max-width: 768px) {
  .tracking-modal-content {
    max-width: 95%;
    max-height: 95vh;
  }

  .tracking-modal-header {
    padding: 16px;
  }

  .tracking-modal-title {
    font-size: 20px;
  }

  .tracking-modal-body {
    padding: 16px;
  }

  .modal-package-info {
    grid-template-columns: 1fr;
  }

  .modal-map-container .tracking-map {
    height: 350px;
  }
}

@media (max-width: 480px) {
  .tracking-modal-overlay {
    padding: 10px;
  }

  .tracking-modal-content {
    border-radius: 16px;
  }

  .tracking-modal-header {
    border-radius: 16px 16px 0 0;
    padding: 12px;
  }

  .tracking-modal-title {
    font-size: 18px;
  }

  .tracking-modal-close {
    width: 32px;
    height: 32px;
    font-size: 20px;
  }

  .tracking-modal-body {
    padding: 12px;
  }

  .modal-map-container .tracking-map {
    height: 280px;
  }
}
```

```my-frontend\src\TRACKING_IMPLEMENTATION.md
# Live Package Tracking Implementation Guide

## Overview
This guide explains how to implement the complete live package tracking system for SwiftDelivery, including:
- Admin dashboard with Google Maps for tracking package locations
- Customer-facing tracking page
- Backend API endpoints and database schema

## Files Created

### Frontend Components (React)
1. **LiveTrackingMap.jsx** - Admin dashboard component for managing package tracking
2. **LiveTrackingMap.css** - Styling for the admin tracking interface
3. **TrackPackage.jsx** - Customer-facing tracking page component
4. **TrackPackage.css** - Styling for the customer tracking interface

## Database Schema

### Tracking Model (MongoDB)

```javascript
// models/Tracking.js
const trackingSchema = new Schema({
  trackingId: {
    type: String,
    unique: true,
    required: true,
    index: true
  },
  userId: {
    type: Schema.Types.ObjectId,
    ref: 'User',
    required: true
  },
  status: {
    type: String,
    enum: [
      'Pending Pickup',
      'Pickup Assigned',
      'Pickup Accepted',
      'Enroute to Facility',
      'Arrived at Hub or Facility',
      'In Transit',
      'Out for Delivery',
      'Delivered',
      'Awaiting Receipt',
      'Delivery Failed',
      'Returned to Sender'
    ],
    required: true
  },
  location: {
    lat: {
      type: Number,
      required: true
    },
    lng: {
      type: Number,
      required: true
    }
  },
  createdAt: {
    type: Date,
    default: Date.now
  },
  updatedAt: {
    type: Date,
    default: Date.now
  }
});

module.exports = mongoose.model('Tracking', trackingSchema);
```

## Backend API Endpoints

### POST /api/tracking
**Create or update a tracking record**

```javascript
// routes/tracking.js
router.post('/tracking', authenticateAdmin, async (req, res) => {
  try {
    const { trackingId, userId, status, location } = req.body;

    if (!trackingId || !userId || !status || !location) {
      return res.status(400).json({ error: 'Missing required fields' });
    }

    const tracking = await Tracking.findOneAndUpdate(
      { trackingId },
      {
        userId,
        status,
        location,
        updatedAt: new Date()
      },
      { upsert: true, new: true }
    ).populate('userId', 'fullName email');

    res.json({
      trackingId: tracking.trackingId,
      status: tracking.status,
      location: tracking.location,
      user: {
        fullName: tracking.userId.fullName,
        email: tracking.userId.email
      },
      updatedAt: tracking.updatedAt
    });
  } catch (error) {
    console.error('Tracking creation error:', error);
    res.status(500).json({ error: 'Failed to create tracking record' });
  }
});
```

### GET /api/tracking/:trackingId
**Retrieve tracking information by tracking ID**

```javascript
router.get('/tracking/:trackingId', async (req, res) => {
  try {
    const tracking = await Tracking.findOne({ 
      trackingId: req.params.trackingId 
    }).populate('userId', 'fullName email');

    if (!tracking) {
      return res.status(404).json({ error: 'Tracking ID not found' });
    }

    res.json({
      trackingId: tracking.trackingId,
      status: tracking.status,
      location: tracking.location,
      user: {
        fullName: tracking.userId.fullName,
        email: tracking.userId.email
      },
      updatedAt: tracking.updatedAt
    });
  } catch (error) {
    console.error('Tracking retrieval error:', error);
    res.status(500).json({ error: 'Failed to retrieve tracking information' });
  }
});
```

## Integration Steps

### 1. Update AdminDashboard.jsx

Add the LiveTrackingMap component to your admin dashboard:

```javascript
// AdminDashboard.jsx
import LiveTrackingMap from './LiveTrackingMap';

// Inside your component JSX:
<LiveTrackingMap />
```

### 2. Create a Tracking Route

Add a new route for customers to track packages:

```javascript
// App.jsx
import TrackPackage from './src/TrackPackage';

<Route path="/track" element={<TrackPackage />} />
```

### 3. Configure Google Maps API

Set your Google Maps API key in your `.env` file:

```
REACT_APP_GOOGLE_MAPS_API_KEY=your_api_key_here
```

Obtain your API key from: https://console.cloud.google.com/

### 4. Set Up Authentication Middleware

```javascript
// middleware/auth.js
const authenticateAdmin = (req, res, next) => {
  const token = req.headers.authorization?.split(' ')[1];
  
  if (!token) {
    return res.status(401).json({ error: 'Unauthorized' });
  }

  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    if (decoded.role !== 'admin') {
      return res.status(403).json({ error: 'Forbidden' });
    }
    req.userId = decoded.id;
    next();
  } catch (error) {
    res.status(401).json({ error: 'Invalid token' });
  }
};

module.exports = authenticateAdmin;
```

## Usage Flow

### Admin Workflow
1. Admin logs into the dashboard
2. Views "Live Tracking Map" section
3. Verified users appear in the sidebar
4. Admin selects a user from the list
5. Selects package status from dropdown
6. Clicks "Pin Location" button
7. Clicks on the map to set package location
8. System generates and displays tracking ID
9. Admin provides tracking ID to customer

### Customer Workflow
1. Customer visits `/track` page
2. Enters their tracking ID
3. System displays:
   - Package status with color-coded badge
   - Recipient information
   - Last updated timestamp
   - Google Map with package location
4. Customer can click map marker for additional details

## Package Statuses

1. **Pending Pickup** - Package waiting to be picked up
2. **Pickup Assigned** - Courier assigned for pickup
3. **Pickup Accepted** - Courier accepted the pickup
4. **Enroute to Facility** - Moving to distribution facility
5. **Arrived at Hub or Facility** - At distribution center
6. **In Transit** - On the way to destination
7. **Out for Delivery** - On the way to final destination
8. **Delivered** - Successfully delivered
9. **Awaiting Receipt** - Waiting for customer to receive
10. **Delivery Failed** - Delivery attempt failed
11. **Returned to Sender** - Package returned to sender

## Tracking ID Format

Format: `SWIFT-{timestamp}`

Example: `SWIFT-1732840234567`

Generated automatically when admin pins a location on the map.

## Security Considerations

1. **Authentication**: Only admins can create/update tracking records
2. **Authorization**: Customers can only view their own tracking data
3. **API Rate Limiting**: Implement rate limiting to prevent abuse
4. **Data Validation**: Validate all input coordinates and status values
5. **CORS**: Configure CORS properly for frontend-backend communication

## Styling Features

### Admin Dashboard
- Modern gradient backgrounds
- Sticky sidebar for easy user selection
- Responsive grid layout
- Color-coded status badges
- Smooth animations
- Mobile-optimized design

### Customer Tracking Page
- Full-screen gradient background
- Center-aligned card design
- Color-coded status badges for each delivery status
- Smooth slide-up animations
- Fully responsive layout
- Touch-friendly inputs on mobile

## Next Steps

1. Install dependencies if needed
2. Set up MongoDB connection for Tracking model
3. Add the backend routes to your Express server
4. Configure Google Maps API key
5. Test admin functionality:
   - Create sample tracking records
   - Pin locations on map
   - Verify tracking ID generation
6. Test customer functionality:
   - Track packages with valid IDs
   - Verify location display on map
   - Check status updates

## Troubleshooting

**Map not loading**: Check Google Maps API key configuration and ensure it's enabled for Maps JavaScript API.

**Tracking ID not generating**: Ensure the location is properly clicked on the map and a user is selected.

**Customer tracking returns 404**: Verify tracking ID format and ensure it exists in database.

**Location not showing on customer map**: Check that location coordinates are valid numbers and within expected range.

## Support

For issues or questions about the implementation, refer to this documentation or contact the development team.

```

```my-frontend\src\TrackingModal.jsx
import React, { useState, useEffect } from 'react';
import ReactDOM from 'react-dom';
import './TrackingModal.css';
import LiveTrackingMap from './LiveTrackingMap';

class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false, error: null };
  }

  static getDerivedStateFromError(error) {
    return { hasError: true, error };
  }

  componentDidCatch(error, errorInfo) {
    console.error('TrackingModal Error:', error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return (
        <div style={{ padding: '20px', textAlign: 'center' }}>
          <p style={{ color: '#c53030', fontSize: '14px' }}>
            ‚ö†Ô∏è Error loading tracking map: {this.state.error?.message}
          </p>
          <p style={{ color: '#718096', fontSize: '12px' }}>
            Please close this dialog and try again
          </p>
        </div>
      );
    }

    return this.props.children;
  }
}

const TrackingModal = ({ isOpen, onClose }) => {
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    if (isOpen) {
      setMounted(true);
      const handleEscape = (e) => {
        if (e.key === 'Escape') {
          onClose();
        }
      };
      
      document.addEventListener('keydown', handleEscape);
      document.body.style.overflow = 'hidden';
      
      return () => {
        document.removeEventListener('keydown', handleEscape);
        document.body.style.overflow = 'unset';
      };
    } else {
      setMounted(false);
    }
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  const handleOverlayClick = (e) => {
    if (e.target === e.currentTarget) {
      onClose();
    }
  };

  const modalContent = (
    <div className="tracking-modal-overlay" onClick={handleOverlayClick} style={{ display: 'flex' }}>
      <div className="tracking-modal-content" onClick={(e) => e.stopPropagation()}>
        <div className="tracking-modal-header">
          <h2 className="tracking-modal-title">üìç Live Package Tracking</h2>
          <button 
            className="tracking-modal-close" 
            onClick={onClose} 
            title="Close (ESC)"
            type="button"
          >
            ‚úï
          </button>
        </div>
        <div className="tracking-modal-body">
          {mounted && (
            <ErrorBoundary>
              <LiveTrackingMap />
            </ErrorBoundary>
          )}
        </div>
      </div>
    </div>
  );

  return ReactDOM.createPortal(modalContent, document.body);
};

export default TrackingModal;

```

```my-frontend\src\TrackingModal.css
@keyframes slideIn {
  from {
    transform: scale(0.9) translateY(20px);
    opacity: 0;
  }
  to {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

@keyframes fadeInOverlay {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.tracking-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex !important;
  align-items: center;
  justify-content: center;
  z-index: 99999 !important;
  animation: fadeInOverlay 0.3s ease-out;
  pointer-events: auto !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.tracking-modal-content {
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  width: 95vw;
  max-width: 1400px;
  max-height: 90vh;
  display: flex !important;
  flex-direction: column;
  overflow: hidden;
  animation: slideIn 0.3s ease-out;
  pointer-events: auto !important;
  position: relative;
  z-index: 100000 !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.tracking-modal-header {
  display: flex !important;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  border-bottom: 1px solid #e2e8f0;
  background-color: #f9fafb;
  pointer-events: auto !important;
  visibility: visible !important;
}

.tracking-modal-title {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
  color: #1a202c;
}

.tracking-modal-close {
  background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
  color: #fff;
  border: none;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  cursor: pointer;
  font-size: 18px;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  pointer-events: auto;
  z-index: 10001;
}

.tracking-modal-close:hover {
  background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
  transform: scale(1.1);
  box-shadow: 0 4px 12px rgba(245, 101, 101, 0.3);
}

.tracking-modal-close:active {
  transform: scale(0.95);
}

.tracking-modal-body {
  flex: 1 !important;
  overflow: auto !important;
  padding: 20px;
  pointer-events: auto !important;
  background: #fff;
  visibility: visible !important;
  display: block !important;
}

/* Scrollbar styling */
.tracking-modal-body::-webkit-scrollbar {
  width: 8px;
}

.tracking-modal-body::-webkit-scrollbar-track {
  background: #f1f5f9;
}

.tracking-modal-body::-webkit-scrollbar-thumb {
  background: #cbd5e0;
  border-radius: 10px;
}

.tracking-modal-body::-webkit-scrollbar-thumb:hover {
  background: #a0aec0;
}

/* Responsive design */
@media (max-width: 1024px) {
  .tracking-modal-content {
    width: 98vw;
    max-height: 95vh;
  }
}

@media (max-width: 768px) {
  .tracking-modal-content {
    width: 100vw;
    max-width: 100vw;
    max-height: 100vh;
    border-radius: 0;
  }

  .tracking-modal-header {
    padding: 16px 20px;
  }

  .tracking-modal-title {
    font-size: 18px;
  }

  .tracking-modal-body {
    padding: 16px;
  }
}

@media (max-width: 480px) {
  .tracking-modal-close {
    width: 32px;
    height: 32px;
    font-size: 16px;
  }

  .tracking-modal-header {
    padding: 12px 16px;
  }

  .tracking-modal-title {
    font-size: 16px;
  }

  .tracking-modal-body {
    padding: 12px;
  }
}

```

```my-frontend\src\FloatingChatWidget.jsx
// === FloatingChatWidget.jsx (Fully Fixed Version) ========================

import React, { useState, useEffect, useRef } from "react";
import { io } from "socket.io-client";
import { auth, db } from "./firebase";
import {
  collection,
  doc,
  setDoc,
  getDoc,
  updateDoc,
  addDoc,
  onSnapshot,
  serverTimestamp,
  query,
  orderBy,
} from "firebase/firestore";

function FloatingChatWidget({ user, isVisible = true }) {
  const [isOpen, setIsOpen] = useState(false);
  const [messages, setMessages] = useState([]);        // Firestore messages
  const [mongoMessages, setMongoMessages] = useState([]); // Socket/Mongo messages
  const [input, setInput] = useState("");
  const [loading, setLoading] = useState(true);
  const [adminUser, setAdminUser] = useState(null);
  const [socket, setSocket] = useState(null);
  const [isConnected, setIsConnected] = useState(false);
  const [unreadCount, setUnreadCount] = useState(0);
  const [position, setPosition] = useState({ x: 0, y: 80 });
  const [isDragging, setIsDragging] = useState(false);
  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });

  const messagesEndRef = useRef(null);
  const isOpenRef = useRef(isOpen);
  const containerRef = useRef(null);

  const currentUser = auth.currentUser;
  const uid = currentUser?.uid || user?._id || "anonymous";

  const conversationId = user?._id ? `customer-${user._id}` : null;

  useEffect(() => {
    isOpenRef.current = isOpen;
  }, [isOpen]);

  useEffect(() => {
    const savedPosition = localStorage.getItem('chatWidgetPosition');
    if (savedPosition) {
      try {
        setPosition(JSON.parse(savedPosition));
      } catch {
        setPosition({ x: 0, y: 80 });
      }
    }
  }, []);

  useEffect(() => {
    const handleOpenChatWithMessage = (event) => {
      const message = event.detail?.message;
      console.log('üì± FloatingChatWidget EVENT RECEIVED!');
      console.log('üì± Message:', message);
      if (message) {
        console.log('‚úÖ Setting input and opening chat');
        setInput(message);
        setIsOpen(true);
      } else {
        console.log('‚ö†Ô∏è No message in event detail');
      }
    };

    console.log('üì± FloatingChatWidget: Setting up event listener for openFloatingChatWithMessage');
    window.addEventListener('openFloatingChatWithMessage', handleOpenChatWithMessage);
    return () => {
      window.removeEventListener('openFloatingChatWithMessage', handleOpenChatWithMessage);
    };
  }, []);

  const handleMouseDown = (e) => {
    if (e.button !== 0 || isOpen) return;
    setIsDragging(true);
    setDragStart({
      x: e.clientX - position.x,
      y: e.clientY - position.y,
    });
  };

  useEffect(() => {
    if (!isDragging) return;

    const handleMouseMove = (e) => {
      const newX = e.clientX - dragStart.x;
      const newY = e.clientY - dragStart.y;
      const maxX = window.innerWidth - 100;
      const maxY = window.innerHeight - 100;
      setPosition({
        x: Math.max(0, Math.min(newX, maxX)),
        y: Math.max(0, Math.min(newY, maxY)),
      });
    };

    const handleMouseUp = () => {
      setIsDragging(false);
      localStorage.setItem('chatWidgetPosition', JSON.stringify(position));
    };

    window.addEventListener('mousemove', handleMouseMove);
    window.addEventListener('mouseup', handleMouseUp);
    return () => {
      window.removeEventListener('mousemove', handleMouseMove);
      window.removeEventListener('mouseup', handleMouseUp);
    };
  }, [isDragging, dragStart, position]);

  // Load Admin User
  useEffect(() => {
    if (!user?._id) return;

    const fetchAdminUser = async () => {
      try {
        const token = localStorage.getItem("token");
        if (!token) return;

        const res = await fetch("http://localhost:5000/api/admin/user", {
          headers: { Authorization: `Bearer ${token}` },
        });

        if (res.ok) {
          const admin = await res.json();
          setAdminUser(admin);
        }
      } catch (err) {
        console.error("Admin user error:", err);
      }
    };

    fetchAdminUser();
  }, [user?._id]);

  // SOCKET.IO ‚Äî receive messages ONLY
  useEffect(() => {
    if (!user?._id) return;

    const s = io("http://localhost:5000", {
      reconnection: true,
      reconnectionDelay: 1000,
      reconnectionAttempts: 10,
    });

    s.on("connect", () => {
      setIsConnected(true);
      s.emit("user-login", { userId: user._id });

      const token = localStorage.getItem("token");
      fetch(`http://localhost:5000/api/messaging/conversation/${conversationId}`, {
        headers: { Authorization: `Bearer ${token}` },
      })
        .then((r) => r.json())
        .then((d) => setMongoMessages(d.messages || []));
    });

    s.on("disconnect", () => setIsConnected(false));

    s.on(`message-${conversationId}`, (message) => {
      setMongoMessages((prev) => [...prev, message]);

      if (message.isFromAdmin && !isOpenRef.current) {
        setUnreadCount((prev) => prev + 1);
      }
    });

    s.on(`message-status-${conversationId}`, (status) => {
      setMongoMessages((prev) =>
        prev.map((msg) =>
          msg._id === status.messageId ? { ...msg, status: status.status } : msg
        )
      );
    });

    setSocket(s);

    return () => s.disconnect();
  }, [user?._id]);

  // FIREBASE CHAT THREAD (customer side)
  const threadRef = doc(db, "threads", uid);
  const messagesCol = collection(db, "threads", uid, "messages");

  useEffect(() => {
    if (!currentUser && !user) {
      setLoading(false);
      return;
    }

    let unsub = () => {};

    (async () => {
      const snap = await getDoc(threadRef);
      if (!snap.exists())
        await setDoc(threadRef, {
          userId: uid,
          agentRequested: false,
          updatedAt: serverTimestamp(),
        });

      const q = query(messagesCol, orderBy("ts", "asc"));

      unsub = onSnapshot(q, async (snapshot) => {
        const docs = snapshot.docs.map((d) => ({ id: d.id, ...d.data() }));
        setMessages(docs);

        docs.forEach(async (d) => {
          if (d.from !== "customer" && d.status !== "read") {
            await updateDoc(doc(messagesCol, d.id), { status: "read" });
          }
        });
      });

      setLoading(false);
    })();

    return unsub;
  }, [currentUser, user, uid]);

  const allMessages = React.useMemo(() => {
    const merged = [...messages, ...mongoMessages];
    const seen = new Set();
    return merged.filter(m => {
      const key = m.id || m._id || `${m.text || m.message}-${m.ts || m.createdAt}`;
      if (seen.has(key)) return false;
      seen.add(key);
      return true;
    });
  }, [messages, mongoMessages]);

  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [allMessages]);

  // SEND MESSAGE (API only ‚Äî NO socket.emit)
  const sendMessage = async () => {
    const text = input.trim();
    if (!text) return;
    setInput("");

    if (!conversationId || !adminUser || !user?._id) return;

    const optimisticMessage = {
      _id: `temp-${Date.now()}`,
      message: text,
      conversationId,
      senderId: user._id,
      recipientId: adminUser._id,
      isFromAdmin: false,
      status: "sent",
      createdAt: new Date(),
      text: text
    };

    setMongoMessages((prev) => [...prev, optimisticMessage]);

    try {
      const token = localStorage.getItem("token");
      const res = await fetch("http://localhost:5000/api/messaging/send", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${token}`,
        },
        body: JSON.stringify({
          conversationId,
          senderId: user._id,
          recipientId: adminUser._id,
          message: text,
          isFromAdmin: false,
        }),
      });

      if (!res.ok) {
        console.error("‚ùå Message send failed:", res.status);
        setMongoMessages((prev) => prev.filter((m) => m._id !== optimisticMessage._id));
      } else {
        const data = await res.json();
        console.log("‚úÖ Message sent successfully:", data);
        setMongoMessages((prev) =>
          prev.map((m) =>
            m._id === optimisticMessage._id
              ? { ...data.message, status: "delivered" }
              : m
          )
        );
      }
    } catch (err) {
      console.error("‚ùå Send error:", err);
      setMongoMessages((prev) => prev.filter((m) => m._id !== optimisticMessage._id));
    }
  };

  if (!isVisible) return null;

  const renderMessage = (m) => {
    const isCustomer = m.from === "customer" || !m.isFromAdmin;

    return (
      <div
        key={m.id || m._id}
        style={{
          display: "flex",
          justifyContent: isCustomer ? "flex-end" : "flex-start",
          marginBottom: "8px",
          gap: "4px",
          alignItems: "flex-end",
        }}
      >
        <div
          style={{
            maxWidth: "75%",
            padding: "10px 14px",
            borderRadius: "12px",
            fontSize: "13px",
            background: isCustomer ? "#4f46e5" : "#f3f4f6",
            color: isCustomer ? "#fff" : "#111827",
          }}
        >
          {!isCustomer && (
            <strong style={{ display: "block", marginBottom: "4px" }}>
              Support
            </strong>
          )}
          {m.text || m.message}
        </div>
        {isCustomer && (
          <span style={{ fontSize: "11px", color: "#9ca3af" }}>
            {m.status === "read" && "‚úì‚úì"}
            {m.status === "delivered" && "‚úì"}
            {m.status === "sent" && "‚Ä¢"}
          </span>
        )}
      </div>
    );
  };

  return (
    <div
      ref={containerRef}
      onMouseDown={handleMouseDown}
      style={{
        position: "fixed",
        top: `${position.y}px`,
        left: `${position.x}px`,
        right: "auto",
        zIndex: 3000,
        cursor: isDragging && !isOpen ? "grabbing" : !isOpen ? "grab" : "default",
        userSelect: isDragging ? "none" : "auto",
      }}
    >
      {!isOpen ? (
        <button onClick={() => setIsOpen(true)} style={{ padding: "10px 20px" }}>üí¨ Chat</button>
      ) : (
        <div
          style={{
            width: "380px",
            height: "600px",
            background: "#fff",
            borderRadius: "12px",
            display: "flex",
            flexDirection: "column",
            boxShadow: "0 4px 12px rgba(0,0,0,0.15)",
          }}
        >
          <div
            style={{
              padding: "16px",
              background: "#4f46e5",
              color: "#fff",
              display: "flex",
              justifyContent: "space-between",
              cursor: isDragging ? "grabbing" : "grab",
              userSelect: "none",
            }}
          >
            <div>üí¨ Support</div>
            <button
              onClick={() => setIsOpen(false)}
              style={{
                color: "#fff",
                background: "transparent",
                border: "none",
                cursor: "pointer",
                fontSize: "20px",
              }}
            >
              ‚úï
            </button>
          </div>

          <div
            style={{
              flex: 1,
              overflowY: "auto",
              padding: "16px",
              background: "#f9fafb",
            }}
          >
            {allMessages.map(renderMessage)}
            <div ref={messagesEndRef} />
          </div>

          <div style={{ padding: "12px", display: "flex", gap: "8px" }}>
            <input
              value={input}
              onChange={(e) => setInput(e.target.value)}
              onKeyDown={(e) => e.key === "Enter" && sendMessage()}
              placeholder="Type your message‚Ä¶"
              style={{
                flex: 1,
                padding: "10px",
                borderRadius: "8px",
                border: "1px solid #ddd",
              }}
            />
            <button
              onClick={sendMessage}
              style={{
                background: "#4f46e5",
                color: "#fff",
                borderRadius: "8px",
                padding: "10px 20px",
              }}
            >
              Send
            </button>
          </div>
        </div>
      )}
    </div>
  );
}

export default FloatingChatWidget;

```

```my-frontend\src\firebase.js
// firebase.js
import { initializeApp } from "firebase/app";
import { getAuth } from "firebase/auth";
import { getFirestore } from "firebase/firestore";

const firebaseConfig = {
  apiKey: "AIzaSyCV7cTC6DPWERCQcYDviWCVsDWFwTLW8bk",
  authDomain: "swift-delivery-38345.firebaseapp.com",
  projectId: "swift-delivery-38345",
  storageBucket: "swift-delivery-38345.firebasestorage.app",
  messagingSenderId: "959515973555",
  appId: "1:959515973555:web:3e2e38ae84e962589cddc6",
};

const app = initializeApp(firebaseConfig);
export const auth = getAuth(app);
export const db = getFirestore(app);

```

```my-frontend\src\CustomerTracking.jsx
import React, { useState, useEffect, useRef } from 'react';
import L from 'leaflet';
import 'leaflet/dist/leaflet.css';
import './CustomerTracking.css';

const PACKAGE_STATUSES = [
  'Pending Pickup',
  'Pickup Assigned',
  'Pickup Accepted',
  'Enroute to Facility',
  'Arrived at Hub or Facility',
  'In Transit',
  'Out for Delivery',
  'Delivered',
  'Awaiting Receipt',
  'Delivery Failed',
  'Returned to Sender'
];

const API_BASE_URL = 'http://localhost:5000';

const CustomerTracking = ({ idToken }) => {
  const mapRef = useRef(null);
  const containerRef = useRef(null);
  const [map, setMap] = useState(null);
  const [trackingId, setTrackingId] = useState('');
  const [searchInput, setSearchInput] = useState('');
  const [trackingData, setTrackingData] = useState(null);
  const [marker, setMarker] = useState(null);
  const [animatedMarker, setAnimatedMarker] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [successMessage, setSuccessMessage] = useState(null);
  const animationIntervalRef = useRef(null);

  // Trigger pop-out animation and backdrop blur when tracking data loads
  useEffect(() => {
    const pageBody = document.body;
    
    if (trackingData && containerRef.current) {
      containerRef.current.classList.remove('container-initial');
      containerRef.current.classList.remove('container-animate-pop');
      void containerRef.current.offsetHeight;
      containerRef.current.classList.add('container-animate-pop');
      pageBody.classList.add('tracking-page-blurred');
      console.log('‚ú® Pop-out animation triggered!');
    } else {
      containerRef.current?.classList.remove('container-animate-pop');
      containerRef.current?.classList.add('container-initial');
      pageBody.classList.remove('tracking-page-blurred');
    }
  }, [trackingData]);

  const isUserLoggedIn = () => {
    return !!localStorage.getItem('token');
  };

  // Initialize Leaflet Map only when logged in
  useEffect(() => {
    try {
      if (!mapRef.current || !isUserLoggedIn()) return;
      
      const newMap = L.map(mapRef.current).setView([6.5244, 3.3792], 11);
      
      const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '¬© OpenStreetMap contributors',
        maxZoom: 19,
        name: 'Street Map'
      });

      const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: '¬© Esri',
        maxZoom: 18,
        name: 'Satellite'
      });

      satellite.addTo(newMap);
      L.control.layers({ 'Street Map': osm, 'Satellite': satellite }).addTo(newMap);

      setMap(newMap);

      return () => {
        newMap.remove();
      };
    } catch (err) {
      setError('Failed to initialize map');
    }
  }, []);

  const getMarkerIcon = (status) => {
    const colorMap = {
      'Pending Pickup': '#f59e0b',
      'Pickup Assigned': '#3b82f6',
      'Pickup Accepted': '#10b981',
      'Enroute to Facility': '#8b5cf6',
      'Arrived at Hub or Facility': '#6366f1',
      'In Transit': '#06b6d4',
      'Out for Delivery': '#f97316',
      'Delivered': '#22c55e',
      'Awaiting Receipt': '#14b8a6',
      'Delivery Failed': '#ef4444',
      'Returned to Sender': '#64748b'
    };
    const color = colorMap[status] || '#9ca3af';
    
    return L.divIcon({
      html: `<div style="
        background-color: ${color};
        width: 30px;
        height: 30px;
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
      ">üì¶</div>`,
      iconSize: [36, 36],
      className: 'custom-icon'
    });
  };

  const getStatusColor = (status) => {
    const statusColors = {
      'Pending Pickup': '#f59e0b',
      'Pickup Assigned': '#3b82f6',
      'Pickup Accepted': '#10b981',
      'Enroute to Facility': '#8b5cf6',
      'Arrived at Hub or Facility': '#6366f1',
      'In Transit': '#06b6d4',
      'Out for Delivery': '#f97316',
      'Delivered': '#22c55e',
      'Awaiting Receipt': '#14b8a6',
      'Delivery Failed': '#ef4444',
      'Returned to Sender': '#64748b'
    };
    return statusColors[status] || '#9ca3af';
  };

  const createCourierIcon = () => {
    return L.divIcon({
      html: `<div style="
        background-color: #ff6b6b;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        border: 2px solid white;
        box-shadow: 0 0 0 3px #ff6b6b, 0 2px 6px rgba(0,0,0,0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        animation: pulse 1.5s infinite;
      ">üöö</div>`,
      iconSize: [32, 32],
      className: 'animated-courier-icon'
    });
  };

  const animateCourierMovement = (location) => {
    if (animationIntervalRef.current) {
      clearInterval(animationIntervalRef.current);
    }

    if (animatedMarker && map && map.hasLayer(animatedMarker)) {
      map.removeLayer(animatedMarker);
    }

    const centerLat = location.lat;
    const centerLng = location.lng;
    const radius = 0.005; // ~500m at this zoom level
    let angle = 0;

    const courier = L.marker([centerLat, centerLng], { 
      icon: createCourierIcon(),
      zIndexOffset: 1000
    }).addTo(map);

    const popupContent = `
      <div style="font-size: 12px; text-align: center;">
        <strong>üöö Courier En Route</strong><br/>
        <span style="color: #ff6b6b;">Moving to delivery location</span>
      </div>
    `;
    
    courier.bindPopup(popupContent);

    setAnimatedMarker(courier);

    animationIntervalRef.current = setInterval(() => {
      angle = (angle + 2) % 360;
      const rad = (angle * Math.PI) / 180;
      const newLat = centerLat + radius * Math.cos(rad);
      const newLng = centerLng + radius * Math.sin(rad);
      
      courier.setLatLng([newLat, newLng]);
    }, 100);
  };

  const getStatusIcon = (status) => {
    const icons = {
      'Pending Pickup': 'üì¶',
      'Pickup Assigned': 'üë§',
      'Pickup Accepted': '‚úÖ',
      'Enroute to Facility': 'üöö',
      'Arrived at Hub or Facility': 'üè¢',
      'In Transit': 'üõ£Ô∏è',
      'Out for Delivery': 'üöó',
      'Delivered': 'üìç',
      'Awaiting Receipt': '‚è≥',
      'Delivery Failed': '‚ùå',
      'Returned to Sender': '‚Ü©Ô∏è'
    };
    return icons[status] || 'üì¶';
  };

  const handleSearchTracking = async (e) => {
    e.preventDefault();
    if (!searchInput.trim()) {
      setError('Please enter a tracking ID');
      return;
    }

    setLoading(true);
    setError(null);
    setSuccessMessage(null);

    try {
      const response = await fetch(`${API_BASE_URL}/api/tracking/${searchInput.trim()}`, {
        headers: {
          'Authorization': idToken ? `Bearer ${idToken}` : undefined
        }
      });

      if (!response.ok) {
        throw new Error('Tracking ID not found');
      }

      const data = await response.json();
      setTrackingData(data);
      setTrackingId(searchInput.trim());
      setSearchInput('');
      setSuccessMessage('Tracking information loaded!');

      // Update map with new location - use setTimeout to ensure map is ready
      if (data.location) {
        setTimeout(() => {
          if (!map || !map._container) {
            console.error('Map not ready');
            return;
          }

          const newLocation = [data.location.lat, data.location.lng];

          // Remove existing marker
          if (marker && map.hasLayer(marker)) {
            map.removeLayer(marker);
          }

          // Create new marker
          const icon = getMarkerIcon(data.status);
          const newMarker = L.marker(newLocation, { icon }).addTo(map);

          const popupContent = `
            <div style="font-size: 13px;">
              <strong style="color: #4f46e5;">üì¶ ${data.user.fullName}</strong><br/>
              <div style="margin-top: 8px; border-top: 1px solid #e5e7eb; padding-top: 8px;">
                <strong>üìß Email:</strong> ${data.user.email}<br/>
                <strong>üÜî Tracking:</strong> <span style="font-family: monospace; color: #4f46e5;">${data.trackingId}</span><br/>
                <strong>üìç Status:</strong> <span style="color: ${getStatusColor(data.status)}; font-weight: 600;">${data.status}</span><br/>
                <strong>üìç Coordinates:</strong> ${data.location.lat.toFixed(4)}, ${data.location.lng.toFixed(4)}<br/>
                <strong>üïê Updated:</strong> ${new Date(data.updatedAt).toLocaleString()}
              </div>
            </div>
          `;

          newMarker.bindPopup(popupContent).openPopup();
          setMarker(newMarker);
          map.setView(newLocation, 14);

          // Animate courier movement for active statuses
          const activeStatuses = ['Out for Delivery', 'In Transit', 'Enroute to Facility'];
          if (activeStatuses.includes(data.status)) {
            setTimeout(() => {
              animateCourierMovement({ lat: data.location.lat, lng: data.location.lng });
            }, 500);
          }
        }, 100);
      }
    } catch (err) {
      console.error('Error fetching tracking:', err);
      setError(err.message || 'Failed to retrieve tracking information');
      setTrackingData(null);
    } finally {
      setLoading(false);
    }
  };

  const handleClearSearch = () => {
    setTrackingId('');
    setTrackingData(null);
    setSearchInput('');
    setError(null);
    setSuccessMessage(null);
    
    if (animationIntervalRef.current) {
      clearInterval(animationIntervalRef.current);
    }
    
    if (marker && map && map.hasLayer(marker)) {
      map.removeLayer(marker);
      setMarker(null);
    }
    
    if (animatedMarker && map && map.hasLayer(animatedMarker)) {
      map.removeLayer(animatedMarker);
      setAnimatedMarker(null);
    }
  };

  const containerStyle = {
    ...styles.container,
    opacity: trackingData ? 1 : 0,
    transform: trackingData ? 'scale(1) translateY(0)' : 'scale(0.5) translateY(80px)',
    filter: trackingData ? 'blur(0px)' : 'blur(20px)',
    transition: trackingData ? 'none' : 'none',
    animation: trackingData ? 'containerPopOut 1.2s cubic-bezier(0.12, 0.65, 0.25, 1.08) forwards' : 'none',
  };

  return (
    <div ref={containerRef} style={containerStyle}>
      <div style={styles.headerSection}>
        <h2 style={styles.title}>üìç Track Your Package</h2>
        <p style={styles.subtitle}>Enter your tracking ID to see your package location and delivery status</p>
      </div>

      {error && <div style={styles.errorMessage}>‚ö†Ô∏è {error}</div>}
      {successMessage && <div style={styles.successMessage}>‚úÖ {successMessage}</div>}

      <div style={styles.searchSection}>
        <form onSubmit={handleSearchTracking} style={styles.searchForm}>
          <div style={styles.inputWrapper}>
            <input
              type="text"
              placeholder="Enter tracking ID (e.g., SWIFT-1234567890-ABCDE)"
              value={searchInput}
              onChange={(e) => setSearchInput(e.target.value)}
              style={styles.input}
              disabled={loading}
            />
            <button
              type="submit"
              style={styles.searchButton}
              disabled={loading || !searchInput.trim()}
            >
              {loading ? 'üîç Searching...' : 'üîç Search'}
            </button>
          </div>
        </form>
      </div>

      <div style={styles.contentWrapper}>
        {/* Map */}
        <div style={styles.mapSection}>
          <div ref={mapRef} style={{
            ...styles.map,
            backgroundColor: isUserLoggedIn() ? '#e0e7ff' : '#000000'
          }}>
            {!map && isUserLoggedIn() && (
              <div style={styles.mapLoading}>
                <div style={styles.spinner}></div>
                <p style={{ color: '#fff' }}>Loading map...</p>
              </div>
            )}
            {!isUserLoggedIn() && (
              <div style={styles.mapPlaceholder}>
                <p>üì¶ Please log in to track your packages</p>
              </div>
            )}
          </div>
        </div>

        {/* Tracking Info */}
        {trackingData && (
          <div style={styles.infoSection}>
            <div style={styles.infoCard}>
              <div style={styles.cardHeader}>
                <h3 style={styles.cardTitle}>üì¶ Package Details</h3>
                <button onClick={handleClearSearch} style={styles.clearButton}>
                  ‚úï
                </button>
              </div>

              <div style={styles.detailsGrid}>
                <div style={styles.detailItem}>
                  <span style={styles.detailLabel}>Recipient:</span>
                  <span style={styles.detailValue}>{trackingData.user.fullName}</span>
                </div>

                <div style={styles.detailItem}>
                  <span style={styles.detailLabel}>Email:</span>
                  <span style={styles.detailValue}>{trackingData.user.email}</span>
                </div>

                <div style={styles.detailItem}>
                  <span style={styles.detailLabel}>Tracking ID:</span>
                  <span style={{ ...styles.detailValue, fontFamily: 'monospace', color: '#4f46e5' }}>
                    {trackingData.trackingId}
                  </span>
                </div>

                <div style={{ ...styles.detailItem, gridColumn: '1 / -1' }}>
                  <span style={styles.detailLabel}>Current Status:</span>
                  <div style={{
                    ...styles.statusBadge,
                    backgroundColor: getStatusColor(trackingData.status),
                    color: '#fff'
                  }}>
                    {getStatusIcon(trackingData.status)} {trackingData.status}
                  </div>
                </div>

                <div style={styles.detailItem}>
                  <span style={styles.detailLabel}>Latitude:</span>
                  <span style={styles.detailValue}>{trackingData.location.lat.toFixed(6)}</span>
                </div>

                <div style={styles.detailItem}>
                  <span style={styles.detailLabel}>Longitude:</span>
                  <span style={styles.detailValue}>{trackingData.location.lng.toFixed(6)}</span>
                </div>

                <div style={styles.detailItem}>
                  <span style={styles.detailLabel}>Last Updated:</span>
                  <span style={styles.detailValue}>
                    {new Date(trackingData.updatedAt).toLocaleString()}
                  </span>
                </div>

                <div style={styles.detailItem}>
                  <span style={styles.detailLabel}>Created:</span>
                  <span style={styles.detailValue}>
                    {new Date(trackingData.createdAt).toLocaleString()}
                  </span>
                </div>
              </div>

              <div style={styles.statusTimeline}>
                <h4 style={styles.timelineTitle}>üìã Status Timeline</h4>
                <div style={styles.timelineItem}>
                  <div style={{
                    ...styles.timelineIndicator,
                    backgroundColor: getStatusColor(trackingData.status)
                  }}></div>
                  <div>
                    <strong>{trackingData.status}</strong>
                    <p style={styles.timelineTime}>
                      {new Date(trackingData.updatedAt).toLocaleString()}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        )}

        {!trackingData && (
          <div style={styles.placeholderSection}>
            <div style={styles.placeholderContent}>
              <div style={styles.placeholderIcon}>üì¶</div>
              <h3 style={styles.placeholderTitle}>No Package Information</h3>
              <p style={styles.placeholderText}>
                Enter your tracking ID above to see your package location and delivery status in real-time
              </p>
            </div>
          </div>
        )}
      </div>
    </div>
  );
};

const styles = {
  container: {
    maxWidth: '1200px',
    margin: '0 auto',
    padding: '24px',
    fontFamily: "'Segoe UI', 'Helvetica Neue', sans-serif",
    willChange: 'transform, opacity, filter',
  },
  headerSection: {
    marginBottom: '32px',
    textAlign: 'center',
  },
  title: {
    fontSize: '32px',
    fontWeight: '700',
    color: '#1a202c',
    margin: '0 0 12px 0',
  },
  subtitle: {
    fontSize: '16px',
    color: '#718096',
    margin: '0',
  },
  errorMessage: {
    backgroundColor: '#fed7d7',
    color: '#c53030',
    padding: '12px 16px',
    borderRadius: '8px',
    marginBottom: '16px',
    borderLeft: '4px solid #c53030',
    fontSize: '14px',
  },
  successMessage: {
    backgroundColor: '#c6f6d5',
    color: '#22543d',
    padding: '12px 16px',
    borderRadius: '8px',
    marginBottom: '16px',
    borderLeft: '4px solid #22c55e',
    fontSize: '14px',
  },
  searchSection: {
    marginBottom: '24px',
  },
  searchForm: {
    display: 'flex',
    gap: '12px',
  },
  inputWrapper: {
    display: 'flex',
    gap: '8px',
    width: '100%',
  },
  input: {
    flex: '1',
    padding: '12px 16px',
    border: '1px solid #cbd5e0',
    borderRadius: '8px',
    fontSize: '14px',
    fontFamily: 'inherit',
    transition: 'all 0.2s ease',
    boxSizing: 'border-box',
  },
  searchButton: {
    padding: '12px 24px',
    backgroundColor: '#4f46e5',
    color: '#fff',
    border: 'none',
    borderRadius: '8px',
    fontSize: '14px',
    fontWeight: '600',
    cursor: 'pointer',
    transition: 'all 0.2s ease',
    whiteSpace: 'nowrap',
  },
  contentWrapper: {
    display: 'grid',
    gridTemplateColumns: '1fr 400px',
    gap: '24px',
  },
  mapSection: {
    backgroundColor: '#fff',
    borderRadius: '12px',
    overflow: 'hidden',
    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)',
  },
  map: {
    width: '100%',
    height: '500px',
    backgroundColor: '#e0e7ff',
    position: 'relative',
  },
  mapLoading: {
    position: 'absolute',
    top: '50%',
    left: '50%',
    transform: 'translate(-50%, -50%)',
    textAlign: 'center',
    color: '#718096',
  },
  spinner: {
    width: '40px',
    height: '40px',
    border: '4px solid #e2e8f0',
    borderTop: '4px solid #4f46e5',
    borderRadius: '50%',
    animation: 'spin 1s linear infinite',
    margin: '0 auto 12px',
  },
  mapPlaceholder: {
    position: 'absolute',
    top: '50%',
    left: '50%',
    transform: 'translate(-50%, -50%)',
    textAlign: 'center',
    color: '#999',
    fontSize: '16px',
    fontWeight: '500',
  },
  infoSection: {
    display: 'flex',
    flexDirection: 'column',
  },
  infoCard: {
    backgroundColor: '#fff',
    borderRadius: '12px',
    padding: '20px',
    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)',
  },
  cardHeader: {
    display: 'flex',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: '16px',
    paddingBottom: '12px',
    borderBottom: '2px solid #e2e8f0',
  },
  cardTitle: {
    margin: '0',
    fontSize: '16px',
    fontWeight: '600',
    color: '#1a202c',
  },
  clearButton: {
    background: '#f56565',
    color: '#fff',
    border: 'none',
    borderRadius: '50%',
    width: '32px',
    height: '32px',
    cursor: 'pointer',
    fontSize: '16px',
    fontWeight: 'bold',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
  },
  detailsGrid: {
    display: 'grid',
    gridTemplateColumns: '1fr 1fr',
    gap: '12px',
    marginBottom: '16px',
  },
  detailItem: {
    display: 'flex',
    flexDirection: 'column',
    gap: '4px',
  },
  detailLabel: {
    fontSize: '12px',
    fontWeight: '600',
    color: '#718096',
    textTransform: 'uppercase',
    letterSpacing: '0.5px',
  },
  detailValue: {
    fontSize: '14px',
    color: '#2d3748',
    fontWeight: '500',
  },
  statusBadge: {
    display: 'inline-flex',
    alignItems: 'center',
    gap: '6px',
    padding: '8px 12px',
    borderRadius: '6px',
    fontSize: '13px',
    fontWeight: '600',
    width: 'fit-content',
  },
  statusTimeline: {
    borderTop: '1px solid #e2e8f0',
    paddingTop: '16px',
    marginTop: '16px',
  },
  timelineTitle: {
    margin: '0 0 12px 0',
    fontSize: '13px',
    fontWeight: '600',
    color: '#718096',
    textTransform: 'uppercase',
  },
  timelineItem: {
    display: 'flex',
    gap: '12px',
    alignItems: 'flex-start',
  },
  timelineIndicator: {
    width: '12px',
    height: '12px',
    borderRadius: '50%',
    marginTop: '4px',
    flexShrink: '0',
  },
  timelineTime: {
    margin: '4px 0 0 0',
    fontSize: '12px',
    color: '#a0aec0',
  },
  placeholderSection: {
    gridColumn: '1 / -1',
    backgroundColor: '#f7fafc',
    borderRadius: '12px',
    padding: '60px 24px',
    textAlign: 'center',
    border: '2px dashed #cbd5e0',
  },
  placeholderContent: {
    display: 'flex',
    flexDirection: 'column',
    alignItems: 'center',
    gap: '12px',
  },
  placeholderIcon: {
    fontSize: '48px',
    opacity: '0.5',
  },
  placeholderTitle: {
    margin: '0',
    fontSize: '18px',
    fontWeight: '600',
    color: '#4a5568',
  },
  placeholderText: {
    margin: '0',
    fontSize: '14px',
    color: '#718096',
  },
};

export default CustomerTracking;

```

```my-frontend\src\CustomerTracking.css
@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes containerPopOut {
  0% {
    opacity: 0;
    transform: scale(0.5) translateY(80px);
    filter: blur(20px);
  }
  40% {
    filter: blur(10px);
  }
  70% {
    filter: blur(3px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0px);
  }
}

.container-initial {
  opacity: 0 !important;
  transform: scale(0.5) translateY(80px) !important;
  filter: blur(20px) !important;
}

.container-animate-pop {
  animation: containerPopOut 1.2s cubic-bezier(0.12, 0.65, 0.25, 1.08) forwards !important;
  opacity: 1 !important;
  transform: scale(1) translateY(0) !important;
  filter: blur(0px) !important;
}

body.tracking-page-blurred {
  filter: blur(3px) !important;
}

@media (max-width: 768px) {
  .container {
    padding: 16px !important;
  }

  .title {
    font-size: 24px !important;
  }

  .subtitle {
    font-size: 14px !important;
  }

  .contentWrapper {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 16px !important;
  }

  .map {
    height: 300px !important;
  }

  .searchForm {
    flex-direction: column !important;
  }

  .inputWrapper {
    flex-direction: column !important;
  }

  .searchButton {
    width: 100%;
  }

  .detailsGrid {
    grid-template-columns: 1fr !important;
  }

  .placeholderSection {
    padding: 40px 16px !important;
  }
}

@media (max-width: 480px) {
  .container {
    padding: 12px !important;
  }

  .title {
    font-size: 20px !important;
  }

  .headerSection {
    margin-bottom: 20px !important;
  }

  .map {
    height: 250px !important;
  }

  .cardHeader {
    flex-direction: column !important;
    align-items: flex-start !important;
  }

  .clearButton {
    align-self: flex-end;
  }

  .detailsGrid {
    gap: 8px !important;
  }

  .placeholderIcon {
    font-size: 40px !important;
  }

  .placeholderTitle {
    font-size: 16px !important;
  }

  .placeholderText {
    font-size: 12px !important;
  }
}

```

```my-frontend\src\CourierDashboard.jsx
// src/CourierDashboard.jsx
import React, { useState } from "react";
import { GoogleMap, Marker, useJsApiLoader } from "@react-google-maps/api";

const containerStyle = {
  width: "100%",
  height: "400px"
};

const defaultCenter = {
  lat: 6.5244, // Lagos default
  lng: 3.3792
};

function CourierDashboard({ idToken }) {
  const { isLoaded } = useJsApiLoader({
    googleMapsApiKey: "AIzaSyCPCAkpYgOMTapv5Y6v5bWVJ6pbSMTtL74" // üîë Replace this
  });

  const [location, setLocation] = useState(defaultCenter);
  const [status, setStatus] = useState("");

  const handleMapClick = async (e) => {
    const newLoc = {
      lat: e.latLng.lat(),
      lng: e.latLng.lng()
    };
    setLocation(newLoc);

    try {
      const res = await fetch("http://localhost:5000/api/courier/update-location", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${idToken}`
        },
        body: JSON.stringify(newLoc)
      });

      const data = await res.json();
      if (res.ok) {
        setStatus("‚úÖ Location updated successfully");
      } else {
        setStatus(`‚ùå Error: ${data.error}`);
      }
    } catch (err) {
      console.error("Error updating location:", err);
      setStatus("‚ùå Server error updating location");
    }
  };

  return isLoaded ? (
    <div>
      <h2>Courier Dashboard</h2>
      <p>Click on the map to update package location.</p>
      <GoogleMap
        mapContainerStyle={containerStyle}
        center={location}
        zoom={14}
        onClick={handleMapClick}
      >
        <Marker position={location} />
      </GoogleMap>
      {status && <p style={{ marginTop: 10 }}>{status}</p>}
    </div>
  ) : (
    <p>Loading map...</p>
  );
}

export default CourierDashboard;

```

```my-frontend\src\VoiceAssistant.jsx
import React, { useState, useRef, useEffect } from "react";

function VoiceAssistant({ onSendMessage, userId }) {
  const [isListening, setIsListening] = useState(false);
  const [transcript, setTranscript] = useState("");
  const [isSpeaking, setIsSpeaking] = useState(false);
  const [recognitionError, setRecognitionError] = useState("");
  const [voiceEnabled, setVoiceEnabled] = useState(false);
  const [isProcessing, setIsProcessing] = useState(false);
  const recognitionRef = useRef(null);
  const synthRef = useRef(window.speechSynthesis);

  useEffect(() => {
    const SpeechRecognition =
      window.SpeechRecognition || window.webkitSpeechRecognition;

    if (!SpeechRecognition) {
      console.warn("Speech Recognition not supported");
      return;
    }

    const recognition = new SpeechRecognition();
    recognition.continuous = false;
    recognition.interimResults = true;
    recognition.lang = "en-US";

    recognition.onstart = () => {
      setIsListening(true);
      setRecognitionError("");
      setTranscript("");
    };

    recognition.onresult = (event) => {
      let interim = "";
      let final = "";

      for (let i = event.resultIndex; i < event.results.length; i++) {
        const trans = event.results[i][0].transcript;

        if (event.results[i].isFinal) {
          final += trans + " ";
        } else {
          interim += trans;
        }
      }

      setTranscript((final || interim).trim());
    };

    recognition.onerror = (event) => {
      setRecognitionError(`Error: ${event.error}`);
      console.error("Speech recognition error:", event.error);
    };

    recognition.onend = () => {
      setIsListening(false);
    };

    recognitionRef.current = recognition;

    return () => {
      if (recognitionRef.current) {
        recognitionRef.current.abort();
      }
    };
  }, []);

  const startListening = () => {
    if (recognitionRef.current && !isListening) {
      setTranscript("");
      setRecognitionError("");
      recognitionRef.current.start();
    }
  };

  const stopListening = () => {
    if (recognitionRef.current && isListening) {
      recognitionRef.current.stop();
    }
  };

  const speakText = (text) => {
    if (!synthRef.current) return;

    synthRef.current.cancel();

    const voices = synthRef.current.getVoices();
    const femaleVoice =
      voices.find(
        (voice) =>
          voice.name.toLowerCase().includes("female") ||
          voice.name.toLowerCase().includes("woman") ||
          voice.name.toLowerCase().includes("her")
      ) || voices[1];

    const sentences = text.match(/[^.!?]+[.!?]+/g) || [text];
    let sentenceIndex = 0;

    const speakNextSentence = () => {
      if (sentenceIndex >= sentences.length) {
        setIsSpeaking(false);
        return;
      }

      const sentence = sentences[sentenceIndex].trim();
      sentenceIndex++;

      const utterance = new SpeechSynthesisUtterance(sentence);
      utterance.rate = 0.85;
      utterance.pitch = 1.1 + Math.random() * 0.2;
      utterance.volume = 0.85;

      if (femaleVoice) {
        utterance.voice = femaleVoice;
      }

      utterance.onstart = () => setIsSpeaking(true);
      utterance.onend = () => {
        if (sentenceIndex < sentences.length) {
          setTimeout(speakNextSentence, 400);
        } else {
          setIsSpeaking(false);
        }
      };
      utterance.onerror = () => setIsSpeaking(false);

      synthRef.current.speak(utterance);
    };

    setIsSpeaking(true);
    speakNextSentence();
  };

  const handleSendVoiceMessage = async () => {
    if (!transcript.trim()) return;

    const voiceMessage = transcript.trim();
    setTranscript("");
    setIsProcessing(true);

    try {
      const response = await fetch("http://localhost:5000/api/bot/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: voiceMessage }),
      });

      const data = await response.json();
      const botReply =
        data.reply || "I couldn't understand that. Please try again.";

      onSendMessage(voiceMessage);

      setTimeout(() => {
        speakText(botReply);
      }, 500);
    } catch (error) {
      console.error("Voice message failed:", error);
      const errorMessage =
        "Sorry, I couldn't process your request. Please try again.";
      speakText(errorMessage);
    } finally {
      setIsProcessing(false);
    }
  };

  return (
    <div
      style={{
        display: "flex",
        flexDirection: "column",
        gap: "8px",
        padding: "12px",
        backgroundColor: "#e0f7ff",
        borderRadius: "6px",
        border: "2px solid #06b6d4",
      }}
    >
      <div
        style={{
          display: "flex",
          gap: "6px",
          alignItems: "center",
          flexWrap: "wrap",
        }}
      >
        <button
          onClick={() => setVoiceEnabled(!voiceEnabled)}
          title={voiceEnabled ? "Voice ON" : "Voice OFF"}
          style={{
            padding: "8px 12px",
            background: voiceEnabled ? "#10b981" : "#9ca3af",
            color: "#fff",
            border: "none",
            borderRadius: "4px",
            cursor: "pointer",
            fontSize: "12px",
            fontWeight: "600",
            whiteSpace: "nowrap",
          }}
        >
          {voiceEnabled ? "üîä ON" : "üîá OFF"}
        </button>

        {voiceEnabled && (
          <button
            onClick={isListening ? stopListening : startListening}
            disabled={isProcessing}
            style={{
              padding: "8px 12px",
              background: isListening ? "#ef4444" : "#4f46e5",
              color: "#fff",
              border: "none",
              borderRadius: "4px",
              cursor: isProcessing ? "not-allowed" : "pointer",
              fontSize: "12px",
              fontWeight: "600",
              display: "flex",
              alignItems: "center",
              gap: "4px",
              opacity: isProcessing ? 0.6 : 1,
              whiteSpace: "nowrap",
            }}
            title={isListening ? "Stop listening" : "Start speaking"}
          >
            {isListening ? "üõë" : "üé§"} {isListening ? "Stop" : "Speak"}
          </button>
        )}

        {isSpeaking && (
          <button
            onClick={() => synthRef.current?.cancel()}
            style={{
              padding: "8px 12px",
              background: "#f97316",
              color: "#fff",
              border: "none",
              borderRadius: "4px",
              cursor: "pointer",
              fontSize: "12px",
              fontWeight: "600",
              whiteSpace: "nowrap",
            }}
            title="Stop speaking"
          >
            üîá Stop
          </button>
        )}
      </div>

      {voiceEnabled && transcript && !isProcessing && (
        <div
          style={{
            padding: "8px",
            background: "#dbeafe",
            borderRadius: "4px",
            fontSize: "11px",
            color: "#1e40af",
            borderLeft: "3px solid #3b82f6",
          }}
        >
          <strong>You:</strong> {transcript}
        </div>
      )}

      {voiceEnabled && recognitionError && (
        <div
          style={{
            padding: "8px",
            background: "#fee2e2",
            borderRadius: "4px",
            fontSize: "10px",
            color: "#991b1b",
            borderLeft: "3px solid #ef4444",
          }}
        >
          {recognitionError}
        </div>
      )}

      {voiceEnabled && isProcessing && (
        <div
          style={{
            padding: "8px",
            background: "#fef3c7",
            borderRadius: "4px",
            fontSize: "11px",
            color: "#92400e",
          }}
        >
          ‚è≥ Processing...
        </div>
      )}

      {voiceEnabled && transcript && !recognitionError && !isProcessing && (
        <button
          onClick={handleSendVoiceMessage}
          style={{
            padding: "8px 12px",
            background: "#10b981",
            color: "#fff",
            border: "none",
            borderRadius: "4px",
            cursor: "pointer",
            fontSize: "12px",
            fontWeight: "600",
            width: "100%",
          }}
        >
          ‚úì Send Voice Message
        </button>
      )}
    </div>
  );
}

export default VoiceAssistant;

```

```my-frontend\src\authService.js
import { signInWithEmailAndPassword, signOut } from "firebase/auth";
import { auth } from "./firebase";

// Login with Firebase and return the Firebase ID token
export const loginUser = async (email, password) => {
  try {
    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    const user = userCredential.user;

    // Get Firebase ID token
    const idToken = await user.getIdToken();
    console.log("Firebase ID Token:", idToken);

    return idToken;
  } catch (error) {
    console.error("Login error:", error.message);
    throw error;
  }
};

// Read current user info from the JWT stored in localStorage (set after backend login)
export const getCurrentUser = () => {
  const token = localStorage.getItem("token");
  if (!token) return null;

  try {
    const payload = token.split(".")[1];
    const decoded = JSON.parse(atob(payload));

    // Normalized shape; AdminDashboard uses email/name/role
    return {
      email: decoded.email || decoded.user?.email || "",
      role: decoded.role || decoded.user?.role || "",
      ...decoded
    };
  } catch (err) {
    console.error("getCurrentUser error", err);
    return null;
  }
};

// Logout function - cleans up both localStorage token and Firebase auth state
export const logoutUser = async () => {
  try {
    // Remove local storage token
    localStorage.removeItem("token");
    
    // Sign out from Firebase
    await signOut(auth);
    
    console.log("User successfully logged out from both Firebase and local storage");
  } catch (error) {
    console.error("Logout error:", error);
    // Even if Firebase signout fails, still remove local token
    localStorage.removeItem("token");
  }
};

```

```my-frontend\src\App.jsx
import React, { useState, useEffect } from "react";
import {
  HashRouter as Router,
  Routes,
  Route,
  useNavigate,
} from "react-router-dom";
import Home from "./Home";
import ChatBox from "./ChatBox";
import AdminDashboard from "./AdminDashboard";
import CourierDashboard from "./CourierDashboard";
import TrackingMap from "./TrackingMap";
import CustomerTracking from "./CustomerTracking";
import Profile from "./Profile";
import LoginForm from "./LoginForm";
import RegisterForm from "./RegisterForm";
import Header from "./components/Header";
import SideMenu from "./components/SideMenu";
import TopRightProfileMenu from "./TopRightProfileMenu";
import FloatingChatWidget from "./FloatingChatWidget";

// Small wrapper so RegisterForm can redirect to /login on success
function RegisterPage() {
  const navigate = useNavigate();

  const handleRegisterSuccess = () => {
    // after successful registration go to login page
    navigate("/login");
  };

  return (
    <section id="register" className="register-section">
      <RegisterForm onRegisterSuccess={handleRegisterSuccess} />
    </section>
  );
}

function LoginPage({ onLogin }) {
  return (
    <section id="login" className="login-section">
      <LoginForm onLogin={onLogin} />
    </section>
  );
}

// Inner app so we can use useNavigate
function AppInner() {
  const [token, setToken] = useState(() => localStorage.getItem("token") || null);
  const [currentUserProfile, setCurrentUserProfile] = useState(null);
  const navigate = useNavigate();

  // Decode JWT to get role / isAdmin (client-side only)
  const getRoleFromToken = (t) => {
    if (!t) return null;
    try {
      const payload = t.split(".")[1];
      const decoded = JSON.parse(atob(payload));

      // If backend signs { isAdmin: true }, map that to "admin"
      if (decoded.isAdmin) return "admin";
      if (decoded.role) return decoded.role;
      return null;
    } catch (err) {
      return null;
    }
  };

  const handleLogin = (t) => {
    if (t) {
      localStorage.setItem("token", t);
      setToken(t);

      const role = getRoleFromToken(t);

      if (role === "admin") {
        navigate("/admin");      // go straight to admin dashboard
      } else if (role === "courier") {
        navigate("/courier");
      } else {
        navigate("/profile");
      }
    }
  };

  const handleLogout = () => {
    localStorage.removeItem("token");
    setToken(null);
    setCurrentUserProfile(null);
    try {
      window.location.hash = "#/"; // back to home
    } catch {}
  };

  const role = getRoleFromToken(token);

  useEffect(() => {
    if (token && role !== "admin" && role !== "courier") {
      const fetchProfile = async () => {
        try {
          const res = await fetch("http://localhost:5000/api/user/profile", {
            headers: { "Authorization": `Bearer ${token}` }
          });
          if (res.ok) {
            const data = await res.json();
            setCurrentUserProfile(data.user || data);
          }
        } catch (err) {
          console.error("Failed to fetch profile:", err);
        }
      };
      fetchProfile();
    } else {
      setCurrentUserProfile(null);
    }
  }, [token, role]);

  // Toggle a body class so CSS can reposition the chatbot specifically
  // when an admin is logged in: normal users see the bot on the right,
  // admins get it moved to the left via .admin-bot-left.
  useEffect(() => {
    const body = document.body;
    if (!body) return;
    if (role === "admin") {
      body.classList.add("admin-bot-left");
    } else {
      body.classList.remove("admin-bot-left");
    }
  }, [role]);

  // Use the static header/sidebar from index.html; avoid rendering a second
  // React header to prevent duplicate headers on the landing page.
  const showGlobalNavigation = false;

  return (
    <>
      {/* Global chrome - only show for non-admin pages */}
      {showGlobalNavigation && (
        <>
          <Header />
          <SideMenu />
        </>
      )}

      {/* Floating chat widget for logged-in customers */}
      {token && role !== "admin" && role !== "courier" && currentUserProfile && (
        <FloatingChatWidget user={currentUserProfile} isVisible={true} />
      )}

      {/* Page content */}
      <main>
        <Routes>
          {/* Public tracking route - accessible without login */}
          <Route path="/track-package" element={<CustomerTracking idToken={token} />} />

          {!token ? (
            <>
              {/* Public routes (no token) */}
              <Route path="/" element={<Home />} />
              <Route path="/login" element={<LoginPage onLogin={handleLogin} />} />
              <Route path="/register" element={<RegisterPage />} />
              <Route path="*" element={<Home />} />
            </>
          ) : (
            <>
              {/* Authenticated routes */}
              <Route
                path="/profile"
                element={
                  <Profile
                    idToken={token}
                    onLogout={handleLogout}
                  />
                }
              />

              {role === "admin" && (
                <Route
                  path="/admin"
                  element={
                    <AdminDashboard
                      idToken={token}
                      onLogout={handleLogout}
                    />
                  }
                />
              )}

              {role === "courier" && (
                <Route
                  path="/courier"
                  element={<CourierDashboard idToken={token} />}
                />
              )}

              {role !== "admin" && role !== "courier" && (
                <>
                  <Route
                    path="/tracking"
                    element={<TrackingMap idToken={token} packageId={1} />}
                  />
                  <Route
                    path="/chat"
                    element={<ChatBox idToken={token} />}
                  />
                </>
              )}

              {/* Fallback for any other route when logged in */}
              <Route
                path="*"
                element={
                  role === "admin"
                    ? (
                      <AdminDashboard
                        idToken={token}
                        onLogout={handleLogout}
                      />
                    )
                    : (
                      <Profile
                        idToken={token}
                        onLogout={handleLogout}
                      />
                    )
                }
              />
            </>
          )}
        </Routes>
      </main>
    </>
  );
}

function App() {
  return (
    <Router>
      <AppInner />
    </Router>
  );
}

export default App;

```

```my-frontend\src\api.js
export async function sendMessageToBackend(message, token) {
  try {
    const headers = { 'Content-Type': 'application/json' };
    if (token) headers['Authorization'] = `Bearer ${token}`;

    const res = await fetch('http://localhost:5000/api/chat', {
      method: 'POST',
      headers,
      body: JSON.stringify({ message })
    });

    if (!res.ok) {
      const text = await res.text();
      throw new Error(`HTTP ${res.status}: ${text}`);
    }

    const data = await res.json();
    return data.reply || '';
  } catch (err) {
    console.error('sendMessageToBackend error', err);
    return 'Error: could not reach backend.';
  }
}

```

```my-frontend\src\AdminDashboard.jsx
import React, { useState, useEffect } from "react";
import { io } from "socket.io-client";
import { getCurrentUser, logoutUser } from "./authService";
import TrackingModal from "./TrackingModal";
import TestModal from "./TestModal";
import { db } from "./firebase";
import {
  collection,
  query,
  where,
  onSnapshot,
  doc,
  getDoc,
  addDoc,
  serverTimestamp,
  orderBy,
} from "firebase/firestore";

const AdminDashboard = ({ onLogout }) => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [activeTab, setActiveTab] = useState("overview");
  const [isTrackingModalOpen, setIsTrackingModalOpen] = useState(false);
  const [isTestModalOpen, setIsTestModalOpen] = useState(false);

  // State for users
  const [users, setUsers] = useState([]);
  // State for couriers
  const [couriers, setCouriers] = useState([]);
  // State for shipments
  const [shipments, setShipments] = useState([]);
  // State for chat
  const [conversations, setConversations] = useState([]);
  const [selectedConversation, setSelectedConversation] = useState(null);
  const [chatMessages, setChatMessages] = useState([]);
  const [newMessage, setNewMessage] = useState("");
  // Loading states for button interactions
  const [verifyingUsers, setVerifyingUsers] = useState({});
  
  // State for agent requests
  const [agentRequests, setAgentRequests] = useState([]);
  // State for verified users
  const [verifiedUsers, setVerifiedUsers] = useState([]);
  // State for direct messages
  const [selectedUser, setSelectedUser] = useState(null);
  const [directMessages, setDirectMessages] = useState([]);
  const [directMessage, setDirectMessage] = useState("");
  // State for Socket.io
  const [socket, setSocket] = useState(null);
  const [isSocketConnected, setIsSocketConnected] = useState(false);

  useEffect(() => {
    const fetchUser = async () => {
      try {
        const currentUser = await getCurrentUser();
        if (currentUser) {
          setUser({ name: currentUser.email, ...currentUser });
        } else {
          setUser(null);
        }
      } catch (error) {
        console.error("Error fetching user:", error);
        setUser(null);
      } finally {
        setLoading(false);
      }
    };

    fetchUser();
  }, []);

  // logout handler
  const handleLogout = async () => {
    try {
      console.log("Logout clicked");
      if (onLogout) {
        await onLogout();
        return;
      }
      await logoutUser();
      setUser(null);
      window.location.hash = "#/";
      window.location.reload();
    } catch (error) {
      console.error("Logout failed:", error);
      localStorage.removeItem("token");
      setUser(null);
      window.location.hash = "#/";
      window.location.reload();
    }
  };

  useEffect(() => {
    if (!user || !user.id) return;

    const newSocket = io("http://localhost:5000", {
      reconnection: true,
      reconnectionDelay: 1000,
      reconnectionDelayMax: 5000,
      reconnectionAttempts: 5,
    });

    newSocket.on("connect", () => {
      console.log("‚úÖ Admin connected to messaging server");
      setIsSocketConnected(true);
      newSocket.emit("user-login", { userId: user.id });
    });

    newSocket.on("disconnect", () => {
      console.log("‚ùå Admin disconnected from messaging server");
      setIsSocketConnected(false);
    });

    newSocket.on("message-error", (error) => {
      console.error("‚ùå Message error:", error);
    });

    newSocket.on(`notification-${user.id}`, (notification) => {
      console.log("üîî Notification received:", notification);
      alert(`üìß New message from ${notification.senderName}: ${notification.message}`);
    });

    setSocket(newSocket);

    return () => {
      newSocket.disconnect();
    };
  }, [user]);

  // Fetch data when tab changes
  useEffect(() => {
    let unsubscribe;
    if (user) {
      if (activeTab === "users") fetchUsers();
      if (activeTab === "couriers") fetchCouriers();
      if (activeTab === "shipments") fetchShipments();
      if (activeTab === "chat") {
        unsubscribe = fetchConversations();
      }
      if (activeTab === "agent-requests") fetchAgentRequests();
      if (activeTab === "verified-users") fetchVerifiedUsers();
      if (activeTab === "direct-messages") fetchVerifiedUsers();
    }
    return () => {
      if (unsubscribe && typeof unsubscribe === "function") {
        unsubscribe();
      }
    };
  }, [activeTab, user]);

  // API calls
  const fetchUsers = async () => {
    try {
      const token = localStorage.getItem("token");
      const res = await fetch("http://localhost:5000/api/admin/users", {
        headers: { Authorization: `Bearer ${token}` },
      });
      if (res.ok) {
        const data = await res.json();
        setUsers(data);
        return data;
      }
    } catch (err) {
      console.error("Failed to fetch users:", err);
    }
    return [];
  };

  const fetchCouriers = async () => {
    try {
      const token = localStorage.getItem("token");
      const res = await fetch("http://localhost:5000/api/admin/couriers", {
        headers: { Authorization: `Bearer ${token}` },
      });
      if (res.ok) {
        const data = await res.json();
        setCouriers(data);
      }
    } catch (err) {
      console.error("Failed to fetch couriers:", err);
      // Mock data for demo
      setCouriers([
        {
          _id: "c1",
          name: "John Courier",
          email: "john@courier.com",
          status: "active",
          verified: true,
        },
        {
          _id: "c2",
          name: "Jane Driver",
          email: "jane@driver.com",
          status: "inactive",
          verified: false,
        },
      ]);
    }
  };

  const fetchShipments = async () => {
    try {
      const token = localStorage.getItem("token");
      const res = await fetch("http://localhost:5000/api/admin/shipments", {
        headers: { Authorization: `Bearer ${token}` },
      });
      if (res.ok) {
        const data = await res.json();
        setShipments(data);
      }
    } catch (err) {
      console.error("Failed to fetch shipments:", err);
      // Mock data for demo
      setShipments([
        {
          _id: "s1",
          sender: "Alice Customer",
          receiver: "Bob Receiver",
          pickupAddress: "123 Main St",
          deliveryAddress: "456 Elm St",
          courier: "John Courier",
          status: "in_transit",
        },
        {
          _id: "s2",
          sender: "Charlie Sender",
          receiver: "Diana Dest",
          pickupAddress: "789 Oak Ave",
          deliveryAddress: "321 Pine Rd",
          courier: "Not Assigned",
          status: "pending",
        },
      ]);
    }
  };

  const fetchConversations = () => {
    try {
      const threadsRef = collection(db, "threads");
      const q = query(where("agentRequested", "==", true));
      
      const unsubscribe = onSnapshot(q, async (snapshot) => {
        const convs = [];
        
        for (const threadDoc of snapshot.docs) {
          const threadData = threadDoc.data();
          const threadId = threadDoc.id;
          
          try {
            // Get messages for this thread to find last message
            const messagesRef = collection(db, "threads", threadId, "messages");
            const messagesSnap = await getDoc(doc(db, "threads", threadId));
            
            const userData = await Promise.resolve().then(() => {
              // Try to get user info from users list or use threadId as fallback
              const found = users.find(u => u._id === threadId || u.id === threadId);
              return found ? found.name || found.email || "Customer" : "Customer";
            });
            
            convs.push({
              _id: threadId,
              customerName: userData,
              agentRequested: true,
              lastMessage: threadData.lastMessage || "",
              unread: threadData.unread || 0,
            });
          } catch (err) {
            console.error("Error processing thread:", err);
          }
        }
        
        setConversations(convs);
      });
      
      return unsubscribe;
    } catch (err) {
      console.error("Failed to fetch conversations from Firestore:", err);
      setConversations([]);
    }
  };

  const verifyUser = async (userId) => {
    console.log("Verify clicked for", userId);
    
    // Set loading state for this specific user
    setVerifyingUsers(prev => ({ ...prev, [userId]: true }));
    
    try {
      const token = localStorage.getItem("token");
      const res = await fetch(
        `http://localhost:5000/api/admin/verify-user/${userId}`,
        {
          method: "PUT",
          headers: { Authorization: `Bearer ${token}` },
        }
      );

      if (!res.ok) {
        let errorMessage = `Failed to verify user (${res.status})`;
        
        try {
          const errorData = await res.json();
          errorMessage = errorData.message || errorMessage;
        } catch (jsonError) {
          // If JSON parsing fails, try to get text response
          const textError = await res.text();
          console.error("Verify response text:", textError);
        }
        
        console.error("Verify error:", res.status, errorMessage);
        alert(`Verification failed: ${errorMessage}`);
        return;
      }

      const result = await res.json();
      console.log("User verification successful:", result);
      alert("User verified successfully!");
      
      // Refresh the users list to show updated status
      await fetchUsers();
      
    } catch (err) {
      console.error("Failed to verify user:", err);
      alert(`Network error verifying user: ${err.message}`);
    } finally {
      // Always clear the loading state
      setVerifyingUsers(prev => ({ ...prev, [userId]: false }));
    }
  };

  const updateShipmentStatus = async (shipmentId, newStatus) => {
    try {
      const token = localStorage.getItem("token");
      const res = await fetch(
        `http://localhost:5000/api/admin/shipments/${shipmentId}/status`,
        {
          method: "PUT",
          headers: {
            Authorization: `Bearer ${token}`,
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ status: newStatus }),
        }
      );
      if (res.ok) {
        alert("Status updated!");
        fetchShipments();
      }
    } catch (err) {
      console.error("Failed to update status:", err);
    }
  };

  const fetchAgentRequests = async () => {
    try {
      const token = localStorage.getItem("token");
      const res = await fetch("http://localhost:5000/api/agent-requests", {
        headers: { Authorization: `Bearer ${token}` },
      });
      if (res.ok) {
        const data = await res.json();
        setAgentRequests(data);
      }
    } catch (err) {
      console.error("Failed to fetch agent requests:", err);
    }
  };

  const fetchVerifiedUsers = async () => {
    try {
      const token = localStorage.getItem("token");
      const res = await fetch("http://localhost:5000/api/verified-users-list", {
        headers: { Authorization: `Bearer ${token}` },
      });
      if (res.ok) {
        const data = await res.json();
        setVerifiedUsers(data);
      }
    } catch (err) {
      console.error("Failed to fetch verified users:", err);
    }
  };

  const fetchConversationMessages = async (userId) => {
    try {
      const token = localStorage.getItem("token");
      const conversationId = `customer-${userId}`;
      
      const res = await fetch(
        `http://localhost:5000/api/messaging/conversation/${conversationId}`,
        {
          headers: { Authorization: `Bearer ${token}` },
        }
      );
      
      if (res.ok) {
        const data = await res.json();
        setDirectMessages(data.messages || []);
        console.log(`‚úÖ Loaded ${data.messages?.length || 0} messages for conversation ${conversationId}`);

        await fetch(
          `http://localhost:5000/api/messaging/mark-read/${conversationId}`,
          {
            method: "PUT",
            headers: { Authorization: `Bearer ${token}` },
          }
        ).catch((err) => console.warn("Failed to mark as read:", err));

        if (socket && isSocketConnected) {
          socket.off(`message-${conversationId}`);
          socket.off(`message-status-${conversationId}`);
          
          socket.on(`message-${conversationId}`, (message) => {
            console.log("üì© New message received:", message);
            setDirectMessages((prev) => {
              const exists = prev.some(m => m._id === message._id);
              return exists ? prev : [...prev, message];
            });
          });

          socket.on(`message-status-${conversationId}`, (status) => {
            console.log("üìä Message status updated:", status);
            setDirectMessages((prev) =>
              prev.map((msg) =>
                msg._id === status.messageId ? { ...msg, status: status.status } : msg
              )
            );
          });

          socket.on(`message-status-updated-${conversationId}`, (data) => {
            console.log("üìä Messages marked as read");
            setDirectMessages((prev) =>
              prev.map((msg) => ({ ...msg, status: 'read' }))
            );
          });
        }
      }
    } catch (err) {
      console.error("Failed to fetch conversation:", err);
    }
  };

  const sendDirectMessage = async () => {
    if (!selectedUser || !directMessage.trim()) {
      alert("Please select a user and type a message");
      return;
    }

    try {
      const token = localStorage.getItem("token");
      const conversationId = `customer-${selectedUser._id}`;
      
      const res = await fetch("http://localhost:5000/api/messaging/send", {
        method: "POST",
        headers: {
          Authorization: `Bearer ${token}`,
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          conversationId,
          recipientId: selectedUser._id,
          message: directMessage,
          isFromAdmin: true,
        }),
      });
      
      if (res.ok) {
        const data = await res.json();
        setDirectMessage("");
        
        if (socket && isSocketConnected) {
          socket.emit("send-message", {
            conversationId,
            senderId: user.id,
            recipientId: selectedUser._id,
            message: directMessage,
            isFromAdmin: true,
          });
        }
        
        await fetchConversationMessages(selectedUser._id);
      } else {
        alert("Failed to send message");
      }
    } catch (err) {
      console.error("Failed to send message:", err);
      alert("Error sending message");
    }
  };

  const acceptAgentRequest = async (requestId) => {
    try {
      const token = localStorage.getItem("token");
      const res = await fetch(
        `http://localhost:5000/api/agent-request/${requestId}/accept`,
        {
          method: "POST",
          headers: { Authorization: `Bearer ${token}` },
        }
      );
      if (res.ok) {
        alert("Agent request accepted!");
        fetchAgentRequests();
      }
    } catch (err) {
      console.error("Failed to accept agent request:", err);
    }
  };

  const resolveAgentRequest = async (requestId) => {
    try {
      const token = localStorage.getItem("token");
      const res = await fetch(
        `http://localhost:5000/api/agent-request/${requestId}/resolve`,
        {
          method: "POST",
          headers: { Authorization: `Bearer ${token}` },
        }
      );
      if (res.ok) {
        alert("Agent request resolved!");
        fetchAgentRequests();
      }
    } catch (err) {
      console.error("Failed to resolve agent request:", err);
    }
  };

  const openConversation = async (conv) => {
    setSelectedConversation(conv);
    setChatMessages([]);
    
    try {
      const messagesRef = collection(db, "threads", conv._id, "messages");
      const q = query(messagesRef, orderBy("ts", "asc"));
      
      const unsubscribe = onSnapshot(q, (snapshot) => {
        const messages = snapshot.docs.map((d) => ({
          _id: d.id,
          sender: d.data().from === "admin" ? "admin" : d.data().from === "bot" ? "bot" : "customer",
          text: d.data().text,
          timestamp: d.data().ts?.toDate?.() || new Date(),
        }));
        setChatMessages(messages);
      });
      
      // Store unsub to clean up when changing conversations
      conv._unsubscribe = unsubscribe;
    } catch (err) {
      console.error("Failed to open Firestore conversation:", err);
      setChatMessages([]);
    }
  };

  const sendAdminMessage = async () => {
    if (!newMessage.trim() || !selectedConversation) return;
    
    try {
      const messagesRef = collection(db, "threads", selectedConversation._id, "messages");
      
      await addDoc(messagesRef, {
        from: "admin",
        text: newMessage,
        ts: serverTimestamp(),
        status: "sent",
      });
      
      setNewMessage("");
    } catch (err) {
      console.error("Failed to send admin message:", err);
      alert("Failed to send message: " + err.message);
    }
  };

  if (loading) {
    return <div style={styles.loading}>Loading admin data...</div>;
  }

  if (!user) {
    return (
      <div style={styles.loading}>
        You must be logged in as an admin to view this page.
      </div>
    );
  }

  return (
    <div style={styles.container}>
      <header style={styles.header}>
        <div
          style={{
            display: "flex",
            justifyContent: "space-between",
            alignItems: "center",
          }}
        >
          <div>
            <h1>SwiftDelivery Admin Dashboard</h1>
            <p>Welcome, {user.name || "Admin"}!</p>
          </div>
          <button
            onClick={handleLogout}
            style={styles.logoutButton}
            title="Log out"
          >
            ‚úï
          </button>
        </div>
      </header>

      <nav style={styles.nav}>
        <button
          style={activeTab === "overview" ? styles.tabActive : styles.tab}
          onClick={() => setActiveTab("overview")}
        >
          Overview
        </button>
        <button
          style={activeTab === "users" ? styles.tabActive : styles.tab}
          onClick={() => setActiveTab("users")}
        >
          Users
        </button>
        <button
          style={activeTab === "couriers" ? styles.tabActive : styles.tab}
          onClick={() => setActiveTab("couriers")}
        >
          Couriers
        </button>
        <button
          style={activeTab === "shipments" ? styles.tabActive : styles.tab}
          onClick={() => setActiveTab("shipments")}
        >
          Shipments
        </button>
        <button
          style={activeTab === "tracking" ? styles.tabActive : styles.tab}
          onClick={() => setActiveTab("tracking")}
        >
          Tracking
        </button>
        <button
          style={activeTab === "chat" ? styles.tabActive : styles.tab}
          onClick={() => setActiveTab("chat")}
        >
          Chat/Support
        </button>
        <button
          style={activeTab === "agent-requests" ? styles.tabActive : styles.tab}
          onClick={() => setActiveTab("agent-requests")}
        >
          Agent Requests {agentRequests.length > 0 && `(${agentRequests.length})`}
        </button>
        <button
          style={activeTab === "verified-users" ? styles.tabActive : styles.tab}
          onClick={() => setActiveTab("verified-users")}
        >
          All Verified Users
        </button>
        <button
          style={activeTab === "direct-messages" ? styles.tabActive : styles.tab}
          onClick={() => setActiveTab("direct-messages")}
        >
          Direct Messages
        </button>
        <button
          style={activeTab === "analytics" ? styles.tabActive : styles.tab}
          onClick={() => setActiveTab("analytics")}
        >
          Analytics
        </button>
      </nav>

      <main style={styles.main}>
        {activeTab === "overview" && (
          <div>
            <h2>Dashboard Overview</h2>
            <div style={styles.statsGrid}>
              <div style={styles.statCard}>
                <h3>Total Users</h3>
                <p style={styles.statNumber}>{users.length || 0}</p>
              </div>
              <div style={styles.statCard}>
                <h3>Active Shipments</h3>
                <p style={styles.statNumber}>
                  {shipments.filter((s) => s.status === "in_transit").length ||
                    0}
                </p>
              </div>
              <div style={styles.statCard}>
                <h3>Total Shipments</h3>
                <p style={styles.statNumber}>{shipments.length || 0}</p>
              </div>
              <div style={styles.statCard}>
                <h3>Delivered Today</h3>
                <p style={styles.statNumber}>0</p>
              </div>
            </div>
          </div>
        )}

        {activeTab === "users" && (
          <div>
            <h2>User Management</h2>
            <div style={{ position: "relative", zIndex: 5 }}>
              <table style={styles.table}>
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Admin</th>
                    <th>Verified</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  {users.map((u) => (
                    <tr key={u._id}>
                      <td>{u.name}</td>
                      <td>{u.email}</td>
                      <td>{u.isAdmin ? "Yes" : "No"}</td>
                      <td>{u.isVerified ? "‚úÖ" : "‚è≥"}</td>
                      <td>
                        {!u.isVerified && (
                          <button
                            style={{
                              ...styles.btnSmall,
                              opacity: verifyingUsers[u._id] ? 0.6 : 1,
                              cursor: verifyingUsers[u._id] ? "not-allowed" : "pointer"
                            }}
                            disabled={verifyingUsers[u._id]}
                            onClick={() => {
                              console.log("Button onClick fired for", u._id);
                              verifyUser(u._id);
                            }}
                          >
                            {verifyingUsers[u._id] ? "Verifying..." : "Verify"}
                          </button>
                        )}
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        )}

        {activeTab === "couriers" && (
          <div>
            <h2>Courier Management</h2>
            <button style={styles.btnPrimary}>Add New Courier</button>
            <table style={styles.table}>
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Status</th>
                  <th>Verified</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {couriers.map((c) => (
                  <tr key={c._id}>
                    <td>{c.name}</td>
                    <td>{c.email}</td>
                    <td>{c.status}</td>
                    <td>{c.verified ? "‚úÖ" : "‚è≥"}</td>
                    <td>
                      <button style={styles.btnSmall}>Edit</button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        )}

        {activeTab === "shipments" && (
          <div>
            <h2>Shipment Overview</h2>
            <table style={styles.table}>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Sender</th>
                  <th>Receiver</th>
                  <th>Pickup</th>
                  <th>Delivery</th>
                  <th>Courier</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {shipments.map((s) => (
                  <tr key={s._id}>
                    <td>{s._id}</td>
                    <td>{s.sender}</td>
                    <td>{s.receiver}</td>
                    <td>{s.pickupAddress}</td>
                    <td>{s.deliveryAddress}</td>
                    <td>{s.courier}</td>
                    <td>{s.status}</td>
                    <td>
                      <select
                        style={styles.select}
                        value={s.status}
                        onChange={(e) =>
                          updateShipmentStatus(s._id, e.target.value)
                        }
                      >
                        <option value="pending">Pending</option>
                        <option value="picked_up">Picked Up</option>
                        <option value="in_transit">In Transit</option>
                        <option value="out_for_delivery">
                          Out for Delivery
                        </option>
                        <option value="delivered">Delivered</option>
                        <option value="failed">Failed</option>
                      </select>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        )}

        {activeTab === "tracking" && (
          <div style={{ textAlign: 'center', padding: '40px 20px' }}>
            <div style={{ marginBottom: '20px' }}>
              <h2>üìç Live Package Tracking</h2>
              <p style={{ color: '#718096', marginBottom: '20px' }}>
                Manage package tracking, pinpoint locations, and generate tracking IDs for customers
              </p>
            </div>
            <div style={{ display: 'flex', gap: '12px', justifyContent: 'center', flexWrap: 'wrap' }}>
              <button
                onClick={() => setIsTrackingModalOpen(true)}
                style={{
                  ...styles.btnPrimary,
                  padding: '12px 32px',
                  fontSize: '16px',
                  fontWeight: '600',
                }}
              >
                üó∫Ô∏è Open Live Tracking Map
              </button>
              <button
                onClick={() => setIsTestModalOpen(true)}
                style={{
                  ...styles.tab,
                  padding: '12px 32px',
                  fontSize: '14px',
                  fontWeight: '500',
                  backgroundColor: '#f0f4ff',
                  border: '1px solid #c7d2fe',
                  color: '#4f46e5',
                  cursor: 'pointer',
                }}
                title="Click to test if modal system works"
              >
                üß™ Test Modal
              </button>
            </div>
          </div>
        )}

        {activeTab === "chat" && (
          <div style={styles.chatContainer}>
            <div style={styles.chatSidebar}>
              <h3>Agent Requests üî¥</h3>
              {conversations.length === 0 ? (
                <p style={{ padding: "15px", color: "#6c757d", fontSize: "12px" }}>
                  No agent requests pending
                </p>
              ) : (
                conversations.map((conv) => (
                  <div
                    key={conv._id}
                    style={{
                      ...styles.conversationItem,
                      backgroundColor: selectedConversation?._id === conv._id ? "#e3f2fd" : "transparent",
                      borderLeft: conv.agentRequested ? "4px solid #dc3545" : "4px solid transparent",
                      transition: "background-color 0.2s",
                    }}
                    onClick={() => openConversation(conv)}
                  >
                    <div style={{ display: "flex", alignItems: "center", gap: "8px" }}>
                      <span style={{ color: "#dc3545", fontSize: "16px" }}>üî¥</span>
                      <strong>{conv.customerName}</strong>
                    </div>
                    <p style={styles.lastMessage}>{conv.lastMessage || "New agent request"}</p>
                    {conv.unread > 0 && (
                      <span style={styles.unreadBadge}>{conv.unread}</span>
                    )}
                  </div>
                ))
              )}
            </div>
            <div style={styles.chatMain}>
              {selectedConversation ? (
                <>
                  <div style={styles.chatHeader}>
                    <h3>Chat with {selectedConversation.customerName}</h3>
                  </div>
                  <div style={styles.chatMessages}>
                    {chatMessages.map((msg) => (
                      <div
                        key={msg._id}
                        style={{
                          display: "flex",
                          justifyContent: msg.sender === "admin" ? "flex-end" : "flex-start",
                          marginBottom: "10px",
                        }}
                      >
                        <div
                          style={
                            msg.sender === "admin"
                              ? { ...styles.adminMessage, maxWidth: "70%" }
                              : msg.sender === "bot"
                              ? { ...styles.botMessage, maxWidth: "70%" }
                              : { ...styles.customerMessage, maxWidth: "70%" }
                          }
                        >
                          <p style={{ margin: "0 0 4px 0", wordWrap: "break-word" }}>
                            {msg.text}
                          </p>
                          <small style={{ opacity: 0.7, fontSize: "11px" }}>
                            {msg.timestamp?.toLocaleTimeString?.() || ""}
                          </small>
                        </div>
                      </div>
                    ))}
                  </div>
                  <div style={styles.chatInput}>
                    <input
                      type="text"
                      placeholder="Type your message..."
                      value={newMessage}
                      onChange={(e) => setNewMessage(e.target.value)}
                      onKeyPress={(e) =>
                        e.key === "Enter" && sendAdminMessage()
                      }
                      style={styles.input}
                    />
                    <button
                      style={styles.btnPrimary}
                      onClick={sendAdminMessage}
                    >
                      Send
                    </button>
                  </div>
                </>
              ) : (
                <div style={styles.chatPlaceholder}>
                  <p>Select a conversation to start chatting with a customer.</p>
                </div>
              )}
            </div>
          </div>
        )}

        {activeTab === "agent-requests" && (
          <div>
            <h2>üö® Agent Requests</h2>
            {agentRequests.length === 0 ? (
              <p style={{ padding: "20px", color: "#6c757d", fontSize: "14px" }}>
                No pending agent requests
              </p>
            ) : (
              <div style={{ ...styles.statsGrid, gap: "15px" }}>
                {agentRequests.map((req) => (
                  <div
                    key={req._id}
                    style={{
                      ...styles.statCard,
                      backgroundColor: "#fff3cd",
                      borderLeft: "4px solid #ffc107",
                      padding: "15px",
                    }}
                  >
                    <h4 style={{ marginTop: 0 }}>
                      {req.userId?.name || "Unknown"} ({req.userId?.email})
                    </h4>
                    <p style={{ color: "#555", marginBottom: "10px" }}>
                      <strong>Message:</strong> {req.message}
                    </p>
                    <p style={{ fontSize: "12px", color: "#666", marginBottom: "10px" }}>
                      <strong>Status:</strong> {req.status}
                    </p>
                    <p style={{ fontSize: "12px", color: "#666", marginBottom: "15px" }}>
                      <strong>Requested:</strong> {new Date(req.createdAt).toLocaleString()}
                    </p>
                    <div style={{ display: "flex", gap: "10px" }}>
                      {req.status === "pending" && (
                        <>
                          <button
                            style={{ ...styles.btnSmall, backgroundColor: "#28a745", color: "#fff" }}
                            onClick={() => acceptAgentRequest(req._id)}
                          >
                            Accept
                          </button>
                          <button
                            style={{ ...styles.btnSmall, backgroundColor: "#6c757d", color: "#fff" }}
                            onClick={() => {
                              setSelectedUser({ _id: req.userId?._id, name: req.userId?.name });
                              setActiveTab("direct-messages");
                            }}
                          >
                            Message Customer
                          </button>
                        </>
                      )}
                      {req.status === "accepted" && (
                        <button
                          style={{ ...styles.btnSmall, backgroundColor: "#6c757d", color: "#fff" }}
                          onClick={() => resolveAgentRequest(req._id)}
                        >
                          Resolve
                        </button>
                      )}
                    </div>
                  </div>
                ))}
              </div>
            )}
          </div>
        )}

        {activeTab === "verified-users" && (
          <div>
            <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "20px" }}>
              <h2 style={{ margin: 0 }}>‚úÖ All Verified Users</h2>
              <div style={{ 
                backgroundColor: "#28a745", 
                color: "white", 
                padding: "8px 16px", 
                borderRadius: "20px", 
                fontWeight: "600",
                fontSize: "14px"
              }}>
                Total: {verifiedUsers.length}
              </div>
            </div>
            {verifiedUsers.length === 0 ? (
              <p style={{ padding: "20px", color: "#6c757d", fontSize: "14px" }}>
                No verified users
              </p>
            ) : (
              <div
                style={{
                  display: "grid",
                  gridTemplateColumns: "repeat(auto-fill, minmax(280px, 1fr))",
                  gap: "15px",
                  maxHeight: "calc(100vh - 250px)",
                  overflowY: "auto",
                  overflowX: "hidden",
                  padding: "15px",
                  paddingRight: "20px",
                  backgroundColor: "#f8f9fa",
                  borderRadius: "8px",
                }}
              >
                {verifiedUsers.map((user, index) => (
                  <div
                    key={user._id}
                    style={{
                      ...styles.statCard,
                      backgroundColor: "#d4edda",
                      borderLeft: "4px solid #28a745",
                      borderRadius: "8px",
                      padding: "16px",
                      cursor: "pointer",
                      transition: "all 0.3s ease",
                      boxShadow: "0 2px 4px rgba(0,0,0,0.1)",
                    }}
                    onMouseEnter={(e) => {
                      e.currentTarget.style.transform = "translateY(-4px)";
                      e.currentTarget.style.boxShadow = "0 6px 12px rgba(40, 167, 69, 0.2)";
                    }}
                    onMouseLeave={(e) => {
                      e.currentTarget.style.transform = "translateY(0)";
                      e.currentTarget.style.boxShadow = "0 2px 4px rgba(0,0,0,0.1)";
                    }}
                    onClick={() => {
                      setSelectedUser(user);
                      fetchConversationMessages(user._id);
                      setActiveTab("direct-messages");
                    }}
                  >
                    <div style={{ display: "flex", alignItems: "center", marginBottom: "8px" }}>
                      <div style={{
                        width: "32px",
                        height: "32px",
                        borderRadius: "50%",
                        backgroundColor: "#28a745",
                        color: "white",
                        display: "flex",
                        alignItems: "center",
                        justifyContent: "center",
                        fontWeight: "600",
                        marginRight: "10px",
                        fontSize: "14px"
                      }}>
                        {user.name?.[0]?.toUpperCase() || "U"}
                      </div>
                      <h4 style={{ margin: 0, flex: 1, fontSize: "15px" }}>{user.name}</h4>
                    </div>
                    <p style={{ color: "#555", marginBottom: "8px", fontSize: "13px" }}>
                      üìß {user.email}
                    </p>
                    <div style={{ display: "flex", alignItems: "center", fontSize: "12px", color: "#28a745", fontWeight: "600" }}>
                      üí¨ Send Message ‚Üí
                    </div>
                  </div>
                ))}
              </div>
            )}
          </div>
        )}

        {activeTab === "direct-messages" && (
          <div>
            <h2>üí¨ Direct Messages</h2>
            <div style={styles.chatContainer}>
              <div style={{ ...styles.chatSidebar, flex: "0 0 320px" }}>
                <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "12px" }}>
                  <h3 style={{ margin: 0 }}>Verified Users</h3>
                  <span style={{ 
                    backgroundColor: "#e9ecef", 
                    padding: "4px 10px", 
                    borderRadius: "12px", 
                    fontSize: "12px",
                    fontWeight: "600"
                  }}>
                    {verifiedUsers.length}
                  </span>
                </div>
                <div style={{ maxHeight: "calc(100vh - 200px)", overflowY: "auto", overflowX: "hidden", paddingRight: "8px" }}>
                  {verifiedUsers.length === 0 ? (
                    <p style={{ padding: "15px", color: "#6c757d", fontSize: "12px" }}>
                      No verified users
                    </p>
                  ) : (
                    verifiedUsers.map((user) => (
                      <div
                        key={user._id}
                        style={{
                          ...styles.conversationItem,
                          backgroundColor: selectedUser?._id === user._id ? "#e3f2fd" : "transparent",
                          cursor: "pointer",
                        }}
                        onClick={() => {
                          setSelectedUser(user);
                          fetchConversationMessages(user._id);
                        }}
                      >
                        <strong>{user.name}</strong>
                        <p style={{ ...styles.lastMessage, margin: "5px 0 0 0" }}>
                          {user.email}
                        </p>
                      </div>
                    ))
                  )}
                </div>
              </div>
              <div style={styles.chatMain}>
                {selectedUser ? (
                  <>
                    <div style={styles.chatHeader}>
                      <h3 style={{ margin: 0 }}>
                        üí¨ {selectedUser.name}
                      </h3>
                      <p style={{ margin: "5px 0 0 0", color: "#6c757d", fontSize: "12px" }}>
                        {selectedUser.email}
                      </p>
                    </div>
                    <div style={styles.chatMessages}>
                      {directMessages.length === 0 ? (
                        <p style={{ color: "#6c757d", textAlign: "center" }}>
                          No messages yet. Start the conversation!
                        </p>
                      ) : (
                        directMessages.map((msg, idx) => (
                          <div
                            key={idx}
                            style={{
                              display: "flex",
                              justifyContent: msg.isFromAdmin ? "flex-end" : "flex-start",
                              marginBottom: "8px",
                              gap: "4px",
                              alignItems: "flex-end",
                            }}
                          >
                            <div
                              style={
                                msg.isFromAdmin
                                  ? styles.adminMessage
                                  : styles.customerMessage
                              }
                            >
                              {msg.message}
                            </div>
                            {msg.isFromAdmin && (
                              <span
                                style={{
                                  fontSize: "11px",
                                  color: "#9ca3af",
                                  minWidth: "20px",
                                }}
                              >
                                {msg.status === "read" && "‚úì‚úì"}
                                {msg.status === "delivered" && "‚úì"}
                                {msg.status === "sent" && "‚Ä¢"}
                              </span>
                            )}
                          </div>
                        ))
                      )}
                    </div>
                    <div style={styles.chatInput}>
                      <input
                        type="text"
                        style={styles.input}
                        placeholder="Type your message..."
                        value={directMessage}
                        onChange={(e) => setDirectMessage(e.target.value)}
                        onKeyPress={(e) => {
                          if (e.key === "Enter") sendDirectMessage();
                        }}
                      />
                      <button
                        style={styles.btnSmall}
                        onClick={sendDirectMessage}
                      >
                        Send
                      </button>
                    </div>
                  </>
                ) : (
                  <div style={styles.chatPlaceholder}>
                    <p>Select a user to start messaging</p>
                  </div>
                )}
              </div>
            </div>
          </div>
        )}

        {activeTab === "analytics" && (
          <div>
            <h2>System Analytics</h2>
            <div style={styles.statsGrid}>
              <div style={styles.statCard}>
                <h3>Revenue (This Month)</h3>
                <p style={styles.statNumber}>$0</p>
              </div>
              <div style={styles.statCard}>
                <h3>Total Deliveries</h3>
                <p style={styles.statNumber}>
                  {shipments.filter((s) => s.status === "delivered").length}
                </p>
              </div>
              <div style={styles.statCard}>
                <h3>Failed Deliveries</h3>
                <p style={styles.statNumber}>
                  {shipments.filter((s) => s.status === "failed").length}
                </p>
              </div>
              <div style={styles.statCard}>
                <h3>Active Couriers</h3>
                <p style={styles.statNumber}>
                  {couriers.filter((c) => c.status === "active").length}
                </p>
              </div>
            </div>
            <p style={{ marginTop: "20px" }}>
              Charts and detailed performance metrics will be displayed here.
            </p>
          </div>
        )}
      </main>

      <TrackingModal 
        isOpen={isTrackingModalOpen} 
        onClose={() => setIsTrackingModalOpen(false)} 
      />

      <TestModal
        isOpen={isTestModalOpen}
        onClose={() => setIsTestModalOpen(false)}
      />
    </div>
  );
};

// Inline styles
const styles = {
  container: {
    fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
    backgroundColor: "#f5f7fa",
    minHeight: "100vh",
    padding: "20px",
  },
  loading: {
    textAlign: "center",
    marginTop: "50px",
    fontSize: "18px",
  },
  header: {
    backgroundColor: "#fff",
    padding: "20px",
    borderRadius: "8px",
    boxShadow: "0 2px 8px rgba(0,0,0,0.1)",
    marginBottom: "20px",
  },
  logoutButton: {
    backgroundColor: "#f56565",
    color: "#fff",
    border: "none",
    borderRadius: "999px",
    width: "32px",
    height: "32px",
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
    cursor: "pointer",
    fontSize: "18px",
    fontWeight: "bold",
    boxShadow: "0 2px 6px rgba(0,0,0,0.15)",
  },
  nav: {
    display: "flex",
    gap: "10px",
    marginBottom: "20px",
    flexWrap: "wrap",
  },
  tab: {
    padding: "12px 24px",
    border: "none",
    backgroundColor: "#fff",
    cursor: "pointer",
    borderRadius: "6px",
    fontSize: "14px",
    fontWeight: "500",
    transition: "all 0.3s",
  },
  tabActive: {
    padding: "12px 24px",
    border: "none",
    backgroundColor: "#007bff",
    color: "#fff",
    cursor: "pointer",
    borderRadius: "6px",
    fontSize: "14px",
    fontWeight: "600",
  },
  main: {
    backgroundColor: "#fff",
    padding: "30px",
    borderRadius: "8px",
    boxShadow: "0 2px 8px rgba(0,0,0,0.1)",
    minHeight: "500px",
    position: "relative",
    zIndex: 1,
  },
  statsGrid: {
    display: "grid",
    gridTemplateColumns: "repeat(auto-fit, minmax(200px, 1fr))",
    gap: "20px",
    marginTop: "20px",
  },
  statCard: {
    backgroundColor: "#f9fafb",
    padding: "20px",
    borderRadius: "8px",
    textAlign: "center",
    border: "1px solid #e5e7eb",
  },
  statNumber: {
    fontSize: "32px",
    fontWeight: "bold",
    color: "#007bff",
    margin: "10px 0 0 0",
  },
  table: {
    width: "100%",
    borderCollapse: "collapse",
    marginTop: "20px",
  },
  btnSmall: {
    padding: "6px 12px",
    backgroundColor: "#28a745",
    color: "#fff",
    border: "none",
    borderRadius: "4px",
    cursor: "pointer",
    fontSize: "12px",
    transition:
      "transform 0.1s ease, box-shadow 0.1s ease, background-color 0.1s ease",
    boxShadow: "0 2px 4px rgba(0,0,0,0.15)",
  },
  btnPrimary: {
    padding: "10px 20px",
    backgroundColor: "#007bff",
    color: "#fff",
    border: "none",
    borderRadius: "6px",
    cursor: "pointer",
    fontSize: "14px",
    fontWeight: "600",
    marginBottom: "15px",
    pointerEvents: "auto",
    zIndex: 10,
  },
  select: {
    padding: "6px",
    borderRadius: "4px",
    border: "1px solid #ccc",
  },
  mapPlaceholder: {
    height: "400px",
    backgroundColor: "#e9ecef",
    display: "flex",
    flexDirection: "column",
    alignItems: "center",
    justifyContent: "center",
    borderRadius: "8px",
    marginTop: "20px",
  },
  chatContainer: {
    display: "flex",
    height: "500px",
    gap: "20px",
    marginTop: "20px",
  },
  chatSidebar: {
    flex: "0 0 300px",
    backgroundColor: "#f9fafb",
    borderRadius: "8px",
    padding: "15px",
    overflowY: "auto",
    border: "1px solid #e5e7eb",
  },
  conversationItem: {
    padding: "12px",
    borderBottom: "1px solid #e5e7eb",
    cursor: "pointer",
    position: "relative",
  },
  lastMessage: {
    fontSize: "12px",
    color: "#6c757d",
    margin: "5px 0 0 0",
  },
  unreadBadge: {
    position: "absolute",
    top: "10px",
    right: "10px",
    backgroundColor: "#dc3545",
    color: "#fff",
    borderRadius: "50%",
    padding: "2px 6px",
    fontSize: "10px",
    fontWeight: "bold",
  },
  chatMain: {
    flex: "1",
    display: "flex",
    flexDirection: "column",
    backgroundColor: "#fff",
    border: "1px solid #e5e7eb",
    borderRadius: "8px",
  },
  chatHeader: {
    padding: "15px",
    borderBottom: "1px solid #e5e7eb",
    backgroundColor: "#f9fafb",
  },
  chatMessages: {
    flex: "1",
    padding: "15px",
    overflowY: "auto",
    display: "flex",
    flexDirection: "column",
    gap: "10px",
  },
  adminMessage: {
    alignSelf: "flex-end",
    backgroundColor: "#007bff",
    color: "#fff",
    padding: "10px 15px",
    borderRadius: "12px",
    maxWidth: "70%",
  },
  customerMessage: {
    alignSelf: "flex-start",
    backgroundColor: "#e9ecef",
    color: "#000",
    padding: "10px 15px",
    borderRadius: "12px",
    maxWidth: "70%",
  },
  botMessage: {
    alignSelf: "flex-start",
    backgroundColor: "#f0f7ff",
    color: "#1f2937",
    padding: "10px 15px",
    borderRadius: "12px",
    maxWidth: "70%",
    border: "1px solid #bfdbfe",
  },
  chatInput: {
    display: "flex",
    padding: "15px",
    borderTop: "1px solid #e5e7eb",
    gap: "10px",
  },
  input: {
    flex: "1",
    padding: "10px",
    border: "1px solid #ccc",
    borderRadius: "6px",
    fontSize: "14px",
  },
  chatPlaceholder: {
    flex: "1",
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
    color: "#6c757d",
  },
};

export default AdminDashboard;

```

```my-frontend\src\services\chatbotExamples.js
export const chatbotExamples = [
  {
    category: "Navigation",
    examples: [
      "Show me the gallery",
      "Take me to services",
      "Where can I track my package?",
      "Contact information please",
      "What about your pricing?",
      "Show FAQ",
      "How do I book a shipment?",
      "I need to login",
      "Create a new account",
    ],
  },
  {
    category: "Tracking",
    examples: [
      "Track my package",
      "Where is my shipment?",
      "Check delivery status",
      "Track order",
    ],
  },
  {
    category: "Services",
    examples: [
      "Tell me about your services",
      "What services do you offer?",
      "Pricing information",
      "Service options",
    ],
  },
  {
    category: "Support",
    examples: [
      "I need help",
      "Help me with something",
      "Common questions",
      "How do I...",
    ],
  },
];

export const charabotTips = [
  "Ask about any section of the website naturally",
  "Use phrases like 'show me', 'take me to', 'where can I'",
  "You can ask about services, pricing, or how to track packages",
  "The chatbot understands multiple variations of the same question",
  "Navigation happens automatically after the bot responds",
];

export const testChatbotIntent = (message) => {
  const { detectIntent } = require('./chatbotNLU');
  const result = detectIntent(message);
  return {
    message,
    ...result,
  };
};

```

```my-frontend\src\services\authService.js

```

```my-frontend\src\services\advancedNLU.js
export const NLU_PROVIDERS = {
  LOCAL: "local",
  GOOGLE_DIALOGFLOW: "google_dialogflow",
  MICROSOFT_LUIS: "microsoft_luis",
  IBM_WATSON: "ibm_watson",
  RASA: "rasa",
};

class AdvancedNLUService {
  constructor() {
    this.provider = NLU_PROVIDERS.LOCAL;
    this.config = {};
    this.isEnabled = false;
  }

  setProvider(provider, config = {}) {
    this.provider = provider;
    this.config = config;
    this.validateProvider();
  }

  validateProvider() {
    if (this.provider === NLU_PROVIDERS.GOOGLE_DIALOGFLOW) {
      if (!this.config.projectId || !this.config.sessionClient) {
        console.warn(
          "Google Dialogflow NLU: Missing projectId or sessionClient configuration"
        );
        this.isEnabled = false;
        return;
      }
      this.isEnabled = true;
    } else if (this.provider === NLU_PROVIDERS.MICROSOFT_LUIS) {
      if (!this.config.appId || !this.config.authoringKey) {
        console.warn(
          "Microsoft LUIS NLU: Missing appId or authoringKey configuration"
        );
        this.isEnabled = false;
        return;
      }
      this.isEnabled = true;
    } else if (this.provider === NLU_PROVIDERS.RASA) {
      if (!this.config.url) {
        console.warn("Rasa NLU: Missing URL configuration");
        this.isEnabled = false;
        return;
      }
      this.isEnabled = true;
    } else if (this.provider === NLU_PROVIDERS.LOCAL) {
      this.isEnabled = true;
    }
  }

  async detectIntentAdvanced(userMessage) {
    if (!this.isEnabled || this.provider === NLU_PROVIDERS.LOCAL) {
      return null;
    }

    switch (this.provider) {
      case NLU_PROVIDERS.GOOGLE_DIALOGFLOW:
        return this.detectIntentDialogflow(userMessage);
      case NLU_PROVIDERS.MICROSOFT_LUIS:
        return this.detectIntentLuis(userMessage);
      case NLU_PROVIDERS.RASA:
        return this.detectIntentRasa(userMessage);
      default:
        return null;
    }
  }

  async detectIntentDialogflow(userMessage) {
    try {
      const request = {
        session: this.config.sessionPath,
        queryInput: {
          text: {
            text: userMessage,
            languageCode: "en-US",
          },
        },
      };

      const responses = await this.config.sessionClient.detectIntent(request);
      const result = responses[0];
      const intent = result.queryResult.intent;
      const confidence = result.queryResult.intentDetectionConfidence;

      return {
        intent: intent.displayName,
        confidence,
        entities: result.queryResult.parameters,
        fulfillmentText: result.queryResult.fulfillmentText,
      };
    } catch (error) {
      console.error("Dialogflow NLU error:", error);
      return null;
    }
  }

  async detectIntentLuis(userMessage) {
    try {
      const url = `${this.config.endpoint}/luis/v2.0/apps/${this.config.appId}`;
      const params = new URLSearchParams({
        q: userMessage,
        verbose: true,
        staging: false,
      });

      const response = await fetch(`${url}?${params}`, {
        headers: {
          "Ocp-Apim-Subscription-Key": this.config.authoringKey,
        },
      });

      const data = await response.json();
      return {
        intent: data.topScoringIntent.intent,
        confidence: data.topScoringIntent.score,
        entities: data.entities,
      };
    } catch (error) {
      console.error("Microsoft LUIS NLU error:", error);
      return null;
    }
  }

  async detectIntentRasa(userMessage) {
    try {
      const response = await fetch(`${this.config.url}/model/parse`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          text: userMessage,
        }),
      });

      const data = await response.json();
      return {
        intent: data.intent.name,
        confidence: data.intent.confidence,
        entities: data.entities,
      };
    } catch (error) {
      console.error("Rasa NLU error:", error);
      return null;
    }
  }

  getProvider() {
    return this.provider;
  }

  isProviderEnabled() {
    return this.isEnabled;
  }
}

let advancedNLU = null;

export const getAdvancedNLUService = () => {
  if (!advancedNLU) {
    advancedNLU = new AdvancedNLUService();
  }
  return advancedNLU;
};

export const initializeNLUProvider = (provider, config) => {
  const service = getAdvancedNLUService();
  service.setProvider(provider, config);
  console.log(`‚úÖ NLU Provider initialized: ${provider}`);
};

```

```my-frontend\src\services\chatbotNLU.js
export const INTENTS = {
  NAVIGATE_HOME: 'navigate_home',
  NAVIGATE_GALLERY: 'navigate_gallery',
  NAVIGATE_SERVICES: 'navigate_services',
  NAVIGATE_TRACK: 'navigate_track',
  NAVIGATE_CONTACT: 'navigate_contact',
  NAVIGATE_FAQ: 'navigate_faq',
  NAVIGATE_PRICING: 'navigate_pricing',
  NAVIGATE_BOOKING: 'navigate_booking',
  NAVIGATE_LOGIN: 'navigate_login',
  NAVIGATE_REGISTER: 'navigate_register',
  GET_HELP: 'get_help',
  TRACK_PACKAGE: 'track_package',
  ABOUT_SERVICES: 'about_services',
  GENERAL_CHAT: 'general_chat',
};

export const SECTION_MAP = {
  [INTENTS.NAVIGATE_HOME]: { section: 'home', label: 'Home' },
  [INTENTS.NAVIGATE_GALLERY]: { section: 'gallery', label: 'Gallery' },
  [INTENTS.NAVIGATE_SERVICES]: { section: 'services', label: 'Services' },
  [INTENTS.NAVIGATE_TRACK]: { section: 'track', label: 'Tracking' },
  [INTENTS.NAVIGATE_CONTACT]: { section: 'contact', label: 'Contact' },
  [INTENTS.NAVIGATE_FAQ]: { section: 'faq', label: 'FAQ' },
  [INTENTS.NAVIGATE_BOOKING]: { section: 'booking', label: 'Booking' },
  [INTENTS.NAVIGATE_PRICING]: { section: 'services', label: 'Pricing' },
  [INTENTS.NAVIGATE_LOGIN]: { section: null, route: '/login', label: 'Login' },
  [INTENTS.NAVIGATE_REGISTER]: { section: null, route: '/register', label: 'Register' },
};

const INTENT_PATTERNS = {
  [INTENTS.NAVIGATE_HOME]: {
    keywords: ['home', 'main page', 'homepage', 'start', 'beginning', 'main'],
    phrases: ['take me home', 'go home', 'show me home'],
  },
  [INTENTS.NAVIGATE_GALLERY]: {
    keywords: ['gallery', 'photos', 'images', 'pictures', 'portfolio', 'showcase'],
    phrases: ['show me gallery', 'show photos', 'view gallery'],
  },
  [INTENTS.NAVIGATE_SERVICES]: {
    keywords: ['services', 'offerings', 'what do you offer', 'capabilities', 'features', 'packages'],
    phrases: ['show services', 'what services', 'tell me about services', 'service options'],
  },
  [INTENTS.NAVIGATE_TRACK]: {
    keywords: ['track', 'tracking', 'where is my', 'status', 'shipment', 'package', 'delivery'],
    phrases: ['track my package', 'check tracking', 'where is my shipment', 'track shipment'],
  },
  [INTENTS.NAVIGATE_CONTACT]: {
    keywords: ['contact', 'email', 'phone', 'address', 'reach us', 'call', 'message'],
    phrases: ['contact us', 'how to contact', 'get in touch', 'contact information'],
  },
  [INTENTS.NAVIGATE_FAQ]: {
    keywords: ['faq', 'frequently asked', 'questions', 'help', 'common issues', 'troubleshoot'],
    phrases: ['show faq', 'frequently asked questions', 'common questions'],
  },
  [INTENTS.NAVIGATE_BOOKING]: {
    keywords: ['booking', 'book', 'reserve', 'schedule', 'reserve shipment', 'send package'],
    phrases: ['make booking', 'book shipment', 'schedule delivery', 'send package'],
  },
  [INTENTS.NAVIGATE_LOGIN]: {
    keywords: ['login', 'log in', 'sign in', 'signin', 'account', 'sign-in'],
    phrases: ['login', 'sign in', 'log in to account', 'access account'],
  },
  [INTENTS.NAVIGATE_REGISTER]: {
    keywords: ['register', 'sign up', 'signup', 'create account', 'join', 'new user'],
    phrases: ['sign up', 'register', 'create account', 'new account', 'join now'],
  },
  [INTENTS.TRACK_PACKAGE]: {
    keywords: ['track', 'tracking', 'shipment', 'package', 'delivery', 'status', 'where'],
    phrases: ['track package', 'track shipment', 'where is my order'],
  },
  [INTENTS.ABOUT_SERVICES]: {
    keywords: ['pricing', 'cost', 'price', 'rate', 'fees', 'how much', 'expense'],
    phrases: ['what are your prices', 'pricing', 'cost of service'],
  },
};

export const detectIntent = (userMessage) => {
  const normalizedMessage = userMessage.toLowerCase().trim();
  
  let highestScore = 0;
  let detectedIntent = INTENTS.GENERAL_CHAT;
  
  for (const [intent, patterns] of Object.entries(INTENT_PATTERNS)) {
    const { keywords, phrases } = patterns;
    
    let score = 0;
    
    phrases.forEach((phrase) => {
      if (normalizedMessage.includes(phrase)) {
        score += 10;
      }
    });
    
    keywords.forEach((keyword) => {
      if (normalizedMessage.includes(keyword)) {
        score += 1;
      }
    });
    
    if (score > highestScore) {
      highestScore = score;
      detectedIntent = intent;
    }
  }
  
  return {
    intent: detectedIntent,
    confidence: Math.min(highestScore / 10, 1),
    section: SECTION_MAP[detectedIntent]?.section,
    route: SECTION_MAP[detectedIntent]?.route,
    label: SECTION_MAP[detectedIntent]?.label,
  };
};

export const generateResponse = (intent, userMessage) => {
  const responseMap = {
    [INTENTS.NAVIGATE_HOME]: "Let me take you to the home page! üè†",
    [INTENTS.NAVIGATE_GALLERY]: "Showing you our gallery now! üì∏",
    [INTENTS.NAVIGATE_SERVICES]: "Let me show you all our services! üìã",
    [INTENTS.NAVIGATE_TRACK]: "Let's track your package! üì¶",
    [INTENTS.NAVIGATE_CONTACT]: "Here's how you can reach us! üìû",
    [INTENTS.NAVIGATE_FAQ]: "Here are our frequently asked questions! ‚ùì",
    [INTENTS.NAVIGATE_BOOKING]: "Let's book a shipment for you! ‚úàÔ∏è",
    [INTENTS.NAVIGATE_LOGIN]: "Redirecting you to login! üîê",
    [INTENTS.NAVIGATE_REGISTER]: "Let's create your account! üìù",
    [INTENTS.TRACK_PACKAGE]: "I'll help you track your package right away! üì¶",
    [INTENTS.ABOUT_SERVICES]: "Let me show you our service options and pricing! üí∞",
    [INTENTS.GET_HELP]: "How can I help you today? üòä",
    [INTENTS.GENERAL_CHAT]: "I understand! How else can I assist you? üòä",
  };
  
  return responseMap[intent] || responseMap[INTENTS.GENERAL_CHAT];
};

```

```my-frontend\src\services\swiftDeliveryChatbotNLU.js
export const SWIFT_DELIVERY_INTENTS = {
  NAVIGATE_HOME: 'navigate_home',
  NAVIGATE_GALLERY: 'navigate_gallery',
  NAVIGATE_SERVICES: 'navigate_services',
  NAVIGATE_TRACK: 'navigate_track',
  NAVIGATE_CONTACT: 'navigate_contact',
  NAVIGATE_FAQ: 'navigate_faq',
  NAVIGATE_BOOKING: 'navigate_booking',
  NAVIGATE_TESTIMONIALS: 'navigate_testimonials',
  ABOUT_SERVICES: 'about_services',
  ABOUT_TRACKING: 'about_tracking',
  ABOUT_COMPANY: 'about_company',
  PRICING_INFO: 'pricing_info',
  GENERAL_CHAT: 'general_chat',
};

export const SWIFT_SECTION_MAP = {
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_HOME]: { section: 'home', label: 'Home' },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_GALLERY]: { section: 'gallery', label: 'Gallery' },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_SERVICES]: { section: 'services', label: 'Services' },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_TRACK]: { section: 'track', label: 'Tracking' },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_CONTACT]: { section: 'contact', label: 'Contact' },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_FAQ]: { section: 'faq', label: 'FAQ' },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_BOOKING]: { section: 'booking', label: 'Booking' },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_TESTIMONIALS]: { section: 'testimonials', label: 'Testimonials' },
  [SWIFT_DELIVERY_INTENTS.ABOUT_SERVICES]: { section: 'services', label: 'Services Info' },
  [SWIFT_DELIVERY_INTENTS.ABOUT_TRACKING]: { section: 'track', label: 'Tracking Info' },
  [SWIFT_DELIVERY_INTENTS.ABOUT_COMPANY]: { section: 'home', label: 'Company Info' },
  [SWIFT_DELIVERY_INTENTS.PRICING_INFO]: { section: 'services', label: 'Pricing' },
};

const INTENT_PATTERNS = {
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_HOME]: {
    keywords: ['home', 'main page', 'homepage', 'start', 'beginning', 'main', 'welcome'],
    phrases: ['take me home', 'go home', 'show me home', 'go to home page'],
  },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_GALLERY]: {
    keywords: ['gallery', 'photos', 'images', 'pictures', 'portfolio', 'showcase', 'facilities', 'fleet', 'equipment'],
    phrases: ['show me gallery', 'show photos', 'view gallery', 'see our facilities', 'show equipment'],
  },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_SERVICES]: {
    keywords: ['services', 'offerings', 'what do you offer', 'capabilities', 'features', 'packages', 'airfreight', 'warehouse', 'customs'],
    phrases: ['show services', 'what services', 'tell me about services', 'service options', 'your offerings'],
  },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_TRACK]: {
    keywords: ['track', 'tracking', 'where is my', 'status', 'shipment', 'package', 'delivery', 'cargo', 'courier'],
    phrases: ['track my package', 'check tracking', 'where is my shipment', 'track shipment', 'delivery status'],
  },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_CONTACT]: {
    keywords: ['contact', 'email', 'phone', 'address', 'reach us', 'call', 'message', 'contact us', 'get in touch'],
    phrases: ['contact us', 'how to contact', 'get in touch', 'contact information', 'reach out'],
  },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_FAQ]: {
    keywords: ['faq', 'frequently asked', 'questions', 'help', 'common issues', 'troubleshoot', 'problem', 'issue'],
    phrases: ['show faq', 'frequently asked questions', 'common questions', 'help me', 'how do i'],
  },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_BOOKING]: {
    keywords: ['booking', 'book', 'reserve', 'schedule', 'send package', 'shipment', 'order', 'booking dashboard'],
    phrases: ['make booking', 'book shipment', 'schedule delivery', 'send package', 'new shipment'],
  },
  [SWIFT_DELIVERY_INTENTS.NAVIGATE_TESTIMONIALS]: {
    keywords: ['testimonial', 'reviews', 'feedback', 'customers', 'what people say', 'customer feedback', 'success stories'],
    phrases: ['show testimonials', 'customer reviews', 'what customers say', 'success stories'],
  },
  [SWIFT_DELIVERY_INTENTS.ABOUT_SERVICES]: {
    keywords: ['airfreight', 'warehouse', 'customs', 'temperature', 'dangerous goods', 'cargo', 'transport', 'logistics'],
    phrases: ['tell me about services', 'explain services', 'service details', 'what can you do'],
  },
  [SWIFT_DELIVERY_INTENTS.ABOUT_TRACKING]: {
    keywords: ['tracking system', 'real-time', 'location', 'map', 'gps', 'live tracking', 'monitoring'],
    phrases: ['how does tracking work', 'real-time tracking', 'live updates', 'location tracking'],
  },
  [SWIFT_DELIVERY_INTENTS.ABOUT_COMPANY]: {
    keywords: ['company', 'about', 'swiftdelivery', 'who are you', 'mission', 'vision', 'commitment'],
    phrases: ['tell me about swiftdelivery', 'about your company', 'who are you', 'company background'],
  },
  [SWIFT_DELIVERY_INTENTS.PRICING_INFO]: {
    keywords: ['pricing', 'cost', 'price', 'rate', 'fees', 'how much', 'expense', 'charge'],
    phrases: ['what are your prices', 'pricing', 'cost of service', 'how much does it cost'],
  },
};

export const detectSwiftDeliveryIntent = (userMessage) => {
  const normalizedMessage = userMessage.toLowerCase().trim();
  
  let highestScore = 0;
  let detectedIntent = SWIFT_DELIVERY_INTENTS.GENERAL_CHAT;
  
  for (const [intent, patterns] of Object.entries(INTENT_PATTERNS)) {
    const { keywords, phrases } = patterns;
    let score = 0;
    
    phrases.forEach((phrase) => {
      if (normalizedMessage.includes(phrase)) {
        score += 10;
      }
    });
    
    keywords.forEach((keyword) => {
      if (normalizedMessage.includes(keyword)) {
        score += 1;
      }
    });
    
    if (score > highestScore) {
      highestScore = score;
      detectedIntent = intent;
    }
  }
  
  return {
    intent: detectedIntent,
    confidence: Math.min(highestScore / 10, 1),
    section: SWIFT_SECTION_MAP[detectedIntent]?.section,
    label: SWIFT_SECTION_MAP[detectedIntent]?.label,
    shouldNavigate: highestScore > 0 && detectedIntent !== SWIFT_DELIVERY_INTENTS.GENERAL_CHAT,
  };
};

export const scrollToWebsiteSection = (sectionId) => {
  if (!sectionId) return false;
  
  const element = document.getElementById(sectionId);
  if (!element) {
    console.warn(`Section ${sectionId} not found`);
    return false;
  }
  
  const headerHeight = 80;
  const elementPosition = element.getBoundingClientRect().top + window.scrollY;
  const offsetPosition = elementPosition - headerHeight;
  
  window.scrollTo({
    top: offsetPosition,
    behavior: 'smooth',
  });
  
  element.focus({ preventScroll: true });
  
  if (element.classList && !element.classList.contains('chatbot-highlight')) {
    element.classList.add('chatbot-highlight');
    setTimeout(() => {
      element.classList.remove('chatbot-highlight');
    }, 3000);
  }
  
  return true;
};

if (!document.querySelector('style[data-chatbot-highlight]')) {
  const style = document.createElement('style');
  style.setAttribute('data-chatbot-highlight', 'true');
  style.textContent = `
    @keyframes chatbot-highlight-pulse {
      0% {
        background-color: rgba(79, 70, 229, 0.1);
        box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.7);
      }
      50% {
        box-shadow: 0 0 0 15px rgba(79, 70, 229, 0);
      }
      100% {
        background-color: rgba(79, 70, 229, 0);
        box-shadow: 0 0 0 0 rgba(79, 70, 229, 0);
      }
    }
    
    .chatbot-highlight {
      animation: chatbot-highlight-pulse 1s ease-out !important;
    }
  `;
  document.head.appendChild(style);
}

```

```my-frontend\src\services\navigationHandler.js
export const scrollToSection = (sectionId) => {
  if (!sectionId) return false;
  
  const element = document.getElementById(sectionId);
  if (!element) {
    console.warn(`Section ${sectionId} not found`);
    return false;
  }
  
  const headerHeight = 80;
  const elementPosition = element.getBoundingClientRect().top + window.scrollY;
  const offsetPosition = elementPosition - headerHeight;
  
  window.scrollTo({
    top: offsetPosition,
    behavior: 'smooth',
  });
  
  element.focus({ preventScroll: true });
  
  if (element.classList && !element.classList.contains('highlight-section')) {
    element.classList.add('highlight-section');
    setTimeout(() => {
      element.classList.remove('highlight-section');
    }, 3000);
  }
  
  return true;
};

export const navigateToRoute = (route) => {
  if (!route) return false;
  
  try {
    window.location.hash = route;
    return true;
  } catch (error) {
    console.error('Navigation error:', error);
    return false;
  }
};

export const executeNavigation = (navigationData) => {
  const { section, route, label } = navigationData;
  
  if (section) {
    return scrollToSection(section);
  } else if (route) {
    return navigateToRoute(route);
  }
  
  return false;
};

export const highlightSectionStyle = `
  <style>
    @keyframes highlight-pulse {
      0% {
        background-color: rgba(79, 70, 229, 0);
        box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.7);
      }
      50% {
        box-shadow: 0 0 0 10px rgba(79, 70, 229, 0);
      }
      100% {
        background-color: rgba(79, 70, 229, 0);
        box-shadow: 0 0 0 0 rgba(79, 70, 229, 0);
      }
    }
    
    .highlight-section {
      animation: highlight-pulse 1s ease-out;
    }
  </style>
`;

if (!document.querySelector('style[data-highlight-section]')) {
  const style = document.createElement('style');
  style.setAttribute('data-highlight-section', 'true');
  style.textContent = `
    @keyframes highlight-pulse {
      0% {
        background-color: rgba(79, 70, 229, 0.1);
        box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.7);
      }
      50% {
        box-shadow: 0 0 0 15px rgba(79, 70, 229, 0);
      }
      100% {
        background-color: rgba(79, 70, 229, 0);
        box-shadow: 0 0 0 0 rgba(79, 70, 229, 0);
      }
    }
    
    .highlight-section {
      animation: highlight-pulse 1s ease-out !important;
    }
  `;
  document.head.appendChild(style);
}

```

```my-frontend\src\services\conversationContext.js
export class ConversationContext {
  constructor() {
    this.history = [];
    this.currentIntent = null;
    this.context = {};
    this.maxHistoryLength = 10;
  }

  addMessage(message, intent, metadata = {}) {
    this.history.push({
      message,
      intent,
      timestamp: Date.now(),
      metadata,
    });

    if (this.history.length > this.maxHistoryLength) {
      this.history.shift();
    }

    this.currentIntent = intent;
  }

  getContext() {
    return {
      currentIntent: this.currentIntent,
      lastMessages: this.history.slice(-3),
      context: this.context,
    };
  }

  setContextData(key, value) {
    this.context[key] = value;
  }

  getContextData(key) {
    return this.context[key];
  }

  clearContext() {
    this.history = [];
    this.currentIntent = null;
    this.context = {};
  }

  getMessageHistory() {
    return this.history;
  }

  hasRecentIntent(intent, timeWindowMs = 5000) {
    const now = Date.now();
    return this.history.some(
      (entry) =>
        entry.intent === intent && (now - entry.timestamp) < timeWindowMs
    );
  }

  getFollowUpSuggestions() {
    const suggestions = {
      navigate_home: ["Check our gallery", "Learn about services"],
      navigate_services: ["View pricing", "Book a shipment"],
      navigate_track: ["Track another package", "Contact support"],
      navigate_contact: ["View gallery", "Check FAQ"],
    };

    return suggestions[this.currentIntent] || [];
  }
}

let conversationContext = null;

export const getConversationContext = () => {
  if (!conversationContext) {
    conversationContext = new ConversationContext();
  }
  return conversationContext;
};

export const resetConversationContext = () => {
  conversationContext = new ConversationContext();
};

```

```my-frontend\src\services\chatbotTester.js
import { detectIntent, generateResponse } from "./chatbotNLU";

export const testSamples = [
  { input: "show me the gallery", expectedIntent: "navigate_gallery" },
  { input: "take me to services", expectedIntent: "navigate_services" },
  { input: "where can I track my package", expectedIntent: "navigate_track" },
  { input: "contact information", expectedIntent: "navigate_contact" },
  { input: "FAQ", expectedIntent: "navigate_faq" },
  { input: "how do I book a shipment", expectedIntent: "navigate_booking" },
  { input: "I want to login", expectedIntent: "navigate_login" },
  { input: "create new account", expectedIntent: "navigate_register" },
  { input: "what are your prices", expectedIntent: "about_services" },
  { input: "show me home", expectedIntent: "navigate_home" },
  { input: "hello", expectedIntent: "general_chat" },
];

export const runChatbotTests = () => {
  console.log("ü§ñ Running Chatbot NLU Tests...\n");
  
  let passed = 0;
  let failed = 0;
  
  testSamples.forEach((test, index) => {
    const result = detectIntent(test.input);
    const isMatch = result.intent === test.expectedIntent;
    
    const status = isMatch ? "‚úÖ PASS" : "‚ùå FAIL";
    const confidence = (result.confidence * 100).toFixed(0);
    
    console.log(`${index + 1}. ${status}`);
    console.log(`   Input: "${test.input}"`);
    console.log(`   Expected: ${test.expectedIntent}`);
    console.log(`   Got: ${result.intent} (${confidence}% confidence)`);
    
    if (result.section || result.route) {
      console.log(
        `   Navigation: Section="${result.section}" | Route="${result.route}"`
      );
    }
    
    const response = generateResponse(result.intent);
    console.log(`   Response: "${response}"`);
    console.log("");
    
    if (isMatch) {
      passed++;
    } else {
      failed++;
    }
  });
  
  console.log(`\nüìä Test Results: ${passed} passed, ${failed} failed out of ${testSamples.length}`);
  console.log(`Success Rate: ${((passed / testSamples.length) * 100).toFixed(1)}%\n`);
  
  return {
    passed,
    failed,
    total: testSamples.length,
    successRate: (passed / testSamples.length) * 100,
  };
};

export const testSpecificInput = (userInput) => {
  console.log(`\nüß™ Testing Input: "${userInput}"`);
  const result = detectIntent(userInput);
  const response = generateResponse(result.intent);
  
  console.log("Result:");
  console.log(`  Intent: ${result.intent}`);
  console.log(`  Confidence: ${(result.confidence * 100).toFixed(0)}%`);
  console.log(`  Section: ${result.section || "N/A"}`);
  console.log(`  Route: ${result.route || "N/A"}`);
  console.log(`  Response: ${response}`);
  console.log("");
  
  return result;
};

if (typeof window !== "undefined" && window.__CHATBOT_DEBUG__) {
  console.log("ü§ñ Chatbot Debug Mode Enabled");
  window.chatbotTest = runChatbotTests;
  window.testInput = testSpecificInput;
  console.log("Available commands:");
  console.log("  window.chatbotTest() - Run all tests");
  console.log("  window.testInput('your message') - Test specific input");
}

```

```my-frontend\src\pages\Login.jsx

```

```my-frontend\script.jsx
// Ensure translations object exists
window.translations = window.translations || {};

// Utilities
const $ = (sel, ctx = document) => ctx.querySelector(sel);
const $$ = (sel, ctx = document) => Array.from((ctx || document).querySelectorAll(sel));

// Translations object - should be present or loaded before applyTranslations uses it
window.translations = window.translations || {};

// Comprehensive translation keys for all visible text on the page
const commonKeys = {
  home: 'Home',
  gallery: 'Gallery',
  services: 'Services',
  track: 'Track',
  login: 'Login',
  register: 'Register',
  welcome: 'SwiftDelivery Airfreight Logistics',
  intro: 'Global cargo solutions with speed, safety, and precision.',
  getStarted: 'Get Started',
  galleryTitle: 'Fleet & Facilities',
  servicesTitle: 'Our Services',
  service1: 'Airfreight Express',
  service1Desc: 'Priority cargo delivery with guaranteed timelines, ensuring your urgent shipments reach their destination quickly and safely.',
  service2: 'Global Warehousing',
  service2Desc: 'Secure storage solutions across strategically located international hubs, enabling efficient inventory management and quick distribution.',
  service3: 'Customs Clearance',
  service3Desc: 'Expert handling of documentation and border processing to expedite shipment clearance, minimizing delays and compliance risks.',
  service4: 'Temperature-Controlled Cargo',
  service4Desc: 'Specialized transport and storage for pharmaceuticals, perishables, and sensitive goods requiring strict temperature regulation.',
  service5: 'Dangerous Goods Transport',
  service5Desc: 'Certified and compliant handling of hazardous materials with stringent safety standards and legal requirements.',
  bookingTitle: 'Booking Dashboard',
  bookingNamePlaceholder: 'Full Name',
  bookingEmailPlaceholder: 'Email Address',
  bookingMessagePlaceholder: 'Booking Details (date, cargo type, destination)',
  bookingSubmitButton: 'Submit Booking',
  testimonialsTitle: 'Customer Testimonials',
  testimonial1Text: '"SwiftDelivery got our medical supplies across borders in record time. Highly recommended!"',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: '"Their tracking system is top-notch. I knew exactly where my shipment was at all times."',
  testimonial2Author: '- James Okoro',
  testimonial3Text: '"Professional, fast, and reliable. SwiftDelivery is our go-to logistics partner."',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'Contact Us',
  submitButton: 'Submit Form',
  loginTitle: 'Client Login',
  loginButton: 'Login',
  registerTitle: 'New Client Registration',
  registerButton: 'Register',
  registerUsernamePlaceholder: 'Username',
  registerPasswordPlaceholder: 'Password',
  trackTitle: 'Pickup & Delivery Tracking',
  trackButton: 'Track Shipment',
  faqTitle: 'Frequently Asked Questions',
  faq1Q: 'How fast is airfreight delivery?',
  faq1A: 'Most airfreight shipments arrive within 24‚Äì48 hours, depending on the destination, flight availability, and customs processing. We prioritize speed and reliability, ensuring your cargo reaches its destination as quickly as possible. Expedited options are available for urgent shipments.',
  faq2Q: 'Do you handle international customs?',
  faq2A: 'Yes, we provide comprehensive customs clearance services for all international shipments. Our experienced team navigates complex regulations and documentation to ensure smooth border transitions, minimizing delays and avoiding compliance issues.',
  faq3Q: 'Can I track my cargo in real time?',
  faq3A: 'Absolutely. Our advanced tracking system offers live updates, GPS location data, and status notifications throughout the journey. You‚Äôll have full visibility from pickup to final delivery, accessible via our online portal or mobile app.',
  faq4Q: 'Do you offer temperature-controlled shipping?',
  faq4A: 'Yes, we specialize in cold-chain logistics tailored for sensitive goods such as pharmaceuticals, vaccines, fresh produce, and other perishables. Our temperature-controlled containers and monitoring systems maintain optimal conditions throughout transit.',
  faq5Q: 'Is weekend delivery available?',
  faq5A: 'Weekend delivery is available in select regions and for eligible service tiers. To confirm availability for your shipment, please contact our support team. We strive to accommodate your schedule with flexible delivery options.',
  liveChatTitle: 'Live Chat Support',
  liveChatNamePlaceholder: 'Your Name',
  liveChatEmailPlaceholder: 'Your Email',
  liveChatMessagePlaceholder: 'Your Message',
  chatbotTitle: 'SwiftDelivery Bot',
  chatbotGreeting: 'Hi there! How can I help you today?',
  chatMessagePlaceholder: 'Type your message...',
  sendButton: 'Send',
  newsletterTitle: 'Stay Updated',
  newsletterText: 'Subscribe to our newsletter for airfreight tips, updates, and exclusive offers.',
  emailLabel: 'Email',
  subscribeButton: 'Subscribe',
  followUs: 'Follow Us',
  company: 'Company',
  about: 'About Us',
  helpCenter: 'Help Center',
  support: 'Support',
  legal: 'Legal',
  privacy: 'Privacy Policy',
  terms: 'Terms of Service',
  footerNote: '¬© 2025 SwiftDelivery. All rights reserved.'
};

// English (base)
window.translations.en = window.translations.en || Object.assign({}, commonKeys);

// French
window.translations.fr = window.translations.fr || {
  home: 'Accueil',
  gallery: 'Galerie',
  services: 'Services',
  track: 'Suivi',
  login: 'Connexion',
  register: "S'inscrire",
  welcome: 'SwiftDelivery - Fret a√©rien',
  intro: 'Solutions de fret mondiales rapides, s√ªres et pr√©cises.',
  getStarted: 'Commencer',
  galleryTitle: 'Flotte & Installations',
  servicesTitle: 'Nos Services',
  service1: 'Express a√©rien',
  service1Desc: "Livraison prioritaire de marchandises avec d√©lais garantis, pour que vos envois urgents arrivent rapidement et en toute s√©curit√©.",
  service2: 'Entrep√¥ts mondiaux',
  service2Desc: 'Solutions de stockage s√©curis√©es dans des hubs internationaux strat√©giques, permettant une gestion efficace des stocks et une distribution rapide.',
  service3: 'D√©douanement',
  service3Desc: "Gestion experte des documents et du traitement frontalier pour acc√©l√©rer le d√©douanement des envois, minimisant les retards et les risques de non-conformit√©.",
  service4: 'Transport sous temp√©rature contr√¥l√©e',
  service4Desc: 'Transport et stockage sp√©cialis√©s pour produits pharmaceutiques, p√©rissables et marchandises sensibles n√©cessitant une r√©gulation stricte de la temp√©rature.',
  service5: 'Transport de mati√®res dangereuses',
  service5Desc: 'Manutention certifi√©e et conforme des mati√®res dangereuses avec des normes de s√©curit√© strictes et le respect des exigences l√©gales.',
  bookingTitle: 'Tableau de r√©servation',
  bookingNamePlaceholder: 'Nom complet',
  bookingEmailPlaceholder: 'Adresse e-mail',
  bookingMessagePlaceholder: 'D√©tails de la r√©servation (date, type de cargaison, destination)',
  bookingSubmitButton: 'Envoyer la r√©servation',
  testimonialsTitle: 'T√©moignages clients',
  testimonial1Text: '"SwiftDelivery a achemin√© nos fournitures m√©dicales √† travers les fronti√®res en un temps record. Fortement recommand√© !"',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: '"Leur syst√®me de suivi est au top. Je savais exactement o√π se trouvait mon envoi √† tout moment."',
  testimonial2Author: '- James Okoro',
  testimonial3Text: '"Professionnel, rapide et fiable. SwiftDelivery est notre partenaire logistique de r√©f√©rence."',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'Contactez-nous',
  submitButton: 'Envoyer',
  loginTitle: 'Connexion client',
  loginButton: 'Se connecter',
  registerTitle: 'Nouvel enregistrement client',
  registerButton: "S'inscrire",
  registerUsernamePlaceholder: 'Nom d\'utilisateur',
  registerPasswordPlaceholder: 'Mot de passe',
  trackTitle: 'Suivi de collecte et de livraison',
  trackButton: 'Suivre l\'envoi',
  faqTitle: 'Foire aux questions',
  faq1Q: '√Ä quelle vitesse la livraison a√©rienne est-elle effectu√©e ?',
  faq1A: 'La plupart des exp√©ditions a√©riennes arrivent en 24 √† 48 heures, selon la destination, la disponibilit√© des vols et le traitement douanier. Nous privil√©gions la rapidit√© et la fiabilit√©.',
  faq2Q: 'G√©rez-vous les douanes internationales ?',
  faq2A: 'Oui, nous fournissons des services complets de d√©douanement pour toutes les exp√©ditions internationales.',
  faq3Q: 'Puis-je suivre ma cargaison en temps r√©el ?',
  faq3A: 'Absolument. Notre syst√®me de suivi fournit des mises √† jour en direct, des donn√©es GPS et des notifications de statut tout au long du trajet.',
  faq4Q: 'Offrez-vous un transport sous temp√©rature contr√¥l√©e ?',
  faq4A: 'Oui, nous sommes sp√©cialis√©s dans la cha√Æne du froid pour les produits sensibles.',
  faq5Q: 'La livraison le week-end est-elle disponible ?',
  faq5A: 'La livraison le week-end est disponible dans certaines r√©gions et pour certains niveaux de service.',
  liveChatTitle: 'Assistance en direct',
  liveChatNamePlaceholder: 'Votre nom',
  liveChatEmailPlaceholder: 'Votre e-mail',
  liveChatMessagePlaceholder: 'Votre message',
  chatbotTitle: 'Bot SwiftDelivery',
  chatbotGreeting: 'Bonjour ! Comment puis-je vous aider aujourd\'hui ?',
  chatMessagePlaceholder: 'Tapez votre message...',
  sendButton: 'Envoyer',
  newsletterTitle: 'Restez inform√©',
  newsletterText: 'Abonnez-vous √† notre newsletter pour des conseils et des offres exclusives.',
  emailLabel: 'E-mail',
  subscribeButton: 'S\'abonner',
  followUs: 'Suivez-nous',
  company: 'Entreprise',
  about: '√Ä propos',
  helpCenter: 'Centre d\'aide',
  support: 'Support',
  legal: 'Mentions l√©gales',
  privacy: 'Politique de confidentialit√©',
  terms: 'Conditions d\'utilisation',
  footerNote: '¬© 2025 SwiftDelivery. Tous droits r√©serv√©s.'
};

// Spanish
window.translations.es = window.translations.es || {
  home: 'Inicio',
  gallery: 'Galer√≠a',
  services: 'Servicios',
  track: 'Seguimiento',
  login: 'Iniciar sesi√≥n',
  register: 'Registrarse',
  welcome: 'SwiftDelivery Transporte A√©reo',
  intro: 'Soluciones de carga globales con rapidez, seguridad y precisi√≥n.',
  getStarted: 'Comenzar',
  galleryTitle: 'Flota y Instalaciones',
  servicesTitle: 'Nuestros Servicios',
  service1: 'Transporte a√©reo expr√©s',
  service1Desc: 'Entrega prioritaria de carga con plazos garantizados para que sus env√≠os urgentes lleguen de forma r√°pida y segura.',
  service2: 'Almacenamiento global',
  service2Desc: 'Soluciones de almacenamiento seguras en hubs internacionales estrat√©gicos que permiten una gesti√≥n eficiente del inventario y una distribuci√≥n r√°pida.',
  service3: 'Despacho de aduanas',
  service3Desc: 'Gesti√≥n experta de documentaci√≥n y procesos fronterizos para agilizar el despacho de aduanas, minimizando retrasos y riesgos de incumplimiento.',
  service4: 'Carga con control de temperatura',
  service4Desc: 'Transporte y almacenamiento especializados para productos farmac√©uticos, perecederos y mercanc√≠as sensibles que requieren control de temperatura.',
  service5: 'Transporte de mercanc√≠as peligrosas',
  service5Desc: 'Manipulaci√≥n certificada y conforme de materiales peligrosos con normas de seguridad estrictas y requisitos legales.',
  bookingTitle: 'Panel de reservas',
  bookingNamePlaceholder: 'Nombre completo',
  bookingEmailPlaceholder: 'Direcci√≥n de correo',
  bookingMessagePlaceholder: 'Detalles de la reserva (fecha, tipo de carga, destino)',
  bookingSubmitButton: 'Enviar reserva',
  testimonialsTitle: 'Testimonios de clientes',
  testimonial1Text: '"SwiftDelivery transport√≥ nuestras suministros m√©dicas a trav√©s de fronteras en tiempo r√©cord. ¬°Muy recomendable!"',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: '"Su sistema de seguimiento es excepcional. Sab√≠a exactamente d√≥nde estaba mi env√≠o en todo momento."',
  testimonial2Author: '- James Okoro',
  testimonial3Text: '"Profesional, r√°pido y fiable. SwiftDelivery es nuestro socio log√≠stico preferido."',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'Cont√°ctenos',
  submitButton: 'Enviar',
  loginTitle: 'Inicio de sesi√≥n',
  loginButton: 'Entrar',
  registerTitle: 'Registro de nuevo cliente',
  registerButton: 'Registrarse',
  registerUsernamePlaceholder: 'Nombre de usuario',
  registerPasswordPlaceholder: 'Contrase√±a',
  trackTitle: 'Seguimiento de recogida y entrega',
  trackButton: 'Rastrear env√≠o',
  faqTitle: 'Preguntas frecuentes',
  faq1Q: '¬øQu√© tan r√°pida es la entrega a√©rea?',
  faq1A: 'La mayor√≠a de los env√≠os a√©reos llegan en 24‚Äì48 horas, dependiendo del destino, la disponibilidad de vuelos y el procesamiento aduanero.',
  faq2Q: '¬øManejan aduanas internacionales?',
  faq2A: 'S√≠, ofrecemos servicios integrales de despacho aduanero para todos los env√≠os internacionales.',
  faq3Q: '¬øPuedo rastrear mi carga en tiempo real?',
  faq3A: 'S√≠. Nuestro sistema ofrece actualizaciones en vivo, datos GPS y notificaciones de estado durante todo el trayecto.',
  faq4Q: '¬øOfrecen env√≠o con control de temperatura?',
  faq4A: 'S√≠, nos especializamos en la cadena de fr√≠o para mercanc√≠as sensibles.',
  faq5Q: '¬øEst√° disponible la entrega los fines de semana?',
  faq5A: 'La entrega los fines de semana est√° disponible en regiones selectas y para niveles de servicio elegibles.',
  liveChatTitle: 'Chat en vivo',
  liveChatNamePlaceholder: 'Tu nombre',
  liveChatEmailPlaceholder: 'Tu correo',
  liveChatMessagePlaceholder: 'Tu mensaje',
  chatbotTitle: 'Bot SwiftDelivery',
  chatbotGreeting: '¬°Hola! ¬øEn qu√© puedo ayudarte hoy?',
  chatMessagePlaceholder: 'Escribe tu mensaje...',
  sendButton: 'Enviar',
  newsletterTitle: 'Mantente al d√≠a',
  newsletterText: 'Suscr√≠bete a nuestro bolet√≠n para recibir consejos y ofertas.',
  emailLabel: 'Correo electr√≥nico',
  subscribeButton: 'Suscribirse',
  followUs: 'S√≠guenos',
  company: 'Empresa',
  about: 'Sobre nosotros',
  helpCenter: 'Centro de ayuda',
  support: 'Soporte',
  legal: 'Legal',
  privacy: 'Pol√≠tica de privacidad',
  terms: 'T√©rminos de servicio',
  footerNote: '¬© 2025 SwiftDelivery. Todos los derechos reservados.'
};

// German
window.translations.de = window.translations.de || {
  home: 'Startseite',
  gallery: 'Galerie',
  services: 'Dienstleistungen',
  track: 'Verfolgung',
  login: 'Anmelden',
  register: 'Registrieren',
  welcome: 'SwiftDelivery Luftfracht',
  intro: 'Globale Frachtl√∂sungen mit Geschwindigkeit, Sicherheit und Pr√§zision.',
  getStarted: 'Loslegen',
  galleryTitle: 'Flotte & Einrichtungen',
  servicesTitle: 'Unsere Dienstleistungen',
  service1: 'Express Luftfracht',
  service1Desc: 'Priorisierte Frachtsendung mit garantierten Zeitpl√§nen, damit Ihre dringenden Sendungen schnell und sicher ankommen.',
  service2: 'Globales Lagerwesen',
  service2Desc: 'Sichere Lagerl√∂sungen an strategisch gelegenen internationalen Hubs f√ºr effizientes Inventarmanagement und schnelle Distribution.',
  service3: 'Zollabfertigung',
  service3Desc: 'Expertenabwicklung von Unterlagen und Grenzprozessen zur Beschleunigung der Sendungsfreigabe und Minimierung von Verz√∂gerungen.',
  service4: 'Temperaturgef√ºhrte Fracht',
  service4Desc: 'Spezialisierter Transport und Lagerung f√ºr Pharmazeutika, verderbliche Waren und empfindliche G√ºter mit strenger Temperaturkontrolle.',
  service5: 'Transport gef√§hrlicher G√ºter',
  service5Desc: 'Zertifizierte und konforme Handhabung gef√§hrlicher Stoffe mit strengen Sicherheitsstandards.',
  bookingTitle: 'Buchungs√ºbersicht',
  bookingNamePlaceholder: 'Vollst√§ndiger Name',
  bookingEmailPlaceholder: 'E-Mail-Adresse',
  bookingMessagePlaceholder: 'Buchungsdetails (Datum, Frachtart, Ziel)',
  bookingSubmitButton: 'Buchung absenden',
  testimonialsTitle: 'Kundenbewertungen',
  testimonial1Text: '"SwiftDelivery hat unsere medizinischen Lieferungen rekordverd√§chtig √ºber Grenzen transportiert. Sehr zu empfehlen!"',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: '"Ihr Tracking-System ist erstklassig. Ich wusste jederzeit, wo sich meine Sendung befand."',
  testimonial2Author: '- James Okoro',
  testimonial3Text: '"Professionell, schnell und zuverl√§ssig. SwiftDelivery ist unser Logistikpartner der Wahl."',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'Kontaktieren Sie uns',
  submitButton: 'Absenden',
  loginTitle: 'Kundenlogin',
  loginButton: 'Anmelden',
  registerTitle: 'Neue Kundenregistrierung',
  registerButton: 'Registrieren',
  registerUsernamePlaceholder: 'Benutzername',
  registerPasswordPlaceholder: 'Passwort',
  trackTitle: 'Abhol- & Lieferverfolgung',
  trackButton: 'Sendung verfolgen',
  faqTitle: 'H√§ufig gestellte Fragen',
  faq1Q: 'Wie schnell ist die Luftfrachtlieferung?',
  faq1A: 'Die meisten Luftfrachtsendungen erreichen das Ziel innerhalb von 24‚Äì48 Stunden, abh√§ngig von Zielort, Flugverf√ºgbarkeit und Zollabfertigung.',
  faq2Q: 'K√ºmmern Sie sich um internationale Zollabfertigung?',
  faq2A: 'Ja, wir bieten umfassende Zollabfertigungsdienste f√ºr alle internationalen Sendungen.',
  faq3Q: 'Kann ich meine Fracht in Echtzeit verfolgen?',
  faq3A: 'Ja. Unser System bietet Live-Updates, GPS-Daten und Statusbenachrichtigungen w√§hrend der gesamten Reise.',
  faq4Q: 'Bieten Sie temperaturkontrollierten Versand an?',
  faq4A: 'Ja, wir sind auf die K√ºhlkette f√ºr empfindliche Waren spezialisiert.',
  faq5Q: 'Ist Wochenendzustellung verf√ºgbar?',
  faq5A: 'Wochenendzustellung ist in ausgew√§hlten Regionen und f√ºr bestimmte Servicelevel verf√ºgbar.',
  liveChatTitle: 'Live-Chat-Support',
  liveChatNamePlaceholder: 'Ihr Name',
  liveChatEmailPlaceholder: 'Ihre E-Mail',
  liveChatMessagePlaceholder: 'Ihre Nachricht',
  chatbotTitle: 'SwiftDelivery Bot',
  chatbotGreeting: 'Hallo! Wie kann ich Ihnen heute helfen?',
  chatMessagePlaceholder: 'Geben Sie Ihre Nachricht ein...',
  sendButton: 'Senden',
  newsletterTitle: 'Bleiben Sie auf dem Laufenden',
  newsletterText: 'Abonnieren Sie unseren Newsletter f√ºr Tipps und exklusive Angebote.',
  emailLabel: 'E-Mail',
  subscribeButton: 'Abonnieren',
  followUs: 'Folgen Sie uns',
  company: 'Unternehmen',
  about: '√úber uns',
  helpCenter: 'Hilfezentrum',
  support: 'Support',
  legal: 'Rechtliches',
  privacy: 'Datenschutz',
  terms: 'Nutzungsbedingungen',
  footerNote: '¬© 2025 SwiftDelivery. Alle Rechte vorbehalten.'
};

// Chinese (Simplified)
window.translations.zh = window.translations.zh || {
  home: 'È¶ñÈ°µ',
  gallery: 'ÂõæÂ∫ì',
  services: 'ÊúçÂä°',
  track: 'ËøΩË∏™',
  login: 'ÁôªÂΩï',
  register: 'Ê≥®ÂÜå',
  welcome: 'SwiftDelivery Ëà™Á©∫Ë¥ßËøê',
  intro: 'Êèê‰æõÂø´ÈÄü„ÄÅÂÆâÂÖ®„ÄÅÁ≤æÂáÜÁöÑÂÖ®ÁêÉË¥ßËøêËß£ÂÜ≥ÊñπÊ°à„ÄÇ',
  getStarted: 'ÂºÄÂßã',
  galleryTitle: 'Êú∫Èòü‰∏éËÆæÊñΩ',
  servicesTitle: 'Êàë‰ª¨ÁöÑÊúçÂä°',
  service1: 'Á©∫ËøêÂø´ÈÄí',
  service1Desc: '‰ºòÂÖàË¥ßËøêÔºå‰øùËØÅÊó∂Èó¥Ë°®ÔºåÁ°Æ‰øùÊÇ®ÁöÑÁ¥ßÊÄ•Ë¥ßÁâ©Âø´ÈÄüÂÆâÂÖ®Âà∞Ëææ„ÄÇ',
  service2: 'ÂÖ®ÁêÉ‰ªìÂÇ®',
  service2Desc: 'Âú®ÊàòÁï•‰ΩçÁΩÆÁöÑÂõΩÈôÖÊû¢Á∫ΩÊèê‰æõÂÆâÂÖ®Â≠òÂÇ®ÔºåÊîØÊåÅÈ´òÊïàÂ∫ìÂ≠òÁÆ°ÁêÜÂíåÂø´ÈÄüÂàÜÂèë„ÄÇ',
  service3: 'Êä•ÂÖ≥ÊúçÂä°',
  service3Desc: '‰∏ì‰∏öÂ§ÑÁêÜÊñá‰ª∂ÂíåËæπÂ¢ÉÊµÅÁ®ãÔºåÂä†Âø´Ê∏ÖÂÖ≥ÔºåÂáèÂ∞ëÂª∂ËØØ‰∏éÂêàËßÑÈ£éÈô©„ÄÇ',
  service4: 'Ê∏©ÊéßË¥ßÁâ©',
  service4Desc: '‰∏∫ËçØÂìÅ„ÄÅÊòìËÖêÂìÅÂíåÊïèÊÑüË¥ßÁâ©Êèê‰æõ‰∏ì‰∏öËøêËæìÂíåÂ≠òÂÇ®Ôºå‰∏•Ê†ºÊéßÂà∂Ê∏©Â∫¶„ÄÇ',
  service5: 'Âç±Èô©ÂìÅËøêËæì',
  service5Desc: 'ÂØπÂç±Èô©ÂìÅËøõË°åËÆ§ËØÅÂíåÂêàËßÑÂ§ÑÁêÜÔºåÈÅµÂæ™‰∏•Ê†ºÁöÑÂÆâÂÖ®Ê†áÂáÜ‰∏éÊ≥ïÂæãË¶ÅÊ±Ç„ÄÇ',
  bookingTitle: 'È¢ÑËÆ¢Èù¢Êùø',
  bookingNamePlaceholder: 'ÂÖ®Âêç',
  bookingEmailPlaceholder: 'ÁîµÂ≠êÈÇÆ‰ª∂Âú∞ÂùÄ',
  bookingMessagePlaceholder: 'È¢ÑËÆ¢ËØ¶ÊÉÖÔºàÊó•Êúü„ÄÅË¥ßÁâ©Á±ªÂûã„ÄÅÁõÆÁöÑÂú∞Ôºâ',
  bookingSubmitButton: 'Êèê‰∫§È¢ÑËÆ¢',
  testimonialsTitle: 'ÂÆ¢Êà∑ËØÑ‰ª∑',
  testimonial1Text: '"SwiftDelivery Âú®ÂàõÁ∫™ÂΩïÁöÑÊó∂Èó¥ÂÜÖË∑®Â¢ÉËøêÈÄÅ‰∫ÜÊàë‰ª¨ÁöÑÂåªÁñóÁâ©ËµÑÔºåÂº∫ÁÉàÊé®ËçêÔºÅ"',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: '"‰ªñ‰ª¨ÁöÑËøΩË∏™Á≥ªÁªüÈùûÂ∏∏Âá∫Ëâ≤„ÄÇÊàëÈöèÊó∂Áü•ÈÅìÊàëÁöÑË¥ßÁâ©Âú®Âì™Èáå„ÄÇ"',
  testimonial2Author: '- James Okoro',
  testimonial3Text: '"‰∏ì‰∏ö„ÄÅÂø´ÈÄü‰∏îÂèØÈù†„ÄÇSwiftDelivery ÊòØÊàë‰ª¨ÁöÑÈ¶ñÈÄâÁâ©ÊµÅÂêà‰Ωú‰ºô‰º¥„ÄÇ"',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'ËÅîÁ≥ªÊàë‰ª¨',
  submitButton: 'Êèê‰∫§',
  loginTitle: 'ÂÆ¢Êà∑ÁôªÂΩï',
  loginButton: 'ÁôªÂΩï',
  registerTitle: 'Êñ∞ÂÆ¢Êà∑Ê≥®ÂÜå',
  registerButton: 'Ê≥®ÂÜå',
  registerUsernamePlaceholder: 'Áî®Êà∑Âêç',
  registerPasswordPlaceholder: 'ÂØÜÁ†Å',
  trackTitle: 'Âèñ‰ª∂‰∏é‰∫§‰ªòËøΩË∏™',
  trackButton: 'ËøΩË∏™Ë¥ß‰ª∂',
  faqTitle: 'Â∏∏ËßÅÈóÆÈ¢ò',
  faq1Q: 'Á©∫ËøêÂ§öÂø´Ôºü',
  faq1A: 'Â§ßÂ§öÊï∞Á©∫ËøêË¥ßÁâ©Âú® 24‚Äì48 Â∞èÊó∂ÂÜÖÂà∞ËææÔºåÂÖ∑‰ΩìÂèñÂÜ≥‰∫éÁõÆÁöÑÂú∞„ÄÅËà™Áè≠ÂèØÁî®ÊÄßÂíåÊµ∑ÂÖ≥Â§ÑÁêÜ„ÄÇ',
  faq2Q: '‰Ω†‰ª¨Â§ÑÁêÜÂõΩÈôÖÊµ∑ÂÖ≥ÂêóÔºü',
  faq2A: 'ÊòØÁöÑÔºåÊàë‰ª¨‰∏∫ÊâÄÊúâÂõΩÈôÖË¥ßÁâ©Êèê‰æõÂÖ®Èù¢ÁöÑÈÄöÂÖ≥ÊúçÂä°„ÄÇ',
  faq3Q: 'ÊàëÂèØ‰ª•ÂÆûÊó∂ËøΩË∏™ÊàëÁöÑË¥ßÁâ©ÂêóÔºü',
  faq3A: 'ÂèØ‰ª•„ÄÇÊàë‰ª¨ÁöÑËøΩË∏™Á≥ªÁªüÊèê‰æõÂÆûÊó∂Êõ¥Êñ∞„ÄÅGPS Êï∞ÊçÆÂíåÁä∂ÊÄÅÈÄöÁü•„ÄÇ',
  faq4Q: 'Êèê‰æõÊ∏©ÊéßËøêËæìÂêóÔºü',
  faq4A: 'ÊòØÁöÑÔºåÊàë‰ª¨‰∏ìÊ≥®‰∫éÂÜ∑ÈìæÁâ©ÊµÅ‰ª•Êª°Ë∂≥ÊïèÊÑüË¥ßÁâ©ÁöÑÈúÄÊ±Ç„ÄÇ',
  faq5Q: 'Âë®Êú´ÈÄÅË¥ßÂèØÁî®ÂêóÔºü',
  faq5A: 'Âë®Êú´ÈÄÅË¥ßÂú®ÈÉ®ÂàÜÂú∞Âå∫ÂíåÁâπÂÆöÊúçÂä°Á∫ßÂà´ÂèØÁî®„ÄÇ',
  liveChatTitle: 'Âú®Á∫øÂÆ¢Êúç',
  liveChatNamePlaceholder: 'ÊÇ®ÁöÑÂßìÂêç',
  liveChatEmailPlaceholder: 'ÊÇ®ÁöÑÁîµÂ≠êÈÇÆ‰ª∂',
  liveChatMessagePlaceholder: 'ÊÇ®ÁöÑÊ∂àÊÅØ',
  chatbotTitle: 'SwiftDelivery Êú∫Âô®‰∫∫',
  chatbotGreeting: 'ÊÇ®Â•ΩÔºÅÊàëËÉΩ‰∏∫ÊÇ®ÂÅö‰∫õ‰ªÄ‰πàÔºü',
  chatMessagePlaceholder: 'ËæìÂÖ•Ê∂àÊÅØ...',
  sendButton: 'ÂèëÈÄÅ',
  newsletterTitle: '‰øùÊåÅÂÖ≥Ê≥®',
  newsletterText: 'ËÆ¢ÈòÖÊàë‰ª¨ÁöÑÈÄöËÆØÔºåËé∑ÂèñË¥ßËøêÊäÄÂ∑ß„ÄÅÊõ¥Êñ∞ÂíåÁã¨ÂÆ∂‰ºòÊÉ†„ÄÇ',
  emailLabel: 'ÁîµÂ≠êÈÇÆ‰ª∂',
  subscribeButton: 'ËÆ¢ÈòÖ',
  followUs: 'ÂÖ≥Ê≥®Êàë‰ª¨',
  company: 'ÂÖ¨Âè∏',
  about: 'ÂÖ≥‰∫éÊàë‰ª¨',
  helpCenter: 'Â∏ÆÂä©‰∏≠ÂøÉ',
  support: 'ÊîØÊåÅ',
  legal: 'Ê≥ïÂæã',
  privacy: 'ÈöêÁßÅÊîøÁ≠ñ',
  terms: 'ÊúçÂä°Êù°Ê¨æ',
  footerNote: '¬© 2025 SwiftDelivery„ÄÇ‰øùÁïôÊâÄÊúâÊùÉÂà©„ÄÇ'
};

// Arabic (right-to-left)
window.translations.ar = window.translations.ar || {
  home: 'ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©',
  gallery: 'ÿßŸÑŸÖÿπÿ±ÿ∂',
  services: 'ÿßŸÑÿÆÿØŸÖÿßÿ™',
  track: 'ÿ™ÿ™ÿ®ÿπ',
  login: 'ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ',
  register: 'ÿ™ÿ≥ÿ¨ŸäŸÑ',
  welcome: 'ÿ≥ŸàŸäŸÅÿ™ ÿØŸäŸÑŸÅÿ±Ÿä - ÿßŸÑÿ¥ÿ≠ŸÜ ÿßŸÑÿ¨ŸàŸä',
  intro: 'ÿ≠ŸÑŸàŸÑ ÿ¥ÿ≠ŸÜ ÿπÿßŸÑŸÖŸäÿ© ÿ®ÿ≥ÿ±ÿπÿ© Ÿàÿ£ŸÖÿßŸÜ ŸàÿØŸÇÿ©.',
  getStarted: 'ÿßÿ®ÿØÿ£ ÿßŸÑÿ¢ŸÜ',
  galleryTitle: 'ÿßŸÑÿ£ÿ≥ÿ∑ŸàŸÑ ŸàÿßŸÑŸÖÿ±ÿßŸÅŸÇ',
  servicesTitle: 'ÿÆÿØŸÖÿßÿ™ŸÜÿß',
  service1: 'ÿßŸÑÿ¥ÿ≠ŸÜ ÿßŸÑÿ¨ŸàŸä ÿßŸÑÿ≥ÿ±Ÿäÿπ',
  service1Desc: 'ÿ™ŸàÿµŸäŸÑ ÿßŸÑÿ¥ÿ≠ŸÜÿßÿ™ ÿ∞ÿßÿ™ ÿ£ŸàŸÑŸàŸäÿ© ŸÖÿπ ÿ¨ÿØÿßŸàŸÑ ÿ≤ŸÖŸÜŸäÿ© ŸÖÿ∂ŸÖŸàŸÜÿ© ŸÑÿ∂ŸÖÿßŸÜ ŸàÿµŸàŸÑ ÿ¥ÿ≠ŸÜÿßÿ™ŸÉ ÿßŸÑÿπÿßÿ¨ŸÑÿ© ÿ®ÿ≥ÿ±ÿπÿ© Ÿàÿ£ŸÖÿßŸÜ.',
  service2: 'ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑÿπÿßŸÑŸÖŸä',
  service2Desc: 'ÿ≠ŸÑŸàŸÑ ÿ™ÿÆÿ≤ŸäŸÜ ÿ¢ŸÖŸÜÿ© ÿπÿ®ÿ± ŸÖÿ±ÿßŸÉÿ≤ ÿØŸàŸÑŸäÿ© ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿ© ŸÑÿ™ŸÖŸÉŸäŸÜ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ ÿßŸÑŸÅÿπÿßŸÑÿ© ŸàÿßŸÑÿ™Ÿàÿ≤Ÿäÿπ ÿßŸÑÿ≥ÿ±Ÿäÿπ.',
  service3: 'ÿ™ÿÆŸÑŸäÿµ ÿ¨ŸÖÿ±ŸÉŸä',
  service3Desc: 'ŸÖÿπÿßŸÑÿ¨ÿ© ŸÖÿ™ŸÇŸÜÿ© ŸÑŸÑŸàÿ´ÿßÿ¶ŸÇ ŸàÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™ ÿßŸÑÿ≠ÿØŸàÿØŸäÿ© ŸÑÿ™ÿ≥ÿ±Ÿäÿπ ÿ™ÿÆŸÑŸäÿµ ÿßŸÑÿ¥ÿ≠ŸÜÿßÿ™ Ÿàÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ™ÿ£ÿÆŸäÿ±ÿßÿ™.',
  service4: 'ÿ¥ÿ≠ŸÜ ÿ®ÿØÿ±ÿ¨ÿ© ÿ≠ÿ±ÿßÿ±ÿ© ŸÖÿ≠ŸÉŸàŸÖÿ©',
  service4Desc: 'ŸÜŸÇŸÑ Ÿàÿ™ÿÆÿ≤ŸäŸÜ ŸÖÿ™ÿÆÿµÿµ ŸÑŸÑÿ£ÿØŸàŸäÿ© ŸàÿßŸÑÿ≥ŸÑÿπ ÿßŸÑŸÇÿßÿ®ŸÑÿ© ŸÑŸÑÿ™ŸÑŸÅ ŸàÿßŸÑÿ≥ŸÑÿπ ÿßŸÑÿ≠ÿ≥ÿßÿ≥ÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ™ÿ∑ŸÑÿ® ÿ±ŸÇÿßÿ®ÿ© ÿµÿßÿ±ŸÖÿ© ÿπŸÑŸâ ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©.',
  service5: 'ŸÜŸÇŸÑ ÿßŸÑŸÖŸàÿßÿØ ÿßŸÑÿÆÿ∑ÿ±ÿ©',
  service5Desc: 'ŸÖÿπÿßŸÑÿ¨ÿ© ŸÖÿπÿ™ŸÖÿØÿ© ŸàŸÖÿ™ŸàÿßŸÅŸÇÿ© ŸÑŸÑŸÖŸàÿßÿØ ÿßŸÑÿÆÿ∑ÿ±ÿ© ŸàŸÅŸÇŸãÿß ŸÑŸÖÿπÿßŸäŸäÿ± ÿßŸÑÿ≥ŸÑÿßŸÖÿ© ŸàÿßŸÑŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÇÿßŸÜŸàŸÜŸäÿ© ÿßŸÑÿµÿßÿ±ŸÖÿ©.',
  bookingTitle: 'ŸÑŸàÿ≠ÿ© ÿßŸÑÿ≠ÿ¨ÿ≤',
  bookingNamePlaceholder: 'ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ',
  bookingEmailPlaceholder: 'ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä',
  bookingMessagePlaceholder: 'ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ≠ÿ¨ÿ≤ (ÿßŸÑÿ™ÿßÿ±ŸäÿÆÿå ŸÜŸàÿπ ÿßŸÑÿ¥ÿ≠ŸÜÿ©ÿå ÿßŸÑŸàÿ¨Ÿáÿ©)',
  bookingSubmitButton: 'ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ≠ÿ¨ÿ≤',
  testimonialsTitle: 'ÿ¢ÿ±ÿßÿ° ÿßŸÑÿπŸÖŸÑÿßÿ°',
  testimonial1Text: '"ŸàÿµŸÑÿ™ SwiftDelivery ÿ•ŸÖÿØÿßÿØÿßÿ™ŸÜÿß ÿßŸÑÿ∑ÿ®Ÿäÿ© ÿπÿ®ÿ± ÿßŸÑÿ≠ÿØŸàÿØ ŸÅŸä ŸàŸÇÿ™ ŸÇŸäÿßÿ≥Ÿä. ŸÜŸÜÿµÿ≠ ÿ®Ÿáÿß ÿ®ÿ¥ÿØÿ©!"',
  testimonial1Author: '- ÿØ. ÿ£ŸÖŸäŸÜÿ© ŸäŸàÿ≥ŸÅ',
  testimonial2Text: '"ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿ™ÿ®ÿπ ŸÑÿØŸäŸáŸÖ ŸÖŸÜ ÿßŸÑÿ∑ÿ±ÿßÿ≤ ÿßŸÑÿ£ŸàŸÑ. ŸÉŸÜÿ™ ÿ£ÿπÿ±ŸÅ ŸÖŸÉÿßŸÜ ÿßŸÑÿ¥ÿ≠ŸÜÿ© ŸÅŸä ŸÉŸÑ ŸàŸÇÿ™."',
  testimonial2Author: '- ÿ¨ŸäŸÖÿ≥ ÿ£ŸàŸÉŸàÿ±Ÿà',
  testimonial3Text: '"ŸÖÿ≠ÿ™ÿ±ŸÅŸàŸÜÿå ÿ≥ÿ±ŸäÿπŸàŸÜ ŸàŸÖŸàÿ´ŸàŸÇŸàŸÜ. SwiftDelivery ŸáŸà ÿ¥ÿ±ŸäŸÉŸÜÿß ÿßŸÑŸÑŸàÿ¨ÿ≥ÿ™Ÿä ÿßŸÑŸÖŸÅÿ∂ŸÑ."',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß',
  submitButton: 'ÿ•ÿ±ÿ≥ÿßŸÑ',
  loginTitle: 'ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ ÿßŸÑÿπŸÖŸÑÿßÿ°',
  loginButton: 'ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ',
  registerTitle: 'ÿ™ÿ≥ÿ¨ŸäŸÑ ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ',
  registerButton: 'ÿ™ÿ≥ÿ¨ŸäŸÑ',
  registerUsernamePlaceholder: 'ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ',
  registerPasswordPlaceholder: 'ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±',
  trackTitle: 'ÿ™ÿ™ÿ®ÿπ ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ ŸàÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ',
  trackButton: 'ÿ™ÿ™ÿ®ÿπ ÿßŸÑÿ¥ÿ≠ŸÜÿ©',
  faqTitle: 'ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ÿßŸÑŸÖÿ™ŸÉÿ±ÿ±ÿ©',
  faq1Q: 'ŸÖÿß ŸÖÿØŸâ ÿ≥ÿ±ÿπÿ© ÿßŸÑÿ¥ÿ≠ŸÜ ÿßŸÑÿ¨ŸàŸäÿü',
  faq1A: 'ÿ™ÿµŸÑ ŸÖÿπÿ∏ŸÖ ÿßŸÑÿ¥ÿ≠ŸÜÿßÿ™ ÿßŸÑÿ¨ŸàŸäÿ© ŸÅŸä ÿ∫ÿ∂ŸàŸÜ 24‚Äì48 ÿ≥ÿßÿπÿ©ÿå ÿ≠ÿ≥ÿ® ÿßŸÑŸàÿ¨Ÿáÿ© Ÿàÿ™ŸàŸÅÿ± ÿßŸÑÿ±ÿ≠ŸÑÿßÿ™ ŸàŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿ¨ŸÖÿßÿ±ŸÉ.',
  faq2Q: 'ŸáŸÑ ÿ™ÿ™ÿπÿßŸÖŸÑŸàŸÜ ŸÖÿπ ÿßŸÑÿ¨ŸÖÿßÿ±ŸÉ ÿßŸÑÿØŸàŸÑŸäÿ©ÿü',
  faq2A: 'ŸÜÿπŸÖÿå ŸÜŸÇÿØŸÖ ÿÆÿØŸÖÿßÿ™ ÿ™ÿÆŸÑŸäÿµ ÿ¨ŸÖÿ±ŸÉŸä ÿ¥ÿßŸÖŸÑÿ© ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑÿ¥ÿ≠ŸÜÿßÿ™ ÿßŸÑÿØŸàŸÑŸäÿ©.',
  faq3Q: 'ŸáŸÑ ŸäŸÖŸÉŸÜŸÜŸä ÿ™ÿ™ÿ®ÿπ ÿ¥ÿ≠ŸÜÿ™Ÿä ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÅÿπŸÑŸäÿü',
  faq3A: 'ŸÜÿπŸÖ. ŸäŸàŸÅÿ± ŸÜÿ∏ÿßŸÖŸÜÿß ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ŸÖÿ®ÿßÿ¥ÿ±ÿ© Ÿàÿ®ŸäÿßŸÜÿßÿ™ GPS Ÿàÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑÿ≠ÿßŸÑÿ© ÿ∑ŸàÿßŸÑ ÿßŸÑÿ±ÿ≠ŸÑÿ©.',
  faq4Q: 'ŸáŸÑ ÿ™ŸÇÿØŸÖŸàŸÜ ÿ¥ÿ≠ŸÜŸãÿß ÿ®ÿØÿ±ÿ¨ÿ© ÿ≠ÿ±ÿßÿ±ÿ© ŸÖÿ≠ŸÉŸàŸÖÿ©ÿü',
  faq4A: 'ŸÜÿπŸÖÿå ŸÜÿ≠ŸÜ ŸÖÿ™ÿÆÿµÿµŸàŸÜ ŸÅŸä ÿ≥ŸÑÿ≥ŸÑÿ© ÿßŸÑÿ™ÿ®ÿ±ŸäÿØ ŸÑŸÑÿ≥ŸÑÿπ ÿßŸÑÿ≠ÿ≥ÿßÿ≥ÿ©.',
  faq5Q: 'ŸáŸÑ ÿßŸÑÿ™ŸàÿµŸäŸÑ ŸÖÿ™ÿßÿ≠ ŸÅŸä ÿπÿ∑ŸÑÿ© ŸÜŸáÿßŸäÿ© ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπÿü',
  faq5A: 'ÿßŸÑÿ™ŸàÿµŸäŸÑ ŸÅŸä ÿπÿ∑ŸÑÿ© ŸÜŸáÿßŸäÿ© ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ ŸÖÿ™ÿßÿ≠ ŸÅŸä ŸÖŸÜÿßÿ∑ŸÇ ŸÖÿ≠ÿØÿØÿ© ŸàŸÑÿÆÿ∑ÿ∑ ÿÆÿØŸÖÿ© ŸÖÿ§ŸáŸÑÿ©.',
  liveChatTitle: 'ÿØÿ±ÿØÿ¥ÿ© ŸÖÿ®ÿßÿ¥ÿ±ÿ©',
  liveChatNamePlaceholder: 'ÿßÿ≥ŸÖŸÉ',
  liveChatEmailPlaceholder: 'ÿ®ÿ±ŸäÿØŸÉ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä',
  liveChatMessagePlaceholder: 'ÿ±ÿ≥ÿßŸÑÿ™ŸÉ',
  chatbotTitle: 'ÿ®Ÿàÿ™ SwiftDelivery',
  chatbotGreeting: 'ŸÖÿ±ÿ≠ÿ®Ÿãÿß! ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü',
  chatMessagePlaceholder: 'ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ...',
  sendButton: 'ÿ•ÿ±ÿ≥ÿßŸÑ',
  newsletterTitle: 'ÿßÿ®ŸÇ ÿπŸÑŸâ ÿßÿ∑ŸÑÿßÿπ',
  newsletterText: 'ÿßÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ŸÜÿ¥ÿ±ÿ™ŸÜÿß ÿßŸÑÿ•ÿÆÿ®ÿßÿ±Ÿäÿ© ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÜÿµÿßÿ¶ÿ≠ Ÿàÿπÿ±Ÿàÿ∂ ÿ≠ÿµÿ±Ÿäÿ©.',
  emailLabel: 'ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä',
  subscribeButton: 'ÿßÿ¥ÿ™ÿ±ŸÉ',
  followUs: 'ÿ™ÿßÿ®ÿπŸÜÿß',
  company: 'ÿßŸÑÿ¥ÿ±ŸÉÿ©',
  about: 'ŸÖŸÜ ŸÜÿ≠ŸÜ',
  helpCenter: 'ŸÖÿ±ŸÉÿ≤ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©',
  support: 'ÿßŸÑÿØÿπŸÖ',
  legal: 'ŸÇÿßŸÜŸàŸÜŸä',
  privacy: 'ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©',
  terms: 'ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿÆÿØŸÖÿ©',
  footerNote: '¬© 2025 SwiftDelivery. ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ©.'
};

// Global translation/apply helper (single canonical implementation)
function applyTranslations(lang) {
  const translations = window.translations || {};
  if (!lang || !translations[lang]) {
    console.warn('applyTranslations: missing language or translations for', lang);
    return 0;
  }
  const els = document.querySelectorAll('[data-i18n]');
  let updated = 0;
  els.forEach(el => {
    const key = el.getAttribute('data-i18n');
    const value = translations[lang] && translations[lang][key];
    if (!value) return;
    const tag = el.tagName.toLowerCase();
    if ((tag === 'input' || tag === 'textarea') && !el.hasAttribute('data-i18n-force-text')) {
      el.placeholder = value;
    } else {
      try { el.textContent = value; } catch (e) { el.innerText = value; }
    }
    updated++;
  });

  // Handle RTL for Arabic
  if (lang === 'ar') {
    document.documentElement.setAttribute('dir', 'rtl');
    document.body.classList.add('rtl');
  } else {
    document.documentElement.setAttribute('dir', 'ltr');
    document.body.classList.remove('rtl');
  }

  try { localStorage.setItem('sd-lang', lang); } catch (e) { /* ignore */ }
  console.log(`applyTranslations: lang=${lang}, updated=${updated}`);
  return updated;
}

// Global language switcher (safe, can be called from console)
window.changeLanguage = function(lang) {
  console.log('changeLanguage called with', lang);
  const selectTop = document.querySelector('#languageSelect');
  const selectSide = document.querySelector('#sidebarLanguageSelect');
  if (selectTop) selectTop.value = lang;
  if (selectSide) selectSide.value = lang;
  const updated = applyTranslations(lang);
  console.log(`changeLanguage: updated ${updated} elements for lang=${lang}`);
  return updated > 0;
};

// DOMContentLoaded wrapper
document.addEventListener('DOMContentLoaded', () => {
  const output = document.getElementById("output");

  // Theme toggle (persist)
  const themeToggle = $('#themeToggle');
  const applyTheme = (isDark) => {
    document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
    document.body.classList.add('theme-transition');
    setTimeout(() => document.body.classList.remove('theme-transition'), 600);
    try { localStorage.setItem('sd-theme', isDark ? 'dark' : 'light'); } catch (e) {}
  };
  const savedTheme = (() => { try { return localStorage.getItem('sd-theme'); } catch { return null; } })();
  if (savedTheme) {
    applyTheme(savedTheme === 'dark');
    if (themeToggle) themeToggle.checked = savedTheme === 'dark';
  }
  if (themeToggle) {
    themeToggle.addEventListener('change', () => applyTheme(themeToggle.checked));
  }

  // Translations: wire selects to the global applyTranslations / changeLanguage
  const langTop = $('#languageSelect');
  const langSide = $('#sidebarLanguageSelect');
  const savedLang = (() => { try { return localStorage.getItem('sd-lang'); } catch { return null; } })() || 'en';

  // Initialize language selectors and apply saved language
  if (langTop) langTop.value = savedLang;
  if (langSide) langSide.value = savedLang;
  requestAnimationFrame(() => applyTranslations(savedLang));

  // Wire up language change handlers
  const handleLanguageChange = (value, source) => {
    console.log(`Language changed to ${value} from ${source}`);
    // Update both selectors
    if (langTop && langTop !== source) langTop.value = value;
    if (langSide && langSide !== source) langSide.value = value;
    // Apply translations and persist
    applyTranslations(value);
    try { localStorage.setItem('sd-lang', value); } catch (e) { console.warn('Could not save language preference:', e); }
  };

  if (langTop) {
    langTop.addEventListener('change', (e) => handleLanguageChange(e.target.value, langTop));
  }
  if (langSide) {
    langSide.addEventListener('change', (e) => handleLanguageChange(e.target.value, langSide));
  }

  // Sidebar/menu
  const menuToggle = $('#menuToggle');
  const sideMenu = $('#sideMenu');
  const closeMenu = $('#closeMenu');
  const closeSide = () => sideMenu?.classList.remove('open');
  if (menuToggle && sideMenu) {
    menuToggle.addEventListener('click', (ev) => { ev.stopPropagation(); sideMenu.classList.toggle('open'); });
    menuToggle.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); sideMenu.classList.toggle('open'); } });
  }
  if (closeMenu) closeMenu.addEventListener('click', closeSide);
  document.addEventListener('click', (e) => {
    if (sideMenu && menuToggle && !sideMenu.contains(e.target) && !menuToggle.contains(e.target)) closeSide();
  });
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeSide(); if (typeof closeChatbotPanel === 'function') closeChatbotPanel(); } });

  // Smooth scroll for anchors
  $$('a[href^="#"]').forEach(a => {
    a.addEventListener('click', function (e) {
      const href = this.getAttribute('href');
      const target = document.querySelector(href);
      if (target) { e.preventDefault(); target.scrollIntoView({ behavior: 'smooth' }); }
    });
  });

  // Gallery auto-slide
  const gallerySlider = $('.gallery-slider');
  if (gallerySlider) {
    let autoTimer = null;
    const startAuto = () => {
      if (autoTimer) clearInterval(autoTimer);
      autoTimer = setInterval(() => {
        const maxScroll = gallerySlider.scrollWidth - gallerySlider.clientWidth;
        if (maxScroll <= 0) return;
        const next = Math.min(gallerySlider.scrollLeft + 310, maxScroll);
        if (gallerySlider.scrollLeft >= maxScroll - 2) gallerySlider.scrollTo({ left: 0, behavior: 'smooth' });
        else gallerySlider.scrollTo({ left: next, behavior: 'smooth' });
      }, 3500);
    };
    gallerySlider.addEventListener('mouseenter', () => clearInterval(autoTimer));
    gallerySlider.addEventListener('mouseleave', startAuto);
    startAuto();
  }

  // Chatbot
  const chatbot = $('#chatbot');
  const closeChatbotBtn = $('#closeChatbot');
  const sendChatBtn = $('#sendChat');
  const chatMessage = $('#chatMessage');
  const chatBody = $('#chatBody') || $('.chat-body');

  // Create chat toggle button if it doesn't exist
  if (!$('#chatToggleBtn')) {
    const chatToggleBtn = document.createElement('button');
    chatToggleBtn.id = 'chatToggleBtn';
    chatToggleBtn.textContent = 'üí¨ Chat';
    chatToggleBtn.style.position = 'fixed';
    chatToggleBtn.style.bottom = '32px';
    chatToggleBtn.style.right = '32px';
    chatToggleBtn.style.zIndex = '2100';
    chatToggleBtn.style.padding = '12px 24px';
    chatToggleBtn.style.borderRadius = '24px';
    chatToggleBtn.style.background = 'var(--primary-color)';
    chatToggleBtn.style.color = '#fff';
    chatToggleBtn.style.border = 'none';
    chatToggleBtn.style.cursor = 'pointer';
    chatToggleBtn.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
    document.body.appendChild(chatToggleBtn);

    // Initial state
    if (chatbot) {
      chatbot.style.display = 'none';
      chatbot.style.position = 'fixed';
      chatbot.style.bottom = '100px';
      chatbot.style.right = '32px';
      chatbot.style.zIndex = '2000';
      chatbot.style.maxHeight = '500px';
      chatbot.style.width = '300px';
      chatbot.style.transition = 'transform 0.3s ease, opacity 0.3s ease';
    }

    chatToggleBtn.addEventListener('click', () => {
      if (chatbot) {
        const isVisible = chatbot.style.display !== 'none';
        chatbot.style.display = isVisible ? 'none' : 'flex';
        if (!isVisible) {
          chatbot.style.transform = 'translateY(20px)';
          chatbot.style.opacity = '0';
          requestAnimationFrame(() => {
            chatbot.style.transform = 'translateY(0)';
            chatbot.style.opacity = '1';
          });
        }
      }
    });
  }

  // Close chat
  function closeChatbotPanel() { 
    if (chatbot) {
      chatbot.style.transform = 'translateY(20px)';
      chatbot.style.opacity = '0';
      setTimeout(() => chatbot.style.display = 'none', 300);
    }
  }
  if (closeChatbotBtn) closeChatbotBtn.addEventListener('click', closeChatbotPanel);

  // Send message to backend (Gemini integration)
  async function sendMessageToBackend() {
    if (!chatMessage || !chatBody) return;
    const text = chatMessage.value.trim();
    if (!text) return;
    
    // Add user message to chat UI
    const userEl = document.createElement('div');
    userEl.className = 'user-message';
    userEl.textContent = text;
    chatBody.appendChild(userEl);
    chatMessage.value = '';
    chatBody.scrollTop = chatBody.scrollHeight;

    try {
      // Get JWT token from localStorage (if user is logged in)
      const token = localStorage.getItem('token');
      const headers = { 'Content-Type': 'application/json' };
      if (token) {
        headers['Authorization'] = `Bearer ${token}`;
      }

      // Send to backend
      const response = await fetch('http://localhost:5000/api/chat', { // Gemini API URL
        method: 'POST',
        headers: headers,
        body: JSON.stringify({ message: text })
      });

      if (!response.ok) {
        throw new Error(`Backend error: ${response.status}`);
      }

      const data = await response.json();
      const reply = data.reply || 'Sorry, I could not process your message.';

      // Add bot response to chat UI
      const botEl = document.createElement('div');
      botEl.className = 'bot-message';
      botEl.textContent = reply;
      chatBody.appendChild(botEl);
      chatBody.scrollTop = chatBody.scrollHeight;
    } catch (error) {
      console.error('Chat error:', error);
      const errorEl = document.createElement('div');
      errorEl.className = 'bot-message';
      errorEl.textContent = 'Error: Could not reach the backend. Make sure it is running on port 5000.';
      chatBody.appendChild(errorEl);
      chatBody.scrollTop = chatBody.scrollHeight;
    }
  }

  if (sendChatBtn) sendChatBtn.addEventListener('click', (e) => { e.preventDefault(); sendMessageToBackend(); });
  if (chatMessage) chatMessage.addEventListener('keydown', (e) => { if (e.key === 'Enter') { e.preventDefault(); sendMessageToBackend(); } });

  // FAQ
  $$('.faq details').forEach(d => d.addEventListener('toggle', () => d.classList.toggle('open', d.open)));

  // Form validation
  document.querySelectorAll('form').forEach(form => {
    form.addEventListener('submit', (e) => {
      const required = Array.from(form.querySelectorAll('input[required], textarea[required]'));
      let ok = true;
      for (const el of required) {
        if (!el.value.trim()) { el.style.borderColor = 'red'; ok = false; }
        else el.style.borderColor = '';
      }
      if (!ok) { e.preventDefault(); const first = required.find(i => !i.value.trim()); if (first) first.focus(); }
    });
  });

  // Newsletter
  const newsletterForm = $('#newsletterForm');
  if (newsletterForm) newsletterForm.addEventListener('submit', (e) => { e.preventDefault(); const email = $('#newsletterEmail')?.value.trim(); if (email) { alert(`Thanks for subscribing: ${email}`); newsletterForm.reset(); } else alert('Please enter an email.'); });

  // Register
   // stop page reload
    const name = document.getElementById("registerUsername").value; // Updated ID
    const email = document.getElementById("registerEmail").value; // Updated ID
    const password = document.getElementById("registerPassword").value; // Updated ID

    const res = await fetch("http://localhost:5000/api/register", { // ‚úÖ correct URL
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ username: name, email, password }) // Updated to match expected API
    });

    const data = await res.json();
    output.textContent = JSON.stringify(data, null, 2);
  });

  // Handle Login
  document.getElementById("loginForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const email = document.getElementById("loginEmail").value; // Updated ID
    const password = document.getElementById("loginPassword").value; // Updated ID

    const res = await fetch("http://localhost:5000/api/login", { // ‚úÖ correct URL
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, password })
    });

    const data = await res.json();

    if (data.token) {
      localStorage.setItem("token", data.token); // save JWT
      output.textContent = "‚úÖ Logged in successfully!";
    } else {
      output.textContent = "‚ùå Login failed";
    }
  });

  // Use Token for Protected Routes
  async function fetchProfile() {
    const token = localStorage.getItem("token");
    if (!token) {
      output.textContent = "No token found. Please login first.";
      return;
    }

    const res = await fetch("http://localhost:5000/api/profile", {
      headers: { Authorization: `Bearer ${token}` }
    });

    const data = await res.json();
    output.textContent = JSON.stringify(data, null, 2);
  }

  // Accessibility
  window.addEventListener('keydown', (e) => { if (e.key === 'Tab') document.body.classList.add('user-is-tabbing'); });
  window.addEventListener('mousedown', () => document.body.classList.remove('user-is-tabbing'));

  // Reveal on scroll
  const revealElements = document.querySelectorAll('section, .card');
  revealElements.forEach(el => { el.style.transition = 'opacity 0.8s cubic-bezier(.77,0,.175,1), transform 0.7s cubic-bezier(.77,0,.175,1)'; el.style.opacity = 0; el.style.transform = 'translateY(40px)'; });
  const revealOnScroll = () => { revealElements.forEach(el => { const rect = el.getBoundingClientRect(); if (rect.top < window.innerHeight - 120) { el.style.opacity = 1; el.style.transform = 'translateY(0)'; } }); };
  window.addEventListener('scroll', revealOnScroll); revealOnScroll();

  // Initial fade-in
  requestAnimationFrame(() => { document.body.style.opacity = 1; });
});

```

```my-frontend\script.js
// Ensure translations object exists
window.translations = window.translations || {};

// Utilities
const $ = (sel, ctx = document) => ctx.querySelector(sel);
const $$ = (sel, ctx = document) => Array.from(ctx.querySelectorAll(sel));

// Translations object - should be present or loaded before applyTranslations uses it
window.translations = window.translations || {};

const commonKeys = {
  home: 'Home',
  gallery: 'Gallery',
  services: 'Services',
  track: 'Track',
  login: 'Login',
  register: 'Register',
  welcome: 'SwiftDelivery - Airfreight Logistics',
  intro: 'Global cargo solutions with speed, safety, and precision.',
  getStarted: 'Get Started',
  galleryTitle: 'Fleet & Facilities',
  servicesTitle: 'Our Services',
  service1: 'Airfreight Express',
  service1Desc: 'Priority cargo delivery with guaranteed timelines, ensuring your urgent shipments reach their destination quickly and safely.',
  service2: 'Global Warehousing',
  service2Desc: 'Secure storage solutions across strategically located international hubs, enabling efficient inventory management and quick distribution.',
  service3: 'Customs Clearance',
  service3Desc: 'Expert handling of documentation and border processing to expedite shipment clearance, minimizing delays and compliance risks.',
  service4: 'Temperature-Controlled Cargo',
  service4Desc: 'Specialized transport and storage for pharmaceuticals, perishables, and sensitive goods requiring strict temperature regulation.',
  service5: 'Dangerous Goods Transport',
  service5Desc: 'Certified and compliant handling of hazardous materials with stringent safety standards and legal requirements.',
  bookingTitle: 'Booking Dashboard',
  bookingNamePlaceholder: 'Full Name',
  bookingEmailPlaceholder: 'Email Address',
  bookingMessagePlaceholder: 'Booking Details (date, cargo type, destination)',
  bookingSubmitButton: 'Submit Booking',
  testimonialsTitle: 'Customer Testimonials',
  testimonial1Text: 'SwiftDelivery got our medical supplies across borders in record time. Highly recommended!',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: 'Their tracking system is top-notch. I knew exactly where my shipment was at all times.',
  testimonial2Author: '- James Okoro',
  testimonial3Text: 'Professional, fast, and reliable. SwiftDelivery is our go-to logistics partner.',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'Contact Us',
  submitButton: 'Submit Form',
  loginTitle: 'Client Login',
  loginButton: 'Login',
  registerTitle: 'New Client Registration',
  registerButton: 'Register',
  registerUsernamePlaceholder: 'Username',
  registerPasswordPlaceholder: 'Password',
  trackTitle: 'Pickup & Delivery Tracking',
  trackButton: 'Track Shipment',
  faqTitle: 'Frequently Asked Questions',
  faq1Q: 'How fast is airfreight delivery?',
  faq1A: 'Most airfreight shipments arrive within 24-48 hours, depending on the destination, flight availability, and customs processing. We prioritize speed and reliability, ensuring your cargo reaches its destination as quickly as possible. Expedited options are available for urgent shipments.',
  faq2Q: 'Do you handle international customs?',
  faq2A: 'Yes, we provide comprehensive customs clearance services for all international shipments. Our experienced team navigates complex regulations and documentation to ensure smooth border transitions, minimizing delays and avoiding compliance issues.',
  faq3Q: 'Can I track my cargo in real time?',
  faq3A: 'Absolutely. Our advanced tracking system offers live updates, GPS location data, and status notifications throughout the journey. You\'ll have full visibility from pickup to final delivery, accessible via our online portal or mobile app.',
  faq4Q: 'Do you offer temperature-controlled shipping?',
  faq4A: 'Yes, we specialize in cold-chain logistics tailored for sensitive goods such as pharmaceuticals, vaccines, fresh produce, and other perishables. Our temperature-controlled containers and monitoring systems maintain optimal conditions throughout transit.',
  faq5Q: 'Is weekend delivery available?',
  faq5A: 'Weekend delivery is available in select regions and for eligible service tiers. To confirm availability for your shipment, please contact our support team. We strive to accommodate your schedule with flexible delivery options.',
  liveChatTitle: 'Live Chat Support',
  liveChatNamePlaceholder: 'Your Name',
  liveChatEmailPlaceholder: 'Your Email',
  liveChatMessagePlaceholder: 'Your Message',
  chatbotTitle: 'SwiftDelivery Bot',
  chatbotGreeting: 'Hi there! How can I help you today?',
  chatMessagePlaceholder: 'Type your message...',
  sendButton: 'Send',
  newsletterTitle: 'Stay Updated',
  newsletterText: 'Subscribe to our newsletter for airfreight tips, updates, and exclusive offers.',
  emailLabel: 'Email',
  subscribeButton: 'Subscribe',
  followUs: 'Follow Us',
  company: 'Company',
  about: 'About Us',
  helpCenter: 'Help Center',
  support: 'Support',
  legal: 'Legal',
  privacy: 'Privacy Policy',
  terms: 'Terms of Service',
  footerNote: '¬© 2025 SwiftDelivery. All rights reserved.'
};

// English base
window.translations.en = window.translations.en || {};
Object.assign(window.translations.en, commonKeys);

// French
window.translations.fr = window.translations.fr || {};
Object.assign(window.translations.fr, {
  home: 'Accueil',
  gallery: 'Galerie',
  services: 'Services',
  track: 'Suivi',
  login: 'Connexion',
  register: 'S\'inscrire',
  welcome: 'SwiftDelivery - Fret a√©rien',
  intro: 'Solutions de fret mondiales rapides, s√ªres et pr√©cises.',
  getStarted: 'Commencer',
  galleryTitle: 'Flotte & Installations',
  servicesTitle: 'Nos Services',
  service1: 'Express a√©rien',
  service1Desc: 'Livraison prioritaire de marchandises avec d√©lais garantis, pour que vos envois urgents arrivent rapidement et en toute s√©curit√©.',
  service2: 'Entrep√¥ts mondiaux',
  service2Desc: 'Solutions de stockage s√©curis√©es dans des hubs internationaux strat√©giques, permettant une gestion efficace des stocks et une distribution rapide.',
  service3: 'D√©douanement',
  service3Desc: 'Gestion experte des documents et du traitement frontalier pour acc√©l√©rer le d√©douanement des envois, minimisant les retards et les risques de non-conformit√©.',
  service4: 'Transport sous temp√©rature contr√¥l√©e',
  service4Desc: 'Transport et stockage sp√©cialis√©s pour produits pharmaceutiques, p√©rissables et marchandises sensibles n√©cessitant une r√©gulation stricte de la temp√©rature.',
  service5: 'Transport de mati√®res dangereuses',
  service5Desc: 'Manutention certifi√©e et conforme des mati√®res dangereuses avec des normes de s√©curit√© strictes et le respect des exigences l√©gales.',
  bookingTitle: 'Tableau de r√©servation',
  bookingNamePlaceholder: 'Nom complet',
  bookingEmailPlaceholder: 'Adresse e-mail',
  bookingMessagePlaceholder: 'D√©tails de la r√©servation (date, type de cargaison, destination)',
  bookingSubmitButton: 'Envoyer la r√©servation',
  testimonialsTitle: 'T√©moignages clients',
  testimonial1Text: 'SwiftDelivery a achemin√© nos fournitures m√©dicales travers les fronti√®res en un temps record. Fortement recommand√© !',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: 'Leur syst√®me de suivi est au top. Je savais exactement o√π se trouvait mon envoi √† tout moment.',
  testimonial2Author: '- James Okoro',
  testimonial3Text: 'Professionnel, rapide et fiable. SwiftDelivery est notre partenaire logistique de r√©f√©rence.',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'Contactez-nous',
  submitButton: 'Envoyer',
  loginTitle: 'Connexion client',
  loginButton: 'Se connecter',
  registerTitle: 'Nouvel enregistrement client',
  registerButton: 'S\'inscrire',
  registerUsernamePlaceholder: 'Nom d\'utilisateur',
  registerPasswordPlaceholder: 'Mot de passe',
  trackTitle: 'Suivi de collecte et de livraison',
  trackButton: 'Suivre l\'envoi',
  faqTitle: 'Foire aux questions',
  faq1Q: '√Ä quelle vitesse la livraison a√©rienne est-elle effectu√©e ?',
  faq1A: 'La plupart des exp√©ditions a√©riennes arrivent en 24-48 heures, selon la destination, la disponibilit√© des vols et le traitement douanier. Nous privil√©gions la rapidit√© et la fiabilit√©.',
  faq2Q: 'G√©rez-vous les douanes internationales ?',
  faq2A: 'Oui, nous fournissons des services complets de d√©douanement pour toutes les exp√©ditions internationales.',
  faq3Q: 'Puis-je suivre ma cargaison en temps r√©el ?',
  faq3A: 'Absolument. Notre syst√®me de suivi fournit des mises √† jour en direct, des donn√©es GPS et des notifications de statut tout au long du trajet.',
  faq4Q: 'Offrez-vous un transport sous temp√©rature contr√¥l√©e ?',
  faq4A: 'Oui, nous sommes sp√©cialis√©s dans la cha√Æne du froid pour les produits sensibles.',
  faq5Q: 'La livraison le week-end est-elle disponible ?',
  faq5A: 'La livraison le week-end est disponible dans certaines r√©gions et pour certains niveaux de service.',
  liveChatTitle: 'Assistance en direct',
  liveChatNamePlaceholder: 'Votre nom',
  liveChatEmailPlaceholder: 'Votre e-mail',
  liveChatMessagePlaceholder: 'Votre message',
  chatbotTitle: 'Bot SwiftDelivery',
  chatbotGreeting: 'Bonjour ! Comment puis-je vous aider aujourd\'hui ?',
  chatMessagePlaceholder: 'Tapez votre message...',
  sendButton: 'Envoyer',
  newsletterTitle: 'Restez inform√©',
  newsletterText: 'Abonnez-vous √† notre newsletter pour des conseils et des offres exclusives.',
  emailLabel: 'E-mail',
  subscribeButton: 'S\'abonner',
  followUs: 'Suivez-nous',
  company: 'Entreprise',
  about: '√Ä propos',
  helpCenter: 'Centre d\'aide',
  support: 'Support',
  legal: 'Mentions l√©gales',
  privacy: 'Politique de confidentialit√©',
  terms: 'Conditions d\'utilisation',
  footerNote: '¬© 2025 SwiftDelivery. Tous droits r√©serv√©s.'
});

// Spanish
window.translations.es = window.translations.es || {};
Object.assign(window.translations.es, {
  home: 'Inicio',
  gallery: 'Galer√≠a',
  services: 'Servicios',
  track: 'Seguimiento',
  login: 'Iniciar sesi√≥n',
  register: 'Registrarse',
  welcome: 'SwiftDelivery - Transporte A√©reo',
  intro: 'Soluciones de carga globales con rapidez, seguridad y precisi√≥n.',
  getStarted: 'Comenzar',
  galleryTitle: 'Flota y Instalaciones',
  servicesTitle: 'Nuestros Servicios',
  service1: 'Transporte a√©reo expr√©s',
  service1Desc: 'Entrega prioritaria de carga con plazos garantizados para que sus env√≠os urgentes lleguen de forma r√°pida y segura.',
  service2: 'Almacenamiento global',
  service2Desc: 'Soluciones de almacenamiento seguras en hubs internacionales estrat√©gicos que permiten una gesti√≥n eficiente del inventario y una distribuci√≥n r√°pida.',
  service3: 'Despacho de aduanas',
  service3Desc: 'Gesti√≥n experta de documentaci√≥n y procesos fronterizos para agilizar el despacho de aduanas, minimizando retrasos y riesgos de incumplimiento.',
  service4: 'Carga con control de temperatura',
  service4Desc: 'Transporte y almacenamiento especializados para productos farmac√©uticos, perecederos y mercanc√≠as sensibles que requieren control de temperatura.',
  service5: 'Transporte de mercanc√≠as peligrosas',
  service5Desc: 'Manipulaci√≥n certificada y conforme de materiales peligrosos con normas de seguridad estrictas y requisitos legales.',
  bookingTitle: 'Panel de reservas',
  bookingNamePlaceholder: 'Nombre completo',
  bookingEmailPlaceholder: 'Direcci√≥n de correo',
  bookingMessagePlaceholder: 'Detalles de la reserva (fecha, tipo de carga, destino)',
  bookingSubmitButton: 'Enviar reserva',
  testimonialsTitle: 'Testimonios de clientes',
  testimonial1Text: 'SwiftDelivery transport√≥ nuestros suministros m√©dicos a trav√©s de fronteras en tiempo r√©cord. ¬°Muy recomendable!',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: 'Su sistema de seguimiento es excepcional. Sab√≠a exactamente d√≥nde estaba mi env√≠o en todo momento.',
  testimonial2Author: '- James Okoro',
  testimonial3Text: 'Profesional, r√°pido y fiable. SwiftDelivery es nuestro socio log√≠stico preferido.',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'Cont√°ctenos',
  submitButton: 'Enviar',
  loginTitle: 'Inicio de sesi√≥n',
  loginButton: 'Entrar',
  registerTitle: 'Registro de nuevo cliente',
  registerButton: 'Registrarse',
  registerUsernamePlaceholder: 'Nombre de usuario',
  registerPasswordPlaceholder: 'Contrase√±a',
  trackTitle: 'Seguimiento de recogida y entrega',
  trackButton: 'Rastrear env√≠o',
  faqTitle: 'Preguntas frecuentes',
  faq1Q: '¬øQu√© tan r√°pida es la entrega a√©rea?',
  faq1A: 'La mayor√≠a de los env√≠os a√©reos llegan en 24-48 horas, dependiendo del destino, la disponibilidad de vuelos y el procesamiento aduanero.',
  faq2Q: '¬øManejan aduanas internacionales?',
  faq2A: 'S√≠, ofrecemos servicios integrales de despacho aduanero para todos los env√≠os internacionales.',
  faq3Q: '¬øPuedo rastrear mi carga en tiempo real?',
  faq3A: 'S√≠. Nuestro sistema ofrece actualizaciones en vivo, datos GPS y notificaciones de estado durante todo el trayecto.',
  faq4Q: '¬øOfrecen env√≠o con control de temperatura?',
  faq4A: 'S√≠, nos especializamos en la cadena del fr√≠o para mercanc√≠as sensibles.',
  faq5Q: '¬øEst√° disponible la entrega los fines de semana?',
  faq5A: 'La entrega los fines de semana est√° disponible en algunas regiones y para ciertos niveles de servicio.',
  liveChatTitle: 'Chat en vivo',
  liveChatNamePlaceholder: 'Tu nombre',
  liveChatEmailPlaceholder: 'Tu correo',
  liveChatMessagePlaceholder: 'Tu mensaje',
  chatbotTitle: 'Bot SwiftDelivery',
  chatbotGreeting: '¬°Hola! ¬øEn qu√© puedo ayudarte hoy?',
  chatMessagePlaceholder: 'Escribe tu mensaje...',
  sendButton: 'Enviar',
  newsletterTitle: 'Mantente al d√≠a',
  newsletterText: 'Suscr√≠bete a nuestro bolet√≠n para recibir consejos y ofertas.',
  emailLabel: 'Correo electr√≥nico',
  subscribeButton: 'Suscribirse',
  followUs: 'S√≠guenos',
  company: 'Empresa',
  about: 'Sobre nosotros',
  helpCenter: 'Centro de ayuda',
  support: 'Soporte',
  legal: 'Legal',
  privacy: 'Pol√≠tica de privacidad',
  terms: 'T√©rminos de servicio',
  footerNote: '¬© 2025 SwiftDelivery. Todos los derechos reservados.'
});

// German
window.translations.de = window.translations.de || {};
Object.assign(window.translations.de, {
  home: 'Startseite',
  gallery: 'Galerie',
  services: 'Dienstleistungen',
  track: 'Verfolgung',
  login: 'Anmelden',
  register: 'Registrieren',
  welcome: 'SwiftDelivery - Luftfracht',
  intro: 'Globale Frachtl√∂sungen mit Geschwindigkeit, Sicherheit und Pr√§zision.',
  getStarted: 'Loslegen',
  galleryTitle: 'Flotte & Einrichtungen',
  servicesTitle: 'Unsere Dienstleistungen',
  service1: 'Express Luftfracht',
  service1Desc: 'Priorisierte Frachtsendung mit garantierten Zeitpl√§nen, damit Ihre dringenden Sendungen schnell und sicher ankommen.',
  service2: 'Globales Lagerwesen',
  service2Desc: 'Sichere Lagerl√∂sungen an strategisch gelegenen internationalen Hubs f√ºr effizientes Inventarmanagement und schnelle Distribution.',
  service3: 'Zollabfertigung',
  service3Desc: 'Expertenabwicklung von Unterlagen und Grenzprozessen zur Beschleunigung der Sendungsfreigabe und Minimierung von Verz√∂gerungen.',
  service4: 'Temperaturgef√ºhrte Fracht',
  service4Desc: 'Spezialisierter Transport und Lagerung f√ºr Pharmazeutika, verderbliche Waren und empfindliche G√ºter mit strenger Temperaturkontrolle.',
  service5: 'Transport gef√§hrlicher G√ºter',
  service5Desc: 'Zertifizierte und konforme Handhabung gef√§hrlicher Stoffe mit strengen Sicherheitsstandards.',
  bookingTitle: 'Buchungs√ºbersicht',
  bookingNamePlaceholder: 'Vollst√§ndiger Name',
  bookingEmailPlaceholder: 'E-Mail-Adresse',
  bookingMessagePlaceholder: 'Buchungsdetails (Datum, Frachtart, Ziel)',
  bookingSubmitButton: 'Buchung absenden',
  testimonialsTitle: 'Kundenbewertungen',
  testimonial1Text: 'SwiftDelivery hat unsere medizinischen Lieferungen rekordverd√§chtig √ºber Grenzen transportiert. Sehr zu empfehlen!',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: 'Ihr Tracking-System ist erstklassig. Ich wusste jederzeit, wo sich meine Sendung befand.',
  testimonial2Author: '- James Okoro',
  testimonial3Text: 'Professionell, schnell und zuverl√§ssig. SwiftDelivery ist unser Logistikpartner der Wahl.',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'Kontaktieren Sie uns',
  submitButton: 'Absenden',
  loginTitle: 'Kundenlogin',
  loginButton: 'Anmelden',
  registerTitle: 'Neue Kundenregistrierung',
  registerButton: 'Registrieren',
  registerUsernamePlaceholder: 'Benutzername',
  registerPasswordPlaceholder: 'Passwort',
  trackTitle: 'Abhol- & Lieferverfolgung',
  trackButton: 'Sendung verfolgen',
  faqTitle: 'H√§ufig gestellte Fragen',
  faq1Q: 'Wie schnell ist die Luftfrachtlieferung?',
  faq1A: 'Die meisten Luftfrachtsendungen erreichen das Ziel innerhalb von 24-48 Stunden, abh√§ngig von Zielort, Flugverf√ºgbarkeit und Zollabfertigung.',
  faq2Q: 'K√ºmmern Sie sich um internationale Zollabfertigung?',
  faq2A: 'Ja, wir bieten umfassende Zollabfertigungsdienste f√ºr alle internationalen Sendungen.',
  faq3Q: 'Kann ich meine Fracht in Echtzeit verfolgen?',
  faq3A: 'Ja. Unser System bietet Live-Updates, GPS-Daten und Statusbenachrichtigungen w√§hrend der gesamten Reise.',
  faq4Q: 'Bieten Sie temperaturkontrollierten Versand an?',
  faq4A: 'Ja, wir sind auf die K√ºhlkette f√ºr empfindliche Waren spezialisiert.',
  faq5Q: 'Ist Wochenendzustellung verf√ºgbar?',
  faq5A: 'Wochenendzustellung ist in ausgew√§hlten Regionen und f√ºr bestimmte Servicelevel verf√ºgbar.',
  liveChatTitle: 'Live-Chat-Support',
  liveChatNamePlaceholder: 'Ihr Name',
  liveChatEmailPlaceholder: 'Ihre E-Mail',
  liveChatMessagePlaceholder: 'Ihre Nachricht',
  chatbotTitle: 'SwiftDelivery Bot',
  chatbotGreeting: 'Hallo! Wie kann ich Ihnen heute helfen?',
  chatMessagePlaceholder: 'Geben Sie Ihre Nachricht ein...',
  sendButton: 'Senden',
  newsletterTitle: 'Bleiben Sie auf dem Laufenden',
  newsletterText: 'Abonnieren Sie unseren Newsletter f√ºr Tipps und exklusive Angebote.',
  emailLabel: 'E-Mail',
  subscribeButton: 'Abonnieren',
  followUs: 'Folgen Sie uns',
  company: 'Unternehmen',
  about: '√úber uns',
  helpCenter: 'Hilfezentrum',
  support: 'Support',
  legal: 'Rechtliches',
  privacy: 'Datenschutz',
  terms: 'Nutzungsbedingungen',
  footerNote: '¬© 2025 SwiftDelivery. Alle Rechte vorbehalten.'
});

// Chinese Simplified
window.translations.zh = window.translations.zh || {};
Object.assign(window.translations.zh, {
  home: 'È¶ñÈ°µ',
  gallery: 'ÂõæÂ∫ì',
  services: 'ÊúçÂä°',
  track: 'Ë∑üË∏™',
  login: 'ÁôªÂΩï',
  register: 'Ê≥®ÂÜå',
  welcome: 'SwiftDelivery - Á©∫ËøêÁâ©ÊµÅ',
  intro: 'ÂÖ®ÁêÉË¥ßÁâ©Ëß£ÂÜ≥ÊñπÊ°àÔºåÈÄüÂ∫¶„ÄÅÂÆâÂÖ®„ÄÅÁ≤æÁ°Æ„ÄÇ',
  getStarted: 'ÂºÄÂßã',
  galleryTitle: 'ËΩ¶Èòü‰∏éËÆæÊñΩ',
  servicesTitle: 'Êàë‰ª¨ÁöÑÊúçÂä°',
  service1: 'Á©∫ËøêÂø´ÈÄí',
  service1Desc: '‰ºòÂÖàË¥ßÁâ©‰∫§‰ªòÔºå‰øùËØÅÊó∂Èó¥ÔºåÁ°Æ‰øùÊÇ®ÁöÑÁ¥ßÊÄ•Ë¥ßÁâ©Âø´ÈÄüÂÆâÂÖ®Âà∞ËææÁõÆÁöÑÂú∞„ÄÇ',
  service2: 'ÂÖ®ÁêÉ‰ªìÂÇ®',
  service2Desc: 'ÊàòÁï•ÊÄßÂõΩÈôÖÊû¢Á∫ΩÁöÑÂÆâÂÖ®Â≠òÂÇ®Ëß£ÂÜ≥ÊñπÊ°àÔºåÂÆûÁé∞È´òÊïàÂ∫ìÂ≠òÁÆ°ÁêÜÂíåÂø´ÈÄüÂàÜÂèë„ÄÇ',
  service3: 'Êµ∑ÂÖ≥Ê∏ÖÂÖ≥',
  service3Desc: '‰∏ìÂÆ∂Â§ÑÁêÜÊñá‰ª∂ÂíåËæπÂ¢ÉÂ§ÑÁêÜÔºå‰ª•Âä†ÈÄüË¥ßÁâ©Ê∏ÖÂÖ≥ÔºåÊúÄÂ∞èÂåñÂª∂ËØØÂíåÂêàËßÑÈ£éÈô©„ÄÇ',
  service4: 'Ê∏©ÊéßË¥ßÁâ©',
  service4Desc: '‰∏ì‰∏∫Âà∂ËçØ„ÄÅÊòìËÖêÂíåÊïèÊÑüË¥ßÁâ©ËÆæËÆ°ÁöÑËøêËæìÂíåÂ≠òÂÇ®Ôºå‰∏•Ê†ºÊ∏©Â∫¶ÊéßÂà∂„ÄÇ',
  service5: 'Âç±Èô©ÂìÅËøêËæì',
  service5Desc: 'ËÆ§ËØÅÂíåÂêàËßÑÂ§ÑÁêÜÂç±Èô©ÊùêÊñôÔºå‰∏•Ê†ºÂÆâÂÖ®Ê†áÂáÜÂíåÊ≥ïÂæãË¶ÅÊ±Ç„ÄÇ',
  bookingTitle: 'È¢ÑËÆ¢‰ª™Ë°®Êùø',
  bookingNamePlaceholder: 'ÂÖ®Âêç',
  bookingEmailPlaceholder: 'ÁîµÂ≠êÈÇÆ‰ª∂Âú∞ÂùÄ',
  bookingMessagePlaceholder: 'È¢ÑËÆ¢ËØ¶ÊÉÖÔºàÊó•Êúü„ÄÅË¥ßÁâ©Á±ªÂûã„ÄÅÁõÆÁöÑÂú∞Ôºâ',
  bookingSubmitButton: 'Êèê‰∫§È¢ÑËÆ¢',
  testimonialsTitle: 'ÂÆ¢Êà∑ËØÑ‰ª∑',
  testimonial1Text: 'SwiftDelivery Âú®ÂàõÁ∫™ÂΩïÁöÑÊó∂Èó¥ÂÜÖÂ∞ÜÊàë‰ª¨ÁöÑÂåªÁñóÁî®ÂìÅËøêËøáËæπÂ¢É„ÄÇÂº∫ÁÉàÊé®ËçêÔºÅ',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: '‰ªñ‰ª¨ÁöÑË∑üË∏™Á≥ªÁªü‰∏ÄÊµÅ„ÄÇÊàëÈöèÊó∂Áü•ÈÅìÊàëÁöÑË¥ßÁâ©Âú®Âì™Èáå„ÄÇ',
  testimonial2Author: '- James Okoro',
  testimonial3Text: '‰∏ì‰∏ö„ÄÅÂø´ÈÄü„ÄÅÂèØÈù†„ÄÇSwiftDelivery ÊòØÊàë‰ª¨ÁöÑÈ¶ñÈÄâÁâ©ÊµÅ‰ºô‰º¥„ÄÇ',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'ËÅîÁ≥ªÊàë‰ª¨',
  submitButton: 'Êèê‰∫§',
  loginTitle: 'ÂÆ¢Êà∑ÁôªÂΩï',
  loginButton: 'ÁôªÂΩï',
  registerTitle: 'Êñ∞ÂÆ¢Êà∑Ê≥®ÂÜå',
  registerButton: 'Ê≥®ÂÜå',
  registerUsernamePlaceholder: 'Áî®Êà∑Âêç',
  registerPasswordPlaceholder: 'ÂØÜÁ†Å',
  trackTitle: 'Âèñ‰ª∂‰∏é‰∫§‰ªòË∑üË∏™',
  trackButton: 'Ë∑üË∏™Ë¥ßÁâ©',
  faqTitle: 'Â∏∏ËßÅÈóÆÈ¢ò',
  faq1Q: 'Á©∫Ëøê‰∫§‰ªòÊúâÂ§öÂø´Ôºü',
  faq1A: 'Â§ßÂ§öÊï∞Á©∫ËøêË¥ßÁâ©Âú®24-48Â∞èÊó∂ÂÜÖÂà∞ËææÔºåÂèñÂÜ≥‰∫éÁõÆÁöÑÂú∞„ÄÅËà™Áè≠ÂèØÁî®ÊÄßÂíåÊµ∑ÂÖ≥Â§ÑÁêÜ„ÄÇ',
  faq2Q: '‰Ω†‰ª¨Â§ÑÁêÜÂõΩÈôÖÊµ∑ÂÖ≥ÂêóÔºü',
  faq2A: 'ÊòØÁöÑÔºåÊàë‰ª¨‰∏∫ÊâÄÊúâÂõΩÈôÖË¥ßÁâ©Êèê‰æõÂÖ®Èù¢Êµ∑ÂÖ≥Ê∏ÖÂÖ≥ÊúçÂä°„ÄÇ',
  faq3Q: 'ÊàëÂèØ‰ª•ÂÆûÊó∂Ë∑üË∏™ÊàëÁöÑË¥ßÁâ©ÂêóÔºü',
  faq3A: 'ÂΩìÁÑ∂„ÄÇÊàë‰ª¨ÁöÑÈ´òÁ∫ßË∑üË∏™Á≥ªÁªüÊèê‰æõÂÆûÊó∂Êõ¥Êñ∞„ÄÅGPS‰ΩçÁΩÆÊï∞ÊçÆÂíåÁä∂ÊÄÅÈÄöÁü•„ÄÇ',
  faq4Q: '‰Ω†‰ª¨Êèê‰æõÊ∏©ÊéßËøêËæìÂêóÔºü',
  faq4A: 'ÊòØÁöÑÔºåÊàë‰ª¨‰∏ìÊ≥®‰∫éÊïèÊÑüË¥ßÁâ©ÁöÑÂÜ∑ÈìæÁâ©ÊµÅ„ÄÇ',
  faq5Q: 'Âë®Êú´‰∫§‰ªòÂèØÁî®ÂêóÔºü',
  faq5A: 'Âë®Êú´‰∫§‰ªòÂú®ÈÄâÂÆöÂú∞Âå∫ÂíåÊúçÂä°Á∫ßÂà´ÂèØÁî®„ÄÇ',
  liveChatTitle: 'ÂÆûÊó∂ËÅäÂ§©ÊîØÊåÅ',
  liveChatNamePlaceholder: 'ÊÇ®ÁöÑÂßìÂêç',
  liveChatEmailPlaceholder: 'ÊÇ®ÁöÑÁîµÂ≠êÈÇÆ‰ª∂',
  liveChatMessagePlaceholder: 'ÊÇ®ÁöÑÊ∂àÊÅØ',
  chatbotTitle: 'SwiftDelivery Êú∫Âô®‰∫∫',
  chatbotGreeting: '‰Ω†Â•ΩÔºÅ‰ªäÂ§©ÊàëËÉΩÂ∏Æ‰Ω†‰ªÄ‰πàÔºü',
  chatMessagePlaceholder: 'ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...',
  sendButton: 'ÂèëÈÄÅ',
  newsletterTitle: '‰øùÊåÅÊõ¥Êñ∞',
  newsletterText: 'ËÆ¢ÈòÖÊàë‰ª¨ÁöÑÊñ∞ÈóªÈÄöËÆØÔºåËé∑ÂèñÁ©∫ËøêÊèêÁ§∫„ÄÅÊõ¥Êñ∞ÂíåÁã¨ÂÆ∂‰ºòÊÉ†„ÄÇ',
  emailLabel: 'ÁîµÂ≠êÈÇÆ‰ª∂',
  subscribeButton: 'ËÆ¢ÈòÖ',
  followUs: 'ÂÖ≥Ê≥®Êàë‰ª¨',
  company: 'ÂÖ¨Âè∏',
  about: 'ÂÖ≥‰∫éÊàë‰ª¨',
  helpCenter: 'Â∏ÆÂä©‰∏≠ÂøÉ',
  support: 'ÊîØÊåÅ',
  legal: 'Ê≥ïÂæã',
  privacy: 'ÈöêÁßÅÊîøÁ≠ñ',
  terms: 'ÊúçÂä°Êù°Ê¨æ',
  footerNote: '¬© 2025 SwiftDelivery„ÄÇ‰øùÁïôÊâÄÊúâÊùÉÂà©„ÄÇ'
});

// Arabic (right-to-left)
window.translations.ar = window.translations.ar || {};
Object.assign(window.translations.ar, {
  home: 'ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©',
  gallery: 'ŸÖÿπÿ±ÿ∂',
  services: 'ÿßŸÑÿÆÿØŸÖÿßÿ™',
  track: 'ÿ™ÿ™ÿ®ÿπ',
  login: 'ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ',
  register: 'ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ',
  welcome: 'SwiftDelivery - ÿßŸÑÿ¥ÿ≠ŸÜ ÿßŸÑÿ¨ŸàŸä',
  intro: 'ÿ≠ŸÑŸàŸÑ ÿ¥ÿ≠ŸÜ ÿπÿßŸÑŸÖŸäÿ© ÿ®ÿßŸÑÿ≥ÿ±ÿπÿ© ŸàÿßŸÑÿ£ŸÖÿßŸÜ ŸàÿßŸÑÿØŸÇÿ©.',
  getStarted: 'ÿßÿ®ÿØÿ£',
  galleryTitle: 'ÿßŸÑÿ£ÿ≥ÿ∑ŸàŸÑ ŸàÿßŸÑŸÖÿ±ÿßŸÅŸÇ',
  servicesTitle: 'ÿÆÿØŸÖÿßÿ™ŸÜÿß',
  service1: 'ÿßŸÑÿ¥ÿ≠ŸÜ ÿßŸÑÿ¨ŸàŸä ÿßŸÑÿ≥ÿ±Ÿäÿπ',
  service1Desc: 'ÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑÿ£ŸàŸÑŸàŸäÿ© ŸÑŸÑÿ®ÿ∂ÿßÿ¶ÿπ ŸÖÿπ ÿ∂ŸÖÿßŸÜ ÿßŸÑÿ¨ÿØŸàŸÑ ÿßŸÑÿ≤ŸÖŸÜŸäÿå ŸÖŸÖÿß Ÿäÿ∂ŸÖŸÜ ŸàÿµŸàŸÑ ÿ¥ÿ≠ŸÜÿßÿ™ŸÉ ÿßŸÑÿπÿßÿ¨ŸÑÿ© ÿ®ÿ≥ÿ±ÿπÿ© Ÿàÿ£ŸÖÿßŸÜ.',
  service2: 'ÿßŸÑŸÖÿ≥ÿ™ŸàÿØÿπÿßÿ™ ÿßŸÑÿπÿßŸÑŸÖŸäÿ©',
  service2Desc: 'ÿ≠ŸÑŸàŸÑ ÿ™ÿÆÿ≤ŸäŸÜ ÿ¢ŸÖŸÜÿ© ŸÅŸä ŸÖÿ±ÿßŸÉÿ≤ ÿØŸàŸÑŸäÿ© ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿ©ÿå ŸÖŸÖÿß Ÿäÿ™Ÿäÿ≠ ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ ÿßŸÑŸÅÿπÿßŸÑÿ© Ÿàÿ™Ÿàÿ≤Ÿäÿπ ÿ≥ÿ±Ÿäÿπ.',
  service3: 'ÿ™ÿÆŸÑŸäÿµ ÿßŸÑÿ¨ŸÖÿßÿ±ŸÉ',
  service3Desc: 'ŸÖÿπÿßŸÑÿ¨ÿ© ÿÆÿ®Ÿäÿ±ÿ© ŸÑŸÑŸàÿ´ÿßÿ¶ŸÇ ŸàÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿ≠ÿØŸàÿØŸäÿ© ŸÑÿ™ÿ≥ÿ±Ÿäÿπ ÿ™ÿÆŸÑŸäÿµ ÿßŸÑÿ¥ÿ≠ŸÜÿ©ÿå ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ™ÿ£ÿÆŸäÿ±ÿßÿ™ ŸàŸÖÿÆÿßÿ∑ÿ± ÿßŸÑÿßŸÖÿ™ÿ´ÿßŸÑ.',
  service4: 'ÿßŸÑÿ®ÿ∂ÿßÿ¶ÿπ ÿ∞ÿßÿ™ ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©',
  service4Desc: 'ŸÜŸÇŸÑ Ÿàÿ™ÿÆÿ≤ŸäŸÜ ŸÖÿ™ÿÆÿµÿµ ŸÑŸÑÿ£ÿØŸàŸäÿ© ŸàÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑÿ≥ÿßÿ±Ÿäÿ© ŸàÿßŸÑÿ≥ŸÑÿπ ÿßŸÑÿ≠ÿ≥ÿßÿ≥ÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ™ÿ∑ŸÑÿ® ÿ™ŸÜÿ∏ŸäŸÖŸãÿß ÿµÿßÿ±ŸÖŸãÿß ŸÑÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©.',
  service5: 'ŸÜŸÇŸÑ ÿßŸÑÿ®ÿ∂ÿßÿ¶ÿπ ÿßŸÑÿÆÿ∑ÿ±ÿ©',
  service5Desc: 'ŸÖÿπÿßŸÑÿ¨ÿ© ŸÖÿπÿ™ŸÖÿØÿ© ŸàŸÖÿ™ŸàÿßŸÅŸÇÿ© ŸÑŸÑŸÖŸàÿßÿØ ÿßŸÑÿÆÿ∑ÿ±ÿ© ÿ®ŸÖÿπÿßŸäŸäÿ± ÿ£ŸÖÿßŸÜ ÿµÿßÿ±ŸÖÿ© ŸàŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™ ŸÇÿßŸÜŸàŸÜŸäÿ©.',
  bookingTitle: 'ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿ≠ÿ¨ÿßÿ≤',
  bookingNamePlaceholder: 'ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ',
  bookingEmailPlaceholder: 'ÿπŸÜŸàÿßŸÜ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä',
  bookingMessagePlaceholder: 'ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ•ÿ≠ÿ¨ÿßÿ≤ (ÿßŸÑÿ™ÿßÿ±ŸäÿÆÿå ŸÜŸàÿπ ÿßŸÑÿ®ÿ∂ÿßÿ¶ÿπÿå ÿßŸÑŸàÿ¨Ÿáÿ©)',
  bookingSubmitButton: 'ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ≠ÿ¨ÿßÿ≤',
  testimonialsTitle: 'ÿ¢ÿ±ÿßÿ° ÿßŸÑÿπŸÖŸÑÿßÿ°',
  testimonial1Text: 'SwiftDelivery ŸÜŸÇŸÑÿ™ ŸÖÿ≥ÿ™ŸÑÿ≤ŸÖÿßÿ™ŸÜÿß ÿßŸÑÿ∑ÿ®Ÿäÿ© ÿπÿ®ÿ± ÿßŸÑÿ≠ÿØŸàÿØ ŸÅŸä ŸàŸÇÿ™ ŸÇŸäÿßÿ≥Ÿä. ŸÖŸàÿµŸâ ÿ®Ÿá ÿ®ÿ¥ÿØÿ©!',
  testimonial1Author: '- ÿØ. ÿ£ŸÖŸäŸÜÿ© ŸäŸàÿ≥ŸÅ',
  testimonial2Text: 'ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿ™ÿ®ÿπ ÿßŸÑÿÆÿßÿµ ÿ®ŸáŸÖ ŸÖŸÖÿ™ÿßÿ≤. ŸÉŸÜÿ™ ÿ£ÿπÿ±ŸÅ ÿ®ÿßŸÑÿ∂ÿ®ÿ∑ ŸÖŸÉÿßŸÜ ÿ¥ÿ≠ŸÜÿ™Ÿä ŸÅŸä ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸàŸÇÿßÿ™.',
  testimonial2Author: '- ÿ¨ŸäŸÖÿ≥ ÿ£ŸàŸÉŸàÿ±Ÿà',
  testimonial3Text: 'ŸÖŸáŸÜŸäÿå ÿ≥ÿ±Ÿäÿπ ŸàŸÖŸàÿ´ŸàŸÇ. SwiftDelivery ŸáŸà ÿ¥ÿ±ŸäŸÉ ÿßŸÑŸÑŸàÿ¨ÿ≥ÿ™Ÿäÿßÿ™ ÿßŸÑŸÖŸÅÿ∂ŸÑ ŸÑÿØŸäŸÜÿß.',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß',
  submitButton: 'ÿ•ÿ±ÿ≥ÿßŸÑ',
  loginTitle: 'ÿØÿÆŸàŸÑ ÿßŸÑÿπŸÖŸäŸÑ',
  loginButton: 'ÿØÿÆŸàŸÑ',
  registerTitle: 'ÿ™ÿ≥ÿ¨ŸäŸÑ ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ',
  registerButton: 'ÿ™ÿ≥ÿ¨ŸäŸÑ',
  registerUsernamePlaceholder: 'ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ',
  registerPasswordPlaceholder: 'ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±',
  trackTitle: 'ÿ™ÿ™ÿ®ÿπ ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ ŸàÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ',
  trackButton: 'ÿ™ÿ™ÿ®ÿπ ÿßŸÑÿ¥ÿ≠ŸÜÿ©',
  faqTitle: 'ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ÿßŸÑÿ¥ÿßÿ¶ÿπÿ©',
  faq1Q: 'ŸÉŸÖ ŸáŸà ÿ≥ÿ±Ÿäÿπ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑÿ¨ŸàŸäÿü',
  faq1A: 'ŸÖÿπÿ∏ŸÖ ÿßŸÑÿ¥ÿ≠ŸÜÿßÿ™ ÿßŸÑÿ¨ŸàŸäÿ© ÿ™ÿµŸÑ ŸÅŸä ÿ∫ÿ∂ŸàŸÜ 24-48 ÿ≥ÿßÿπÿ©ÿå ÿßÿπÿ™ŸÖÿßÿØŸãÿß ÿπŸÑŸâ ÿßŸÑŸàÿ¨Ÿáÿ© Ÿàÿ™ŸàÿßŸÅÿ± ÿßŸÑÿ±ÿ≠ŸÑÿßÿ™ ŸàŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿ¨ŸÖÿßÿ±ŸÉ.',
  faq2Q: 'ŸáŸÑ ÿ™ÿ™ÿπÿßŸÖŸÑŸàŸÜ ŸÖÿπ ÿßŸÑÿ¨ŸÖÿßÿ±ŸÉ ÿßŸÑÿØŸàŸÑŸäÿ©ÿü',
  faq2A: 'ŸÜÿπŸÖÿå ŸÜŸÇÿØŸÖ ÿÆÿØŸÖÿßÿ™ ÿ™ÿÆŸÑŸäÿµ ÿ¨ŸÖÿ±ŸÉŸä ÿ¥ÿßŸÖŸÑÿ© ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑÿ¥ÿ≠ŸÜÿßÿ™ ÿßŸÑÿØŸàŸÑŸäÿ©.',
  faq3Q: 'ŸáŸÑ ŸäŸÖŸÉŸÜŸÜŸä ÿ™ÿ™ÿ®ÿπ ÿ®ÿ∂ÿßÿ¶ÿπŸä ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÅÿπŸÑŸäÿü',
  faq3A: 'ÿ®ÿßŸÑÿ™ÿ£ŸÉŸäÿØ. ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿ™ÿ®ÿπ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ ŸÑÿØŸäŸÜÿß ŸäŸÇÿØŸÖ ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ÿ≠Ÿäÿ©ÿå ÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸàŸÇÿπ GPSÿå Ÿàÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿ≠ÿßŸÑÿ© ÿ∑ŸàÿßŸÑ ÿßŸÑÿ±ÿ≠ŸÑÿ©.',
  faq4Q: 'ŸáŸÑ ÿ™ŸÇÿØŸÖŸàŸÜ ÿ¥ÿ≠ŸÜŸãÿß ÿ®ÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ≠ÿ±ÿßÿ±ÿ©ÿü',
  faq4A: 'ŸÜÿπŸÖÿå ŸÜÿ≠ŸÜ ŸÖÿ™ÿÆÿµÿµŸàŸÜ ŸÅŸä ŸÑŸàÿ¨ÿ≥ÿ™Ÿäÿßÿ™ ÿ≥ŸÑÿ≥ŸÑÿ© ÿßŸÑÿ™ÿ®ÿ±ŸäÿØ ŸÑŸÑÿ≥ŸÑÿπ ÿßŸÑÿ≠ÿ≥ÿßÿ≥ÿ©.',
  faq5Q: 'ŸáŸÑ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ ŸÅŸä ŸÜŸáÿßŸäÿ© ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ ŸÖÿ™ÿßÿ≠ÿü',
  faq5A: 'ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ ŸÅŸä ŸÜŸáÿßŸäÿ© ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ ŸÖÿ™ÿßÿ≠ ŸÅŸä ŸÖŸÜÿßÿ∑ŸÇ ŸÖÿÆÿ™ÿßÿ±ÿ© ŸàŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿßŸÑÿÆÿØŸÖÿ© ÿßŸÑŸÖÿ§ŸáŸÑÿ©.',
  liveChatTitle: 'ÿØÿπŸÖ ÿßŸÑÿØÿ±ÿØÿ¥ÿ© ÿßŸÑÿ≠Ÿäÿ©',
  liveChatNamePlaceholder: 'ÿßÿ≥ŸÖŸÉ',
  liveChatEmailPlaceholder: 'ÿ®ÿ±ŸäÿØŸÉ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä',
  liveChatMessagePlaceholder: 'ÿ±ÿ≥ÿßŸÑÿ™ŸÉ',
  chatbotTitle: 'ÿ±Ÿàÿ®Ÿàÿ™ SwiftDelivery',
  chatbotGreeting: 'ŸÖÿ±ÿ≠ÿ®ÿß! ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü',
  chatMessagePlaceholder: 'ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ...',
  sendButton: 'ÿ•ÿ±ÿ≥ÿßŸÑ',
  newsletterTitle: 'ÿßÿ®ŸÇ ÿπŸÑŸâ ÿßÿ∑ŸÑÿßÿπ',
  newsletterText: 'ÿßÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ŸÜÿ¥ÿ±ÿ™ŸÜÿß ÿßŸÑÿ•ÿÆÿ®ÿßÿ±Ÿäÿ© ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÜÿµÿßÿ¶ÿ≠ ÿßŸÑÿ¥ÿ≠ŸÜ ÿßŸÑÿ¨ŸàŸäÿå ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ÿå ŸàÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑÿ≠ÿµÿ±Ÿäÿ©.',
  emailLabel: 'ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä',
  subscribeButton: 'ÿßÿ¥ÿ™ÿ±ÿßŸÉ',
  followUs: 'ÿ™ÿßÿ®ÿπŸÜÿß',
  company: 'ÿßŸÑÿ¥ÿ±ŸÉÿ©',
  about: 'ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿπŸÜÿß',
  helpCenter: 'ŸÖÿ±ŸÉÿ≤ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©',
  support: 'ÿßŸÑÿØÿπŸÖ',
  legal: 'ÿßŸÑŸÇÿßŸÜŸàŸÜŸä',
  privacy: 'ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©',
  terms: 'ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿÆÿØŸÖÿ©',
  footerNote: '¬© 2025 SwiftDelivery. ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ©.'
});

// Portuguese
window.translations.pt = window.translations.pt || {};
Object.assign(window.translations.pt, Object.assign({}, commonKeys, {
  home: 'In√≠cio',
  gallery: 'Galeria',
  services: 'Servi√ßos',
  track: 'Rastrear',
  login: 'Entrar',
  register: 'Registrar',
  welcome: 'SwiftDelivery - Frete A√©reo',
  intro: 'Solu√ß√µes de carga global com velocidade, seguran√ßa e precis√£o.',
  getStarted: 'Come√ßar',
  galleryTitle: 'Frota e Instala√ß√µes',
  servicesTitle: 'Nossos Servi√ßos',
  service1: 'Express de Frete A√©reo',
  service1Desc: 'Entrega de carga priorit√°ria com prazos garantidos.',
  service2: 'Armazenamento Global',
  service2Desc: 'Solu√ß√µes de armazenamento seguro em hubs internacionais.',
  service3: 'Despacho Aduaneiro',
  service3Desc: 'Processamento especializado de alf√¢ndega.',
  service4: 'Carga com Controle de Temperatura',
  service4Desc: 'Transporte especializado para produtos sens√≠veis.',
  service5: 'Transporte de Mercadorias Perigosas',
  service5Desc: 'Manipula√ß√£o certificada de materiais perigosos.',
  bookingTitle: 'Painel de Reservas',
  bookingNamePlaceholder: 'Nome Completo',
  bookingEmailPlaceholder: 'Endere√ßo de Email',
  bookingMessagePlaceholder: 'Detalhes da Reserva',
  bookingSubmitButton: 'Enviar Reserva',
  testimonialsTitle: 'Testemunhos de Clientes',
  testimonial1Text: 'SwiftDelivery transportou nossas suprimentos rapidamente. Altamente recomendado!',
  testimonial1Author: '- Dra. Amina Yusuf',
  testimonial2Text: 'Sistema de rastreamento de primeira classe.',
  testimonial2Author: '- James Okoro',
  testimonial3Text: 'Profissional, r√°pido e confi√°vel.',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'Entre em Contato',
  loginTitle: 'Entrada de Cliente',
  loginButton: 'Entrar',
  registerTitle: 'Novo Registro de Cliente',
  registerButton: 'Registrar',
  registerUsernamePlaceholder: 'Nome de Usu√°rio',
  registerPasswordPlaceholder: 'Senha',
  trackTitle: 'Rastreamento de Coleta e Entrega',
  trackButton: 'Rastrear Envio',
  faqTitle: 'Perguntas Frequentes',
  faq1Q: 'Qual √© a velocidade da entrega a√©rea?',
  faq1A: 'A maioria dos envios a√©reos chega em 24-48 horas.',
  faq2Q: 'Voc√™s lidam com alf√¢ndegas internacionais?',
  faq2A: 'Sim, oferecemos servi√ßos completos de despacho aduaneiro.',
  faq3Q: 'Posso rastrear minha carga em tempo real?',
  faq3A: 'Sim. Nosso sistema oferece atualiza√ß√µes ao vivo.',
  faq4Q: 'Voc√™s oferecem envio com controle de temperatura?',
  faq4A: 'Sim, somos especializados em log√≠stica de cadeia fria.',
  faq5Q: 'A entrega de fim de semana est√° dispon√≠vel?',
  faq5A: 'Sim, em regi√µes selecionadas.',
  liveChatTitle: 'Suporte de Chat ao Vivo',
  liveChatNamePlaceholder: 'Seu Nome',
  liveChatEmailPlaceholder: 'Seu Email',
  liveChatMessagePlaceholder: 'Sua Mensagem',
  chatbotTitle: 'Bot SwiftDelivery',
  chatbotGreeting: 'Ol√°! Como posso ajud√°-lo?',
  chatMessagePlaceholder: 'Digite sua mensagem...',
  newsletterTitle: 'Fique Atualizado',
  newsletterText: 'Inscreva-se em nosso boletim informativo.',
  subscribeButton: 'Inscrever-se',
  followUs: 'Nos Siga',
  company: 'Empresa',
  about: 'Sobre N√≥s',
  helpCenter: 'Centro de Ajuda',
  privacy: 'Pol√≠tica de Privacidade',
  terms: 'Termos de Servi√ßo',
  footerNote: '¬© 2025 SwiftDelivery. Todos os direitos reservados.'
}));

// Russian
window.translations.ru = window.translations.ru || {};
Object.assign(window.translations.ru, Object.assign({}, commonKeys, {
  home: '–ì–ª–∞–≤–Ω–∞—è',
  gallery: '–ì–∞–ª–µ—Ä–µ—è',
  services: '–£—Å–ª—É–≥–∏',
  track: '–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ',
  login: '–í—Ö–æ–¥',
  register: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è',
  welcome: 'SwiftDelivery - –ê–≤–∏–∞—Ñ—Ä–∞—Ö—Ç',
  intro: '–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –≥—Ä—É–∑–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è —Å —Å–∫–æ—Ä–æ—Å—Ç—å—é, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ —Ç–æ—á–Ω–æ—Å—Ç—å—é.',
  getStarted: '–ù–∞—á–∞—Ç—å',
  galleryTitle: '–§–ª–æ—Ç –∏ –æ–±—ä–µ–∫—Ç—ã',
  servicesTitle: '–ù–∞—à–∏ —É—Å–ª—É–≥–∏',
  service1: '–ê–≤–∏–∞—Ñ—Ä–∞—Ö—Ç –≠–∫—Å–ø—Ä–µ—Å—Å',
  service1Desc: '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞ —Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ä–æ–∫–∞–º–∏.',
  service2: '–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–∫–ª–∞–¥—ã',
  service2Desc: '–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Ü–µ–Ω—Ç—Ä–∞—Ö.',
  service3: '–¢–∞–º–æ–∂–µ–Ω–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ',
  service3Desc: '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–º–æ–∂–Ω–∏.',
  service4: '–ì—Ä—É–∑ —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã',
  service4Desc: '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤.',
  service5: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö –≥—Ä—É–∑–æ–≤',
  service5Desc: '–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.',
  bookingTitle: '–ü–∞–Ω–µ–ª—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è',
  bookingNamePlaceholder: '–ü–æ–ª–Ω–æ–µ –∏–º—è',
  bookingEmailPlaceholder: '–ê–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã',
  bookingMessagePlaceholder: '–°–≤–µ–¥–µ–Ω–∏—è –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏',
  bookingSubmitButton: '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ',
  testimonialsTitle: '–û—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤',
  testimonial1Text: 'SwiftDelivery –±—ã—Å—Ç—Ä–æ –¥–æ—Å—Ç–∞–≤–∏–ª–∞ –Ω–∞—à–∏ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç—ã. –•–æ—Ä–æ—à–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: '–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–µ—Ä–≤–æ–∫–ª–∞—Å—Å–Ω–∞—è.',
  testimonial2Author: '- James Okoro',
  testimonial3Text: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è, –±—ã—Å—Ç—Ä–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è.',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: '–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏',
  loginTitle: '–í—Ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞',
  loginButton: '–í—Ö–æ–¥',
  registerTitle: '–ù–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞',
  registerButton: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è',
  registerUsernamePlaceholder: '–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
  registerPasswordPlaceholder: '–ü–∞—Ä–æ–ª—å',
  trackTitle: '–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏',
  trackButton: '–û—Ç—Å–ª–µ–¥–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É',
  faqTitle: '–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã',
  faq1Q: '–ö–∞–∫ –±—ã—Å—Ç—Ä–æ –∞–≤–∏–∞–¥–æ—Å—Ç–∞–≤–∫–∞?',
  faq1A: '–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∞–≤–∏–∞–≥—Ä—É–∑–æ–≤ –ø—Ä–∏–±—ã–≤–∞—é—Ç –∑–∞ 24-48 —á–∞—Å–æ–≤.',
  faq2Q: '–í—ã –∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π —Ç–∞–º–æ–∂–Ω–µ–π?',
  faq2A: '–î–∞, –º—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –ø–æ–ª–Ω—ã–µ —Ç–∞–º–æ–∂–µ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏.',
  faq3Q: '–ú–æ–≥—É –ª–∏ —è –æ—Ç—Å–ª–µ–¥–∏—Ç—å –≥—Ä—É–∑ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏?',
  faq3A: '–î–∞. –ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∂–∏–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.',
  faq4Q: '–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç–µ –ª–∏ –≤—ã –¥–æ—Å—Ç–∞–≤–∫—É —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã?',
  faq4A: '–î–∞, –º—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º—Å—è –Ω–∞ —Ö–æ–ª–æ–¥–Ω–æ–π —Ü–µ–ø–∏.',
  faq5Q: '–î–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö?',
  faq5A: '–î–∞, –≤ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö.',
  liveChatTitle: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ –ø—Ä—è–º–æ–º —á–∞—Ç–µ',
  liveChatNamePlaceholder: '–í–∞—à–µ –∏–º—è',
  liveChatEmailPlaceholder: '–í–∞—à –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã',
  liveChatMessagePlaceholder: '–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ',
  chatbotTitle: '–ë–æ—Ç SwiftDelivery',
  chatbotGreeting: '–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ —è –º–æ–≥—É –≤–∞–º –ø–æ–º–æ—á—å?',
  chatMessagePlaceholder: '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...',
  newsletterTitle: '–û—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –≤ –∫—É—Ä—Å–µ',
  newsletterText: '–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –Ω–∞—à—É —Ä–∞—Å—Å—ã–ª–∫—É.',
  subscribeButton: '–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è',
  followUs: '–°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–∞–º–∏',
  company: '–ö–æ–º–ø–∞–Ω–∏—è',
  about: '–û –Ω–∞—Å',
  helpCenter: '–¶–µ–Ω—Ç—Ä –ø–æ–º–æ—â–∏',
  privacy: '–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏',
  terms: '–£—Å–ª–æ–≤–∏—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è',
  footerNote: '¬© 2025 SwiftDelivery. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.'
}));

// Japanese
window.translations.ja = window.translations.ja || {};
Object.assign(window.translations.ja, Object.assign({}, commonKeys, {
  home: '„Éõ„Éº„É†', gallery: '„ÇÆ„É£„É©„É™„Éº', services: '„Çµ„Éº„Éì„Çπ', track: 'ËøΩË∑°', login: '„É≠„Ç∞„Ç§„É≥', register: 'ÁôªÈå≤',
  welcome: 'SwiftDelivery - Ëà™Á©∫Ë≤®Áâ©', intro: '„Çπ„Éî„Éº„Éâ„ÄÅÂÆâÂÖ®ÊÄß„ÄÅÁ≤æÂ∫¶„ÇíÂÇô„Åà„Åü„Ç∞„É≠„Éº„Éê„É´Ë≤®Áâ©„ÇΩ„É™„É•„Éº„Ç∑„Éß„É≥„ÄÇ',
  getStarted: 'Âßã„ÇÅ„Çã', galleryTitle: '„Éï„É™„Éº„Éà„Å®ÊñΩË®≠', servicesTitle: '„Çµ„Éº„Éì„Çπ',
  service1: '„Ç®„Ç¢„Éï„É¨„Ç§„Éà „Ç®„ÇØ„Çπ„Éó„É¨„Çπ', service1Desc: '‰øùË®º„Åï„Çå„Åü„Çπ„Ç±„Ç∏„É•„Éº„É´„Åß„ÅÆÂÑ™ÂÖàË≤®Áâ©ÈÖçÈÄÅ„ÄÇ',
  service2: '„Ç∞„É≠„Éº„Éê„É´ „Ç¶„Çß„Ç¢„Éè„Ç¶„Ç∏„É≥„Ç∞', service2Desc: 'Êà¶Áï•ÁöÑ„Å´‰ΩçÁΩÆ„Åô„ÇãÂõΩÈöõ„Éè„Éñ„Åß„ÅÆÂÆâÂÖ®„Å™‰øùÁÆ°„ÇΩ„É™„É•„Éº„Ç∑„Éß„É≥„ÄÇ',
  service3: 'Á®éÈñ¢„ÇØ„É™„Ç¢„É©„É≥„Çπ', service3Desc: 'Â∞ÇÈñÄÁöÑ„Å™Á®éÈñ¢Âá¶ÁêÜ„ÄÇ',
  service4: 'Ê∏©Â∫¶Âà∂Âæ°Ë≤®Áâ©', service4Desc: 'ÊïèÊÑü„Å™ÂïÜÂìÅ„ÅÆ„Åü„ÇÅ„ÅÆÂ∞ÇÈñÄÁöÑ„Å™Ëº∏ÈÄÅ„Å®‰øùÁÆ°„ÄÇ',
  service5: 'Âç±Èô∫ÂìÅËº∏ÈÄÅ', service5Desc: 'Âç±Èô∫Áâ©„ÅÆË™çÂÆö„Åä„Çà„Å≥Ê∫ñÊã†„Åó„ÅüÂèñÊâ±„ÄÇ',
  bookingTitle: '‰∫àÁ¥Ñ„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ', bookingNamePlaceholder: '„Éï„É´„Éç„Éº„É†', bookingEmailPlaceholder: '„É°„Éº„É´',
  bookingMessagePlaceholder: '‰∫àÁ¥ÑË©≥Á¥∞', bookingSubmitButton: '‰∫àÁ¥Ñ„ÇíÈÄÅ‰ø°', testimonialsTitle: 'È°ßÂÆ¢„ÅÆÂ£∞',
  testimonial1Text: 'SwiftDelivery„ÅØÂåªÁôÇÁî®ÂìÅ„ÇíËøÖÈÄü„Å´ÂõΩÂ¢É„ÇíË∂ä„Åà„Å¶ÈÄÅ‰ªò„Åó„Åæ„Åó„Åü„ÄÇÂº∑„Åè„ÅäÂãß„ÇÅ„Åó„Åæ„ÅôÔºÅ',
  testimonial1Author: '- Dr. Amina Yusuf', testimonial2Text: '„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞„Ç∑„Çπ„ÉÜ„É†„ÅØ‰∏ÄÊµÅ„Åß„Åô„ÄÇ',
  testimonial2Author: '- James Okoro', testimonial3Text: '„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„ÄÅËøÖÈÄü„ÄÅ‰ø°È†º„Åß„Åç„Çã„ÄÇ',
  testimonial3Author: '- GlobalTech Ltd.', contactTitle: '„ÅäÂïè„ÅÑÂêà„Çè„Åõ', submitButton: 'ÈÄÅ‰ø°',
  loginTitle: '„ÇØ„É©„Ç§„Ç¢„É≥„Éà „É≠„Ç∞„Ç§„É≥', loginButton: '„É≠„Ç∞„Ç§„É≥', registerTitle: 'Êñ∞Ë¶è„ÇØ„É©„Ç§„Ç¢„É≥„ÉàÁôªÈå≤',
  registerButton: 'ÁôªÈå≤', registerUsernamePlaceholder: '„É¶„Éº„Ç∂„ÉºÂêç', registerPasswordPlaceholder: '„Éë„Çπ„ÉØ„Éº„Éâ',
  trackTitle: '„Éî„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÔºÜÈÖçÈÄÅËøΩË∑°', trackButton: 'ÈÖçÈÄÅ„ÇíËøΩË∑°', faqTitle: '„Çà„Åè„ÅÇ„ÇãË≥™Âïè',
  faq1Q: 'Ëà™Á©∫Ë≤®Áâ©ÈÖçÈÄÅ„ÅØ„Å©„ÅÆ„Åè„Çâ„ÅÑÈÄü„ÅÑ„Åß„Åô„ÅãÔºü', faq1A: '„Åª„Å®„Çì„Å©„ÅÆËà™Á©∫Ë≤®Áâ©„ÅØ24-48ÊôÇÈñì„ÅßÂà∞ÁùÄ„Åó„Åæ„Åô„ÄÇ',
  faq2Q: 'ÂõΩÈöõÁ®éÈñ¢„ÇíÂèñ„ÇäÊâ±„ÅÑ„Åæ„Åô„ÅãÔºü', faq2A: '„ÅØ„ÅÑ„ÄÅ„Åô„Åπ„Å¶„ÅÆÂõΩÈöõÈÖçÈÄÅ„Å´ÂØæÂøú„Åó„Åæ„Åô„ÄÇ',
  faq3Q: 'Ë≤®Áâ©„Çí„É™„Ç¢„É´„Çø„Ç§„É†„ÅßËøΩË∑°„Åß„Åç„Åæ„Åô„ÅãÔºü', faq3A: '„ÅØ„ÅÑ„ÄÇÂΩìÁ§æ„ÅÆ„Ç∑„Çπ„ÉÜ„É†„ÅØ„É©„Ç§„Éñ„Ç¢„ÉÉ„Éó„Éá„Éº„Éà„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ',
  faq4Q: 'Ê∏©Â∫¶Âà∂Âæ°„Åï„Çå„ÅüÈÖçÈÄÅ„Çí„ÅîÊèê‰æõ„Åó„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü', faq4A: '„ÅØ„ÅÑ„ÄÅÊïèÊÑü„Å™ÂïÜÂìÅ„ÅÆ„Ç≥„Éº„É´„Éâ„ÉÅ„Çß„Éº„É≥Áâ©ÊµÅ„Å´ÁâπÂåñ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
  faq5Q: 'ÈÄ±Êú´ÈÖçÈÄÅ„ÅØÂà©Áî®ÂèØËÉΩ„Åß„Åô„ÅãÔºü', faq5A: '„ÅØ„ÅÑ„ÄÅÈÅ∏ÂÆöÂú∞Âüü„ÅßÂà©Áî®ÂèØËÉΩ„Åß„Åô„ÄÇ',
  liveChatTitle: '„É©„Ç§„Éñ „ÉÅ„É£„ÉÉ„Éà „Çµ„Éù„Éº„Éà', liveChatNamePlaceholder: '„ÅÇ„Å™„Åü„ÅÆÂêçÂâç',
  liveChatEmailPlaceholder: '„ÅÇ„Å™„Åü„ÅÆ„É°„Éº„É´', liveChatMessagePlaceholder: '„ÅÇ„Å™„Åü„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏',
  chatbotTitle: 'SwiftDelivery „Éú„ÉÉ„Éà', chatbotGreeting: '„Åì„Çì„Å´„Å°„ÅØÔºÅ‰ªäÊó•„ÅØ„Å©„ÅÆ„Çà„ÅÜ„Å´„ÅäÊâã‰ºù„ÅÑ„Åß„Åç„Åæ„Åô„ÅãÔºü',
  chatMessagePlaceholder: '„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ...', sendButton: 'ÈÄÅ‰ø°',
  newsletterTitle: 'ÊúÄÊñ∞ÊÉÖÂ†±„ÇíÂÖ•Êâã', newsletterText: '„Éã„É•„Éº„Çπ„É¨„Çø„Éº„ÇíË≥ºË™≠„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
  emailLabel: '„É°„Éº„É´', subscribeButton: 'Ë≥ºË™≠', followUs: '„Éï„Ç©„É≠„Éº', company: '‰ºöÁ§æ', about: 'ÁßÅ„Åü„Å°„Å´„Å§„ÅÑ„Å¶',
  helpCenter: '„Éò„É´„Éó„Çª„É≥„Çø„Éº', support: '„Çµ„Éù„Éº„Éà', legal: 'Ê≥ïÁöÑ', privacy: '„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº',
  terms: 'Âà©Áî®Ë¶èÁ¥Ñ', footerNote: '¬© 2025 SwiftDelivery. „Åô„Åπ„Å¶„ÅÆÊ®©Âà©„Çí‰øùÊúâ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ'
}));

// Italian
window.translations.it = window.translations.it || {};
Object.assign(window.translations.it, Object.assign({}, commonKeys, {
  home: 'Home', gallery: 'Galleria', services: 'Servizi', track: 'Traccia', login: 'Accedi', register: 'Registrati',
  welcome: 'SwiftDelivery - Logistica Aerea', intro: 'Soluzioni di carico globali con velocit√†, sicurezza e precisione.',
  getStarted: 'Inizia', galleryTitle: 'Flotta e Strutture', servicesTitle: 'I Nostri Servizi',
  service1: 'Aereo Express', service1Desc: 'Consegna di carico prioritario con tempi garantiti.',
  service2: 'Magazzinaggio Globale', service2Desc: 'Soluzioni di stoccaggio sicuro in hub internazionali strategici.',
  service3: 'Sdoganamento', service3Desc: 'Elaborazione specializzata della dogana.',
  service4: 'Carico Controllato in Temperatura', service4Desc: 'Trasporto e stoccaggio specializzati per merci sensibili.',
  service5: 'Trasporto di Merci Pericolose', service5Desc: 'Movimentazione certificata e conforme di materiali pericolosi.',
  bookingTitle: 'Pannello di Prenotazione', bookingNamePlaceholder: 'Nome Completo', bookingEmailPlaceholder: 'Email',
  bookingMessagePlaceholder: 'Dettagli Prenotazione', bookingSubmitButton: 'Invia Prenotazione',
  testimonialsTitle: 'Testimonianze dei Clienti',
  testimonial1Text: 'SwiftDelivery ha spedito i nostri forniture mediche rapidamente. Altamente consigliato!',
  testimonial1Author: '- Dr. Amina Yusuf', testimonial2Text: 'Il loro sistema di tracciamento √® di prim\'ordine.',
  testimonial2Author: '- James Okoro', testimonial3Text: 'Professionale, veloce e affidabile.',
  testimonial3Author: '- GlobalTech Ltd.', contactTitle: 'Contattaci', submitButton: 'Invia',
  loginTitle: 'Accesso Cliente', loginButton: 'Accedi', registerTitle: 'Registrazione Nuovo Cliente',
  registerButton: 'Registrati', registerUsernamePlaceholder: 'Nome Utente', registerPasswordPlaceholder: 'Password',
  trackTitle: 'Tracciamento Ritiro e Consegna', trackButton: 'Traccia Spedizione', faqTitle: 'Domande Frequenti',
  faq1Q: 'Quanto √® veloce la consegna aerea?', faq1A: 'La maggior parte dei carichi aerei arriva in 24-48 ore.',
  faq2Q: 'Gestite la dogana internazionale?', faq2A: 'S√¨, forniamo servizi completi di sdoganamento.',
  faq3Q: 'Posso tracciare il mio carico in tempo reale?', faq3A: 'S√¨. Il nostro sistema fornisce aggiornamenti dal vivo.',
  faq4Q: 'Offrite spedizioni controllate in temperatura?', faq4A: 'S√¨, siamo specializzati in logistica della catena del freddo.',
  faq5Q: '√à disponibile la consegna nel fine settimana?', faq5A: 'S√¨, in regioni selezionate.',
  liveChatTitle: 'Supporto Chat dal Vivo', liveChatNamePlaceholder: 'Il Tuo Nome',
  liveChatEmailPlaceholder: 'La Tua Email', liveChatMessagePlaceholder: 'Il Tuo Messaggio',
  chatbotTitle: 'Bot SwiftDelivery', chatbotGreeting: 'Ciao! Come posso aiutarti oggi?',
  chatMessagePlaceholder: 'Scrivi il tuo messaggio...', sendButton: 'Invia',
  newsletterTitle: 'Resta Aggiornato', newsletterText: 'Iscriviti alla nostra newsletter.',
  emailLabel: 'Email', subscribeButton: 'Iscriviti', followUs: 'Seguici', company: 'Azienda', about: 'Chi Siamo',
  helpCenter: 'Centro Assistenza', support: 'Supporto', legal: 'Legale', privacy: 'Politica sulla Privacy',
  terms: 'Condizioni di Servizio', footerNote: '¬© 2025 SwiftDelivery. Tutti i diritti riservati.'
}));

// Korean
window.translations.ko = window.translations.ko || {};
Object.assign(window.translations.ko, Object.assign({}, commonKeys, {
  home: 'Ìôà', gallery: 'Í∞§Îü¨Î¶¨', services: 'ÏÑúÎπÑÏä§', track: 'Ï∂îÏ†Å', login: 'Î°úÍ∑∏Ïù∏', register: 'Îì±Î°ù',
  welcome: 'SwiftDelivery - Ìï≠Í≥µÌôîÎ¨º Î¨ºÎ•ò', intro: 'ÏÜçÎèÑ, ÏïàÏ†Ñ, Ï†ïÎ∞ÄÎèÑÎ•º Í∞ñÏ∂ò Í∏ÄÎ°úÎ≤å ÌôîÎ¨º ÏÜîÎ£®ÏÖò.',
  getStarted: 'ÏãúÏûëÌïòÍ∏∞', galleryTitle: 'Ïö¥ÏÜ° Î∞è ÏãúÏÑ§', servicesTitle: 'ÏÑúÎπÑÏä§',
  service1: 'Ìï≠Í≥µÌôîÎ¨º ÏùµÏä§ÌîÑÎ†àÏä§', service1Desc: 'Î≥¥Ïû•Îêú ÏùºÏ†ïÏùò Ïö∞ÏÑ† ÌôîÎ¨º Î∞∞ÏÜ°.',
  service2: 'Í∏ÄÎ°úÎ≤å Ï∞ΩÍ≥†', service2Desc: 'Ï†ÑÎûµÏ†ÅÏúºÎ°ú ÏúÑÏπòÌïú Íµ≠Ï†ú ÌóàÎ∏åÏùò ÏïàÏ†ÑÌïú Î≥¥Í¥Ä ÏÜîÎ£®ÏÖò.',
  service3: 'ÌÜµÍ¥Ä Ï†àÏ∞®', service3Desc: 'Ï†ÑÎ¨∏Ï†ÅÏù∏ ÌÜµÍ¥Ä Ï≤òÎ¶¨.',
  service4: 'Ïò®ÎèÑ Ï†úÏñ¥ ÌôîÎ¨º', service4Desc: 'ÎØºÍ∞êÌïú ÏÉÅÌíàÏùÑ ÏúÑÌïú Ï†ÑÎ¨∏ Ïö¥ÏÜ° Î∞è Î≥¥Í¥Ä.',
  service5: 'ÏúÑÌóòÎ¨º Ïö¥ÏÜ°', service5Desc: 'ÏúÑÌóò Î¨ºÏßàÏùò Ïù∏Ï¶ùÎêú Î∞è Ï§ÄÏàò Ï∑®Í∏â.',
  bookingTitle: 'ÏòàÏïΩ ÎåÄÏãúÎ≥¥Îìú', bookingNamePlaceholder: 'Ï†ÑÏ≤¥ Ïù¥Î¶Ñ', bookingEmailPlaceholder: 'Ïù¥Î©îÏùº',
  bookingMessagePlaceholder: 'ÏòàÏïΩ ÏÑ∏Î∂ÄÏ†ïÎ≥¥', bookingSubmitButton: 'ÏòàÏïΩ Ï†úÏ∂ú',
  testimonialsTitle: 'Í≥†Í∞ù ÌõÑÍ∏∞',
  testimonial1Text: 'SwiftDeliveryÍ∞Ä ÏùòÎ£åÏö©ÌíàÏùÑ Ïã†ÏÜçÌïòÍ≤å Íµ≠Í≤Ω ÎÑàÎ®∏Î°ú Î∞∞ÏÜ°ÌñàÏäµÎãàÎã§. Í∞ïÎ†•Ìûà Í∂åÏû•Ìï©ÎãàÎã§!',
  testimonial1Author: '- Dr. Amina Yusuf', testimonial2Text: 'Í∑∏Îì§Ïùò Ï∂îÏ†Å ÏãúÏä§ÌÖúÏùÄ ÏµúÍ≥†Í∏âÏûÖÎãàÎã§.',
  testimonial2Author: '- James Okoro', testimonial3Text: 'Ï†ÑÎ¨∏Ï†ÅÏù¥Í≥† Îπ†Î•¥Í≥† Ïã†Î¢∞Ìï† Ïàò ÏûàÏäµÎãàÎã§.',
  testimonial3Author: '- GlobalTech Ltd.', contactTitle: 'Î¨∏Ïùò', submitButton: 'Ï†úÏ∂ú',
  loginTitle: 'ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Î°úÍ∑∏Ïù∏', loginButton: 'Î°úÍ∑∏Ïù∏', registerTitle: 'ÏÉà ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Îì±Î°ù',
  registerButton: 'Îì±Î°ù', registerUsernamePlaceholder: 'ÏÇ¨Ïö©Ïûê Ïù¥Î¶Ñ', registerPasswordPlaceholder: 'ÎπÑÎ∞ÄÎ≤àÌò∏',
  trackTitle: 'ÌîΩÏóÖ Î∞è Î∞∞ÏÜ° Ï∂îÏ†Å', trackButton: 'Î∞∞ÏÜ° Ï∂îÏ†Å', faqTitle: 'ÏûêÏ£º Î¨ªÎäî ÏßàÎ¨∏',
  faq1Q: 'Ìï≠Í≥µ Î∞∞ÏÜ°ÏùÄ ÏñºÎßàÎÇò Îπ†Î¶ÖÎãàÍπå?', faq1A: 'ÎåÄÎ∂ÄÎ∂ÑÏùò Ìï≠Í≥µ ÌôîÎ¨ºÏùÄ 24-48ÏãúÍ∞Ñ ÎÇ¥Ïóê ÎèÑÏ∞©Ìï©ÎãàÎã§.',
  faq2Q: 'Íµ≠Ï†ú ÌÜµÍ¥ÄÏùÑ Ï≤òÎ¶¨Ìï©ÎãàÍπå?', faq2A: 'Ïòà, Î™®Îì† Íµ≠Ï†ú Î∞∞ÏÜ°Ïóê ÎåÄÌï¥ ÏôÑÎ≤ΩÌïú ÌÜµÍ¥Ä ÏÑúÎπÑÏä§Î•º Ï†úÍ≥µÌï©ÎãàÎã§.',
  faq3Q: 'Ïã§ÏãúÍ∞ÑÏúºÎ°ú ÌôîÎ¨ºÏùÑ Ï∂îÏ†ÅÌï† Ïàò ÏûàÏäµÎãàÍπå?', faq3A: 'Ïòà. ÎãπÏÇ¨ ÏãúÏä§ÌÖúÏùÄ Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏Î•º Ï†úÍ≥µÌï©ÎãàÎã§.',
  faq4Q: 'Ïò®ÎèÑ Ï†úÏñ¥ Î∞∞ÏÜ°ÏùÑ Ï†úÍ≥µÌï©ÎãàÍπå?', faq4A: 'Ïòà, ÎØºÍ∞êÌïú ÏÉÅÌíàÏùò ÏΩúÎìúÏ≤¥Ïù∏ Î¨ºÎ•òÎ•º Ï†ÑÎ¨∏ÏúºÎ°ú Ìï©ÎãàÎã§.',
  faq5Q: 'Ï£ºÎßê Î∞∞ÏÜ°Ïù¥ Í∞ÄÎä•Ìï©ÎãàÍπå?', faq5A: 'Ïòà, ÏÑ†Ï†ïÎêú ÏßÄÏó≠ÏóêÏÑú Í∞ÄÎä•Ìï©ÎãàÎã§.',
  liveChatTitle: 'ÎùºÏù¥Î∏å Ï±ÑÌåÖ ÏßÄÏõê', liveChatNamePlaceholder: 'ÎãπÏã†Ïùò Ïù¥Î¶Ñ',
  liveChatEmailPlaceholder: 'ÎãπÏã†Ïùò Ïù¥Î©îÏùº', liveChatMessagePlaceholder: 'ÎãπÏã†Ïùò Î©îÏãúÏßÄ',
  chatbotTitle: 'SwiftDelivery Î¥á', chatbotGreeting: 'ÏïàÎÖïÌïòÏÑ∏Ïöî! Ïò§Îäò Ïñ¥ÎñªÍ≤å ÎèÑÏôÄÎìúÎ¶¥ÍπåÏöî?',
  chatMessagePlaceholder: 'Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî...', sendButton: 'Î≥¥ÎÇ¥Í∏∞',
  newsletterTitle: 'ÏµúÏã† Ï†ïÎ≥¥ Î∞õÍ∏∞', newsletterText: 'Îâ¥Ïä§Î†àÌÑ∞Î•º Íµ¨ÎèÖÌïòÏÑ∏Ïöî.',
  emailLabel: 'Ïù¥Î©îÏùº', subscribeButton: 'Íµ¨ÎèÖ', followUs: 'ÌåîÎ°úÏö∞', company: 'ÌöåÏÇ¨', about: 'Ïö∞Î¶¨ ÏÜåÍ∞ú',
  helpCenter: 'ÏßÄÏõê ÏÑºÌÑ∞', support: 'ÏßÄÏõê', legal: 'Î≤ïÎ•†', privacy: 'Í∞úÏù∏Ï†ïÎ≥¥ Î≥¥Ìò∏Ï†ïÏ±Ö',
  terms: 'ÏÑúÎπÑÏä§ ÏïΩÍ¥Ä', footerNote: '¬© 2025 SwiftDelivery. Î™®Îì† Í∂åÎ¶¨ Î≥¥Ïú†.'
}));

// Vietnamese
window.translations.vi = window.translations.vi || {};
Object.assign(window.translations.vi, Object.assign({}, commonKeys, {
  home: 'Trang ch·ªß', gallery: 'Th∆∞ vi·ªán', services: 'D·ªãch v·ª•', track: 'Theo d√µi', login: 'ƒêƒÉng nh·∫≠p', register: 'ƒêƒÉng k√Ω',
  welcome: 'SwiftDelivery - Logistics H√†ng kh√¥ng', intro: 'Gi·∫£i ph√°p h√†ng h√≥a to√†n c·∫ßu v·ªõi t·ªëc ƒë·ªô, an to√†n v√† ƒë·ªô ch√≠nh x√°c.',
  getStarted: 'B·∫Øt ƒë·∫ßu', galleryTitle: 'ƒê·ªôi t√†u v√† C∆° s·ªü', servicesTitle: 'D·ªãch v·ª• c·ªßa ch√∫ng t√¥i',
  service1: 'H√†ng kh√¥ng Express', service1Desc: 'Giao h√†ng ∆∞u ti√™n v·ªõi th·ªùi gian ƒë∆∞·ª£c ƒë·∫£m b·∫£o.',
  service2: 'Kho h√†ng To√†n c·∫ßu', service2Desc: 'Gi·∫£i ph√°p l∆∞u tr·ªØ an to√†n t·∫°i c√°c trung t√¢m qu·ªëc t·∫ø chi·∫øn l∆∞·ª£c.',
  service3: 'Th√¥ng quan h·∫£i quan', service3Desc: 'X·ª≠ l√Ω h·∫£i quan chuy√™n nghi·ªáp.',
  service4: 'H√†ng h√≥a ki·ªÉm so√°t nhi·ªát ƒë·ªô', service4Desc: 'V·∫≠n chuy·ªÉn v√† l∆∞u tr·ªØ chuy√™n bi·ªát cho h√†ng h√≥a nh·∫°y c·∫£m.',
  service5: 'V·∫≠n chuy·ªÉn h√†ng h√≥a nguy hi·ªÉm', service5Desc: 'X·ª≠ l√Ω ch·ª©ng th·ª±c v√† tu√¢n th·ªß c√°c v·∫≠t li·ªáu nguy hi·ªÉm.',
  bookingTitle: 'B·∫£ng ƒëi·ªÅu khi·ªÉn ƒê·∫∑t l·ªãch', bookingNamePlaceholder: 'H·ªç v√† t√™n', bookingEmailPlaceholder: 'Email',
  bookingMessagePlaceholder: 'Chi ti·∫øt ƒë·∫∑t l·ªãch', bookingSubmitButton: 'G·ª≠i ƒë·∫∑t l·ªãch',
  testimonialsTitle: 'ƒê√°nh gi√° c·ªßa kh√°ch h√†ng',
  testimonial1Text: 'SwiftDelivery ƒë√£ g·ª≠i v·∫≠t t∆∞ y t·∫ø c·ªßa ch√∫ng t√¥i qua bi√™n gi·ªõi m·ªôt c√°ch nhanh ch√≥ng. ƒê√°nh gi√° cao!',
  testimonial1Author: '- Dr. Amina Yusuf', testimonial2Text: 'H·ªá th·ªëng theo d√µi c·ªßa h·ªç tuy·ªát v·ªùi.',
  testimonial2Author: '- James Okoro', testimonial3Text: 'Chuy√™n nghi·ªáp, nhanh v√† ƒë√°ng tin c·∫≠y.',
  testimonial3Author: '- GlobalTech Ltd.', contactTitle: 'Li√™n h·ªá', submitButton: 'G·ª≠i',
  loginTitle: 'ƒêƒÉng nh·∫≠p kh√°ch h√†ng', loginButton: 'ƒêƒÉng nh·∫≠p', registerTitle: 'ƒêƒÉng k√Ω kh√°ch h√†ng m·ªõi',
  registerButton: 'ƒêƒÉng k√Ω', registerUsernamePlaceholder: 'T√™n ng∆∞·ªùi d√πng', registerPasswordPlaceholder: 'M·∫≠t kh·∫©u',
  trackTitle: 'Theo d√µi L·∫•y h√†ng & Giao h√†ng', trackButton: 'Theo d√µi L√¥ h√†ng', faqTitle: 'C√¢u h·ªèi th∆∞·ªùng g·∫∑p',
  faq1Q: 'Giao h√†ng h√†ng kh√¥ng nhanh nh∆∞ th·∫ø n√†o?', faq1A: 'H·∫ßu h·∫øt h√†ng h√≥a h√†ng kh√¥ng ƒë·∫øn trong v√≤ng 24-48 gi·ªù.',
  faq2Q: 'B·∫°n x·ª≠ l√Ω h·∫£i quan qu·ªëc t·∫ø?', faq2A: 'C√≥, ch√∫ng t√¥i cung c·∫•p d·ªãch v·ª• th√¥ng quan h·∫£i quan to√†n di·ªán.',
  faq3Q: 'T√¥i c√≥ th·ªÉ theo d√µi h√†ng h√≥a c·ªßa m√¨nh trong th·ªùi gian th·ª±c kh√¥ng?', faq3A: 'C√≥. H·ªá th·ªëng c·ªßa ch√∫ng t√¥i cung c·∫•p c·∫≠p nh·∫≠t tr·ª±c ti·∫øp.',
  faq4Q: 'B·∫°n c√≥ cung c·∫•p v·∫≠n chuy·ªÉn ki·ªÉm so√°t nhi·ªát ƒë·ªô kh√¥ng?', faq4A: 'C√≥, ch√∫ng t√¥i chuy√™n v·ªÅ logistics chu·ªói l·∫°nh.',
  faq5Q: 'Giao h√†ng cu·ªëi tu·∫ßn c√≥ s·∫µn kh√¥ng?', faq5A: 'C√≥, ·ªü c√°c khu v·ª±c ƒë∆∞·ª£c ch·ªçn.',
  liveChatTitle: 'H·ªó tr·ª£ Tr√≤ chuy·ªán Tr·ª±c ti·∫øp', liveChatNamePlaceholder: 'T√™n c·ªßa b·∫°n',
  liveChatEmailPlaceholder: 'Email c·ªßa b·∫°n', liveChatMessagePlaceholder: 'Tin nh·∫Øn c·ªßa b·∫°n',
  chatbotTitle: 'Bot SwiftDelivery', chatbotGreeting: 'Xin ch√†o! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n h√¥m nay?',
  chatMessagePlaceholder: 'G√µ tin nh·∫Øn c·ªßa b·∫°n...', sendButton: 'G·ª≠i',
  newsletterTitle: 'C·∫≠p nh·∫≠t th√¥ng tin', newsletterText: 'ƒêƒÉng k√Ω nh·∫≠n b·∫£n tin c·ªßa ch√∫ng t√¥i.',
  emailLabel: 'Email', subscribeButton: 'ƒêƒÉng k√Ω', followUs: 'Theo d√µi ch√∫ng t√¥i', company: 'C√¥ng ty', about: 'V·ªÅ ch√∫ng t√¥i',
  helpCenter: 'Trung t√¢m Tr·ª£ gi√∫p', support: 'H·ªó tr·ª£', legal: 'Ph√°p l√Ω', privacy: 'Ch√≠nh s√°ch B·∫£o m·∫≠t',
  terms: 'ƒêi·ªÅu kho·∫£n D·ªãch v·ª•', footerNote: '¬© 2025 SwiftDelivery. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.'
}));

// Indonesian
window.translations.id = window.translations.id || {};
Object.assign(window.translations.id, Object.assign({}, commonKeys, {
  home: 'Beranda', gallery: 'Galeri', services: 'Layanan', track: 'Pelacakan', login: 'Masuk', register: 'Daftar',
  welcome: 'SwiftDelivery - Logistik Pengiriman Udara', intro: 'Solusi kargo global dengan kecepatan, keamanan, dan presisi.',
  getStarted: 'Mulai', galleryTitle: 'Armada & Fasilitas', servicesTitle: 'Layanan Kami',
  service1: 'Pengiriman Udara Ekspres', service1Desc: 'Pengiriman kargo prioritas dengan jadwal terjamin.',
  service2: 'Pergudangan Global', service2Desc: 'Solusi penyimpanan aman di pusat internasional yang strategis.',
  service3: 'Bea Cukai', service3Desc: 'Pemrosesan bea cukai profesional.',
  service4: 'Kargo Terkontrol Suhu', service4Desc: 'Pengangkutan dan penyimpanan khusus untuk barang sensitif.',
  service5: 'Pengangkutan Barang Berbahaya', service5Desc: 'Penanganan bersertifikat dan patuh untuk bahan berbahaya.',
  bookingTitle: 'Dasbor Pemesanan', bookingNamePlaceholder: 'Nama Lengkap', bookingEmailPlaceholder: 'Email',
  bookingMessagePlaceholder: 'Detail Pemesanan', bookingSubmitButton: 'Kirim Pemesanan',
  testimonialsTitle: 'Testimoni Pelanggan',
  testimonial1Text: 'SwiftDelivery mengirimkan persediaan medis kami lintas batas dengan cepat. Sangat direkomendasikan!',
  testimonial1Author: '- Dr. Amina Yusuf', testimonial2Text: 'Sistem pelacakan mereka sangat bagus.',
  testimonial2Author: '- James Okoro', testimonial3Text: 'Profesional, cepat, dan dapat diandalkan.',
  testimonial3Author: '- GlobalTech Ltd.', contactTitle: 'Hubungi Kami', submitButton: 'Kirim',
  loginTitle: 'Masuk Klien', loginButton: 'Masuk', registerTitle: 'Pendaftaran Klien Baru',
  registerButton: 'Daftar', registerUsernamePlaceholder: 'Nama Pengguna', registerPasswordPlaceholder: 'Kata Sandi',
  trackTitle: 'Pelacakan Pengambilan & Pengiriman', trackButton: 'Lacak Pengiriman', faqTitle: 'Pertanyaan yang Sering Diajukan',
  faq1Q: 'Seberapa cepat pengiriman udara?', faq1A: 'Sebagian besar kargo udara tiba dalam 24-48 jam.',
  faq2Q: 'Apakah Anda menangani bea cukai internasional?', faq2A: 'Ya, kami menyediakan layanan bea cukai yang komprehensif.',
  faq3Q: 'Bisakah saya melacak kargo saya secara real-time?', faq3A: 'Ya. Sistem kami memberikan pembaruan langsung.',
  faq4Q: 'Apakah Anda menawarkan pengiriman dengan kontrol suhu?', faq4A: 'Ya, kami mengkhususkan diri dalam logistik rantai dingin.',
  faq5Q: 'Apakah pengiriman akhir pekan tersedia?', faq5A: 'Ya, di wilayah tertentu.',
  liveChatTitle: 'Dukungan Obrolan Langsung', liveChatNamePlaceholder: 'Nama Anda',
  liveChatEmailPlaceholder: 'Email Anda', liveChatMessagePlaceholder: 'Pesan Anda',
  chatbotTitle: 'Bot SwiftDelivery', chatbotGreeting: 'Halo! Bagaimana saya bisa membantu Anda hari ini?',
  chatMessagePlaceholder: 'Ketik pesan Anda...', sendButton: 'Kirim',
  newsletterTitle: 'Tetap Diperbarui', newsletterText: 'Berlangganan buletin kami.',
  emailLabel: 'Email', subscribeButton: 'Berlangganan', followUs: 'Ikuti Kami', company: 'Perusahaan', about: 'Tentang Kami',
  helpCenter: 'Pusat Bantuan', support: 'Dukungan', legal: 'Hukum', privacy: 'Kebijakan Privasi',
  terms: 'Ketentuan Layanan', footerNote: '¬© 2025 SwiftDelivery. Semua hak dilindungi.'
}));

// Thai
window.translations.th = window.translations.th || {};
Object.assign(window.translations.th, Object.assign({}, commonKeys, {
  home: '‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å', gallery: '‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà', services: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£', track: '‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°', login: '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö', register: '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å',
  welcome: 'SwiftDelivery - ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏ó‡∏≤‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®', intro: '‡πÇ‡∏ã‡∏•‡∏π‡∏ä‡∏±‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥',
  getStarted: '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô', galleryTitle: '‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å', servicesTitle: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤',
  service1: '‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏ó‡∏≤‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏î‡πà‡∏ß‡∏ô', service1Desc: '‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à',
  service2: '‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å', service2Desc: '‡πÇ‡∏ã‡∏•‡∏π‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡∏™‡∏≤‡∏Å‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå',
  service3: '‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏î‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏®‡∏∏‡∏•‡∏Å‡∏≤‡∏Å‡∏£', service3Desc: '‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏®‡∏∏‡∏•‡∏Å‡∏≤‡∏Å‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç',
  service4: '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥', service4Desc: '‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÅ‡∏ö‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡πà‡∏≠‡∏ô',
  service5: '‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢', service5Desc: '‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô',
  bookingTitle: '‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á', bookingNamePlaceholder: '‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°', bookingEmailPlaceholder: '‡∏≠‡∏µ‡πÄ‡∏°‡∏•',
  bookingMessagePlaceholder: '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á', bookingSubmitButton: '‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á',
  testimonialsTitle: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤',
  testimonial1Text: 'SwiftDelivery ‡∏™‡πà‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏Ç‡πâ‡∏≤‡∏°‡∏û‡∏£‡∏°‡πÅ‡∏î‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô!',
  testimonial1Author: '- Dr. Amina Yusuf', testimonial2Text: '‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏û‡∏ß‡∏Å‡πÄ‡∏Ç‡∏≤‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°',
  testimonial2Author: '- James Okoro', testimonial3Text: '‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û ‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ',
  testimonial3Author: '- GlobalTech Ltd.', contactTitle: '‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤', submitButton: '‡∏™‡πà‡∏á',
  loginTitle: '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏Ñ‡∏•‡πÄ‡∏≠‡∏ô‡∏ï‡πå', loginButton: '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö', registerTitle: '‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÑ‡∏Ñ‡∏•‡πÄ‡∏≠‡∏ô‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà',
  registerButton: '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å', registerUsernamePlaceholder: '‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ', registerPasswordPlaceholder: '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô',
  trackTitle: '‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö', trackButton: '‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö', faqTitle: '‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢',
  faq1Q: '‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏ó‡∏≤‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?', faq1A: '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏≤‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 24-48 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á',
  faq2Q: '‡∏Ñ‡∏∏‡∏ì‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏®‡∏∏‡∏•‡∏Å‡∏≤‡∏Å‡∏£‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?', faq2A: '‡πÉ‡∏ä‡πà ‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏î‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏®‡∏∏‡∏•‡∏Å‡∏≤‡∏Å‡∏£‡∏ó‡∏µ‡πà‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°',
  faq3Q: '‡∏â‡∏±‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?', faq3A: '‡πÉ‡∏ä‡πà ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏ö‡∏ö‡∏™‡∏î‡πÉ‡∏à',
  faq4Q: '‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?', faq4A: '‡πÉ‡∏ä‡πà ‡πÄ‡∏£‡∏≤‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏´‡πà‡∏ß‡∏á‡πÇ‡∏ã‡πà‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏¢‡πá‡∏ô',
  faq5Q: '‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏∏‡∏î‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?', faq5A: '‡πÉ‡∏ä‡πà ‡πÉ‡∏ô‡∏ö‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà',
  liveChatTitle: '‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡πÅ‡∏ä‡∏ó‡∏™‡∏î‡πÉ‡∏à', liveChatNamePlaceholder: '‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì',
  liveChatEmailPlaceholder: '‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì', liveChatMessagePlaceholder: '‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì',
  chatbotTitle: '‡∏ö‡∏≠‡∏ó SwiftDelivery', chatbotGreeting: '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ! ‡∏â‡∏±‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?',
  chatMessagePlaceholder: '‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...', sendButton: '‡∏™‡πà‡∏á',
  newsletterTitle: '‡∏≠‡∏û‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î', newsletterText: '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡πà‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤',
  emailLabel: '‡∏≠‡∏µ‡πÄ‡∏°‡∏•', subscribeButton: '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å', followUs: '‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏£‡∏≤', company: '‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó', about: '‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤',
  helpCenter: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠', support: '‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô', legal: '‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢', privacy: '‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß',
  terms: '‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£', footerNote: '¬© 2025 SwiftDelivery. ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå'
}));

// Turkish
window.translations.tr = window.translations.tr || {};
Object.assign(window.translations.tr, Object.assign({}, commonKeys, {
  home: 'Anasayfa', gallery: 'Galeri', services: 'Hizmetler', track: 'ƒ∞zle', login: 'Giri≈ü', register: 'Kaydol',
  welcome: 'SwiftDelivery - Hava Kargo Lojistiƒüi', intro: 'Hƒ±z, g√ºvenlik ve hassasiyetle k√ºresel kargo √ß√∂z√ºmleri.',
  getStarted: 'Ba≈üla', galleryTitle: 'Filo ve Tesisler', servicesTitle: 'Hizmetlerimiz',
  service1: 'Hava Kargo Express', service1Desc: 'Garantili zaman √ßizelgeleriyle √∂ncelikli kargo teslimatƒ±.',
  service2: 'Global Depolama', service2Desc: 'Stratejik olarak konumlandƒ±rƒ±lmƒ±≈ü uluslararasƒ± merkezlerde g√ºvenli depolama √ß√∂z√ºmleri.',
  service3: 'G√ºmr√ºk Tahliyesi', service3Desc: 'Profesyonel g√ºmr√ºk i≈ülemleri.',
  service4: 'Sƒ±caklƒ±k Kontroll√º Kargo', service4Desc: 'Hassas mallar i√ßin √∂zel nakliye ve depolama.',
  service5: 'Tehlikeli Mal Nakliyesi', service5Desc: 'Tehlikeli maddelerin sertifikalƒ± ve uyumlu i≈ülenmesi.',
  bookingTitle: 'Rezervasyon Panosu', bookingNamePlaceholder: 'Ad Soyad', bookingEmailPlaceholder: 'E-posta',
  bookingMessagePlaceholder: 'Rezervasyon Detaylarƒ±', bookingSubmitButton: 'Rezervasyonu G√∂nder',
  testimonialsTitle: 'M√º≈üteri Yorumlarƒ±',
  testimonial1Text: 'SwiftDelivery tƒ±bbi malzemeleri sƒ±nƒ±r √∂tesine hƒ±zlƒ± bir ≈üekilde g√∂nderdi. ≈ûiddetle tavsiye edilir!',
  testimonial1Author: '- Dr. Amina Yusuf', testimonial2Text: 'Takip sistemleri birinci sƒ±nƒ±f.',
  testimonial2Author: '- James Okoro', testimonial3Text: 'Profesyonel, hƒ±zlƒ± ve g√ºvenilir.',
  testimonial3Author: '- GlobalTech Ltd.', contactTitle: 'ƒ∞leti≈üim', submitButton: 'G√∂nder',
  loginTitle: 'M√º≈üteri Giri≈üi', loginButton: 'Giri≈ü', registerTitle: 'Yeni M√º≈üteri Kaydƒ±',
  registerButton: 'Kaydol', registerUsernamePlaceholder: 'Kullanƒ±cƒ± Adƒ±', registerPasswordPlaceholder: '≈ûifre',
  trackTitle: 'Alƒ±m ve Teslimat ƒ∞zlemesi', trackButton: 'G√∂nderiyi ƒ∞zle', faqTitle: 'Sƒ±k Sorulan Sorular',
  faq1Q: 'Hava kargo teslimatƒ± ne kadar hƒ±zlƒ±?', faq1A: '√áoƒüu hava kargo 24-48 saat i√ßinde ula≈üƒ±r.',
  faq2Q: 'Uluslararasƒ± g√ºmr√ºƒü√º i≈üler misiniz?', faq2A: 'Evet, t√ºm uluslararasƒ± g√∂nderiler i√ßin kapsamlƒ± g√ºmr√ºk hizmetleri saƒülarƒ±z.',
  faq3Q: 'Kargonu ger√ßek zamanlƒ± olarak izleyebilir miyim?', faq3A: 'Evet. Sistemimiz canlƒ± g√ºncellemeler saƒülar.',
  faq4Q: 'Sƒ±caklƒ±k kontroll√º nakliye sunuyor musunuz?', faq4A: 'Evet, soƒüuk zincir lojistiƒüinde uzmanƒ±z.',
  faq5Q: 'Hafta sonu teslimatƒ± mevcut mu?', faq5A: 'Evet, se√ßilen b√∂lgelerde mevcut.',
  liveChatTitle: 'Canlƒ± Sohbet Desteƒüi', liveChatNamePlaceholder: 'Adƒ±nƒ±z',
  liveChatEmailPlaceholder: 'E-postanƒ±z', liveChatMessagePlaceholder: 'Mesajƒ±nƒ±z',
  chatbotTitle: 'SwiftDelivery Botu', chatbotGreeting: 'Merhaba! Bug√ºn nasƒ±l yardƒ±mcƒ± olabilirim?',
  chatMessagePlaceholder: 'Mesajƒ±nƒ±zƒ± yazƒ±n...', sendButton: 'G√∂nder',
  newsletterTitle: 'G√ºncel Kalƒ±n', newsletterText: 'B√ºltenimize abone olun.',
  emailLabel: 'E-posta', subscribeButton: 'Abone Ol', followUs: 'Bizi Takip Et', company: '≈ûirket', about: 'Hakkƒ±mƒ±zda',
  helpCenter: 'Yardƒ±m Merkezi', support: 'Destek', legal: 'Yasal', privacy: 'Gizlilik Politikasƒ±',
  terms: 'Hizmet ≈ûartlarƒ±', footerNote: '¬© 2025 SwiftDelivery. T√ºm haklarƒ± saklƒ±dƒ±r.'
}));

// LibreTranslate configuration for remaining 27 languages
const LIBRETRANSLATE_API = 'https://libretranslate.de/translate';
const REMAINING_LANGUAGES = ['pl', 'nl', 'sv', 'el', 'cs', 'hu', 'ro', 'uk', 'bn', 'sw', 'ur', 'am', 'fil', 'pa', 'mr', 'ta', 'kn', 'te', 'or', 'gu', 'ms', 'my', 'fi', 'da', 'no', 'he', 'fa'];

// Language code mapping for LibreTranslate
const LANG_CODE_MAP = {
  'pl': 'pl', 'nl': 'nl', 'sv': 'sv', 'el': 'el', 'cs': 'cs', 'hu': 'hu', 'ro': 'ro', 'uk': 'uk',
  'bn': 'bn', 'sw': 'sw', 'ur': 'ur', 'am': 'am', 'fil': 'tl', 'pa': 'pa', 'mr': 'mr', 'ta': 'ta',
  'kn': 'kn', 'te': 'te', 'or': 'or', 'gu': 'gu', 'ms': 'ms', 'my': 'my', 'fi': 'fi', 'da': 'da',
  'no': 'no', 'he': 'he', 'fa': 'fa'
};

// Initialize remaining languages with English fallback
REMAINING_LANGUAGES.forEach(lang => {
  window.translations[lang] = window.translations[lang] || {};
  Object.assign(window.translations[lang], commonKeys);
});

// Function to translate content using LibreTranslate for remaining languages
async function translateWithLibreTranslate(text, targetLang) {
  try {
    const libreTranslateLang = LANG_CODE_MAP[targetLang] || targetLang;
    const cacheKey = `sd-translation-${targetLang}-${text.substring(0, 50)}`;
    
    const cached = localStorage.getItem(cacheKey);
    if (cached) return cached;

    const response = await fetch(LIBRETRANSLATE_API, {
      method: 'POST',
      body: JSON.stringify({
        q: text,
        source: 'en',
        target: libreTranslateLang
      }),
      headers: { 'Content-Type': 'application/json' }
    });

    if (!response.ok) throw new Error('Translation failed');
    const data = await response.json();
    const translated = data.translatedText || text;
    
    try {
      localStorage.setItem(cacheKey, translated);
    } catch (e) {
      // ignore storage errors
    }
    
    return translated;
  } catch (error) {
    console.warn(`Translation error for ${targetLang}:`, error);
    return text;
  }
}

// Batch translate all keys for a language
async function translateLanguageBatch(lang) {
  try {
    const cacheKey = `sd-lang-${lang}-full`;
    const cached = localStorage.getItem(cacheKey);
    if (cached) {
      const parsed = JSON.parse(cached);
      Object.assign(window.translations[lang], parsed);
      return;
    }

    const keys = Object.keys(commonKeys);
    const texts = keys.map(k => commonKeys[k]);
    const libreTranslateLang = LANG_CODE_MAP[lang] || lang;

    const response = await fetch(LIBRETRANSLATE_API, {
      method: 'POST',
      body: JSON.stringify({
        q: texts.join('\n[SEP]\n'),
        source: 'en',
        target: libreTranslateLang
      }),
      headers: { 'Content-Type': 'application/json' }
    });

    if (!response.ok) throw new Error('Batch translation failed');
    const data = await response.json();
    const translated = data.translatedText.split('\n[SEP]\n');

    const translations = {};
    keys.forEach((key, idx) => {
      translations[key] = translated[idx] || commonKeys[key];
    });

    Object.assign(window.translations[lang], translations);
    
    try {
      localStorage.setItem(cacheKey, JSON.stringify(translations));
    } catch (e) {
      // ignore storage errors
    }
  } catch (error) {
    console.warn(`Batch translation failed for ${lang}:`, error);
  }
}

// Global translation apply helper - single canonical implementation
function applyTranslations(lang) {
  const translations = window.translations;
  if (!lang || !translations[lang]) {
    console.warn(`applyTranslations: missing language or translations for ${lang}`);
    return 0;
  }

  const els = document.querySelectorAll('[data-i18n]');
  let updated = 0;

  els.forEach(el => {
    const key = el.getAttribute('data-i18n');
    const value = translations[lang][key] || translations[lang][commonKeys[key]];
    if (!value) return;

    const tag = el.tagName.toLowerCase();
    if (tag === 'input' || tag === 'textarea') {
      if (!el.hasAttribute('data-i18n-force-text')) {
        el.placeholder = value;
      } else {
        el.value = value;
      }
    } else {
      try {
        el.textContent = value;
      } catch (e) {
        el.innerText = value;
      }
    }
    updated++;
  });

  // Handle RTL for Arabic
  if (lang === 'ar') {
    document.documentElement.setAttribute('dir', 'rtl');
    document.body.classList.add('rtl');
  } else {
    document.documentElement.setAttribute('dir', 'ltr');
    document.body.classList.remove('rtl');
  }

  try {
    localStorage.setItem('sd-lang', lang);
  } catch (e) {
    // ignore
  }

  console.log(`applyTranslations ${lang}: updated ${updated} elements`);
  return updated;
}

const VOICE_LANG_MAP = {
  'en': 'en-US',
  'fr': 'fr-FR',
  'es': 'es-ES',
  'de': 'de-DE',
  'zh': 'zh-CN',
  'ar': 'ar-SA',
  'hi': 'hi-IN',
  'pt': 'pt-BR',
  'ru': 'ru-RU',
  'ja': 'ja-JP',
  'it': 'it-IT',
  'pl': 'pl-PL',
  'ko': 'ko-KR',
  'vi': 'vi-VN',
  'th': 'th-TH',
  'tr': 'tr-TR',
  'id': 'id-ID',
  'nl': 'nl-NL',
  'sv': 'sv-SE',
  'el': 'el-GR',
  'cs': 'cs-CZ',
  'hu': 'hu-HU',
  'ro': 'ro-RO',
  'uk': 'uk-UA',
  'bn': 'bn-IN',
  'sw': 'sw-KE',
  'ur': 'ur-PK',
  'am': 'am-ET',
  'fil': 'fil-PH',
  'pa': 'pa-IN',
  'mr': 'mr-IN',
  'ta': 'ta-IN',
  'kn': 'kn-IN',
  'te': 'te-IN',
  'or': 'or-IN',
  'gu': 'gu-IN',
  'ms': 'ms-MY',
  'my': 'my-MM',
  'fi': 'fi-FI',
  'da': 'da-DK',
  'no': 'nb-NO',
  'he': 'he-IL',
  'fa': 'fa-IR'
};

window.updateVoiceLanguage = function(lang) {
  if (recognition && VOICE_LANG_MAP[lang]) {
    recognition.lang = VOICE_LANG_MAP[lang];
    console.log(`üé§ Voice recognition language updated to: ${VOICE_LANG_MAP[lang]}`);
  }
};

window.changeLanguage = function(lang) {
  console.log('changeLanguage called with', lang);
  const selectTop = document.querySelector('#languageSelect');
  const selectSide = document.querySelector('#sidebarLanguageSelect');
  if (selectTop) selectTop.value = lang;
  if (selectSide) selectSide.value = lang;
  const updated = applyTranslations(lang);
  window.updateVoiceLanguage(lang);
  console.log(`changeLanguage: updated ${updated} elements for ${lang}`);
  return updated || 0;
};

// ----- NEW: global voice-mode state and selection -----
let voiceModeEnabled = false;
let selectedVoice = null;

function pickFemaleVoice() {
  const voices = window.speechSynthesis.getVoices();
  if (!voices || voices.length === 0) return null;

  const preferredNames = [
    'Google UK English Female',
    'Google US English Female',
    'Microsoft Zira',
    'Microsoft Jenny',
    'Samantha'
  ];

  for (const name of preferredNames) {
    const v = voices.find(voice => voice.name.includes(name));
    if (v) return v;
  }

  const femaleLike = voices.find(v =>
    v.lang.toLowerCase().startsWith('en') &&
    /fem|zira|jenny|samantha|eva|linda/i.test(v.name)
  );
  if (femaleLike) return femaleLike;

  const anyEnglish = voices.find(v => v.lang.toLowerCase().startsWith('en'));
  if (anyEnglish) return anyEnglish;

  return voices[0];
}

function initVoiceSelection() {
  if (typeof window.speechSynthesis === 'undefined') return;
  selectedVoice = pickFemaleVoice();
}

if (typeof window.speechSynthesis !== 'undefined') {
  window.speechSynthesis.onvoiceschanged = initVoiceSelection;
  initVoiceSelection();
}

function speakBotReply(text) {
  if (!voiceModeEnabled || !text || typeof window.speechSynthesis === 'undefined') return;

  const utter = new SpeechSynthesisUtterance(text);
  if (selectedVoice) {
    utter.voice = selectedVoice;
  }
  utter.rate = 1.0;
  utter.pitch = 1.05;
  utter.volume = 1.0;

  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(utter);
}

// DOMContentLoaded wrapper
document.addEventListener('DOMContentLoaded', () => {
  // Theme toggle persist - wired to data-theme
  const themeToggle = $('#themeToggle');
  const applyTheme = (isDark) => {
    document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
    document.body.classList.add('theme-transition');
    setTimeout(() => document.body.classList.remove('theme-transition'), 600);
    try {
      localStorage.setItem('sd-theme', isDark ? 'dark' : 'light');
    } catch (e) {}
  };

  const savedTheme = (() => {
    try {
      return localStorage.getItem('sd-theme');
    } catch {
      return null;
    }
  })();

  if (savedTheme === 'dark') {
    applyTheme(true);
    if (themeToggle) themeToggle.checked = true;
  } else {
    // default to light
    applyTheme(false);
    if (themeToggle) themeToggle.checked = false;
  }

  if (themeToggle) {
    themeToggle.addEventListener('change', () => applyTheme(themeToggle.checked));
  }

  // Translations - wire selects
  const langTop = $('#languageSelect');
  const langSide = $('#sidebarLanguageSelect');
  const savedLang = (() => {
    try {
      return localStorage.getItem('sd-lang');
    } catch {
      return null;
    }
  })() || 'en';

  if (langTop) langTop.value = savedLang;
  if (langSide) langSide.value = savedLang;

  requestAnimationFrame(() => {
    if (REMAINING_LANGUAGES.includes(savedLang)) {
      translateLanguageBatch(savedLang).then(() => {
        applyTranslations(savedLang);
      });
    } else {
      applyTranslations(savedLang);
    }
  });

  const handleLanguageChange = (value, source) => {
    console.log(`Language changed to ${value} from ${source}`);
    if (langTop && source !== langTop) langTop.value = value;
    if (langSide && source !== langSide) langSide.value = value;
    
    if (REMAINING_LANGUAGES.includes(value)) {
      console.log(`Fetching translations from LibreTranslate for ${value}...`);
      translateLanguageBatch(value).then(() => {
        applyTranslations(value);
      });
    } else {
      applyTranslations(value);
    }
    
    try {
      localStorage.setItem('sd-lang', value);
    } catch (e) {
      console.warn('Could not save language preference', e);
    }
  };

  if (langTop) {
    langTop.addEventListener('change', (e) => handleLanguageChange(e.target.value, langTop));
  }
  if (langSide) {
    langSide.addEventListener('change', (e) => handleLanguageChange(e.target.value, langSide));
  }

  // Sidebar/menu
  const menuToggle = $('#menuToggle');
  const sideMenu = $('#sideMenu');
  const closeMenu = $('#closeMenu');

  const closeSide = () => sideMenu?.classList.remove('open');

  if (menuToggle && sideMenu) {
    menuToggle.addEventListener('click', (ev) => {
      ev.stopPropagation();
      sideMenu.classList.toggle('open');
    });
    menuToggle.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        sideMenu.classList.toggle('open');
      }
    });
  }
  if (closeMenu) {
    closeMenu.addEventListener('click', closeSide);
  }

  document.addEventListener('click', (e) => {
    if (sideMenu && menuToggle && !sideMenu.contains(e.target) && !menuToggle.contains(e.target)) {
      closeSide();
    }
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeSide();
  });

  // Smooth scroll for anchors
  $$('a[href^="#"]').forEach(a => {
    a.addEventListener('click', function(e) {
      const href = this.getAttribute('href');
      const target = document.querySelector(href);
      if (target) {
        e.preventDefault();
        target.scrollIntoView({ behavior: 'smooth' });
      }
    });
  });

  // Gallery auto-slide
  const gallerySlider = $('.gallery-slider');
  if (gallerySlider) {
    let autoTimer = null;
    const startAuto = () => {
      if (autoTimer) clearInterval(autoTimer);
      autoTimer = setInterval(() => {
        const maxScroll = gallerySlider.scrollWidth - gallerySlider.clientWidth;
        if (maxScroll <= 0) return;
        const next = Math.min(gallerySlider.scrollLeft + 310, maxScroll);
        if (gallerySlider.scrollLeft >= maxScroll - 2) {
          gallerySlider.scrollTo({ left: 0, behavior: 'smooth' });
        } else {
          gallerySlider.scrollTo({ left: next, behavior: 'smooth' });
        }
      }, 2000);
    };

    gallerySlider.addEventListener('mouseenter', () => clearInterval(autoTimer));
    gallerySlider.addEventListener('mouseleave', startAuto);
    startAuto();
  }

  // ============ SWIFTDELIVERY CHATBOT NLU ============
  const INTENT_PATTERNS = {
    navigate_home: {
      keywords: ['home', 'main page', 'homepage', 'start', 'beginning', 'main', 'welcome'],
      phrases: ['take me home', 'go home', 'show me home', 'go to home page'],
      section: 'home'
    },
    navigate_gallery: {
      keywords: ['gallery', 'photos', 'images', 'pictures', 'portfolio', 'showcase', 'facilities', 'fleet', 'equipment'],
      phrases: ['show me gallery', 'show photos', 'view gallery', 'see our facilities', 'show equipment'],
      section: 'gallery'
    },
    navigate_services: {
      keywords: ['services', 'offerings', 'what do you offer', 'capabilities', 'features', 'packages', 'airfreight', 'warehouse', 'customs'],
      phrases: ['show services', 'what services', 'tell me about services', 'service options', 'your offerings'],
      section: 'services'
    },
    navigate_track: {
      keywords: ['track', 'tracking', 'where is my', 'status', 'shipment', 'package', 'delivery', 'cargo', 'courier'],
      phrases: ['track my package', 'check tracking', 'where is my shipment', 'track shipment', 'delivery status'],
      section: 'track'
    },
    navigate_contact: {
      keywords: ['contact', 'email', 'phone', 'address', 'reach us', 'call', 'message', 'contact us', 'get in touch'],
      phrases: ['contact us', 'how to contact', 'get in touch', 'contact information', 'reach out'],
      section: 'contact'
    },
    navigate_faq: {
      keywords: ['faq', 'frequently asked', 'questions', 'help', 'common issues', 'troubleshoot', 'problem', 'issue'],
      phrases: ['show faq', 'frequently asked questions', 'common questions', 'help me', 'how do i'],
      section: 'faq'
    },
    navigate_booking: {
      keywords: ['booking', 'book', 'reserve', 'schedule', 'send package', 'shipment', 'order', 'booking dashboard'],
      phrases: ['make booking', 'book shipment', 'schedule delivery', 'send package', 'new shipment'],
      section: 'booking'
    },
    navigate_testimonials: {
      keywords: ['testimonial', 'reviews', 'feedback', 'customers', 'what people say', 'customer feedback', 'success stories'],
      phrases: ['show testimonials', 'customer reviews', 'what customers say', 'success stories'],
      section: 'testimonials'
    },
    request_agent: {
      keywords: ['agent', 'representative', 'human', 'person', 'support', 'help', 'team', 'staff', 'operator', 'talk', 'speak', 'chat', 'contact', 'reach', 'connect', 'escalate', 'manager', 'admin'],
      phrases: [
        'speak with agent', 'talk to agent', 'speak to agent', 'talk with agent', 'speak with representative', 'human support', 'talk to human', 'speak to human', 'agent assistance', 'request agent', 'connect me with support',
        'i want to speak with agent', 'i want to speak to agent', 'i want to speak to an agent', 'i want to talk to an agent', 'i want to talk with agent', 'i need to speak with an agent', 'i need to speak to an agent', 'i need to talk to an agent', 'i need to talk with agent', 'can i speak with an agent', 'can i speak to an agent', 'can i talk to an agent', 'can i talk with an agent', 'let me speak with an agent', 'let me speak to an agent', 'let me talk to an agent', 'let me talk with agent',
        'connect me to an agent', 'put me through to an agent', 'transfer me to an agent', 'i need an agent', 'get me an agent',
        'speak to someone', 'talk to someone', 'speak to a person', 'talk to a person', 'i need a person', 'i need someone',
        'human agent', 'live agent', 'real person', 'real support', 'actual person', 'actual support', 'real agent', 'live support',
        'escalate to agent', 'escalate my issue', 'escalate to support', 'i need escalation',
        'agent please', 'support please', 'help please', 'assist me', 'can you help', 'i need help',
        'customer service', 'customer support', 'support team', 'support staff', 'help desk',
        'speak to manager', 'talk to manager', 'manager please', 'need manager',
        'contact agent', 'contact support', 'reach support', 'reach agent', 'reach someone',
        'not a bot', 'not an ai', 'not automated', 'want human', 'need human', 'real help',
        'call support', 'call agent', 'call someone', 'get support', 'get help'
      ],
      action: 'openFloatingChat',
      message: 'Hi, I would like to speak with a support agent. Can you help me?'
    },
    leave_feedback: {
      keywords: ['feedback', 'review', 'rate', 'opinion', 'comment', 'suggestion', 'complaint', 'complain', 'issue', 'problem', 'report', 'tell', 'express', 'say', 'message', 'inquire'],
      phrases: [
        'leave feedback', 'write review', 'give feedback', 'rate service', 'share review', 'leave comment', 'submit feedback',
        'i want to leave feedback', 'i want to give feedback', 'i have feedback', 'i would like to share feedback',
        'can i leave feedback', 'how do i leave feedback', 'where do i leave feedback',
        'complaint', 'i have a complaint', 'i want to complain', 'file a complaint', 'submit complaint',
        'suggestion', 'i have a suggestion', 'i want to suggest', 'i have an idea',
        'review service', 'share my experience', 'tell about experience', 'rate your service',
        'your service', 'how you did', 'the experience', 'the service was'
      ],
      action: 'openFloatingChat',
      message: 'I would like to leave feedback about my experience with SwiftDelivery.'
    },
    booking_assistance: {
      keywords: ['booking', 'book', 'reserve', 'schedule', 'shipment', 'send', 'package', 'help', 'assistance', 'problem', 'issue', 'trouble', 'difficulty'],
      phrases: [
        'help me book', 'i need help booking', 'booking assistance', 'help with booking',
        'i want to book', 'i need to book', 'can you help me book', 'help me make a booking',
        'booking problem', 'booking issue', 'booking trouble', 'trouble booking', 'problem booking',
        'can\'t book', 'cannot book', 'unable to book', 'can\'t make booking', 'having trouble booking',
        'book a shipment', 'send a package', 'schedule shipment', 'book delivery',
        'how to book', 'how do i book', 'help me send package', 'how to send'
      ],
      action: 'openFloatingChat',
      message: 'I need assistance with making a booking. Can you help me?'
    },
    password_reset: {
      keywords: ['password', 'reset', 'forgot', 'login', 'account', 'access', 'locked', 'sign', 'credential', 'authentication', 'verify', 'trouble'],
      phrases: [
        'forgot password', 'reset password', 'can\'t login', 'password reset', 'account locked', 'help login',
        'i forgot my password', 'i forgot password', 'i need to reset password', 'reset my password',
        'cannot login', 'unable to login', 'can\'t log in', 'trouble logging in', 'can\'t sign in',
        'account locked', 'locked out', 'account disabled', 'access denied',
        'help me login', 'help me sign in', 'can\'t access account', 'can\'t access profile',
        'forgot username', 'forget password', 'new password', 'change password',
        'authentication failed', 'login failed', 'sign in failed', 'login problem'
      ],
      action: 'openFloatingChat',
      message: 'I\'m having trouble with my account login. Can you help me reset my password?'
    },
    track_courier: {
      keywords: ['track', 'tracking', 'courier', 'package', 'shipment', 'delivery', 'status', 'where', 'locate', 'find'],
      phrases: [
        'track courier', 'track my courier', 'track package', 'track shipment', 'track delivery', 'track my package', 'track my shipment',
        'where is my package', 'where is my shipment', 'where is my courier', 'where is my delivery',
        'check tracking', 'check status', 'delivery status', 'shipment status', 'tracking status', 'courier status',
        'i want to track', 'i need to track', 'how do i track', 'track my order',
        'show me tracking', 'show tracking', 'show my tracking', 'show courier', 'show package'
      ],
      action: 'clickButton',
      buttonSelector: '#track',
      message: null
    },
    change_language: {
      keywords: ['language', 'english', 'french', 'spanish', 'german', 'chinese', 'arabic', 'hindi', 'portuguese', 'russian', 'japanese', 'italian', 'polish', 'korean', 'vietnamese', 'thai', 'turkish', 'indonesian', 'dutch', 'swedish', 'greek', 'czech', 'hungarian', 'romanian', 'ukrainian', 'bengali', 'swahili', 'urdu', 'amharic', 'filipino', 'punjabi', 'marathi', 'tamil', 'kannada', 'telugu', 'odia', 'gujarati', 'malay', 'burmese', 'finnish', 'danish', 'norwegian', 'hebrew', 'persian', 'fran√ßais', 'espa√±ol', 'deutsch', '‰∏≠Êñá', 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©', '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä', 'portugu√™s', '—Ä—É—Å—Å–∫–∏–π', 'Êó•Êú¨Ë™û', 'italiano', 'polski', 'ÌïúÍµ≠Ïñ¥', 'ti·∫øng vi·ªát', '‡πÑ‡∏ó‡∏¢', 't√ºrk√ße', 'bahasa indonesia', 'nederlands', 'svenska', 'ŒµŒªŒªŒ∑ŒΩŒπŒ∫Œ¨', 'ƒçe≈°tina', 'magyar', 'rom√¢nƒÉ', '—É–∫—Ä–∞—ó–Ω—Å—å–∫–∞', '‡¶¨‡¶æ‡¶ô‡ßç‡¶ó‡¶æ‡¶≤‡¶ø', 'kiswahili', 'ÿßÿ±ÿØŸà', '·ä†·àõ·à≠·äõ', 'tagalog', '‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä', '‡§Æ‡§∞‡§æ‡§†‡•Ä', '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç', '‡≤ï‡≤®‡≥ç‡≤®‡≤°', '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å', '‡¨ì‡¨°‡¨ø‡¨Ü', '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä', 'bahasa melayu', '·Äô·Äº·Äî·Ä∫·Äô·Ä¨', 'suomi', 'dansk', 'norsk', '◊¢◊ë◊®◊ô◊™', 'ŸÅÿßÿ±ÿ≥€å', 'translate', 'convert', 'use', 'set', 'prefer'],
      phrases: [
        'change language', 'change to', 'switch to', 'switch language', 'select language', 'set language', 'choose language', 'pick language', 'use language',
        'i want', 'i need', 'speak in', 'talk in', 'translate to', 'convert to', 'use', 'i prefer', 'prefer language',
        'change to english', 'change to french', 'change to spanish', 'change to german', 'change to chinese', 'change to arabic', 'change to portuguese', 'change to italian', 'change to german', 'change to russian', 'change to japanese', 'change to korean', 'change to thai', 'change to turkish', 'change to dutch', 'change to swedish', 'change to polish', 'change to hebrew', 'change to greek', 'change to czech', 'change to hungarian', 'change to romanian', 'change to portuguese', 'change to ukrainian', 'change to finnish', 'change to norwegian', 'change to danish', 'change to hindi', 'change to bengali', 'change to urdu', 'change to persian', 'change to turkish', 'change to indonesian', 'change to vietnamese', 'change to tagalog', 'change to swahili', 'change to malay', 'change to burmese', 'change to thai',
        'switch to english', 'switch to french', 'switch to spanish', 'switch to german', 'switch to chinese', 'switch to arabic', 'switch to russian', 'switch to japanese', 'switch to korean', 'switch to portuguese', 'switch to italian', 'switch to dutch', 'switch to swedish', 'switch to polish', 'switch to hebrew', 'switch to thai', 'switch to turkish', 'switch to indonesian', 'switch to vietnamese',
        'i want english', 'i want french', 'i want spanish', 'i want german', 'i want chinese', 'i want arabic', 'i want portuguese', 'i want italian', 'i want russian', 'i want japanese', 'i want korean', 'i want thai', 'i want turkish', 'i want dutch', 'i want swedish', 'i want polish', 'i want hebrew', 'i want greek', 'i want czech', 'i want hungarian', 'i want romanian', 'i want hindi', 'i want bengali', 'i want urdu', 'i want persian', 'i want vietnamese', 'i want tagalog', 'i want swahili', 'i want malay', 'i want burmese',
        'i need english', 'i need french', 'i need spanish', 'i need german', 'i need chinese', 'i need arabic', 'i need portuguese', 'i need russian', 'i need japanese', 'i need korean', 'i need thai', 'i need turkish', 'i need dutch', 'i need swedish', 'i need polish', 'i need hebrew', 'i need hindi', 'i need bengali', 'i need urdu', 'i need persian',
        'speak english', 'speak french', 'speak spanish', 'speak german', 'speak chinese', 'speak arabic', 'speak portuguese', 'speak russian', 'speak japanese', 'speak korean', 'speak thai', 'speak turkish', 'speak dutch', 'speak swedish', 'speak polish', 'speak hebrew', 'speak hindi', 'speak bengali', 'speak urdu', 'speak persian', 'speak vietnamese', 'speak tagalog', 'speak swahili', 'speak malay',
        'talk english', 'talk french', 'talk spanish', 'talk german', 'talk chinese', 'talk arabic', 'talk portuguese', 'talk russian', 'talk japanese', 'talk korean', 'talk thai', 'talk turkish', 'talk dutch', 'talk swedish', 'talk polish', 'talk hebrew', 'talk hindi', 'talk bengali', 'talk urdu', 'talk persian', 'talk vietnamese', 'talk tagalog',
        'language english', 'language french', 'language spanish', 'language german', 'language chinese', 'language arabic', 'language portuguese', 'language russian', 'language japanese', 'language korean', 'language thai', 'language turkish', 'language dutch', 'language swedish', 'language polish', 'language hebrew', 'language hindi', 'language bengali', 'language urdu', 'language persian',
        'english please', 'french please', 'spanish please', 'german please', 'chinese please', 'arabic please', 'portuguese please', 'russian please', 'japanese please', 'korean please', 'thai please', 'turkish please', 'dutch please', 'swedish please', 'polish please', 'hebrew please', 'hindi please', 'bengali please', 'urdu please', 'persian please',
        'use english', 'use french', 'use spanish', 'use german', 'use chinese', 'use arabic', 'use portuguese', 'use russian', 'use japanese', 'use korean',
        'in english', 'in french', 'in spanish', 'in german', 'in chinese', 'in arabic', 'in portuguese', 'in russian', 'in japanese', 'in korean', 'in thai', 'in turkish', 'in dutch', 'in swedish', 'in polish', 'in hebrew', 'in hindi', 'in bengali', 'in urdu', 'in persian',
        'prefer english', 'prefer french', 'prefer spanish', 'prefer german', 'prefer chinese', 'prefer arabic', 'prefer portuguese', 'prefer russian', 'prefer japanese', 'prefer korean'
      ],
      action: 'changeLanguage',
      message: null
    },
    show_faq: {
      keywords: ['faq', 'frequently asked', 'questions', 'help', 'question', 'answer', 'qa', 'help section', 'common questions', 'common issues', 'troubleshoot', 'problem', 'issue', 'how to', 'how do', 'what is', 'explain', 'clarify', 'understand', 'learn'],
      phrases: [
        'show faq', 'open faq', 'display faq', 'view faq', 'go to faq', 'visit faq', 'navigate faq', 'show me faq', 'show frequently asked questions',
        'frequently asked questions', 'faq section', 'faq page', 'faq tab', 'show questions', 'show answers', 'show help',
        'help section', 'help me', 'help please', 'i need help', 'i have a question', 'i have questions', 'do you have faq', 'show me faq',
        'common questions', 'common issues', 'common problems', 'answers to questions', 'question and answer', 'questions and answers',
        'troubleshoot', 'troubleshooting', 'how to troubleshoot', 'how do i fix', 'how do i solve', 'how can i fix',
        'what is', 'what are', 'how does', 'how do', 'how to use', 'how to do', 'how can i',
        'explain faq', 'show me help', 'i need answers', 'i need help', 'what can you help with', 'can you help me',
        'take me to faq', 'send me to faq', 'navigate to faq', 'go to help', 'show help section', 'show help page'
      ],
      action: 'clickButton',
      buttonSelector: 'a[href="#faq"]',
      navigateToSection: 'faq',
      message: null
    },
    toggle_theme: {
      keywords: ['theme', 'dark', 'night', 'day', 'light', 'mode', 'brightness', 'contrast', 'visibility', 'clear', 'readability', 'difficult', 'hard to see', 'hard to read', 'bright', 'too dark', 'too bright'],
      phrases: [
        'toggle theme', 'switch theme', 'change theme', 'dark mode', 'light mode', 'night mode', 'day mode',
        'turn on dark mode', 'turn off dark mode', 'enable dark mode', 'disable dark mode', 'turn on light mode', 'turn off light mode',
        'switch to dark', 'switch to light', 'switch to night', 'switch to day', 'go dark', 'go light',
        'i want dark', 'i want light', 'i need dark', 'i need light', 'i prefer dark', 'i prefer light',
        'dark please', 'light please', 'night please', 'day please', 'dark mode please', 'light mode please',
        'make it dark', 'make it light', 'make it darker', 'make it lighter', 'make it brighter', 'make it less bright',
        'hard to read', 'hard to see', 'difficult to read', 'difficult to see', 'too bright', 'too dark', 'text is not clear', 'text is unclear',
        'i can\'t see', 'i can\'t read', 'can\'t see clearly', 'can\'t read clearly', 'visibility issue', 'readability issue',
        'switch between dark and light', 'switch between light and dark', 'toggle dark light', 'toggle light dark',
        'enable night mode', 'disable night mode', 'activate night mode', 'deactivate night mode',
        'clearer', 'more readable', 'better contrast', 'improve readability', 'improve visibility'
      ],
      action: 'toggleTheme',
      message: null
    },
    service_specific: {
      keywords: ['airfreight', 'express', 'warehouse', 'warehousing', 'customs', 'clearance', 'temperature', 'controlled', 'temp controlled', 'dangerous goods', 'hazmat', 'perishable', 'pharma', 'pharmaceutical', 'cold chain', 'refrigerated', 'frozen', 'urgent', 'priority', 'fast', 'quick', 'slow'],
      phrases: [
        'airfreight', 'air freight', 'express delivery', 'priority delivery', 'urgent shipment',
        'warehouse', 'warehousing', 'storage', 'store my cargo', 'need storage', 'secure storage',
        'customs', 'customs clearance', 'border processing', 'import help', 'export help', 'customs documentation',
        'temperature controlled', 'temp controlled', 'cold storage', 'refrigerated cargo', 'frozen goods', 'pharma transport', 'pharmaceutical shipping', 'perishable goods', 'perishable cargo', 'cold chain',
        'dangerous goods', 'hazmat', 'hazardous materials', 'hazardous cargo', 'dangerous cargo', 'restricted items', 'special handling'
      ],
      action: 'scrollToService',
      section: 'services'
    },
    complaint_detection: {
      keywords: ['complaint', 'complain', 'issue', 'problem', 'damaged', 'late', 'delay', 'broken', 'missing', 'lost', 'unsatisfied', 'unhappy', 'disappointed', 'refund', 'refund', 'resolve', 'fix', 'help'],
      phrases: [
        'my package is late', 'package is delayed', 'delivery is late', 'shipment is late',
        'damaged goods', 'package is damaged', 'cargo is damaged', 'broken package', 'items are broken',
        'missing items', 'items missing', 'incomplete delivery', 'incomplete shipment', 'items are missing',
        'lost package', 'lost shipment', 'package lost', 'shipment lost', 'where is my package',
        'i have a problem', 'i have an issue', 'there is a problem', 'there is an issue', 'something is wrong',
        'refund please', 'i want a refund', 'need refund', 'request refund', 'refund this order',
        'not satisfied', 'not happy', 'disappointed', 'unsatisfied', 'poor service', 'bad experience',
        'complaint', 'file complaint', 'make complaint', 'submit complaint', 'i am upset', 'i am frustrated'
      ],
      action: 'openFloatingChat',
      isComplaint: true,
      message: 'üö® I detected a delivery issue with your shipment. Let me connect you with a specialist to resolve this quickly. Please provide your tracking ID or order number.'
    },
    account_authentication: {
      keywords: ['login', 'log in', 'sign in', 'signin', 'register', 'signup', 'sign up', 'create account', 'new account', 'forgot password', 'reset password', 'password reset', 'account locked', 'access account', 'profile', 'my account'],
      phrases: [
        'login', 'log in', 'log me in', 'sign in', 'sign me in', 'i want to login', 'i need to login', 'can i login',
        'register', 'sign up', 'create account', 'new account', 'create new account', 'how to register', 'how do i register',
        'forgot password', 'forgot my password', 'reset password', 'password reset', 'reset my password', 'i forgot password',
        'account locked', 'locked out', 'can\'t access account', 'can\'t login', 'unable to login', 'login problem', 'login issue',
        'my account', 'my profile', 'view my account', 'access my profile', 'open my account', 'view profile',
        'change password', 'update password', 'set password', 'new password', 'forgot username'
      ],
      action: 'navigateToAuth',
      section: 'contact'
    },
    testimonials_reviews: {
      keywords: ['testimonial', 'review', 'reviews', 'feedback', 'customer feedback', 'success stories', 'case studies', 'what customers', 'what people say', 'customer experience', 'user experience', 'social proof', 'ratings', 'rating'],
      phrases: [
        'show testimonials', 'show reviews', 'show customer feedback', 'customer testimonials', 'customer reviews',
        'what do customers say', 'what customers say', 'what people say', 'what do people say', 'customer success stories',
        'success stories', 'case studies', 'success cases', 'showcase', 'customer experience',
        'social proof', 'customer ratings', 'user ratings', 'show ratings', 'user reviews',
        'see reviews', 'view reviews', 'read testimonials', 'read reviews', 'see testimonials'
      ],
      action: 'clickButton',
      buttonSelector: 'a[href="#testimonials"]',
      navigateToSection: 'testimonials',
      message: null
    },
    smart_booking: {
      keywords: ['book', 'booking', 'reserve', 'shipment', 'send', 'package', 'delivery', 'help', 'assistance', 'schedule', 'arrange', 'plan', 'need to ship'],
      phrases: [
        'help me book', 'i want to book', 'i need to book', 'book a shipment', 'help with booking', 'booking assistance',
        'i need to send', 'i want to send', 'send a package', 'ship a package', 'help me send',
        'book delivery', 'schedule delivery', 'arrange delivery', 'plan delivery',
        'help me make a booking', 'can you help me book', 'i need booking help', 'how do i book',
        'book a delivery', 'new booking', 'make a booking', 'create booking'
      ],
      action: 'openFloatingChat',
      isBooking: true,
      message: 'I can help you with your booking! Let me guide you through the process. What type of service do you need - Airfreight, Warehouse, Customs, Temperature-Controlled, or Dangerous Goods?'
    },
    emergency_urgent: {
      keywords: ['urgent', 'emergency', 'asap', 'emergency', 'critical', 'immediately', 'right away', 'time-sensitive', 'time sensitive', 'rush', 'expedite', 'fastest', 'highest priority', 'top priority'],
      phrases: [
        'this is urgent', 'urgent matter', 'urgent issue', 'urgent request',
        'emergency', 'this is an emergency', 'it\'s an emergency', 'emergency help',
        'asap', 'as soon as possible', 'right now', 'immediately', 'right away', 'urgent please',
        'critical', 'this is critical', 'critical issue', 'critical problem', 'critical situation',
        'time-sensitive', 'time sensitive', 'time critical', 'rush this', 'expedite this',
        'fastest', 'fastest delivery', 'fastest possible', 'highest priority', 'top priority', 'rush order'
      ],
      action: 'openFloatingChat',
      isUrgent: true,
      priority: 'URGENT',
      message: 'üö® URGENT REQUEST RECEIVED üö® Your request has been flagged as urgent priority. I\'m immediately connecting you with our fastest-response support team. They will assist you right away.'
    }
  };

  const NAVIGATION_VERBS = [
    'show', 'display', 'view', 'see', 'look', 'take', 'go', 'move', 'navigate', 'jump',
    'scroll', 'bring', 'get', 'find', 'search', 'check', 'open', 'access', 'visit',
    'tell', 'explain', 'describe', 'inform', 'help', 'guide', 'direct'
  ];

  const LANGUAGE_MAP = {
    'en': ['english'],
    'fr': ['french', 'fran√ßais'],
    'es': ['spanish', 'espa√±ol'],
    'de': ['german', 'deutsch'],
    'zh': ['chinese', '‰∏≠Êñá', 'mandarin'],
    'ar': ['arabic', 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©'],
    'hi': ['hindi', '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä'],
    'pt': ['portuguese', 'portugu√™s'],
    'ru': ['russian', '—Ä—É—Å—Å–∫–∏–π'],
    'ja': ['japanese', 'Êó•Êú¨Ë™û'],
    'it': ['italian', 'italiano'],
    'pl': ['polish', 'polski'],
    'ko': ['korean', 'ÌïúÍµ≠Ïñ¥'],
    'vi': ['vietnamese', 'ti·∫øng vi·ªát'],
    'th': ['thai', '‡πÑ‡∏ó‡∏¢'],
    'tr': ['turkish', 't√ºrk√ße'],
    'id': ['indonesian', 'bahasa indonesia'],
    'nl': ['dutch', 'nederlands'],
    'sv': ['swedish', 'svenska'],
    'el': ['greek', 'ŒµŒªŒªŒ∑ŒΩŒπŒ∫Œ¨'],
    'cs': ['czech', 'ƒçe≈°tina'],
    'hu': ['hungarian', 'magyar'],
    'ro': ['romanian', 'rom√¢nƒÉ'],
    'uk': ['ukrainian', '—É–∫—Ä–∞—ó–Ω—Å—å–∫–∞'],
    'bn': ['bengali', '‡¶¨‡¶æ‡¶ô‡ßç‡¶ó‡¶æ‡¶≤‡¶ø'],
    'sw': ['swahili', 'kiswahili'],
    'ur': ['urdu', 'ÿßÿ±ÿØŸà'],
    'am': ['amharic', '·ä†·àõ·à≠·äõ'],
    'fil': ['filipino', 'tagalog'],
    'pa': ['punjabi', '‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä'],
    'mr': ['marathi', '‡§Æ‡§∞‡§æ‡§†‡•Ä'],
    'ta': ['tamil', '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç'],
    'kn': ['kannada', '‡≤ï‡≤®‡≥ç‡≤®‡≤°'],
    'te': ['telugu', '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å'],
    'or': ['odia', '‡¨ì‡¨°‡¨ø‡¨Ü'],
    'gu': ['gujarati', '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä'],
    'ms': ['malay', 'bahasa melayu'],
    'my': ['burmese', 'myanmar', '·Äô·Äº·Äî·Ä∫·Äô·Ä¨'],
    'fi': ['finnish', 'suomi'],
    'da': ['danish', 'dansk'],
    'no': ['norwegian', 'norsk'],
    'he': ['hebrew', '◊¢◊ë◊®◊ô◊™'],
    'fa': ['persian', 'ŸÅÿßÿ±ÿ≥€å']
  };

  function detectTargetLanguage(message) {
    const normalizedMsg = message.toLowerCase();
    for (const [langCode, langNames] of Object.entries(LANGUAGE_MAP)) {
      for (const name of langNames) {
        if (normalizedMsg.includes(name)) {
          return langCode;
        }
      }
    }
    return null;
  }

  const SERVICE_KEYWORDS = {
    'airfreight': { title: 'Airfreight Express', position: 0 },
    'warehouse': { title: 'Global Warehousing', position: 1 },
    'customs': { title: 'Customs Clearance', position: 2 },
    'temperature': { title: 'Temperature-Controlled Cargo', position: 3 },
    'dangerous': { title: 'Dangerous Goods Transport', position: 4 }
  };

  function detectServiceType(message) {
    const normalizedMsg = message.toLowerCase();
    for (const [keyword, serviceData] of Object.entries(SERVICE_KEYWORDS)) {
      if (normalizedMsg.includes(keyword)) {
        return serviceData;
      }
    }
    return null;
  }

  function scrollToServiceCard(serviceData) {
    console.log('üéØ Scrolling to service:', serviceData.title);
    navigateToChatbotSection('services');
    setTimeout(() => {
      const serviceCards = document.querySelectorAll('.service-card');
      if (serviceCards[serviceData.position]) {
        const card = serviceCards[serviceData.position];
        card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        if (!card.classList.contains('chatbot-highlight')) {
          card.classList.add('chatbot-highlight');
          setTimeout(() => card.classList.remove('chatbot-highlight'), 3000);
        }
        console.log('‚úÖ Scrolled to:', serviceData.title);
      }
    }, 500);
  }

  function saveConversationContext(userMessage, intentData) {
    try {
      const context = {
        lastMessage: userMessage,
        lastIntent: intentData.intent,
        lastService: intentData.serviceType,
        timestamp: Date.now(),
        sessionId: sessionStorage.getItem('chatbot_session') || Math.random().toString(36).substring(7)
      };
      sessionStorage.setItem('chatbot_session', context.sessionId);
      sessionStorage.setItem('chatbot_context', JSON.stringify(context));
      console.log('üíæ Context saved:', context);
    } catch (e) {
      console.warn('Context storage error:', e);
    }
  }

  function getConversationContext() {
    try {
      const context = sessionStorage.getItem('chatbot_context');
      return context ? JSON.parse(context) : null;
    } catch (e) {
      console.warn('Context retrieval error:', e);
      return null;
    }
  }

  function saveUserInfo(name, email) {
    try {
      const userInfo = { name, email, timestamp: Date.now() };
      localStorage.setItem('chatbot_user_info', JSON.stringify(userInfo));
      console.log('üë§ User info saved');
    } catch (e) {
      console.warn('User info storage error:', e);
    }
  }

  function getUserInfo() {
    try {
      const userInfo = localStorage.getItem('chatbot_user_info');
      return userInfo ? JSON.parse(userInfo) : null;
    } catch (e) {
      console.warn('User info retrieval error:', e);
      return null;
    }
  }

  function autoFillFormFields(name, email) {
    const nameInputs = document.querySelectorAll('input[name="name"], input[placeholder*="Name"], input[placeholder*="name"]');
    const emailInputs = document.querySelectorAll('input[name="email"], input[placeholder*="Email"], input[placeholder*="email"]');
    
    if (name) {
      nameInputs.forEach(input => {
        if (!input.value) input.value = name;
      });
    }
    if (email) {
      emailInputs.forEach(input => {
        if (!input.value) input.value = email;
      });
    }
    console.log('‚úèÔ∏è Form fields auto-filled');
  }

  function suggestFormFilling() {
    const userInfo = getUserInfo();
    if (userInfo && userInfo.name && userInfo.email) {
      console.log('üí° Form pre-fill available:', userInfo);
      return userInfo;
    }
    return null;
  }

  function detectUrgency(message) {
    const urgentKeywords = ['urgent', 'emergency', 'asap', 'critical', 'immediately', 'right away', 'rush', 'expedite'];
    const normalizedMsg = message.toLowerCase();
    return urgentKeywords.some(keyword => normalizedMsg.includes(keyword));
  }

  function hasNavigationVerb(message) {
    const words = message.split(/\s+/);
    return words.some(word => {
      const cleanWord = word.replace(/[^\w]/g, '').toLowerCase();
      return NAVIGATION_VERBS.includes(cleanWord);
    });
  }

  function detectChatbotIntent(userMessage) {
    const normalizedMessage = userMessage.toLowerCase().trim();
    const hasNavVerb = hasNavigationVerb(normalizedMessage);
    let highestScore = 0;
    let detectedIntent = null;
    let targetSection = null;
    let action = null;
    let actionMessage = null;

    for (const [intent, patterns] of Object.entries(INTENT_PATTERNS)) {
      let score = 0;
      
      patterns.phrases.forEach((phrase) => {
        if (normalizedMessage.includes(phrase)) {
          score += 10;
        }
      });
      
      patterns.keywords.forEach((keyword) => {
        if (normalizedMessage.includes(keyword)) {
          const baseScore = 1;
          if (hasNavVerb) {
            score += baseScore * 5;
          } else {
            score += baseScore;
          }
        }
      });
      
      if (score > highestScore) {
        highestScore = score;
        detectedIntent = intent;
        targetSection = patterns.section;
        action = patterns.action || null;
        actionMessage = patterns.message || null;
      }
    }

    let targetLanguage = null;
    if (action === 'changeLanguage') {
      targetLanguage = detectTargetLanguage(userMessage);
    }

    const serviceType = detectServiceType(userMessage);
    const isUrgent = detectUrgency(userMessage);
    const context = getConversationContext();

    return {
      intent: detectedIntent,
      confidence: Math.min(highestScore / 10, 1),
      section: targetSection,
      shouldNavigate: highestScore > 0 && detectedIntent !== null,
      action: action,
      actionMessage: actionMessage,
      buttonSelector: INTENT_PATTERNS[detectedIntent]?.buttonSelector || null,
      targetLanguage: targetLanguage,
      serviceType: serviceType,
      isUrgent: isUrgent,
      isComplaint: INTENT_PATTERNS[detectedIntent]?.isComplaint || false,
      isBooking: INTENT_PATTERNS[detectedIntent]?.isBooking || false,
      priority: isUrgent ? 'URGENT' : 'NORMAL',
      context: context
    };
  }

  function navigateToChatbotSection(sectionId) {
    console.log('üîç Looking for section:', sectionId);
    if (!sectionId) {
      console.error('‚ùå No sectionId provided!');
      return false;
    }
    
    const element = document.getElementById(sectionId);
    if (!element) {
      console.error(`‚ùå Section #${sectionId} not found in DOM`);
      console.log('Available sections:', Array.from(document.querySelectorAll('section[id]')).map(s => s.id));
      return false;
    }
    
    console.log('‚úÖ Section found:', sectionId);
    const headerHeight = 80;
    const elementPosition = element.getBoundingClientRect().top + window.scrollY;
    const offsetPosition = elementPosition - headerHeight;
    
    console.log('Scrolling to position:', offsetPosition);
    window.scrollTo({
      top: offsetPosition,
      behavior: 'smooth',
    });
    
    element.focus({ preventScroll: true });
    
    if (element.classList && !element.classList.contains('chatbot-highlight')) {
      element.classList.add('chatbot-highlight');
      console.log('‚ú® Highlight animation applied');
      setTimeout(() => {
        element.classList.remove('chatbot-highlight');
      }, 3000);
    }
    
    console.log('‚úÖ Navigation completed for:', sectionId);
    return true;
  }

  // Add highlight animation if not already present
  if (!document.querySelector('style[data-chatbot-highlight]')) {
    const style = document.createElement('style');
    style.setAttribute('data-chatbot-highlight', 'true');
    style.textContent = `
      @keyframes chatbot-highlight-pulse {
        0% {
          background-color: rgba(79, 70, 229, 0.1);
          box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.7);
        }
        50% {
          box-shadow: 0 0 0 15px rgba(79, 70, 229, 0);
        }
        100% {
          background-color: rgba(79, 70, 229, 0);
          box-shadow: 0 0 0 0 rgba(79, 70, 229, 0);
        }
      }
      
      .chatbot-highlight {
        animation: chatbot-highlight-pulse 1s ease-out !important;
      }
    `;
    document.head.appendChild(style);
  }

  // Debug testing function - accessible from console
  window.testChatbotNLU = function(testMessage) {
    console.log('üß™ Testing NLU with message:', testMessage);
    const result = detectChatbotIntent(testMessage);
    console.log('Result:', result);
    if (result.action && result.confidence > 0.3) {
      console.log('‚úÖ Action triggered! Executing:', result.action);
      executeChatbotAction(result);
    } else if (result.shouldNavigate && result.confidence > 0.3) {
      console.log('‚úÖ Navigation triggered! Attempting to scroll to:', result.section);
      navigateToChatbotSection(result.section);
    } else {
      console.log('‚ö†Ô∏è No action triggered. Confidence:', result.confidence, 'Threshold: 0.3');
    }
    return result;
  };

  window.testFloatingChatEvent = function(message) {
    console.log('üß™ Testing floating chat event with message:', message);
    const event = new CustomEvent('openFloatingChatWithMessage', {
      detail: { message: message }
    });
    window.dispatchEvent(event);
    console.log('‚úÖ Event dispatched');
  };

  window.listIntentPatterns = function() {
    console.log('üìã Available Intent Patterns:');
    for (const [intent, patterns] of Object.entries(INTENT_PATTERNS)) {
      console.log(`\n${intent}:`);
      console.log('  Phrases:', patterns.phrases);
      console.log('  Keywords:', patterns.keywords);
      console.log('  Section:', patterns.section);
    }
  };

  window.testServiceNavigation = function(serviceName) {
    console.log(`üß™ Testing service navigation for: ${serviceName}`);
    const result = detectChatbotIntent(`I need ${serviceName}`);
    console.log('Result:', result);
    if (result.serviceType) {
      console.log('‚úÖ Service detected:', result.serviceType);
      scrollToServiceCard(result.serviceType);
    } else {
      console.log('‚ùå Service not detected');
    }
  };

  window.testComplaintDetection = function(complaintMessage) {
    console.log(`üß™ Testing complaint detection: "${complaintMessage}"`);
    const result = detectChatbotIntent(complaintMessage);
    console.log('Result:', result);
    console.log('Is Complaint:', result.isComplaint);
    if (result.isComplaint) {
      console.log('‚úÖ Complaint detected - should escalate to specialist');
    }
  };

  window.testUrgentDetection = function(urgentMessage) {
    console.log(`üß™ Testing urgent detection: "${urgentMessage}"`);
    const result = detectChatbotIntent(urgentMessage);
    console.log('Result:', result);
    console.log('Is Urgent:', result.isUrgent, '| Priority:', result.priority);
    if (result.isUrgent) {
      console.log('‚úÖ Urgent request detected - should escalate to priority queue');
    }
  };

  window.testContextMemory = function() {
    console.log('üß™ Testing context memory');
    const testContext = {
      lastMessage: 'I need airfreight',
      lastIntent: 'service_specific',
      lastService: { title: 'Airfreight Express', position: 0 },
      timestamp: Date.now(),
      sessionId: 'test-session-123'
    };
    sessionStorage.setItem('chatbot_context', JSON.stringify(testContext));
    const retrieved = getConversationContext();
    console.log('Saved context:', testContext);
    console.log('Retrieved context:', retrieved);
    console.log(retrieved ? '‚úÖ Context saved and retrieved' : '‚ùå Context retrieval failed');
  };

  window.testUserInfoStorage = function(name, email) {
    console.log('üß™ Testing user info storage');
    saveUserInfo(name, email);
    const retrieved = getUserInfo();
    console.log('Saved:', { name, email });
    console.log('Retrieved:', retrieved);
    console.log(retrieved && retrieved.name === name ? '‚úÖ User info saved correctly' : '‚ùå User info storage failed');
  };

  window.testFormAutoFill = function() {
    console.log('üß™ Testing form auto-fill');
    const userInfo = suggestFormFilling();
    if (userInfo) {
      console.log('üí° User info available for pre-fill:', userInfo);
      autoFillFormFields(userInfo.name, userInfo.email);
      console.log('‚úÖ Form fields would be auto-filled');
    } else {
      console.log('‚ö†Ô∏è No stored user info found. Try testUserInfoStorage first');
    }
  };

  window.testBookingAssistance = function(serviceType) {
    console.log(`üß™ Testing smart booking assistance for: ${serviceType}`);
    const result = detectChatbotIntent(`I want to book ${serviceType}`);
    console.log('Result:', result);
    if (result.isBooking && result.serviceType) {
      console.log(`‚úÖ Booking detected with service: ${result.serviceType.title}`);
    } else {
      console.log('Result:', result);
    }
  };

  window.testAllIntents = function() {
    console.log('üß™ Testing all new intent patterns:');
    const testCases = [
      { msg: 'I need airfreight express', expects: 'service_specific' },
      { msg: 'My package is damaged', expects: 'complaint_detection' },
      { msg: 'I forgot my password', expects: 'account_authentication' },
      { msg: 'Show me customer reviews', expects: 'testimonials_reviews' },
      { msg: 'Help me book a shipment', expects: 'smart_booking' },
      { msg: 'This is urgent!', expects: 'emergency_urgent' }
    ];

    testCases.forEach(test => {
      const result = detectChatbotIntent(test.msg);
      const passed = result.intent === test.expects;
      console.log(`${passed ? '‚úÖ' : '‚ùå'} "${test.msg}" => ${result.intent} (expected: ${test.expects})`);
    });
  };

  window.chatbotDebugInfo = function() {
    console.log('üîç Chatbot Debug Information:');
    console.log('Current Session:', {
      sessionId: sessionStorage.getItem('chatbot_session'),
      context: getConversationContext(),
      userInfo: getUserInfo()
    });
    console.log('Total Intent Patterns:', Object.keys(INTENT_PATTERNS).length);
    console.log('Service Keywords:', Object.keys(SERVICE_KEYWORDS));
    console.log('Available Testing Functions:');
    console.log('  - testServiceNavigation(serviceName)');
    console.log('  - testComplaintDetection(message)');
    console.log('  - testUrgentDetection(message)');
    console.log('  - testContextMemory()');
    console.log('  - testUserInfoStorage(name, email)');
    console.log('  - testFormAutoFill()');
    console.log('  - testBookingAssistance(serviceType)');
    console.log('  - testAllIntents()');
    console.log('  - chatbotDebugInfo()');
  };

  // Chatbot
  const chatbot = $('#chatbot');
  const closeChatbotBtn = $('#closeChatbot');
  const sendChatBtn = $('#sendChat');
  const chatMessage = $('#chatMessage');
  const chatBody = $('.chat-body');

  // Create chat toggle button if it doesn't exist
  if (!document.getElementById('chatToggleBtn')) {
    const chatToggleBtn = document.createElement('button');
    chatToggleBtn.id = 'chatToggleBtn';
    chatToggleBtn.textContent = 'üí¨ Chat';
    chatToggleBtn.style.position = 'fixed';
    chatToggleBtn.style.bottom = '32px';
    chatToggleBtn.style.right = '32px';
    chatToggleBtn.style.zIndex = '2100';
    chatToggleBtn.style.padding = '12px 24px';
    chatToggleBtn.style.borderRadius = '24px';
    chatToggleBtn.style.background = 'var(--primary-color)';
    chatToggleBtn.style.color = '#fff';
    chatToggleBtn.style.border = 'none';
    chatToggleBtn.style.cursor = 'pointer';
    chatToggleBtn.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
    document.body.appendChild(chatToggleBtn);
  }

  const chatToggleBtn = $('#chatToggleBtn');

  if (chatbot) {
    chatbot.style.display = 'none';
    chatbot.style.position = 'fixed';
    chatbot.style.bottom = '100px';
    chatbot.style.right = '32px';
    chatbot.style.zIndex = '2000';
    chatbot.style.maxHeight = '500px';
    chatbot.style.width = '300px';
    chatbot.style.transition = 'transform 0.3s ease, opacity 0.3s ease';
  }

  if (chatToggleBtn) {
    chatToggleBtn.addEventListener('click', () => {
      if (chatbot) {
        const isVisible = chatbot.style.display !== 'none';
        chatbot.style.display = isVisible ? 'none' : 'flex';
        if (!isVisible) {
          chatbot.style.transform = 'translateY(20px)';
          chatbot.style.opacity = '0';
          requestAnimationFrame(() => {
            chatbot.style.transform = 'translateY(0)';
            chatbot.style.opacity = '1';
          });
        }
      }
    });
  }

  // Close chat function
  function closeChatbotPanel() {
    if (chatbot) {
      chatbot.style.transform = 'translateY(20px)';
      chatbot.style.opacity = '0';
      setTimeout(() => chatbot.style.display = 'none', 300);
    }
  }

  if (closeChatbotBtn) {
    closeChatbotBtn.addEventListener('click', closeChatbotPanel);
  }

  // NEW: wire voiceModeToggle button
  const voiceModeToggle = document.getElementById('voiceModeToggle');
  if (voiceModeToggle) {
    voiceModeToggle.addEventListener('click', () => {
      voiceModeEnabled = !voiceModeEnabled;
      voiceModeToggle.textContent = voiceModeEnabled ? 'Voice: On' : 'Voice: Off';
      voiceModeToggle.style.background = voiceModeEnabled ? '#10b981' : '#4f46e5';
      if (!voiceModeEnabled && window.speechSynthesis) {
        window.speechSynthesis.cancel();
      }
    });
  }

  // Decode JWT token from localStorage - used to route chat for verified users
  function decodeJwtToken(token) {
    if (!token) return null;
    try {
      const payload = token.split('.')[1];
      if (!payload) return null;
      // Support standard and URL-safe base64 encodings
      const normalized = payload.replace(/-/g, '+').replace(/_/g, '/');
      const json = atob(normalized);
      return JSON.parse(json);
    } catch (e) {
      console.warn('decodeJwtToken failed', e);
      return null;
    }
  }

  function executeChatbotAction(intentData) {
    if (!intentData.action) return;
    
    console.log('üéØ Executing action:', intentData.action);
    
    if (intentData.action === 'openFloatingChat') {
      console.log('üì± Opening floating chat with message:', intentData.actionMessage);
      let message = intentData.actionMessage;
      
      if (intentData.isUrgent && intentData.priority === 'URGENT') {
        console.log('üö® URGENT flag detected - escalating to priority queue');
        message = intentData.actionMessage;
      }
      
      if (intentData.isComplaint) {
        console.log('‚ö†Ô∏è Complaint detected - routing to specialist');
        message = intentData.actionMessage;
      }
      
      if (intentData.isBooking && intentData.serviceType) {
        console.log('üì¶ Booking intent with service:', intentData.serviceType.title);
        message += ` (Service: ${intentData.serviceType.title})`;
      }
      
      const userInfo = suggestFormFilling();
      if (userInfo) {
        message += `\n\nI see you've used our services before. Your info: ${userInfo.name} (${userInfo.email})`;
      }
      
      const event = new CustomEvent('openFloatingChatWithMessage', {
        detail: { message: message, priority: intentData.priority, isComplaint: intentData.isComplaint }
      });
      window.dispatchEvent(event);
    } 
    else if (intentData.action === 'clickButton') {
      console.log('üîò Clicking button:', intentData.buttonSelector);
      const button = document.querySelector(intentData.buttonSelector);
      if (button) {
        console.log('‚úÖ Button found and clicked:', intentData.buttonSelector);
        button.click();
        
        const sectionToNavigate = INTENT_PATTERNS[intentData.intent]?.navigateToSection;
        if (sectionToNavigate) {
          setTimeout(() => {
            navigateToChatbotSection(sectionToNavigate);
          }, 300);
        } else {
          const href = button.getAttribute('href');
          if (href && href.startsWith('#')) {
            setTimeout(() => {
              navigateToChatbotSection(href.substring(1));
            }, 300);
          }
        }
      } else {
        console.error('‚ùå Button not found:', intentData.buttonSelector);
      }
    }
    else if (intentData.action === 'scrollToService') {
      console.log('üéØ Scroll to service action');
      if (intentData.serviceType) {
        scrollToServiceCard(intentData.serviceType);
      } else {
        navigateToChatbotSection('services');
      }
    }
    else if (intentData.action === 'navigateToAuth') {
      console.log('üîê Navigate to auth');
      navigateToChatbotSection(intentData.section);
    }
    else if (intentData.action === 'changeLanguage') {
      if (intentData.targetLanguage) {
        console.log('üåç Changing language to:', intentData.targetLanguage);
        window.changeLanguage(intentData.targetLanguage);
        console.log('‚úÖ Language changed successfully');
      } else {
        console.error('‚ùå No target language detected');
      }
    }
    else if (intentData.action === 'toggleTheme') {
      console.log('üåì Toggling theme');
      const themeToggle = document.getElementById('themeToggle');
      if (themeToggle) {
        themeToggle.click();
        const newTheme = themeToggle.checked ? 'Dark' : 'Light';
        console.log(`‚úÖ Theme switched to ${newTheme} mode`);
      } else {
        console.error('‚ùå Theme toggle button not found');
      }
    }
    
    saveConversationContext(intentData.messageText || '', intentData);
  }

  window.executeChatbotAction = executeChatbotAction;

  // Send message to backend - ALWAYS use /api/chat (Groq endpoint) for all users to ensure AI responses
  async function sendMessageToBackend() {
    if (!chatMessage || !chatBody) return;

    const text = chatMessage.value.trim();
    if (!text) return;

    const userEl = document.createElement('div');
    userEl.className = 'user-message';
    userEl.textContent = text;
    chatBody.appendChild(userEl);
    chatMessage.value = '';
    chatBody.scrollTop = chatBody.scrollHeight;

    try {
      // Use inline NLU for intelligent navigation
      console.log('üì® Message received in sendMessageToBackend:', text);
      const intentData = detectChatbotIntent(text);
      intentData.messageText = text;
      
      console.log('ü§ñ SwiftDelivery Bot Intent:', {
        intent: intentData.intent,
        confidence: intentData.confidence,
        section: intentData.section,
        shouldNavigate: intentData.shouldNavigate,
        action: intentData.action,
        serviceType: intentData.serviceType,
        isUrgent: intentData.isUrgent,
        isComplaint: intentData.isComplaint,
        isBooking: intentData.isBooking
      });

      saveConversationContext(text, intentData);

      // If action detected (agent, feedback, etc), execute it
      if (intentData.action && intentData.confidence > 0.3) {
        console.log('‚úÖ Action intent detected! Executing action...');
        console.log('üìä Action details:', { action: intentData.action, confidence: intentData.confidence, message: intentData.actionMessage });
        executeChatbotAction(intentData);
      } else if (intentData.action) {
        console.log('‚ö†Ô∏è Action detected but confidence too low:', intentData.confidence, '(need > 0.3)', 'Action:', intentData.action);
      }
      // If high confidence navigation intent, execute scrolling
      else if (intentData.shouldNavigate && intentData.confidence > 0.3) {
        console.log('‚úÖ Confidence check passed! Preparing to navigate...');
        setTimeout(() => {
          console.log('üó∫Ô∏è Executing navigation to:', intentData.section);
          const navSuccess = navigateToChatbotSection(intentData.section);
          console.log('üó∫Ô∏è Navigation executed:', {
            success: navSuccess,
            section: intentData.section
          });
        }, 300);
      } else {
        console.log('‚ö†Ô∏è Confidence check FAILED! Confidence:', intentData.confidence, '(need > 0.3)');
      }

      const token = localStorage.getItem('token');
      const headers = {
        'Content-Type': 'application/json'
      };
      if (token) {
        headers.Authorization = `Bearer ${token}`;
      }

      // ALWAYS route to /api/chat for Groq AI responses, regardless of user status
      const response = await fetch('http://localhost:5000/api/chat', {
        method: 'POST',
        headers,
        body: JSON.stringify({ message: text })
      });

      if (!response.ok) {
        throw new Error(`Backend error: ${response.status}`);
      }

      const data = await response.json();
      const reply = (typeof data.reply === 'string' && data.reply.trim())
        ? data.reply.trim()
        : 'Sorry, I could not process your message.';

      const botEl = document.createElement('div');
      botEl.className = 'bot-message';
      botEl.textContent = reply;
      chatBody.appendChild(botEl);
      chatBody.scrollTop = chatBody.scrollHeight;

      // NEW: speak reply in female voice when voice mode is on
      speakBotReply(reply);
    } catch (error) {
      console.error('Chat error', error);
      const errorEl = document.createElement('div');
      errorEl.className = 'bot-message';
      errorEl.textContent = 'Error: Could not reach the backend. Make sure it is running on port 5000.';
      chatBody.appendChild(errorEl);
      chatBody.scrollTop = chatBody.scrollHeight;

      speakBotReply(errorEl.textContent);
    }
  }

  if (sendChatBtn) {
    sendChatBtn.addEventListener('click', (e) => {
      e.preventDefault();
      sendMessageToBackend();
    });
  }

  if (chatMessage) {
    chatMessage.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        sendMessageToBackend();
      }
    });
  }

  // Voice Assistant for Chatbot
  const voiceToggleBtn = $('#voiceToggleBtn');
  const voiceControls = $('#voiceControls');
  const voiceListenBtn = $('#voiceListenBtn');
  const voiceSendBtn = $('#voiceSendBtn');
  let recognition = null;
  let isListening = false;
  let voiceTranscript = '';
  let voiceEnabled = false;

  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  if (SpeechRecognition) {
    recognition = new SpeechRecognition();
    recognition.continuous = false;
    recognition.interimResults = true;
    recognition.lang = 'en-US';
    recognition.maxAlternatives = 1;
    
    recognition.onstart = () => {
      isListening = true;
      voiceTranscript = '';
      if (voiceListenBtn) voiceListenBtn.textContent = 'üõë Stop';
      console.log('üé§ Voice recognition started');
    };

    recognition.onresult = (event) => {
      let interim = '';
      let final = '';
      let confidence = 0;
      
      for (let i = event.resultIndex; i < event.results.length; i++) {
        const transcript = event.results[i][0].transcript;
        const conf = event.results[i][0].confidence;
        
        if (event.results[i].isFinal) {
          final += transcript + ' ';
          confidence = Math.max(confidence, conf);
        } else {
          interim += transcript;
        }
      }
      
      voiceTranscript = (final || interim).trim();
      
      if (voiceTranscript) {
        const displayText = voiceTranscript.charAt(0).toUpperCase() + voiceTranscript.slice(1);
        if (chatMessage) chatMessage.value = displayText;
        if (voiceSendBtn && final) voiceSendBtn.style.display = 'block';
        
        if (final) {
          console.log(`‚úÖ Voice recognized (confidence: ${(confidence * 100).toFixed(0)}%): ${voiceTranscript}`);
        }
      }
    };

    recognition.onend = () => {
      isListening = false;
      if (voiceListenBtn) voiceListenBtn.textContent = 'üé§ Speak';
      console.log('üé§ Voice recognition ended');
    };

    recognition.onerror = (event) => {
      console.error('üî¥ Voice recognition error:', event.error);
      if (voiceListenBtn) voiceListenBtn.textContent = 'üé§ Speak';
      
      let errorMsg = 'Voice recognition error: ';
      switch(event.error) {
        case 'no-speech': errorMsg += 'No speech detected. Please try again.'; break;
        case 'audio-capture': errorMsg += 'No microphone found. Check permissions.'; break;
        case 'network': errorMsg += 'Network error. Check your connection.'; break;
        default: errorMsg += event.error;
      }
      console.warn(errorMsg);
    };
  }

  if (voiceToggleBtn) {
    voiceToggleBtn.addEventListener('click', () => {
      voiceEnabled = !voiceEnabled;
      voiceToggleBtn.style.background = voiceEnabled ? '#10b981' : '#9ca3af';
      voiceToggleBtn.textContent = voiceEnabled ? 'üîä Voice' : 'üîá Voice';

      // When enabling voice input, also auto-enable full voice mode
      if (voiceModeToggle && voiceEnabled) {
        voiceModeEnabled = true;
        voiceModeToggle.textContent = 'Voice: On';
        voiceModeToggle.style.background = '#10b981';
      }

      if (voiceEnabled && voiceControls) {
        voiceControls.style.display = 'flex';
      } else if (voiceControls) {
        voiceControls.style.display = 'none';
      }
      if (voiceSendBtn) voiceSendBtn.style.display = 'none';
      if (chatMessage) chatMessage.value = '';
      if (!voiceEnabled && recognition && isListening) {
        recognition.stop();
      }
      if (!voiceEnabled && window.speechSynthesis) {
        window.speechSynthesis.cancel();
      }
    });
  }

  if (voiceListenBtn && recognition) {
    voiceListenBtn.addEventListener('click', () => {
      if (!voiceEnabled) return;
      if (isListening) {
        recognition.stop();
      } else {
        recognition.start();
      }
    });
  }

  if (voiceSendBtn) {
    voiceSendBtn.addEventListener('click', (e) => {
      e.preventDefault();
      if (!chatMessage) return;
      if (chatMessage.value.trim()) {
        sendMessageToBackend();
        voiceSendBtn.style.display = 'none';
        voiceTranscript = '';
      }
    });
  }

  // FAQ
  $$('.faq details').forEach(d => {
    d.addEventListener('toggle', () => d.classList.toggle('open', d.open));
  });

  // Form validation
  $$('form').forEach(form => {
    form.addEventListener('submit', (e) => {
      const required = Array.from(form.querySelectorAll('input[required], textarea[required]'));
      let ok = true;
      for (const el of required) {
        if (!el.value.trim()) {
          el.style.borderColor = 'red';
          ok = false;
        } else {
          el.style.borderColor = '';
        }
      }
      if (!ok) {
        e.preventDefault();
        const first = required.find(i => !i.value.trim());
        if (first) first.focus();
      }
    });
  });

  // Newsletter
  const newsletterForm = $('#newsletterForm');
  if (newsletterForm) {
    newsletterForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const email = $('#newsletterEmail')?.value.trim();
      if (email) {
        alert(`Thanks for subscribing ${email}!`);
        newsletterForm.reset();
      } else {
        alert('Please enter an email.');
      }
    });
  }

  // Register
  const registerForm = document.getElementById('registerForm');
  if (registerForm) {
    registerForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.getElementById('registerUsername')?.value;
      const email = document.getElementById('registerEmail')?.value;
      const password = document.getElementById('registerPassword')?.value;

      try {
        const res = await fetch('http://localhost:5000/api/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username: name, email, password })
        });
        const data = await res.json();
        if ($('#output')) {
          $('#output').textContent = JSON.stringify(data, null, 2);
        }
      } catch (err) {
        console.error('Register error', err);
        if ($('#output')) {
          $('#output').textContent = 'Error registering. Please try again.';
        }
      }
    });
  }

  // Login
  const loginForm = document.getElementById('loginForm');
  if (loginForm) {
    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;

      try {
        const res = await fetch('http://localhost:5000/api/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password })
        });
        const data = await res.json();
        if (data.token) {
          localStorage.setItem('token', data.token);
          if ($('#output')) {
            $('#output').textContent = 'Logged in successfully!';
          }
        } else {
          if ($('#output')) {
            $('#output').textContent = 'Login failed';
          }
        }
      } catch (err) {
        console.error('Login error', err);
        if ($('#output')) {
          $('#output').textContent = 'Login failed';
        }
      }
    });
  }

  // Protected route example
  async function fetchProfile() {
    const token = localStorage.getItem('token');
    if (!token) {
      if ($('#output')) $('#output').textContent = 'No token found. Please login first.';
      return;
    }
    try {
      const res = await fetch('http://localhost:5000/api/profile', {
        headers: { Authorization: `Bearer ${token}` }
      });
      const data = await res.json();
      if ($('#output')) {
        $('#output').textContent = JSON.stringify(data, null, 2);
      }
    } catch (err) {
      console.error('Profile error', err);
    }
  }

  // Accessibility
  window.addEventListener('keydown', (e) => {
    if (e.key === 'Tab') document.body.classList.add('user-is-tabbing');
  });
  window.addEventListener('mousedown', () => {
    document.body.classList.remove('user-is-tabbing');
  });

  // Reveal on scroll
  const revealElements = $$('section, .card');
  revealElements.forEach(el => {
    el.style.transition = 'opacity 0.8s cubic-bezier(0.77, 0, 0.175, 1), transform 0.7s cubic-bezier(0.77, 0, 0.175, 1)';
    el.style.opacity = '0';
    el.style.transform = 'translateY(40px)';
  });

  const revealOnScroll = () => {
    revealElements.forEach(el => {
      const rect = el.getBoundingClientRect();
      if (rect.top < window.innerHeight - 120) {
        el.style.opacity = '1';
        el.style.transform = 'translateY(0)';
      }
    });
  };

  window.addEventListener('scroll', revealOnScroll);
  revealOnScroll();

  // Initialize frontend tracking map with default location
  initFrontendTrackingMap();

  // Initial fade-in
  requestAnimationFrame(() => document.body.style.opacity = '1');
});

const API_BASE_URL = 'http://localhost:5000';
let trackingModalMap = null;
let trackingModalMarker = null;
let courierAnimationMarker = null;
let courierAnimationInterval = null;
let currentMapView = 'satellite';
let pathPolyline = null;
let frontendTrackingMap = null;

function initFrontendTrackingMap() {
  const mapContainer = document.getElementById('trackingMap');
  if (!mapContainer || frontendTrackingMap) return;

  try {
    frontendTrackingMap = L.map(mapContainer).setView([6.5244, 3.3792], 6);

    const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '¬© OpenStreetMap contributors',
      maxZoom: 19
    });

    osm.addTo(frontendTrackingMap);

    L.marker([6.5244, 3.3792], {
      icon: L.icon({
        iconUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgZmlsbD0iIzRmNDZlNSIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjIiLz48dGV4dCB4PSIxMiIgeT0iMTYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiNmZmYiIGZvbnQtd2VpZ2h0PSJib2xkIj7inJI8L3RleHQ+PC9zdmc+',
        iconSize: [32, 32],
        iconAnchor: [16, 16],
        popupAnchor: [0, -16]
      })
    }).addTo(frontendTrackingMap).bindPopup('<b>SwiftDelivery Hub</b><br/>Nigeria, West Africa');

    setTimeout(() => {
      frontendTrackingMap.invalidateSize();
    }, 100);
  } catch (err) {
    console.warn('Frontend map initialization failed:', err);
  }
}

function initTrackingModalMap() {
  const mapContainer = document.getElementById('trackingModalMap');
  if (!mapContainer) return;

  if (trackingModalMap) {
    setTimeout(() => {
      trackingModalMap.invalidateSize();
    }, 100);
    return;
  }

  trackingModalMap = L.map(mapContainer).setView([6.5244, 3.3792], 13);

  const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    attribution: '¬© Esri',
    maxZoom: 18,
    name: 'Satellite'
  });

  const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© OpenStreetMap contributors',
    maxZoom: 19,
    name: 'Street Map'
  });

  satellite.addTo(trackingModalMap);
  L.control.layers({ 'Satellite': satellite, 'Street Map': osm }, {}, { position: 'topright' }).addTo(trackingModalMap);

  setTimeout(() => {
    trackingModalMap.invalidateSize();
  }, 100);
}

function animateMapZoom(targetZoom = 14) {
  if (!trackingModalMap) return;
  trackingModalMap.setZoom(10);
  let currentZoom = 10;
  const zoomInterval = setInterval(() => {
    if (currentZoom >= targetZoom) {
      clearInterval(zoomInterval);
      return;
    }
    currentZoom += 1;
    trackingModalMap.setZoom(currentZoom);
  }, 100);
}

function getCourierMarkerIcon(status) {
  const colorMap = {
    'Pending Pickup': '#f59e0b',
    'Pickup Assigned': '#3b82f6',
    'Pickup Accepted': '#10b981',
    'Enroute to Facility': '#8b5cf6',
    'Arrived at Hub or Facility': '#6366f1',
    'In Transit': '#06b6d4',
    'Out for Delivery': '#f97316',
    'Delivered': '#22c55e',
    'Awaiting Receipt': '#14b8a6',
    'Delivery Failed': '#ef4444',
    'Returned to Sender': '#64748b'
  };
  const color = colorMap[status] || '#9ca3af';

  return L.divIcon({
    html: `<div style="background-color: ${color}; width: 36px; height: 36px; border-radius: 50%; border: 3px solid white; box-shadow: 0 3px 8px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; font-size: 18px; transition: all 0.3s ease;">üì¶</div>`,
    iconSize: [42, 42],
    className: 'package-marker'
  });
}

function getActiveCourierIcon() {
  return L.divIcon({
    html: `<div style="animation: bounce 1s infinite; background-color: #4f46e5; width: 32px; height: 32px; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 0 2px #4f46e5, 0 3px 8px rgba(79, 70, 229, 0.4); display: flex; align-items: center; justify-content: center; font-size: 16px;">üöö</div>`,
    iconSize: [38, 38],
    className: 'courier-marker courier-marker-active'
  });
}

function animateCourierAlongPath(location, endLocation) {
  if (courierAnimationInterval) clearInterval(courierAnimationInterval);
  if (courierAnimationMarker) trackingModalMap.removeLayer(courierAnimationMarker);
  if (pathPolyline) trackingModalMap.removeLayer(pathPolyline);

  const startLat = location.lat;
  const startLng = location.lng;
  const endLat = endLocation?.lat || startLat;
  const endLng = endLocation?.lng || startLng;

  const path = [[startLat, startLng], [endLat, endLng]];
  
  pathPolyline = L.polyline(path, {
    color: '#4f46e5',
    weight: 4,
    opacity: 0.7,
    lineCap: 'round',
    lineJoin: 'round'
  }).addTo(trackingModalMap);

  pathPolyline.bringToFront();

  courierAnimationMarker = L.marker([startLat, startLng], {
    icon: getActiveCourierIcon(),
    zIndexOffset: 1000
  }).addTo(trackingModalMap);

  const steps = 150;
  let currentStep = 0;

  courierAnimationInterval = setInterval(() => {
    currentStep++;
    const progress = currentStep / steps;

    if (progress >= 1) {
      clearInterval(courierAnimationInterval);
      courierAnimationMarker.setLatLng([endLat, endLng]);
      return;
    }

    const interpolatedLat = startLat + (endLat - startLat) * progress;
    const interpolatedLng = startLng + (endLng - startLng) * progress;

    courierAnimationMarker.setLatLng([interpolatedLat, interpolatedLng]);
  }, 30);
}

function toggleTrackingMapView() {
  if (!trackingModalMap) return;
  const layers = trackingModalMap._layers;
  const satelliteLayer = Object.values(layers).find(layer => layer.options?.name === 'Satellite');
  const streetLayer = Object.values(layers).find(layer => layer.options?.name === 'Street Map');

  if (currentMapView === 'satellite') {
    if (satelliteLayer) trackingModalMap.removeLayer(satelliteLayer);
    if (streetLayer) trackingModalMap.addLayer(streetLayer);
    currentMapView = 'street';
    document.querySelector('.satellite-toggle').textContent = 'üó∫Ô∏è Street';
  } else {
    if (streetLayer) trackingModalMap.removeLayer(streetLayer);
    if (satelliteLayer) trackingModalMap.addLayer(satelliteLayer);
    currentMapView = 'satellite';
    document.querySelector('.satellite-toggle').textContent = 'üõ∞Ô∏è Satellite';
  }
  
  setTimeout(() => {
    trackingModalMap.invalidateSize();
  }, 50);
}

function openTrackingModal(trackingData) {
  const modal = document.getElementById('trackingModalOverlay');
  if (!modal) return;

  modal.classList.add('active');
  modal.setAttribute('style', 'display: flex !important; visibility: visible !important; opacity: 1 !important; pointer-events: auto !important;');
  document.body.style.overflow = 'hidden';

  setTimeout(() => {
    initTrackingModalMap();
  }, 50);

  document.getElementById('modalTrackingId').textContent = trackingData.trackingId;
  document.getElementById('modalStatus').textContent = trackingData.status;
  document.getElementById('modalRecipient').textContent = trackingData.user?.fullName || '-';
  document.getElementById('modalEmail').textContent = trackingData.user?.email || '-';
  document.getElementById('modalLocation').textContent = `${trackingData.location.lat.toFixed(4)}, ${trackingData.location.lng.toFixed(4)}`;
  document.getElementById('modalUpdated').textContent = new Date(trackingData.updatedAt).toLocaleString();

  const statusBadgeEl = document.getElementById('modalStatusBadge');
  let badgeClass = 'delivered';
  if (['Out for Delivery', 'In Transit', 'Enroute to Facility'].includes(trackingData.status)) {
    badgeClass = 'in-transit';
  } else if (['Pending Pickup', 'Pickup Assigned'].includes(trackingData.status)) {
    badgeClass = 'pending';
  } else if (trackingData.status === 'Delivery Failed') {
    badgeClass = 'failed';
  }
  statusBadgeEl.className = `status-badge ${badgeClass}`;
  statusBadgeEl.textContent = trackingData.status;

  setTimeout(() => {
    if (trackingModalMarker) trackingModalMap.removeLayer(trackingModalMarker);

    const location = [trackingData.location.lat, trackingData.location.lng];
    trackingModalMarker = L.marker(location, { icon: getCourierMarkerIcon(trackingData.status) }).addTo(trackingModalMap);
    trackingModalMarker.bindPopup(`<strong>${trackingData.user?.fullName || 'Package'}</strong><br/>Status: ${trackingData.status}<br/>ID: ${trackingData.trackingId}`).openPopup();

    trackingModalMap.setView(location, 14);
    trackingModalMap.invalidateSize();
    animateMapZoom(14);

    const activeStatuses = ['Out for Delivery', 'In Transit', 'Enroute to Facility'];
    if (activeStatuses.includes(trackingData.status)) {
      setTimeout(() => {
        const offsetLat = trackingData.location.lat + 0.003;
        const offsetLng = trackingData.location.lng + 0.003;
        animateCourierAlongPath(trackingData.location, { lat: offsetLat, lng: offsetLng });
      }, 400);
    }
  }, 250);

  setTimeout(() => {
    renderTrackingTimeline(trackingData);
    renderEventLog(trackingData);
    setupEventLogToggle();
  }, 300);

  currentMapView = 'satellite';
}

function closeTrackingModal() {
  const modal = document.getElementById('trackingModalOverlay');
  if (!modal) return;

  stopAutoRefresh();
  modal.classList.remove('active');
  modal.setAttribute('style', 'display: none !important; visibility: hidden !important; opacity: 0 !important; pointer-events: none !important;');
  document.body.style.overflow = '';

  if (courierAnimationInterval) clearInterval(courierAnimationInterval);
  if (courierAnimationMarker && trackingModalMap) trackingModalMap.removeLayer(courierAnimationMarker);
  if (pathPolyline && trackingModalMap) trackingModalMap.removeLayer(pathPolyline);
  if (trackingModalMarker && trackingModalMap) trackingModalMap.removeLayer(trackingModalMarker);
}

function attachTrackingModalListeners() {
  const trackingForm = document.getElementById('trackingForm');
  if (trackingForm) {
    trackingForm.removeEventListener('submit', handleTrackingFormSubmit);
    trackingForm.addEventListener('submit', handleTrackingFormSubmit);
  }

  const closeBtn = document.getElementById('closeTrackingModal');
  if (closeBtn) {
    closeBtn.removeEventListener('click', closeTrackingModal);
    closeBtn.addEventListener('click', closeTrackingModal);
  }

  const closeModalBtn = document.getElementById('closeModalButton');
  if (closeModalBtn) {
    closeModalBtn.removeEventListener('click', closeTrackingModal);
    closeModalBtn.addEventListener('click', closeTrackingModal);
  }

  const modalOverlay = document.getElementById('trackingModalOverlay');
  if (modalOverlay) {
    modalOverlay.removeEventListener('click', handleOverlayClick);
    modalOverlay.addEventListener('click', handleOverlayClick);
  }

  const clearBtn = document.getElementById('clearTrackingBtn');
  if (clearBtn) {
    clearBtn.removeEventListener('click', clearTrackingSearch);
    clearBtn.addEventListener('click', clearTrackingSearch);
  }
}

function clearTrackingSearch() {
  const trackingInfo = document.getElementById('trackingInfo');
  if (trackingInfo) {
    trackingInfo.style.display = 'none';
  }
  const trackingIdInput = document.getElementById('trackingIdInput');
  if (trackingIdInput) {
    trackingIdInput.value = '';
  }
}

function showTrackingLoadingSpinner() {
  const trackingForm = document.getElementById('trackingForm');
  let spinner = document.getElementById('trackingLoadingSpinner');
  
  if (!spinner) {
    spinner = document.createElement('div');
    spinner.id = 'trackingLoadingSpinner';
    spinner.className = 'tracking-spinner';
    spinner.style.marginTop = '10px';
    trackingForm.appendChild(spinner);
  }
  spinner.style.display = 'block';
}

function hideTrackingLoadingSpinner() {
  const spinner = document.getElementById('trackingLoadingSpinner');
  if (spinner) spinner.style.display = 'none';
}

function showToast(message, type = 'info') {
  let container = document.getElementById('toastContainer');
  if (!container) {
    container = document.createElement('div');
    container.id = 'toastContainer';
    container.className = 'toast-container';
    document.body.appendChild(container);
  }

  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  
  const iconMap = {
    success: '‚úì',
    error: '‚úó',
    warning: '‚ö†',
    info: '‚Ñπ'
  };
  
  toast.innerHTML = `
    <span class="toast-icon">${iconMap[type]}</span>
    <span>${message}</span>
  `;
  
  container.appendChild(toast);
  
  setTimeout(() => {
    toast.classList.add('remove');
    setTimeout(() => toast.remove(), 300);
  }, 4000);
}

function renderTrackingTimeline(trackingData) {
  const timelineContainer = document.getElementById('timelineContainer');
  const trackingTimeline = document.getElementById('trackingTimeline');
  
  if (!timelineContainer || !trackingTimeline) return;
  
  const milestones = [
    { label: 'Pickup', icon: 'üì¶', status: 'completed', time: trackingData.createdAt },
    { label: 'In Transit', icon: '‚úàÔ∏è', status: trackingData.status === 'In Transit' ? 'current' : trackingData.status !== 'Pending Pickup' ? 'completed' : 'pending', time: null },
    { label: 'Out for Delivery', icon: 'üöö', status: trackingData.status === 'Out for Delivery' ? 'current' : trackingData.status === 'Delivered' ? 'completed' : 'pending', time: null },
    { label: 'Delivered', icon: '‚úÖ', status: trackingData.status === 'Delivered' ? 'completed' : 'pending', time: trackingData.deliveredAt || null }
  ];
  
  timelineContainer.innerHTML = '';
  
  milestones.forEach((milestone, index) => {
    const timelineItem = document.createElement('div');
    timelineItem.className = 'timeline-item';
    timelineItem.style.animationDelay = `${index * 0.1}s`;
    
    const marker = document.createElement('div');
    marker.className = `timeline-marker ${milestone.status}`;
    marker.textContent = milestone.icon;
    
    const content = document.createElement('div');
    content.className = 'timeline-content';
    
    const label = document.createElement('div');
    label.className = 'timeline-label';
    label.textContent = milestone.label;
    
    const time = document.createElement('div');
    time.className = 'timeline-time';
    time.textContent = milestone.time ? new Date(milestone.time).toLocaleDateString() : '-';
    
    content.appendChild(label);
    content.appendChild(time);
    
    timelineItem.appendChild(marker);
    timelineItem.appendChild(content);
    timelineContainer.appendChild(timelineItem);
  });
  
  const progress = calculateDeliveryProgress(trackingData.status);
  animateProgressBar(progress);
  
  trackingTimeline.style.display = 'block';
}

function calculateDeliveryProgress(status) {
  const statusMap = {
    'Pending Pickup': 10,
    'Pickup Assigned': 20,
    'In Transit': 50,
    'Out for Delivery': 80,
    'Delivered': 100,
    'Delivery Failed': 50
  };
  return statusMap[status] || 0;
}

function animateProgressBar(targetProgress) {
  const progressBar = document.getElementById('modalProgressBar');
  if (!progressBar) return;
  
  let currentProgress = 0;
  const increment = targetProgress / 30;
  
  const interval = setInterval(() => {
    currentProgress += increment;
    if (currentProgress >= targetProgress) {
      currentProgress = targetProgress;
      clearInterval(interval);
    }
    progressBar.style.width = currentProgress + '%';
  }, 30);
}

function renderEventLog(trackingData) {
  const eventLogContainer = document.getElementById('eventLogContainer');
  const eventLogItems = document.getElementById('eventLogItems');
  
  if (!eventLogContainer || !eventLogItems) return;
  
  const events = [
    { title: 'Order Confirmed', icon: '‚úì', time: trackingData.createdAt, location: 'System' },
    { title: 'Pickup Scheduled', icon: 'üìÖ', time: trackingData.createdAt, location: trackingData.origin || 'Origin' },
    { title: 'In Transit', icon: '‚úàÔ∏è', time: null, location: 'Enroute' },
    { title: 'Arrived at Hub', icon: 'üè¢', time: null, location: 'Distribution Center' },
    { title: 'Out for Delivery', icon: 'üöö', time: null, location: trackingData.destination || 'Delivery Location' },
    { title: 'Delivered', icon: '‚úÖ', time: trackingData.deliveredAt, location: trackingData.user?.fullName || 'Recipient' }
  ];
  
  eventLogItems.innerHTML = '';
  
  events.forEach(event => {
    if (event.time || event.title === 'Out for Delivery' || event.title === 'In Transit') {
      const eventItem = document.createElement('div');
      eventItem.className = 'event-log-item';
      
      eventItem.innerHTML = `
        <span class="event-log-icon">${event.icon}</span>
        <div class="event-log-details">
          <div class="event-log-title">${event.title}</div>
          <div class="event-log-time">${event.time ? new Date(event.time).toLocaleString() : 'In Progress'}</div>
          <div class="event-log-location">üìç ${event.location}</div>
        </div>
      `;
      
      eventLogItems.appendChild(eventItem);
    }
  });
  
  eventLogContainer.style.display = 'block';
}

function setupEventLogToggle() {
  const eventLogHeader = document.getElementById('eventLogHeader');
  const eventLogItems = document.getElementById('eventLogItems');
  const eventLogToggle = document.getElementById('eventLogToggle');
  
  if (!eventLogHeader) return;
  
  eventLogHeader.addEventListener('click', () => {
    const isCollapsed = eventLogItems.classList.contains('collapsed');
    
    if (isCollapsed) {
      eventLogItems.classList.remove('collapsed');
      eventLogToggle.classList.add('expanded');
    } else {
      eventLogItems.classList.add('collapsed');
      eventLogToggle.classList.remove('expanded');
    }
  });
}

let autoRefreshInterval = null;
let lastTrackingStatus = null;
let currentTrackingId = null;

function startAutoRefresh(trackingId) {
  currentTrackingId = trackingId;
  if (autoRefreshInterval) clearInterval(autoRefreshInterval);
  
  autoRefreshInterval = setInterval(() => {
    refreshTrackingData(trackingId);
  }, 5000);
}

function stopAutoRefresh() {
  if (autoRefreshInterval) {
    clearInterval(autoRefreshInterval);
    autoRefreshInterval = null;
  }
}

function refreshTrackingData(trackingId) {
  if (!trackingId) return;
  
  fetch(`${API_BASE_URL}/api/tracking/${trackingId}`)
    .then(res => {
      if (!res.ok) throw new Error('Tracking data unavailable');
      return res.json();
    })
    .then(data => {
      if (data.status !== lastTrackingStatus) {
        lastTrackingStatus = data.status;
        showToast(`üìç Status Updated: ${data.status}`, 'info');
        updateTrackingDisplay(data);
      }
    })
    .catch(err => {
      console.error('Auto-refresh error:', err);
    });
}

function updateTrackingDisplay(trackingData) {
  document.getElementById('modalStatus').textContent = trackingData.status;
  document.getElementById('modalLocation').textContent = `${trackingData.location.lat.toFixed(4)}, ${trackingData.location.lng.toFixed(4)}`;
  document.getElementById('modalUpdated').textContent = new Date(trackingData.updatedAt).toLocaleString();
  
  const statusBadgeEl = document.getElementById('modalStatusBadge');
  let badgeClass = 'delivered';
  if (['Out for Delivery', 'In Transit', 'Enroute to Facility'].includes(trackingData.status)) {
    badgeClass = 'in-transit';
  } else if (['Pending Pickup', 'Pickup Assigned'].includes(trackingData.status)) {
    badgeClass = 'pending';
  } else if (trackingData.status === 'Delivery Failed') {
    badgeClass = 'failed';
  }
  statusBadgeEl.className = `status-badge ${badgeClass}`;
  statusBadgeEl.textContent = trackingData.status;
  
  if (trackingModalMarker) trackingModalMap.removeLayer(trackingModalMarker);
  const location = [trackingData.location.lat, trackingData.location.lng];
  trackingModalMarker = L.marker(location, { icon: getCourierMarkerIcon(trackingData.status) }).addTo(trackingModalMap);
  trackingModalMarker.bindPopup(`<strong>${trackingData.user?.fullName || 'Package'}</strong><br/>Status: ${trackingData.status}<br/>ID: ${trackingData.trackingId}`).openPopup();
  
  renderTrackingTimeline(trackingData);
  renderEventLog(trackingData);
  
  const progress = calculateDeliveryProgress(trackingData.status);
  animateProgressBar(progress);
  
  if (trackingData.status === 'Delivered') {
    stopAutoRefresh();
    showToast('‚úì Package Delivered!', 'success');
  }
}

function handleTrackingFormSubmit(e) {
  e.preventDefault();
  const trackingId = document.getElementById('trackingIdInput').value.trim();
  const trackingForm = document.getElementById('trackingForm');
  const trackBtn = trackingForm.querySelector('button[type="submit"]');

  if (!trackingId) return;

  trackBtn.classList.add('pulse-btn');
  trackBtn.disabled = true;
  trackBtn.textContent = 'üîÑ Loading...';
  
  showTrackingLoadingSpinner();

  fetch(`${API_BASE_URL}/api/tracking/${trackingId}`)
    .then(res => {
      if (!res.ok) throw new Error('Tracking ID not found');
      return res.json();
    })
    .then(data => {
      openTrackingModal(data);
      lastTrackingStatus = data.status;
      startAutoRefresh(trackingId);
      showToast('‚úì Tracking data loaded successfully!', 'success');
      document.getElementById('trackingIdInput').value = '';
    })
    .catch(err => {
      showToast('‚úó ' + (err.message || 'Failed to retrieve tracking information'), 'error');
    })
    .finally(() => {
      trackBtn.classList.remove('pulse-btn');
      trackBtn.disabled = false;
      trackBtn.textContent = 'üîç Track Shipment';
      hideTrackingLoadingSpinner();
    });
}

function handleOverlayClick(e) {
  if (e.target === this) {
    closeTrackingModal();
  }
}

document.addEventListener('DOMContentLoaded', attachTrackingModalListeners);

if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', attachTrackingModalListeners);
} else {
  attachTrackingModalListeners();
}

document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    const modal = document.getElementById('trackingModalOverlay');
    if (modal && modal.classList.contains('active')) {
      closeTrackingModal();
    }
    const messaging = document.getElementById('messagingSystemOverlay');
    if (messaging && messaging.classList.contains('active')) {
      closeMessaging();
    }
  }
});

let conversationMessages = [];

// Messaging system
function isUserLoggedIn() {
  return !!localStorage.getItem('token');
}

function openMessaging() {
  if (!isUserLoggedIn()) {
    return;
  }
  
  const overlay = document.getElementById('messagingSystemOverlay');
  if (overlay) {
    overlay.classList.add('active');
    document.getElementById('agentStatus').textContent = 'Agent is online';
    const input = document.getElementById('messageInput');
    if (input) {
      input.focus();
    }
  }
}

function closeMessaging() {
  const overlay = document.getElementById('messagingSystemOverlay');
  if (overlay) {
    overlay.classList.remove('active');
  }
  
  if (window.messageInterval) {
    clearInterval(window.messageInterval);
    window.messageInterval = null;
  }
}

const originalOpenMessaging = openMessaging;
openMessaging = function() {
  originalOpenMessaging();
  fetchMessages();
  if (!window.messageInterval) {
    window.messageInterval = setInterval(fetchMessages, 5000);
  }
};

function escapeHtml(text) {
  const map = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#039;'
  };
  return text.replace(/[&<>"']/g, m => map[m]);
}

function sendMessage(text) {
  if (!text.trim()) return;

  const messagingBody = document.getElementById('messagingBody');
  const messageItem = document.createElement('div');
  messageItem.className = 'message-item customer';

  const timeSent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  messageItem.innerHTML = `
    <div>
      <div class="message-bubble">${escapeHtml(text)}</div>
      <div class="message-time">${timeSent} - sent</div>
    </div>
  `;

  messagingBody.appendChild(messageItem);
  messagingBody.scrollTop = messagingBody.scrollHeight;

  conversationMessages.push({
    type: 'customer',
    text: text,
    timestamp: new Date()
  });

  const token = localStorage.getItem('token');
  if (!token) return;

  fetch(`${API_BASE_URL}/api/messages/send`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      Authorization: `Bearer ${token}`
    },
    body: JSON.stringify({ text })
  }).catch(err => {
    console.error('Error sending message:', err);
  });
}

async function fetchMessages() {
  const token = localStorage.getItem('token');
  if (!token) return;

  try {
    const res = await fetch(`${API_BASE_URL}/api/messages/conversation`, {
      headers: {
        Authorization: `Bearer ${token}`
      }
    });
    if (!res.ok) throw new Error('Failed to fetch messages');

    const data = await res.json();
    const messages = data.messages || [];

    const messagingBody = document.getElementById('messagingBody');
    if (!messagingBody) return;

    messagingBody.innerHTML = '';

    messages.forEach(msg => {
      const messageItem = document.createElement('div');
      messageItem.className = `message-item ${msg.senderType === 'admin' ? 'admin' : 'customer'}`;
      const timeSent = new Date(msg.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      const statusText = msg.senderType === 'admin'
        ? (msg.status === 'delivered' ? 'delivered' : 'sent')
        : 'sent';

      messageItem.innerHTML = `
        <div>
          <div class="message-bubble">${escapeHtml(msg.text)}</div>
          <div class="message-time">${timeSent} - ${statusText}</div>
        </div>
      `;

      messagingBody.appendChild(messageItem);
    });

    messagingBody.scrollTop = messagingBody.scrollHeight;
  } catch (err) {
    console.error('Error fetching messages:', err);
  }
}

function attachMessagingListeners() {
  const openMessagingBtn = document.getElementById('openMessagingBtn');
  if (openMessagingBtn) {
    openMessagingBtn.addEventListener('click', openMessaging);
  }

  const closeMessagingBtn = document.getElementById('closeMessagingBtn');
  if (closeMessagingBtn) {
    closeMessagingBtn.addEventListener('click', closeMessaging);
  }

  const messageForm = document.getElementById('messageForm');
  if (messageForm) {
    messageForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const input = document.getElementById('messageInput');
      if (!input) return;
      const text = input.value.trim();
      if (!text) return;
      sendMessage(text);
      input.value = '';
    });
  }

  const floatingBtn = document.getElementById('floatingMessagingBtn');
  if (floatingBtn) {
    floatingBtn.addEventListener('click', openMessaging);
  }
}

function updateMessagingButtonVisibility() {
  const floatingBtn = document.getElementById('floatingMessagingBtn');
  if (!floatingBtn) return;

  if (isUserLoggedIn()) {
    floatingBtn.classList.add('visible');
  } else {
    floatingBtn.classList.remove('visible');
  }
}

if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', attachMessagingListeners);
} else {
  attachMessagingListeners();
}

setInterval(() => {
  updateMessagingButtonVisibility();
}, 1000);

```

```my-frontend\package.json
{
  "name": "frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@react-google-maps/api": "^2.20.7",
    "firebase": "^11.0.1",
    "leaflet": "^1.9.4",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-leaflet": "^5.0.0",
    "react-router-dom": "^7.9.6",
    "socket.io-client": "^4.7.2"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/react": "^19.2.2",
    "@types/react-dom": "^19.2.2",
    "@vitejs/plugin-react": "^5.1.0",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "vite": "^7.2.2"
  }
}

```

```my-frontend\package-lock.json
{
  "name": "frontend",
  "version": "0.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "frontend",
      "version": "0.0.0",
      "dependencies": {
        "@react-google-maps/api": "^2.20.7",
        "firebase": "^11.0.1",
        "leaflet": "^1.9.4",
        "react": "^19.2.0",
        "react-dom": "^19.2.0",
        "react-leaflet": "^5.0.0",
        "react-router-dom": "^7.9.6",
        "socket.io-client": "^4.7.2"
      },
      "devDependencies": {
        "@eslint/js": "^9.39.1",
        "@types/react": "^19.2.2",
        "@types/react-dom": "^19.2.2",
        "@vitejs/plugin-react": "^5.1.0",
        "eslint": "^9.39.1",
        "eslint-plugin-react-hooks": "^5.2.0",
        "eslint-plugin-react-refresh": "^0.4.24",
        "globals": "^16.5.0",
        "vite": "^7.2.2"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.27.1",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.5.tgz",
      "integrity": "sha512-6uFXyCayocRbqhZOB+6XcuZbkMNimwfVGFji8CTZnCzOHVGvDqzvitu1re2AU5LROliz7eQPhB8CpAMvnx9EjA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.5.tgz",
      "integrity": "sha512-e7jT4DxYvIDLk1ZHmU/m/mB19rex9sv0c2ftBtjSBv+kVM/902eh0fINUzD7UwLLNR+jU585GxUJ8/EBfAM5fw==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-module-transforms": "^7.28.3",
        "@babel/helpers": "^7.28.4",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/remapping": "^2.3.5",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.5.tgz",
      "integrity": "sha512-3EwLFhZ38J4VyIP6WNtt2kUdW9dokXA9Cr4IVIFHuCpZ3H8/YFOl5JjZHisrn1fATPBmKKqXzDFvh9fUwHz6CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/gen-mapping": "^0.3.12",
        "@jridgewell/trace-mapping": "^0.3.28",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.2",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-globals": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-plugin-utils": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.27.1.tgz",
      "integrity": "sha512-1gn1Up5YXka3YYAHGKpbideQ5Yjf1tDa9qYcgysz+cNCXukyLl6DjPXhD3VRwSb8c0J9tA4b2+rHEZtc6R0tlw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.28.5.tgz",
      "integrity": "sha512-qSs4ifwzKJSV39ucNjsvc6WVHs6b7S03sOh2OcHF9UHfVPqWWALUsNUVzhSBiItjRZoLHx7nIarVjqKVusUZ1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.5.tgz",
      "integrity": "sha512-KKBU1VGYR7ORr3At5HAtUQ+TV3SzRCXmA/8OdDZiLDBIZxVyzXuztPjfLd3BV1PRAQGCMWWSHYhL0F8d5uHBDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.5"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-self": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-self/-/plugin-transform-react-jsx-self-7.27.1.tgz",
      "integrity": "sha512-6UzkCs+ejGdZ5mFFC/OCUrv028ab2fp1znZmCZjAOBKiBK2jXD1O+BPSfX8X2qjJ75fZBMSnQn3Rq2mrBJK2mw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-source": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-source/-/plugin-transform-react-jsx-source-7.27.1.tgz",
      "integrity": "sha512-zbwoTsBruTeKB9hSq73ha66iFeJHuaFkUbwvqElnygoNbj/jHRsSeokowZFN3CZ64IvEqcmmkVe89OPXc7ldAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/parser": "^7.27.2",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.5.tgz",
      "integrity": "sha512-TCCj4t55U90khlYkVV/0TfkJkAkUg3jZFA3Neb7unZT8CPok7iiRfaX0F+WnqWqt7OxhOn0uBKXCw4lbL8W0aQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-globals": "^7.28.0",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.5",
        "debug": "^4.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.5.tgz",
      "integrity": "sha512-qQ5m48eI/MFLQ5PxQj4PFaprjyCTLI37ElWMmNs0K8Lk3dVeOdNpB3ks8jc7yM5CDmVC73eMVk/trk3fgmrUpA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.28.5"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@esbuild/aix-ppc64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.25.12.tgz",
      "integrity": "sha512-Hhmwd6CInZ3dwpuGTF8fJG6yoWmsToE+vYgD4nytZVxcu1ulHpUQRAB1UJ8+N1Am3Mz4+xOByoQoSZf4D+CpkA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "aix"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.25.12.tgz",
      "integrity": "sha512-VJ+sKvNA/GE7Ccacc9Cha7bpS8nyzVv0jdVgwNDaR4gDMC/2TTRc33Ip8qrNYUcpkOHUT5OZ0bUcNNVZQ9RLlg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.25.12.tgz",
      "integrity": "sha512-6AAmLG7zwD1Z159jCKPvAxZd4y/VTO0VkprYy+3N2FtJ8+BQWFXU+OxARIwA46c5tdD9SsKGZ/1ocqBS/gAKHg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.25.12.tgz",
      "integrity": "sha512-5jbb+2hhDHx5phYR2By8GTWEzn6I9UqR11Kwf22iKbNpYrsmRB18aX/9ivc5cabcUiAT/wM+YIZ6SG9QO6a8kg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.25.12.tgz",
      "integrity": "sha512-N3zl+lxHCifgIlcMUP5016ESkeQjLj/959RxxNYIthIg+CQHInujFuXeWbWMgnTo4cp5XVHqFPmpyu9J65C1Yg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.25.12.tgz",
      "integrity": "sha512-HQ9ka4Kx21qHXwtlTUVbKJOAnmG1ipXhdWTmNXiPzPfWKpXqASVcWdnf2bnL73wgjNrFXAa3yYvBSd9pzfEIpA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.25.12.tgz",
      "integrity": "sha512-gA0Bx759+7Jve03K1S0vkOu5Lg/85dou3EseOGUes8flVOGxbhDDh/iZaoek11Y8mtyKPGF3vP8XhnkDEAmzeg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.25.12.tgz",
      "integrity": "sha512-TGbO26Yw2xsHzxtbVFGEXBFH0FRAP7gtcPE7P5yP7wGy7cXK2oO7RyOhL5NLiqTlBh47XhmIUXuGciXEqYFfBQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.25.12.tgz",
      "integrity": "sha512-lPDGyC1JPDou8kGcywY0YILzWlhhnRjdof3UlcoqYmS9El818LLfJJc3PXXgZHrHCAKs/Z2SeZtDJr5MrkxtOw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.25.12.tgz",
      "integrity": "sha512-8bwX7a8FghIgrupcxb4aUmYDLp8pX06rGh5HqDT7bB+8Rdells6mHvrFHHW2JAOPZUbnjUpKTLg6ECyzvas2AQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.25.12.tgz",
      "integrity": "sha512-0y9KrdVnbMM2/vG8KfU0byhUN+EFCny9+8g202gYqSSVMonbsCfLjUO+rCci7pM0WBEtz+oK/PIwHkzxkyharA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.25.12.tgz",
      "integrity": "sha512-h///Lr5a9rib/v1GGqXVGzjL4TMvVTv+s1DPoxQdz7l/AYv6LDSxdIwzxkrPW438oUXiDtwM10o9PmwS/6Z0Ng==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.25.12.tgz",
      "integrity": "sha512-iyRrM1Pzy9GFMDLsXn1iHUm18nhKnNMWscjmp4+hpafcZjrr2WbT//d20xaGljXDBYHqRcl8HnxbX6uaA/eGVw==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.25.12.tgz",
      "integrity": "sha512-9meM/lRXxMi5PSUqEXRCtVjEZBGwB7P/D4yT8UG/mwIdze2aV4Vo6U5gD3+RsoHXKkHCfSxZKzmDssVlRj1QQA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.25.12.tgz",
      "integrity": "sha512-Zr7KR4hgKUpWAwb1f3o5ygT04MzqVrGEGXGLnj15YQDJErYu/BGg+wmFlIDOdJp0PmB0lLvxFIOXZgFRrdjR0w==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.25.12.tgz",
      "integrity": "sha512-MsKncOcgTNvdtiISc/jZs/Zf8d0cl/t3gYWX8J9ubBnVOwlk65UIEEvgBORTiljloIWnBzLs4qhzPkJcitIzIg==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.25.12.tgz",
      "integrity": "sha512-uqZMTLr/zR/ed4jIGnwSLkaHmPjOjJvnm6TVVitAa08SLS9Z0VM8wIRx7gWbJB5/J54YuIMInDquWyYvQLZkgw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-arm64/-/netbsd-arm64-0.25.12.tgz",
      "integrity": "sha512-xXwcTq4GhRM7J9A8Gv5boanHhRa/Q9KLVmcyXHCTaM4wKfIpWkdXiMog/KsnxzJ0A1+nD+zoecuzqPmCRyBGjg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.25.12.tgz",
      "integrity": "sha512-Ld5pTlzPy3YwGec4OuHh1aCVCRvOXdH8DgRjfDy/oumVovmuSzWfnSJg+VtakB9Cm0gxNO9BzWkj6mtO1FMXkQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-arm64/-/openbsd-arm64-0.25.12.tgz",
      "integrity": "sha512-fF96T6KsBo/pkQI950FARU9apGNTSlZGsv1jZBAlcLL1MLjLNIWPBkj5NlSz8aAzYKg+eNqknrUJ24QBybeR5A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.25.12.tgz",
      "integrity": "sha512-MZyXUkZHjQxUvzK7rN8DJ3SRmrVrke8ZyRusHlP+kuwqTcfWLyqMOE3sScPPyeIXN/mDJIfGXvcMqCgYKekoQw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openharmony-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/openharmony-arm64/-/openharmony-arm64-0.25.12.tgz",
      "integrity": "sha512-rm0YWsqUSRrjncSXGA7Zv78Nbnw4XL6/dzr20cyrQf7ZmRcsovpcRBdhD43Nuk3y7XIoW2OxMVvwuRvk9XdASg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.25.12.tgz",
      "integrity": "sha512-3wGSCDyuTHQUzt0nV7bocDy72r2lI33QL3gkDNGkod22EsYl04sMf0qLb8luNKTOmgF/eDEDP5BFNwoBKH441w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.25.12.tgz",
      "integrity": "sha512-rMmLrur64A7+DKlnSuwqUdRKyd3UE7oPJZmnljqEptesKM8wx9J8gx5u0+9Pq0fQQW8vqeKebwNXdfOyP+8Bsg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.25.12.tgz",
      "integrity": "sha512-HkqnmmBoCbCwxUKKNPBixiWDGCpQGVsrQfJoVGYLPT41XWF8lHuE5N6WhVia2n4o5QK5M4tYr21827fNhi4byQ==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.25.12.tgz",
      "integrity": "sha512-alJC0uCZpTFrSL0CCDjcgleBXPnCrEAhTBILpeAp7M/OFgoqtAetfBzX0xM00MUsVVPpVjlPuMbREqnZCXaTnA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.9.0.tgz",
      "integrity": "sha512-ayVFHdtZ+hsq1t2Dy24wCmGXGe4q9Gu3smhLYALJrr473ZH27MsnSL+LKUlimp4BWJqMDMLmPpx/Q9R3OAlL4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/eslint-utils/node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.2",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.2.tgz",
      "integrity": "sha512-EriSTlt5OC9/7SXkRSCAhfSxxoSUgBm33OH+IkwbdpgoqsSsUg7y3uh+IICI/Qg4BBWr3U2i39RpmycbxMq4ew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/config-array": {
      "version": "0.21.1",
      "resolved": "https://registry.npmjs.org/@eslint/config-array/-/config-array-0.21.1.tgz",
      "integrity": "sha512-aw1gNayWpdI/jSYVgzN5pL0cfzU02GT3NBpeT/DXbx1/1x7ZKxFPd9bwrzygx/qiwIQiJ1sw/zD8qY/kRvlGHA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/object-schema": "^2.1.7",
        "debug": "^4.3.1",
        "minimatch": "^3.1.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/config-helpers": {
      "version": "0.4.2",
      "resolved": "https://registry.npmjs.org/@eslint/config-helpers/-/config-helpers-0.4.2.tgz",
      "integrity": "sha512-gBrxN88gOIf3R7ja5K9slwNayVcZgK6SOUORm2uBzTeIEfeVaIhOpCtTox3P6R7o2jLFwLFTLnC7kU/RGcYEgw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.17.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/core": {
      "version": "0.17.0",
      "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.17.0.tgz",
      "integrity": "sha512-yL/sLrpmtDaFEiUj1osRP4TI2MDz1AddJL+jZ7KSqvBuliN4xqYY54IfdN8qD8Toa6g1iloph1fxQNkjOxrrpQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@types/json-schema": "^7.0.15"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-3.3.1.tgz",
      "integrity": "sha512-gtF186CXhIl1p4pJNGZw8Yc6RlshoePRvE0X91oPGb3vZ8pM3qOS9W9NGPat9LziaBV7XrJWGylNQXkGcnM3IQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^10.0.1",
        "globals": "^14.0.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/globals": {
      "version": "14.0.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-14.0.0.tgz",
      "integrity": "sha512-oahGvuMGQlPw/ivIYBjVSrWAfWLBeku5tpPE2fOPLi+WHffIWbuh2tCjhyQhTBPMf5E9jDEH4FOmTYgYwbKwtQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@eslint/js": {
      "version": "9.39.1",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-9.39.1.tgz",
      "integrity": "sha512-S26Stp4zCy88tH94QbBv3XCuzRQiZ9yXofEILmglYTh/Ug/a9/umqvgFtYBAo3Lp0nsI/5/qH1CCrbdK3AP1Tw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      }
    },
    "node_modules/@eslint/object-schema": {
      "version": "2.1.7",
      "resolved": "https://registry.npmjs.org/@eslint/object-schema/-/object-schema-2.1.7.tgz",
      "integrity": "sha512-VtAOaymWVfZcmZbp6E2mympDIHvyjXs/12LqWYjVw6qjrfF+VK+fyG33kChz3nnK+SU5/NeHOqrTEHS8sXO3OA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/plugin-kit": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/@eslint/plugin-kit/-/plugin-kit-0.4.1.tgz",
      "integrity": "sha512-43/qtrDUokr7LJqoF2c3+RInu/t4zfrpYdoSDfYyhg52rwLV6TnOvdG4fXm7IkSB3wErkcmJS9iEhjVtOSEjjA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.17.0",
        "levn": "^0.4.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@firebase/ai": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/@firebase/ai/-/ai-1.4.1.tgz",
      "integrity": "sha512-bcusQfA/tHjUjBTnMx6jdoPMpDl3r8K15Z+snHz9wq0Foox0F/V+kNLXucEOHoTL2hTc9l+onZCyBJs2QoIC3g==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-check-interop-types": "0.3.3",
        "@firebase/component": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x",
        "@firebase/app-types": "0.x"
      }
    },
    "node_modules/@firebase/analytics": {
      "version": "0.10.17",
      "resolved": "https://registry.npmjs.org/@firebase/analytics/-/analytics-0.10.17.tgz",
      "integrity": "sha512-n5vfBbvzduMou/2cqsnKrIes4auaBjdhg8QNA2ZQZ59QgtO2QiwBaXQZQE4O4sgB0Ds1tvLgUUkY+pwzu6/xEg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/installations": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/analytics-compat": {
      "version": "0.2.23",
      "resolved": "https://registry.npmjs.org/@firebase/analytics-compat/-/analytics-compat-0.2.23.tgz",
      "integrity": "sha512-3AdO10RN18G5AzREPoFgYhW6vWXr3u+OYQv6pl3CX6Fky8QRk0AHurZlY3Q1xkXO0TDxIsdhO3y65HF7PBOJDw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/analytics": "0.10.17",
        "@firebase/analytics-types": "0.8.3",
        "@firebase/component": "0.6.18",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/analytics-types": {
      "version": "0.8.3",
      "resolved": "https://registry.npmjs.org/@firebase/analytics-types/-/analytics-types-0.8.3.tgz",
      "integrity": "sha512-VrIp/d8iq2g501qO46uGz3hjbDb8xzYMrbu8Tp0ovzIzrvJZ2fvmj649gTjge/b7cCCcjT0H37g1gVtlNhnkbg==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/app": {
      "version": "0.13.2",
      "resolved": "https://registry.npmjs.org/@firebase/app/-/app-0.13.2.tgz",
      "integrity": "sha512-jwtMmJa1BXXDCiDx1vC6SFN/+HfYG53UkfJa6qeN5ogvOunzbFDO3wISZy5n9xgYFUrEP6M7e8EG++riHNTv9w==",
      "license": "Apache-2.0",
      "peer": true,
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/util": "1.12.1",
        "idb": "7.1.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@firebase/app-check": {
      "version": "0.10.1",
      "resolved": "https://registry.npmjs.org/@firebase/app-check/-/app-check-0.10.1.tgz",
      "integrity": "sha512-MgNdlms9Qb0oSny87pwpjKush9qUwCJhfmTJHDfrcKo4neLGiSeVE4qJkzP7EQTIUFKp84pbTxobSAXkiuQVYQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/app-check-compat": {
      "version": "0.3.26",
      "resolved": "https://registry.npmjs.org/@firebase/app-check-compat/-/app-check-compat-0.3.26.tgz",
      "integrity": "sha512-PkX+XJMLDea6nmnopzFKlr+s2LMQGqdyT2DHdbx1v1dPSqOol2YzgpgymmhC67vitXVpNvS3m/AiWQWWhhRRPQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-check": "0.10.1",
        "@firebase/app-check-types": "0.5.3",
        "@firebase/component": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/app-check-interop-types": {
      "version": "0.3.3",
      "resolved": "https://registry.npmjs.org/@firebase/app-check-interop-types/-/app-check-interop-types-0.3.3.tgz",
      "integrity": "sha512-gAlxfPLT2j8bTI/qfe3ahl2I2YcBQ8cFIBdhAQA4I2f3TndcO+22YizyGYuttLHPQEpWkhmpFW60VCFEPg4g5A==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/app-check-types": {
      "version": "0.5.3",
      "resolved": "https://registry.npmjs.org/@firebase/app-check-types/-/app-check-types-0.5.3.tgz",
      "integrity": "sha512-hyl5rKSj0QmwPdsAxrI5x1otDlByQ7bvNvVt8G/XPO2CSwE++rmSVf3VEhaeOR4J8ZFaF0Z0NDSmLejPweZ3ng==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/app-compat": {
      "version": "0.4.2",
      "resolved": "https://registry.npmjs.org/@firebase/app-compat/-/app-compat-0.4.2.tgz",
      "integrity": "sha512-LssbyKHlwLeiV8GBATyOyjmHcMpX/tFjzRUCS1jnwGAew1VsBB4fJowyS5Ud5LdFbYpJeS+IQoC+RQxpK7eH3Q==",
      "license": "Apache-2.0",
      "peer": true,
      "dependencies": {
        "@firebase/app": "0.13.2",
        "@firebase/component": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@firebase/app-types": {
      "version": "0.9.3",
      "resolved": "https://registry.npmjs.org/@firebase/app-types/-/app-types-0.9.3.tgz",
      "integrity": "sha512-kRVpIl4vVGJ4baogMDINbyrIOtOxqhkZQg4jTq3l8Lw6WSk0xfpEYzezFu+Kl4ve4fbPl79dvwRtaFqAC/ucCw==",
      "license": "Apache-2.0",
      "peer": true
    },
    "node_modules/@firebase/auth": {
      "version": "1.10.8",
      "resolved": "https://registry.npmjs.org/@firebase/auth/-/auth-1.10.8.tgz",
      "integrity": "sha512-GpuTz5ap8zumr/ocnPY57ZanX02COsXloY6Y/2LYPAuXYiaJRf6BAGDEdRq1BMjP93kqQnKNuKZUTMZbQ8MNYA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x",
        "@react-native-async-storage/async-storage": "^1.18.1"
      },
      "peerDependenciesMeta": {
        "@react-native-async-storage/async-storage": {
          "optional": true
        }
      }
    },
    "node_modules/@firebase/auth-compat": {
      "version": "0.5.28",
      "resolved": "https://registry.npmjs.org/@firebase/auth-compat/-/auth-compat-0.5.28.tgz",
      "integrity": "sha512-HpMSo/cc6Y8IX7bkRIaPPqT//Jt83iWy5rmDWeThXQCAImstkdNo3giFLORJwrZw2ptiGkOij64EH1ztNJzc7Q==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/auth": "1.10.8",
        "@firebase/auth-types": "0.13.0",
        "@firebase/component": "0.6.18",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/auth-interop-types": {
      "version": "0.2.4",
      "resolved": "https://registry.npmjs.org/@firebase/auth-interop-types/-/auth-interop-types-0.2.4.tgz",
      "integrity": "sha512-JPgcXKCuO+CWqGDnigBtvo09HeBs5u/Ktc2GaFj2m01hLarbxthLNm7Fk8iOP1aqAtXV+fnnGj7U28xmk7IwVA==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/auth-types": {
      "version": "0.13.0",
      "resolved": "https://registry.npmjs.org/@firebase/auth-types/-/auth-types-0.13.0.tgz",
      "integrity": "sha512-S/PuIjni0AQRLF+l9ck0YpsMOdE8GO2KU6ubmBB7P+7TJUCQDa3R1dlgYm9UzGbbePMZsp0xzB93f2b/CgxMOg==",
      "license": "Apache-2.0",
      "peerDependencies": {
        "@firebase/app-types": "0.x",
        "@firebase/util": "1.x"
      }
    },
    "node_modules/@firebase/component": {
      "version": "0.6.18",
      "resolved": "https://registry.npmjs.org/@firebase/component/-/component-0.6.18.tgz",
      "integrity": "sha512-n28kPCkE2dL2U28fSxZJjzPPVpKsQminJ6NrzcKXAI0E/lYC8YhfwpyllScqVEvAI3J2QgJZWYgrX+1qGI+SQQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@firebase/data-connect": {
      "version": "0.3.10",
      "resolved": "https://registry.npmjs.org/@firebase/data-connect/-/data-connect-0.3.10.tgz",
      "integrity": "sha512-VMVk7zxIkgwlVQIWHOKFahmleIjiVFwFOjmakXPd/LDgaB/5vzwsB5DWIYo+3KhGxWpidQlR8geCIn39YflJIQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/auth-interop-types": "0.2.4",
        "@firebase/component": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/database": {
      "version": "1.0.20",
      "resolved": "https://registry.npmjs.org/@firebase/database/-/database-1.0.20.tgz",
      "integrity": "sha512-H9Rpj1pQ1yc9+4HQOotFGLxqAXwOzCHsRSRjcQFNOr8lhUt6LeYjf0NSRL04sc4X0dWe8DsCvYKxMYvFG/iOJw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-check-interop-types": "0.3.3",
        "@firebase/auth-interop-types": "0.2.4",
        "@firebase/component": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/util": "1.12.1",
        "faye-websocket": "0.11.4",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@firebase/database-compat": {
      "version": "2.0.11",
      "resolved": "https://registry.npmjs.org/@firebase/database-compat/-/database-compat-2.0.11.tgz",
      "integrity": "sha512-itEsHARSsYS95+udF/TtIzNeQ0Uhx4uIna0sk4E0wQJBUnLc/G1X6D7oRljoOuwwCezRLGvWBRyNrugv/esOEw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/database": "1.0.20",
        "@firebase/database-types": "1.0.15",
        "@firebase/logger": "0.4.4",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@firebase/database-types": {
      "version": "1.0.15",
      "resolved": "https://registry.npmjs.org/@firebase/database-types/-/database-types-1.0.15.tgz",
      "integrity": "sha512-XWHJ0VUJ0k2E9HDMlKxlgy/ZuTa9EvHCGLjaKSUvrQnwhgZuRU5N3yX6SZ+ftf2hTzZmfRkv+b3QRvGg40bKNw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-types": "0.9.3",
        "@firebase/util": "1.12.1"
      }
    },
    "node_modules/@firebase/firestore": {
      "version": "4.8.0",
      "resolved": "https://registry.npmjs.org/@firebase/firestore/-/firestore-4.8.0.tgz",
      "integrity": "sha512-QSRk+Q1/CaabKyqn3C32KSFiOdZpSqI9rpLK5BHPcooElumOBooPFa6YkDdiT+/KhJtel36LdAacha9BptMj2A==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/util": "1.12.1",
        "@firebase/webchannel-wrapper": "1.0.3",
        "@grpc/grpc-js": "~1.9.0",
        "@grpc/proto-loader": "^0.7.8",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/firestore-compat": {
      "version": "0.3.53",
      "resolved": "https://registry.npmjs.org/@firebase/firestore-compat/-/firestore-compat-0.3.53.tgz",
      "integrity": "sha512-qI3yZL8ljwAYWrTousWYbemay2YZa+udLWugjdjju2KODWtLG94DfO4NALJgPLv8CVGcDHNFXoyQexdRA0Cz8Q==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/firestore": "4.8.0",
        "@firebase/firestore-types": "3.0.3",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/firestore-types": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/@firebase/firestore-types/-/firestore-types-3.0.3.tgz",
      "integrity": "sha512-hD2jGdiWRxB/eZWF89xcK9gF8wvENDJkzpVFb4aGkzfEaKxVRD1kjz1t1Wj8VZEp2LCB53Yx1zD8mrhQu87R6Q==",
      "license": "Apache-2.0",
      "peerDependencies": {
        "@firebase/app-types": "0.x",
        "@firebase/util": "1.x"
      }
    },
    "node_modules/@firebase/functions": {
      "version": "0.12.9",
      "resolved": "https://registry.npmjs.org/@firebase/functions/-/functions-0.12.9.tgz",
      "integrity": "sha512-FG95w6vjbUXN84Ehezc2SDjGmGq225UYbHrb/ptkRT7OTuCiQRErOQuyt1jI1tvcDekdNog+anIObihNFz79Lg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-check-interop-types": "0.3.3",
        "@firebase/auth-interop-types": "0.2.4",
        "@firebase/component": "0.6.18",
        "@firebase/messaging-interop-types": "0.2.3",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/functions-compat": {
      "version": "0.3.26",
      "resolved": "https://registry.npmjs.org/@firebase/functions-compat/-/functions-compat-0.3.26.tgz",
      "integrity": "sha512-A798/6ff5LcG2LTWqaGazbFYnjBW8zc65YfID/en83ALmkhu2b0G8ykvQnLtakbV9ajrMYPn7Yc/XcYsZIUsjA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/functions": "0.12.9",
        "@firebase/functions-types": "0.6.3",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/functions-types": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/@firebase/functions-types/-/functions-types-0.6.3.tgz",
      "integrity": "sha512-EZoDKQLUHFKNx6VLipQwrSMh01A1SaL3Wg6Hpi//x6/fJ6Ee4hrAeswK99I5Ht8roiniKHw4iO0B1Oxj5I4plg==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/installations": {
      "version": "0.6.18",
      "resolved": "https://registry.npmjs.org/@firebase/installations/-/installations-0.6.18.tgz",
      "integrity": "sha512-NQ86uGAcvO8nBRwVltRL9QQ4Reidc/3whdAasgeWCPIcrhOKDuNpAALa6eCVryLnK14ua2DqekCOX5uC9XbU/A==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/util": "1.12.1",
        "idb": "7.1.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/installations-compat": {
      "version": "0.2.18",
      "resolved": "https://registry.npmjs.org/@firebase/installations-compat/-/installations-compat-0.2.18.tgz",
      "integrity": "sha512-aLFohRpJO5kKBL/XYL4tN+GdwEB/Q6Vo9eZOM/6Kic7asSUgmSfGPpGUZO1OAaSRGwF4Lqnvi1f/f9VZnKzChw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/installations": "0.6.18",
        "@firebase/installations-types": "0.5.3",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/installations-types": {
      "version": "0.5.3",
      "resolved": "https://registry.npmjs.org/@firebase/installations-types/-/installations-types-0.5.3.tgz",
      "integrity": "sha512-2FJI7gkLqIE0iYsNQ1P751lO3hER+Umykel+TkLwHj6plzWVxqvfclPUZhcKFVQObqloEBTmpi2Ozn7EkCABAA==",
      "license": "Apache-2.0",
      "peerDependencies": {
        "@firebase/app-types": "0.x"
      }
    },
    "node_modules/@firebase/logger": {
      "version": "0.4.4",
      "resolved": "https://registry.npmjs.org/@firebase/logger/-/logger-0.4.4.tgz",
      "integrity": "sha512-mH0PEh1zoXGnaR8gD1DeGeNZtWFKbnz9hDO91dIml3iou1gpOnLqXQ2dJfB71dj6dpmUjcQ6phY3ZZJbjErr9g==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@firebase/messaging": {
      "version": "0.12.22",
      "resolved": "https://registry.npmjs.org/@firebase/messaging/-/messaging-0.12.22.tgz",
      "integrity": "sha512-GJcrPLc+Hu7nk+XQ70Okt3M1u1eRr2ZvpMbzbc54oTPJZySHcX9ccZGVFcsZbSZ6o1uqumm8Oc7OFkD3Rn1/og==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/installations": "0.6.18",
        "@firebase/messaging-interop-types": "0.2.3",
        "@firebase/util": "1.12.1",
        "idb": "7.1.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/messaging-compat": {
      "version": "0.2.22",
      "resolved": "https://registry.npmjs.org/@firebase/messaging-compat/-/messaging-compat-0.2.22.tgz",
      "integrity": "sha512-5ZHtRnj6YO6f/QPa/KU6gryjmX4Kg33Kn4gRpNU6M1K47Gm8kcQwPkX7erRUYEH1mIWptfvjvXMHWoZaWjkU7A==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/messaging": "0.12.22",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/messaging-interop-types": {
      "version": "0.2.3",
      "resolved": "https://registry.npmjs.org/@firebase/messaging-interop-types/-/messaging-interop-types-0.2.3.tgz",
      "integrity": "sha512-xfzFaJpzcmtDjycpDeCUj0Ge10ATFi/VHVIvEEjDNc3hodVBQADZ7BWQU7CuFpjSHE+eLuBI13z5F/9xOoGX8Q==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/performance": {
      "version": "0.7.7",
      "resolved": "https://registry.npmjs.org/@firebase/performance/-/performance-0.7.7.tgz",
      "integrity": "sha512-JTlTQNZKAd4+Q5sodpw6CN+6NmwbY72av3Lb6wUKTsL7rb3cuBIhQSrslWbVz0SwK3x0ZNcqX24qtRbwKiv+6w==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/installations": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0",
        "web-vitals": "^4.2.4"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/performance-compat": {
      "version": "0.2.20",
      "resolved": "https://registry.npmjs.org/@firebase/performance-compat/-/performance-compat-0.2.20.tgz",
      "integrity": "sha512-XkFK5NmOKCBuqOKWeRgBUFZZGz9SzdTZp4OqeUg+5nyjapTiZ4XoiiUL8z7mB2q+63rPmBl7msv682J3rcDXIQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/performance": "0.7.7",
        "@firebase/performance-types": "0.2.3",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/performance-types": {
      "version": "0.2.3",
      "resolved": "https://registry.npmjs.org/@firebase/performance-types/-/performance-types-0.2.3.tgz",
      "integrity": "sha512-IgkyTz6QZVPAq8GSkLYJvwSLr3LS9+V6vNPQr0x4YozZJiLF5jYixj0amDtATf1X0EtYHqoPO48a9ija8GocxQ==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/remote-config": {
      "version": "0.6.5",
      "resolved": "https://registry.npmjs.org/@firebase/remote-config/-/remote-config-0.6.5.tgz",
      "integrity": "sha512-fU0c8HY0vrVHwC+zQ/fpXSqHyDMuuuglV94VF6Yonhz8Fg2J+KOowPGANM0SZkLvVOYpTeWp3ZmM+F6NjwWLnw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/installations": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/remote-config-compat": {
      "version": "0.2.18",
      "resolved": "https://registry.npmjs.org/@firebase/remote-config-compat/-/remote-config-compat-0.2.18.tgz",
      "integrity": "sha512-YiETpldhDy7zUrnS8e+3l7cNs0sL7+tVAxvVYU0lu7O+qLHbmdtAxmgY+wJqWdW2c9nDvBFec7QiF58pEUu0qQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/logger": "0.4.4",
        "@firebase/remote-config": "0.6.5",
        "@firebase/remote-config-types": "0.4.0",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/remote-config-types": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/@firebase/remote-config-types/-/remote-config-types-0.4.0.tgz",
      "integrity": "sha512-7p3mRE/ldCNYt8fmWMQ/MSGRmXYlJ15Rvs9Rk17t8p0WwZDbeK7eRmoI1tvCPaDzn9Oqh+yD6Lw+sGLsLg4kKg==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/storage": {
      "version": "0.13.14",
      "resolved": "https://registry.npmjs.org/@firebase/storage/-/storage-0.13.14.tgz",
      "integrity": "sha512-xTq5ixxORzx+bfqCpsh+o3fxOsGoDjC1nO0Mq2+KsOcny3l7beyBhP/y1u5T6mgsFQwI1j6oAkbT5cWdDBx87g==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/storage-compat": {
      "version": "0.3.24",
      "resolved": "https://registry.npmjs.org/@firebase/storage-compat/-/storage-compat-0.3.24.tgz",
      "integrity": "sha512-XHn2tLniiP7BFKJaPZ0P8YQXKiVJX+bMyE2j2YWjYfaddqiJnROJYqSomwW6L3Y+gZAga35ONXUJQju6MB6SOQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.6.18",
        "@firebase/storage": "0.13.14",
        "@firebase/storage-types": "0.8.3",
        "@firebase/util": "1.12.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/storage-types": {
      "version": "0.8.3",
      "resolved": "https://registry.npmjs.org/@firebase/storage-types/-/storage-types-0.8.3.tgz",
      "integrity": "sha512-+Muk7g9uwngTpd8xn9OdF/D48uiQ7I1Fae7ULsWPuKoCH3HU7bfFPhxtJYzyhjdniowhuDpQcfPmuNRAqZEfvg==",
      "license": "Apache-2.0",
      "peerDependencies": {
        "@firebase/app-types": "0.x",
        "@firebase/util": "1.x"
      }
    },
    "node_modules/@firebase/util": {
      "version": "1.12.1",
      "resolved": "https://registry.npmjs.org/@firebase/util/-/util-1.12.1.tgz",
      "integrity": "sha512-zGlBn/9Dnya5ta9bX/fgEoNC3Cp8s6h+uYPYaDieZsFOAdHP/ExzQ/eaDgxD3GOROdPkLKpvKY0iIzr9adle0w==",
      "hasInstallScript": true,
      "license": "Apache-2.0",
      "peer": true,
      "dependencies": {
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@firebase/webchannel-wrapper": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/@firebase/webchannel-wrapper/-/webchannel-wrapper-1.0.3.tgz",
      "integrity": "sha512-2xCRM9q9FlzGZCdgDMJwc0gyUkWFtkosy7Xxr6sFgQwn+wMNIWd7xIvYNauU1r64B5L5rsGKy/n9TKJ0aAFeqQ==",
      "license": "Apache-2.0"
    },
    "node_modules/@googlemaps/js-api-loader": {
      "version": "1.16.8",
      "resolved": "https://registry.npmjs.org/@googlemaps/js-api-loader/-/js-api-loader-1.16.8.tgz",
      "integrity": "sha512-CROqqwfKotdO6EBjZO/gQGVTbeDps5V7Mt9+8+5Q+jTg5CRMi3Ii/L9PmV3USROrt2uWxtGzJHORmByxyo9pSQ==",
      "license": "Apache-2.0"
    },
    "node_modules/@googlemaps/markerclusterer": {
      "version": "2.5.3",
      "resolved": "https://registry.npmjs.org/@googlemaps/markerclusterer/-/markerclusterer-2.5.3.tgz",
      "integrity": "sha512-x7lX0R5yYOoiNectr10wLgCBasNcXFHiADIBdmn7jQllF2B5ENQw5XtZK+hIw4xnV0Df0xhN4LN98XqA5jaiOw==",
      "license": "Apache-2.0",
      "dependencies": {
        "fast-deep-equal": "^3.1.3",
        "supercluster": "^8.0.1"
      }
    },
    "node_modules/@grpc/grpc-js": {
      "version": "1.9.15",
      "resolved": "https://registry.npmjs.org/@grpc/grpc-js/-/grpc-js-1.9.15.tgz",
      "integrity": "sha512-nqE7Hc0AzI+euzUwDAy0aY5hCp10r734gMGRdU+qOPX0XSceI2ULrcXB5U2xSc5VkWwalCj4M7GzCAygZl2KoQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@grpc/proto-loader": "^0.7.8",
        "@types/node": ">=12.12.47"
      },
      "engines": {
        "node": "^8.13.0 || >=10.10.0"
      }
    },
    "node_modules/@grpc/proto-loader": {
      "version": "0.7.15",
      "resolved": "https://registry.npmjs.org/@grpc/proto-loader/-/proto-loader-0.7.15.tgz",
      "integrity": "sha512-tMXdRCfYVixjuFK+Hk0Q1s38gV9zDiDJfWL3h1rv4Qc39oILCu1TRTDt7+fGUI8K4G1Fj125Hx/ru3azECWTyQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "lodash.camelcase": "^4.3.0",
        "long": "^5.0.0",
        "protobufjs": "^7.2.5",
        "yargs": "^17.7.2"
      },
      "bin": {
        "proto-loader-gen-types": "build/bin/proto-loader-gen-types.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/@humanfs/core": {
      "version": "0.19.1",
      "resolved": "https://registry.npmjs.org/@humanfs/core/-/core-0.19.1.tgz",
      "integrity": "sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanfs/node": {
      "version": "0.16.7",
      "resolved": "https://registry.npmjs.org/@humanfs/node/-/node-0.16.7.tgz",
      "integrity": "sha512-/zUx+yOsIrG4Y43Eh2peDeKCxlRt/gET6aHfaKpuq267qXdYDFViVHfMaLyygZOnl0kGWxFIgsBy8QFuTLUXEQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanfs/core": "^0.19.1",
        "@humanwhocodes/retry": "^0.4.0"
      },
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/retry": {
      "version": "0.4.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.4.3.tgz",
      "integrity": "sha512-bV0Tgo9K4hfPCek+aMAn81RppFKv2ySDQeMoSZuvTASywNTnVJCArCZE2FWqpvIatKu7VMRLWlR1EazvVhDyhQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/remapping": {
      "version": "2.3.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.31",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@protobufjs/aspromise": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/aspromise/-/aspromise-1.1.2.tgz",
      "integrity": "sha512-j+gKExEuLmKwvz3OgROXtrJ2UG2x8Ch2YZUxahh+s1F2HZ+wAceUNLkvy6zKCPVRkU++ZWQrdxsUeQXmcg4uoQ==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/base64": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/base64/-/base64-1.1.2.tgz",
      "integrity": "sha512-AZkcAA5vnN/v4PDqKyMR5lx7hZttPDgClv83E//FMNhR2TMcLUhfRUBHCmSl0oi9zMgDDqRUJkSxO3wm85+XLg==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/codegen": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/@protobufjs/codegen/-/codegen-2.0.4.tgz",
      "integrity": "sha512-YyFaikqM5sH0ziFZCN3xDC7zeGaB/d0IUb9CATugHWbd1FRFwWwt4ld4OYMPWu5a3Xe01mGAULCdqhMlPl29Jg==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/eventemitter": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/eventemitter/-/eventemitter-1.1.0.tgz",
      "integrity": "sha512-j9ednRT81vYJ9OfVuXG6ERSTdEL1xVsNgqpkxMsbIabzSo3goCjDIveeGv5d03om39ML71RdmrGNjG5SReBP/Q==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/fetch": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/fetch/-/fetch-1.1.0.tgz",
      "integrity": "sha512-lljVXpqXebpsijW71PZaCYeIcE5on1w5DlQy5WH6GLbFryLUrBD4932W/E2BSpfRJWseIL4v/KPgBFxDOIdKpQ==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "@protobufjs/aspromise": "^1.1.1",
        "@protobufjs/inquire": "^1.1.0"
      }
    },
    "node_modules/@protobufjs/float": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/float/-/float-1.0.2.tgz",
      "integrity": "sha512-Ddb+kVXlXst9d+R9PfTIxh1EdNkgoRe5tOX6t01f1lYWOvJnSPDBlG241QLzcyPdoNTsblLUdujGSE4RzrTZGQ==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/inquire": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/inquire/-/inquire-1.1.0.tgz",
      "integrity": "sha512-kdSefcPdruJiFMVSbn801t4vFK7KB/5gd2fYvrxhuJYg8ILrmn9SKSX2tZdV6V+ksulWqS7aXjBcRXl3wHoD9Q==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/path": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/path/-/path-1.1.2.tgz",
      "integrity": "sha512-6JOcJ5Tm08dOHAbdR3GrvP+yUUfkjG5ePsHYczMFLq3ZmMkAD98cDgcT2iA1lJ9NVwFd4tH/iSSoe44YWkltEA==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/pool": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/pool/-/pool-1.1.0.tgz",
      "integrity": "sha512-0kELaGSIDBKvcgS4zkjz1PeddatrjYcmMWOlAuAPwAeccUrPHdUqo/J6LiymHHEiJT5NrF1UVwxY14f+fy4WQw==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/utf8": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/utf8/-/utf8-1.1.0.tgz",
      "integrity": "sha512-Vvn3zZrhQZkkBE8LSuW3em98c0FwgO4nxzv6OdSxPKJIEKY2bGbHn+mhGIPerzI4twdxaP8/0+06HBpwf345Lw==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@react-google-maps/api": {
      "version": "2.20.7",
      "resolved": "https://registry.npmjs.org/@react-google-maps/api/-/api-2.20.7.tgz",
      "integrity": "sha512-ys7uri3V6gjhYZUI43srHzSKDC6/jiKTwHNlwXFTvjeaJE3M3OaYBt9FZKvJs8qnOhL6i6nD1BKJoi1KrnkCkg==",
      "license": "MIT",
      "dependencies": {
        "@googlemaps/js-api-loader": "1.16.8",
        "@googlemaps/markerclusterer": "2.5.3",
        "@react-google-maps/infobox": "2.20.0",
        "@react-google-maps/marker-clusterer": "2.20.0",
        "@types/google.maps": "3.58.1",
        "invariant": "2.2.4"
      },
      "peerDependencies": {
        "react": "^16.8 || ^17 || ^18 || ^19",
        "react-dom": "^16.8 || ^17 || ^18 || ^19"
      }
    },
    "node_modules/@react-google-maps/infobox": {
      "version": "2.20.0",
      "resolved": "https://registry.npmjs.org/@react-google-maps/infobox/-/infobox-2.20.0.tgz",
      "integrity": "sha512-03PJHjohhaVLkX6+NHhlr8CIlvUxWaXhryqDjyaZ8iIqqix/nV8GFdz9O3m5OsjtxtNho09F/15j14yV0nuyLQ==",
      "license": "MIT"
    },
    "node_modules/@react-google-maps/marker-clusterer": {
      "version": "2.20.0",
      "resolved": "https://registry.npmjs.org/@react-google-maps/marker-clusterer/-/marker-clusterer-2.20.0.tgz",
      "integrity": "sha512-tieX9Va5w1yP88vMgfH1pHTacDQ9TgDTjox3tLlisKDXRQWdjw+QeVVghhf5XqqIxXHgPdcGwBvKY6UP+SIvLw==",
      "license": "MIT"
    },
    "node_modules/@react-leaflet/core": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/@react-leaflet/core/-/core-3.0.0.tgz",
      "integrity": "sha512-3EWmekh4Nz+pGcr+xjf0KNyYfC3U2JjnkWsh0zcqaexYqmmB5ZhH37kz41JXGmKzpaMZCnPofBBm64i+YrEvGQ==",
      "license": "Hippocratic-2.1",
      "peerDependencies": {
        "leaflet": "^1.9.0",
        "react": "^19.0.0",
        "react-dom": "^19.0.0"
      }
    },
    "node_modules/@rolldown/pluginutils": {
      "version": "1.0.0-beta.47",
      "resolved": "https://registry.npmjs.org/@rolldown/pluginutils/-/pluginutils-1.0.0-beta.47.tgz",
      "integrity": "sha512-8QagwMH3kNCuzD8EWL8R2YPW5e4OrHNSAHRFDdmFqEwEaD/KcNKjVoumo+gP2vW5eKB2UPbM6vTYiGZX0ixLnw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@rollup/rollup-android-arm-eabi": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.53.2.tgz",
      "integrity": "sha512-yDPzwsgiFO26RJA4nZo8I+xqzh7sJTZIWQOxn+/XOdPE31lAvLIYCKqjV+lNH/vxE2L2iH3plKxDCRK6i+CwhA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-android-arm64": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.53.2.tgz",
      "integrity": "sha512-k8FontTxIE7b0/OGKeSN5B6j25EuppBcWM33Z19JoVT7UTXFSo3D9CdU39wGTeb29NO3XxpMNauh09B+Ibw+9g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-darwin-arm64": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.53.2.tgz",
      "integrity": "sha512-A6s4gJpomNBtJ2yioj8bflM2oogDwzUiMl2yNJ2v9E7++sHrSrsQ29fOfn5DM/iCzpWcebNYEdXpaK4tr2RhfQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-darwin-x64": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.53.2.tgz",
      "integrity": "sha512-e6XqVmXlHrBlG56obu9gDRPW3O3hLxpwHpLsBJvuI8qqnsrtSZ9ERoWUXtPOkY8c78WghyPHZdmPhHLWNdAGEw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-arm64": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.53.2.tgz",
      "integrity": "sha512-v0E9lJW8VsrwPux5Qe5CwmH/CF/2mQs6xU1MF3nmUxmZUCHazCjLgYvToOk+YuuUqLQBio1qkkREhxhc656ViA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-x64": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.53.2.tgz",
      "integrity": "sha512-ClAmAPx3ZCHtp6ysl4XEhWU69GUB1D+s7G9YjHGhIGCSrsg00nEGRRZHmINYxkdoJehde8VIsDC5t9C0gb6yqA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.53.2.tgz",
      "integrity": "sha512-EPlb95nUsz6Dd9Qy13fI5kUPXNSljaG9FiJ4YUGU1O/Q77i5DYFW5KR8g1OzTcdZUqQQ1KdDqsTohdFVwCwjqg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.53.2.tgz",
      "integrity": "sha512-BOmnVW+khAUX+YZvNfa0tGTEMVVEerOxN0pDk2E6N6DsEIa2Ctj48FOMfNDdrwinocKaC7YXUZ1pHlKpnkja/Q==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-gnu": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.53.2.tgz",
      "integrity": "sha512-Xt2byDZ+6OVNuREgBXr4+CZDJtrVso5woFtpKdGPhpTPHcNG7D8YXeQzpNbFRxzTVqJf7kvPMCub/pcGUWgBjA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-musl": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.53.2.tgz",
      "integrity": "sha512-+LdZSldy/I9N8+klim/Y1HsKbJ3BbInHav5qE9Iy77dtHC/pibw1SR/fXlWyAk0ThnpRKoODwnAuSjqxFRDHUQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loong64-gnu": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-gnu/-/rollup-linux-loong64-gnu-4.53.2.tgz",
      "integrity": "sha512-8ms8sjmyc1jWJS6WdNSA23rEfdjWB30LH8Wqj0Cqvv7qSHnvw6kgMMXRdop6hkmGPlyYBdRPkjJnj3KCUHV/uQ==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-ppc64-gnu": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-gnu/-/rollup-linux-ppc64-gnu-4.53.2.tgz",
      "integrity": "sha512-3HRQLUQbpBDMmzoxPJYd3W6vrVHOo2cVW8RUo87Xz0JPJcBLBr5kZ1pGcQAhdZgX9VV7NbGNipah1omKKe23/g==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.53.2.tgz",
      "integrity": "sha512-fMjKi+ojnmIvhk34gZP94vjogXNNUKMEYs+EDaB/5TG/wUkoeua7p7VCHnE6T2Tx+iaghAqQX8teQzcvrYpaQA==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-musl": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.53.2.tgz",
      "integrity": "sha512-XuGFGU+VwUUV5kLvoAdi0Wz5Xbh2SrjIxCtZj6Wq8MDp4bflb/+ThZsVxokM7n0pcbkEr2h5/pzqzDYI7cCgLQ==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-s390x-gnu": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.53.2.tgz",
      "integrity": "sha512-w6yjZF0P+NGzWR3AXWX9zc0DNEGdtvykB03uhonSHMRa+oWA6novflo2WaJr6JZakG2ucsyb+rvhrKac6NIy+w==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-gnu": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.53.2.tgz",
      "integrity": "sha512-yo8d6tdfdeBArzC7T/PnHd7OypfI9cbuZzPnzLJIyKYFhAQ8SvlkKtKBMbXDxe1h03Rcr7u++nFS7tqXz87Gtw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-musl": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.53.2.tgz",
      "integrity": "sha512-ah59c1YkCxKExPP8O9PwOvs+XRLKwh/mV+3YdKqQ5AMQ0r4M4ZDuOrpWkUaqO7fzAHdINzV9tEVu8vNw48z0lA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-openharmony-arm64": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-openharmony-arm64/-/rollup-openharmony-arm64-4.53.2.tgz",
      "integrity": "sha512-4VEd19Wmhr+Zy7hbUsFZ6YXEiP48hE//KPLCSVNY5RMGX2/7HZ+QkN55a3atM1C/BZCGIgqN+xrVgtdak2S9+A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ]
    },
    "node_modules/@rollup/rollup-win32-arm64-msvc": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.53.2.tgz",
      "integrity": "sha512-IlbHFYc/pQCgew/d5fslcy1KEaYVCJ44G8pajugd8VoOEI8ODhtb/j8XMhLpwHCMB3yk2J07ctup10gpw2nyMA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-ia32-msvc": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.53.2.tgz",
      "integrity": "sha512-lNlPEGgdUfSzdCWU176ku/dQRnA7W+Gp8d+cWv73jYrb8uT7HTVVxq62DUYxjbaByuf1Yk0RIIAbDzp+CnOTFg==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-gnu": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-gnu/-/rollup-win32-x64-gnu-4.53.2.tgz",
      "integrity": "sha512-S6YojNVrHybQis2lYov1sd+uj7K0Q05NxHcGktuMMdIQ2VixGwAfbJ23NnlvvVV1bdpR2m5MsNBViHJKcA4ADw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-msvc": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.53.2.tgz",
      "integrity": "sha512-k+/Rkcyx//P6fetPoLMb8pBeqJBNGx81uuf7iljX9++yNBVRDQgD04L+SVXmXmh5ZP4/WOp4mWF0kmi06PW2tA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@socket.io/component-emitter": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@socket.io/component-emitter/-/component-emitter-3.1.2.tgz",
      "integrity": "sha512-9BCxFwvbGg/RsZK9tjXd8s4UcwR0MWeFQ1XEKIQVVvAGJyINdrqKMcTRyLoK8Rse1GjzLV9cwjWV1olXRWEXVA==",
      "license": "MIT"
    },
    "node_modules/@types/babel__core": {
      "version": "7.20.5",
      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.20.7",
        "@babel/types": "^7.20.7",
        "@types/babel__generator": "*",
        "@types/babel__template": "*",
        "@types/babel__traverse": "*"
      }
    },
    "node_modules/@types/babel__generator": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.27.0.tgz",
      "integrity": "sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__template": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.1.0",
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__traverse": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.28.0.tgz",
      "integrity": "sha512-8PvcXf70gTDZBgt9ptxJ8elBeBjcLOAcOtoO/mPJjtji1+CdGbHgm77om1GrsPxsiE+uXIpNSK64UYaIwQXd4Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.2"
      }
    },
    "node_modules/@types/estree": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/google.maps": {
      "version": "3.58.1",
      "resolved": "https://registry.npmjs.org/@types/google.maps/-/google.maps-3.58.1.tgz",
      "integrity": "sha512-X9QTSvGJ0nCfMzYOnaVs/k6/4L+7F5uCS+4iUmkLEls6J9S/Phv+m/i3mDeyc49ZBgwab3EFO1HEoBY7k98EGQ==",
      "license": "MIT"
    },
    "node_modules/@types/json-schema": {
      "version": "7.0.15",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",
      "integrity": "sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/node": {
      "version": "24.10.1",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-24.10.1.tgz",
      "integrity": "sha512-GNWcUTRBgIRJD5zj+Tq0fKOJ5XZajIiBroOF0yvj2bSU1WvNdYS/dn9UxwsujGW4JX06dnHyjV2y9rRaybH0iQ==",
      "license": "MIT",
      "dependencies": {
        "undici-types": "~7.16.0"
      }
    },
    "node_modules/@types/react": {
      "version": "19.2.4",
      "resolved": "https://registry.npmjs.org/@types/react/-/react-19.2.4.tgz",
      "integrity": "sha512-tBFxBp9Nfyy5rsmefN+WXc1JeW/j2BpBHFdLZbEVfs9wn3E3NRFxwV0pJg8M1qQAexFpvz73hJXFofV0ZAu92A==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "csstype": "^3.0.2"
      }
    },
    "node_modules/@types/react-dom": {
      "version": "19.2.3",
      "resolved": "https://registry.npmjs.org/@types/react-dom/-/react-dom-19.2.3.tgz",
      "integrity": "sha512-jp2L/eY6fn+KgVVQAOqYItbF0VY/YApe5Mz2F0aykSO8gx31bYCZyvSeYxCHKvzHG5eZjc+zyaS5BrBWya2+kQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "^19.2.0"
      }
    },
    "node_modules/@vitejs/plugin-react": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-react/-/plugin-react-5.1.1.tgz",
      "integrity": "sha512-WQfkSw0QbQ5aJ2CHYw23ZGkqnRwqKHD/KYsMeTkZzPT4Jcf0DcBxBtwMJxnu6E7oxw5+JC6ZAiePgh28uJ1HBA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.28.5",
        "@babel/plugin-transform-react-jsx-self": "^7.27.1",
        "@babel/plugin-transform-react-jsx-source": "^7.27.1",
        "@rolldown/pluginutils": "1.0.0-beta.47",
        "@types/babel__core": "^7.20.5",
        "react-refresh": "^0.18.0"
      },
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      },
      "peerDependencies": {
        "vite": "^4.2.0 || ^5.0.0 || ^6.0.0 || ^7.0.0"
      }
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/baseline-browser-mapping": {
      "version": "2.8.27",
      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.8.27.tgz",
      "integrity": "sha512-2CXFpkjVnY2FT+B6GrSYxzYf65BJWEqz5tIRHCvNsZZ2F3CmsCB37h8SpYgKG7y9C4YAeTipIPWG7EmFmhAeXA==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "baseline-browser-mapping": "dist/cli.js"
      }
    },
    "node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/browserslist": {
      "version": "4.28.0",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.28.0.tgz",
      "integrity": "sha512-tbydkR/CxfMwelN0vwdP/pLkDwyAASZ+VfWm4EOwlB6SWhx1sYnWLqo8N5j0rAzPfzfRaxt0mM/4wPU/Su84RQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "baseline-browser-mapping": "^2.8.25",
        "caniuse-lite": "^1.0.30001754",
        "electron-to-chromium": "^1.5.249",
        "node-releases": "^2.0.27",
        "update-browserslist-db": "^1.1.4"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001754",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001754.tgz",
      "integrity": "sha512-x6OeBXueoAceOmotzx3PO4Zpt4rzpeIFsSr6AAePTZxSkXiYDUmpypEl7e2+8NCd9bD7bXjqyef8CJYPC1jfxg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/cliui": {
      "version": "8.0.1",
      "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
      "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
      "license": "ISC",
      "dependencies": {
        "string-width": "^4.2.0",
        "strip-ansi": "^6.0.1",
        "wrap-ansi": "^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "license": "MIT"
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cookie": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-1.0.2.tgz",
      "integrity": "sha512-9Kr/j4O16ISv8zBBhJoi4bXOYNTkFLOqSL3UDB0njXxCXNezjeyVrJyGOWtgfs/q2km1gwBcfH8q1yEGoMYunA==",
      "license": "MIT",
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/csstype": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.1.3.tgz",
      "integrity": "sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.250",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.250.tgz",
      "integrity": "sha512-/5UMj9IiGDMOFBnN4i7/Ry5onJrAGSbOGo3s9FEKmwobGq6xw832ccET0CE3CkkMBZ8GJSlUIesZofpyurqDXw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "license": "MIT"
    },
    "node_modules/engine.io-client": {
      "version": "6.6.3",
      "resolved": "https://registry.npmjs.org/engine.io-client/-/engine.io-client-6.6.3.tgz",
      "integrity": "sha512-T0iLjnyNWahNyv/lcjS2y4oE358tVS/SYQNxYXGAJ9/GLgH4VCvOQ/mhTjqU88mLZCQgiG8RIegFHYCdVC+j5w==",
      "license": "MIT",
      "dependencies": {
        "@socket.io/component-emitter": "~3.1.0",
        "debug": "~4.3.1",
        "engine.io-parser": "~5.2.1",
        "ws": "~8.17.1",
        "xmlhttprequest-ssl": "~2.1.1"
      }
    },
    "node_modules/engine.io-client/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/engine.io-parser": {
      "version": "5.2.3",
      "resolved": "https://registry.npmjs.org/engine.io-parser/-/engine.io-parser-5.2.3.tgz",
      "integrity": "sha512-HqD3yTBfnBxIrbnM1DoD6Pcq8NECnh8d4As1Qgh0z5Gg3jRRIqijury0CL3ghu/edArpUYiYqQiDUQBIs4np3Q==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      }
    },
    "node_modules/esbuild": {
      "version": "0.25.12",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.25.12.tgz",
      "integrity": "sha512-bbPBYYrtZbkt6Os6FiTLCTFxvq4tt3JKall1vRwshA3fdVztsLAatFaZobhkBC8/BrPetoa0oksYoKXoG4ryJg==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=18"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.25.12",
        "@esbuild/android-arm": "0.25.12",
        "@esbuild/android-arm64": "0.25.12",
        "@esbuild/android-x64": "0.25.12",
        "@esbuild/darwin-arm64": "0.25.12",
        "@esbuild/darwin-x64": "0.25.12",
        "@esbuild/freebsd-arm64": "0.25.12",
        "@esbuild/freebsd-x64": "0.25.12",
        "@esbuild/linux-arm": "0.25.12",
        "@esbuild/linux-arm64": "0.25.12",
        "@esbuild/linux-ia32": "0.25.12",
        "@esbuild/linux-loong64": "0.25.12",
        "@esbuild/linux-mips64el": "0.25.12",
        "@esbuild/linux-ppc64": "0.25.12",
        "@esbuild/linux-riscv64": "0.25.12",
        "@esbuild/linux-s390x": "0.25.12",
        "@esbuild/linux-x64": "0.25.12",
        "@esbuild/netbsd-arm64": "0.25.12",
        "@esbuild/netbsd-x64": "0.25.12",
        "@esbuild/openbsd-arm64": "0.25.12",
        "@esbuild/openbsd-x64": "0.25.12",
        "@esbuild/openharmony-arm64": "0.25.12",
        "@esbuild/sunos-x64": "0.25.12",
        "@esbuild/win32-arm64": "0.25.12",
        "@esbuild/win32-ia32": "0.25.12",
        "@esbuild/win32-x64": "0.25.12"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "9.39.1",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-9.39.1.tgz",
      "integrity": "sha512-BhHmn2yNOFA9H9JmmIVKJmd288g9hrVRDkdoIgRCRuSySRUHH7r/DI6aAXW9T1WwUuY3DFgrcaqB+deURBLR5g==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.8.0",
        "@eslint-community/regexpp": "^4.12.1",
        "@eslint/config-array": "^0.21.1",
        "@eslint/config-helpers": "^0.4.2",
        "@eslint/core": "^0.17.0",
        "@eslint/eslintrc": "^3.3.1",
        "@eslint/js": "9.39.1",
        "@eslint/plugin-kit": "^0.4.1",
        "@humanfs/node": "^0.16.6",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@humanwhocodes/retry": "^0.4.2",
        "@types/estree": "^1.0.6",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.6",
        "debug": "^4.3.2",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^8.4.0",
        "eslint-visitor-keys": "^4.2.1",
        "espree": "^10.4.0",
        "esquery": "^1.5.0",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^8.0.0",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      },
      "peerDependencies": {
        "jiti": "*"
      },
      "peerDependenciesMeta": {
        "jiti": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-plugin-react-hooks": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-hooks/-/eslint-plugin-react-hooks-5.2.0.tgz",
      "integrity": "sha512-+f15FfK64YQwZdJNELETdn5ibXEUQmW1DZL6KXhNnc2heoy/sg9VJJeT7n8TlMWouzWqSWavFkIhHyIbIAEapg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "eslint": "^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0"
      }
    },
    "node_modules/eslint-plugin-react-refresh": {
      "version": "0.4.24",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-refresh/-/eslint-plugin-react-refresh-0.4.24.tgz",
      "integrity": "sha512-nLHIW7TEq3aLrEYWpVaJ1dRgFR+wLDPN8e8FpYAql/bMV2oBEfC37K0gLEGgv9fy66juNShSMV8OkTqzltcG/w==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "eslint": ">=8.40"
      }
    },
    "node_modules/eslint-scope": {
      "version": "8.4.0",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-8.4.0.tgz",
      "integrity": "sha512-sNXOfKCn74rt8RICKMvJS7XKV/Xk9kA7DyJr8mJik3S7Cwgy3qlkkmyS2uQB3jiJg6VNdZd/pDBJu0nvG2NlTg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
      "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/espree": {
      "version": "10.4.0",
      "resolved": "https://registry.npmjs.org/espree/-/espree-10.4.0.tgz",
      "integrity": "sha512-j6PAQ2uUr79PZhBjP5C5fhl8e39FmRnOjsD5lGnWrFU8i2G776tBK7+nP8KuQUTTyAZUwfQqXAgrVH5MbH9CYQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.15.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "license": "MIT"
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/faye-websocket": {
      "version": "0.11.4",
      "resolved": "https://registry.npmjs.org/faye-websocket/-/faye-websocket-0.11.4.tgz",
      "integrity": "sha512-CzbClwlXAuiRQAlUyfqPgvPoNKTckTPGfwZV4ZdAhVcP2lh9KUxJg2b5GkE7XbjKQ3YJnQ9z6D9ntLAlB+tP8g==",
      "license": "Apache-2.0",
      "dependencies": {
        "websocket-driver": ">=0.5.1"
      },
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/file-entry-cache": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-8.0.0.tgz",
      "integrity": "sha512-XXTUwCvisa5oacNGRP9SfNtYBNAMi+RPwBFmblZEF7N7swHYQS6/Zfk7SRwx4D5j3CH211YNRco1DEMNVfZCnQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flat-cache": "^4.0.0"
      },
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/firebase": {
      "version": "11.10.0",
      "resolved": "https://registry.npmjs.org/firebase/-/firebase-11.10.0.tgz",
      "integrity": "sha512-nKBXoDzF0DrXTBQJlZa+sbC5By99ysYU1D6PkMRYknm0nCW7rJly47q492Ht7Ndz5MeYSBuboKuhS1e6mFC03w==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/ai": "1.4.1",
        "@firebase/analytics": "0.10.17",
        "@firebase/analytics-compat": "0.2.23",
        "@firebase/app": "0.13.2",
        "@firebase/app-check": "0.10.1",
        "@firebase/app-check-compat": "0.3.26",
        "@firebase/app-compat": "0.4.2",
        "@firebase/app-types": "0.9.3",
        "@firebase/auth": "1.10.8",
        "@firebase/auth-compat": "0.5.28",
        "@firebase/data-connect": "0.3.10",
        "@firebase/database": "1.0.20",
        "@firebase/database-compat": "2.0.11",
        "@firebase/firestore": "4.8.0",
        "@firebase/firestore-compat": "0.3.53",
        "@firebase/functions": "0.12.9",
        "@firebase/functions-compat": "0.3.26",
        "@firebase/installations": "0.6.18",
        "@firebase/installations-compat": "0.2.18",
        "@firebase/messaging": "0.12.22",
        "@firebase/messaging-compat": "0.2.22",
        "@firebase/performance": "0.7.7",
        "@firebase/performance-compat": "0.2.20",
        "@firebase/remote-config": "0.6.5",
        "@firebase/remote-config-compat": "0.2.18",
        "@firebase/storage": "0.13.14",
        "@firebase/storage-compat": "0.3.24",
        "@firebase/util": "1.12.1"
      }
    },
    "node_modules/flat-cache": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-4.0.1.tgz",
      "integrity": "sha512-f7ccFPK3SXFHpx15UIGyRJ/FJQctuKZ0zVuN3frBo4HnK3cay9VEW0R6yPYFHC0AgqhukPzKjq22t5DmAyqGyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.4"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-caller-file": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/get-caller-file/-/get-caller-file-2.0.5.tgz",
      "integrity": "sha512-DyFP3BM/3YHTQOCUL/w0OZHR0lpKeGrxotcHWcqNEdnltqFwXVfhEBQ94eIo34AfQpo0rGki4cyIiftY06h2Fg==",
      "license": "ISC",
      "engines": {
        "node": "6.* || 8.* || >= 10.*"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/globals": {
      "version": "16.5.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-16.5.0.tgz",
      "integrity": "sha512-c/c15i26VrJ4IRt5Z89DnIzCGDn9EcebibhAOjw5ibqEHsE1wLUgkPn9RDmNcUKyU87GeaL633nyJ+pplFR2ZQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/http-parser-js": {
      "version": "0.5.10",
      "resolved": "https://registry.npmjs.org/http-parser-js/-/http-parser-js-0.5.10.tgz",
      "integrity": "sha512-Pysuw9XpUq5dVc/2SMHpuTY01RFl8fttgcyunjL7eEMhGM3cI4eOmiCycJDVCo/7O7ClfQD3SaI6ftDzqOXYMA==",
      "license": "MIT"
    },
    "node_modules/idb": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/idb/-/idb-7.1.1.tgz",
      "integrity": "sha512-gchesWBzyvGHRO9W8tzUWFDycow5gwjvFKfyV9FF32Y7F50yZMp7mP+T2mJIWFx49zicqyC4uefHM17o6xKIVQ==",
      "license": "ISC"
    },
    "node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/invariant": {
      "version": "2.2.4",
      "resolved": "https://registry.npmjs.org/invariant/-/invariant-2.2.4.tgz",
      "integrity": "sha512-phJfQVBuaJM5raOpJjSfkiD6BpbCE4Ns//LaXl6wGYtUBY83nWS6Rf9tXm2e8VaK60JEjYldbPif/A2B1C2gNA==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.0.0"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "license": "MIT"
    },
    "node_modules/js-yaml": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.1.tgz",
      "integrity": "sha512-qQKT4zQxXl8lLwBtHMWwaTcGfFOZviOJet3Oy/xmGk2gZH677CJM9EvtfdSkgWcATZhj/55JZ0rmy3myCT5lsA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/kdbush": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/kdbush/-/kdbush-4.0.2.tgz",
      "integrity": "sha512-WbCVYJ27Sz8zi9Q7Q0xHC+05iwkm3Znipc2XTlrnJbsHMYktW4hPhXUE8Ys1engBrvffoSCqbil1JQAa7clRpA==",
      "license": "ISC"
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/leaflet": {
      "version": "1.9.4",
      "resolved": "https://registry.npmjs.org/leaflet/-/leaflet-1.9.4.tgz",
      "integrity": "sha512-nxS1ynzJOmOlHp+iL3FyWqK89GtNL8U8rvlMOsQdTTssxZwCXh8N2NB3GDQOL+YR3XnWyZAxwQixURb+FA74PA==",
      "license": "BSD-2-Clause",
      "peer": true
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash.camelcase": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/lodash.camelcase/-/lodash.camelcase-4.3.0.tgz",
      "integrity": "sha512-TwuEnCnxbc3rAvhf/LbG7tJUDzhqXyFnv3dtzLOPgCG/hODL7WFnsbwktkD7yUV0RrreP/l1PALq/YSg6VvjlA==",
      "license": "MIT"
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/long": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/long/-/long-5.3.2.tgz",
      "integrity": "sha512-mNAgZ1GmyNhD7AuqnTG3/VQ26o760+ZYBPKjPvugO8+nLbYfX6TVpJPseBvopbdY+qpZ/lKUnmEc1LeZYS3QAA==",
      "license": "Apache-2.0"
    },
    "node_modules/loose-envify": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
      "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "loose-envify": "cli.js"
      }
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/node-releases": {
      "version": "2.0.27",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.27.tgz",
      "integrity": "sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/protobufjs": {
      "version": "7.5.4",
      "resolved": "https://registry.npmjs.org/protobufjs/-/protobufjs-7.5.4.tgz",
      "integrity": "sha512-CvexbZtbov6jW2eXAvLukXjXUW1TzFaivC46BpWc/3BpcCysb5Vffu+B3XHMm8lVEuy2Mm4XGex8hBSg1yapPg==",
      "hasInstallScript": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@protobufjs/aspromise": "^1.1.2",
        "@protobufjs/base64": "^1.1.2",
        "@protobufjs/codegen": "^2.0.4",
        "@protobufjs/eventemitter": "^1.1.0",
        "@protobufjs/fetch": "^1.1.0",
        "@protobufjs/float": "^1.0.2",
        "@protobufjs/inquire": "^1.1.0",
        "@protobufjs/path": "^1.1.2",
        "@protobufjs/pool": "^1.1.0",
        "@protobufjs/utf8": "^1.1.0",
        "@types/node": ">=13.7.0",
        "long": "^5.0.0"
      },
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/react": {
      "version": "19.2.0",
      "resolved": "https://registry.npmjs.org/react/-/react-19.2.0.tgz",
      "integrity": "sha512-tmbWg6W31tQLeB5cdIBOicJDJRR2KzXsV7uSK9iNfLWQ5bIZfxuPEHp7M8wiHyHnn0DD1i7w3Zmin0FtkrwoCQ==",
      "license": "MIT",
      "peer": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-dom": {
      "version": "19.2.0",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-19.2.0.tgz",
      "integrity": "sha512-UlbRu4cAiGaIewkPyiRGJk0imDN2T3JjieT6spoL2UeSf5od4n5LB/mQ4ejmxhCFT1tYe8IvaFulzynWovsEFQ==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "scheduler": "^0.27.0"
      },
      "peerDependencies": {
        "react": "^19.2.0"
      }
    },
    "node_modules/react-leaflet": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/react-leaflet/-/react-leaflet-5.0.0.tgz",
      "integrity": "sha512-CWbTpr5vcHw5bt9i4zSlPEVQdTVcML390TjeDG0cK59z1ylexpqC6M1PJFjV8jD7CF+ACBFsLIDs6DRMoLEofw==",
      "license": "Hippocratic-2.1",
      "dependencies": {
        "@react-leaflet/core": "^3.0.0"
      },
      "peerDependencies": {
        "leaflet": "^1.9.0",
        "react": "^19.0.0",
        "react-dom": "^19.0.0"
      }
    },
    "node_modules/react-refresh": {
      "version": "0.18.0",
      "resolved": "https://registry.npmjs.org/react-refresh/-/react-refresh-0.18.0.tgz",
      "integrity": "sha512-QgT5//D3jfjJb6Gsjxv0Slpj23ip+HtOpnNgnb2S5zU3CB26G/IDPGoy4RJB42wzFE46DRsstbW6tKHoKbhAxw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-router": {
      "version": "7.9.6",
      "resolved": "https://registry.npmjs.org/react-router/-/react-router-7.9.6.tgz",
      "integrity": "sha512-Y1tUp8clYRXpfPITyuifmSoE2vncSME18uVLgaqyxh9H35JWpIfzHo+9y3Fzh5odk/jxPW29IgLgzcdwxGqyNA==",
      "license": "MIT",
      "dependencies": {
        "cookie": "^1.0.1",
        "set-cookie-parser": "^2.6.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "react": ">=18",
        "react-dom": ">=18"
      },
      "peerDependenciesMeta": {
        "react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/react-router-dom": {
      "version": "7.9.6",
      "resolved": "https://registry.npmjs.org/react-router-dom/-/react-router-dom-7.9.6.tgz",
      "integrity": "sha512-2MkC2XSXq6HjGcihnx1s0DBWQETI4mlis4Ux7YTLvP67xnGxCvq+BcCQSO81qQHVUTM1V53tl4iVVaY5sReCOA==",
      "license": "MIT",
      "dependencies": {
        "react-router": "7.9.6"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "react": ">=18",
        "react-dom": ">=18"
      }
    },
    "node_modules/require-directory": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/require-directory/-/require-directory-2.1.1.tgz",
      "integrity": "sha512-fGxEI7+wsG9xrvdjsrlmL22OMTTiHRwAMroiEeMgq8gzoLC/PQr7RsRDSTLUg/bZAZtF+TVIkHc6/4RIKrui+Q==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/rollup": {
      "version": "4.53.2",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.53.2.tgz",
      "integrity": "sha512-MHngMYwGJVi6Fmnk6ISmnk7JAHRNF0UkuucA0CUW3N3a4KnONPEZz+vUanQP/ZC/iY1Qkf3bwPWzyY84wEks1g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "1.0.8"
      },
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "@rollup/rollup-android-arm-eabi": "4.53.2",
        "@rollup/rollup-android-arm64": "4.53.2",
        "@rollup/rollup-darwin-arm64": "4.53.2",
        "@rollup/rollup-darwin-x64": "4.53.2",
        "@rollup/rollup-freebsd-arm64": "4.53.2",
        "@rollup/rollup-freebsd-x64": "4.53.2",
        "@rollup/rollup-linux-arm-gnueabihf": "4.53.2",
        "@rollup/rollup-linux-arm-musleabihf": "4.53.2",
        "@rollup/rollup-linux-arm64-gnu": "4.53.2",
        "@rollup/rollup-linux-arm64-musl": "4.53.2",
        "@rollup/rollup-linux-loong64-gnu": "4.53.2",
        "@rollup/rollup-linux-ppc64-gnu": "4.53.2",
        "@rollup/rollup-linux-riscv64-gnu": "4.53.2",
        "@rollup/rollup-linux-riscv64-musl": "4.53.2",
        "@rollup/rollup-linux-s390x-gnu": "4.53.2",
        "@rollup/rollup-linux-x64-gnu": "4.53.2",
        "@rollup/rollup-linux-x64-musl": "4.53.2",
        "@rollup/rollup-openharmony-arm64": "4.53.2",
        "@rollup/rollup-win32-arm64-msvc": "4.53.2",
        "@rollup/rollup-win32-ia32-msvc": "4.53.2",
        "@rollup/rollup-win32-x64-gnu": "4.53.2",
        "@rollup/rollup-win32-x64-msvc": "4.53.2",
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/safe-buffer": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/scheduler": {
      "version": "0.27.0",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.27.0.tgz",
      "integrity": "sha512-eNv+WrVbKu1f3vbYJT/xtiF5syA5HPIMtf9IgY/nKg0sWqzAUEvqY/xm7OcZc/qafLx/iO9FgOmeSAp4v5ti/Q==",
      "license": "MIT"
    },
    "node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/set-cookie-parser": {
      "version": "2.7.2",
      "resolved": "https://registry.npmjs.org/set-cookie-parser/-/set-cookie-parser-2.7.2.tgz",
      "integrity": "sha512-oeM1lpU/UvhTxw+g3cIfxXHyJRc/uidd3yK1P242gzHds0udQBYzs3y8j4gCCW+ZJ7ad0yctld8RYO+bdurlvw==",
      "license": "MIT"
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/socket.io-client": {
      "version": "4.8.1",
      "resolved": "https://registry.npmjs.org/socket.io-client/-/socket.io-client-4.8.1.tgz",
      "integrity": "sha512-hJVXfu3E28NmzGk8o1sHhN3om52tRvwYeidbj7xKy2eIIse5IoKX3USlS6Tqt3BHAtflLIkCQBkzVrEEfWUyYQ==",
      "license": "MIT",
      "dependencies": {
        "@socket.io/component-emitter": "~3.1.0",
        "debug": "~4.3.2",
        "engine.io-client": "~6.6.1",
        "socket.io-parser": "~4.2.4"
      },
      "engines": {
        "node": ">=10.0.0"
      }
    },
    "node_modules/socket.io-client/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/socket.io-parser": {
      "version": "4.2.4",
      "resolved": "https://registry.npmjs.org/socket.io-parser/-/socket.io-parser-4.2.4.tgz",
      "integrity": "sha512-/GbIKmo8ioc+NIWIhwdecY0ge+qVBSMdgxGygevmdHj24bsfgtCmcUUcQ5ZzcylGFHsN3k4HB4Cgkl96KVnuew==",
      "license": "MIT",
      "dependencies": {
        "@socket.io/component-emitter": "~3.1.0",
        "debug": "~4.3.1"
      },
      "engines": {
        "node": ">=10.0.0"
      }
    },
    "node_modules/socket.io-parser/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "license": "MIT",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/supercluster": {
      "version": "8.0.1",
      "resolved": "https://registry.npmjs.org/supercluster/-/supercluster-8.0.1.tgz",
      "integrity": "sha512-IiOea5kJ9iqzD2t7QJq/cREyLHTtSmUT6gQsweojg9WH2sYJqZK9SswTu6jrscO6D1G5v5vYZ9ru/eq85lXeZQ==",
      "license": "ISC",
      "dependencies": {
        "kdbush": "^4.0.2"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/tinyglobby": {
      "version": "0.2.15",
      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.15.tgz",
      "integrity": "sha512-j2Zq4NyQYG5XMST4cbs02Ak8iJUdxRM0XI5QyxXuZOzKOINmWurp3smXu3y5wDcJrptwpSjgXHzIQxR0omXljQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3"
      },
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/SuperchupuDev"
      }
    },
    "node_modules/tslib": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.8.1.tgz",
      "integrity": "sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==",
      "license": "0BSD"
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/undici-types": {
      "version": "7.16.0",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-7.16.0.tgz",
      "integrity": "sha512-Zz+aZWSj8LE6zoxD+xrjh4VfkIG8Ya6LvYkZqtUQGJPZjYl53ypCaUwWqo7eI0x66KBGeRo+mlBEkMSeSZ38Nw==",
      "license": "MIT"
    },
    "node_modules/update-browserslist-db": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.1.4.tgz",
      "integrity": "sha512-q0SPT4xyU84saUX+tomz1WLkxUbuaJnR1xWt17M7fJtEJigJeWUNGUqrauFXsHnqev9y9JTRGwk13tFBuKby4A==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/vite": {
      "version": "7.2.2",
      "resolved": "https://registry.npmjs.org/vite/-/vite-7.2.2.tgz",
      "integrity": "sha512-BxAKBWmIbrDgrokdGZH1IgkIk/5mMHDreLDmCJ0qpyJaAteP8NvMhkwr/ZCQNqNH97bw/dANTE9PDzqwJghfMQ==",
      "dev": true,
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "esbuild": "^0.25.0",
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3",
        "postcss": "^8.5.6",
        "rollup": "^4.43.0",
        "tinyglobby": "^0.2.15"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^20.19.0 || >=22.12.0",
        "jiti": ">=1.21.0",
        "less": "^4.0.0",
        "lightningcss": "^1.21.0",
        "sass": "^1.70.0",
        "sass-embedded": "^1.70.0",
        "stylus": ">=0.54.8",
        "sugarss": "^5.0.0",
        "terser": "^5.16.0",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "jiti": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/web-vitals": {
      "version": "4.2.4",
      "resolved": "https://registry.npmjs.org/web-vitals/-/web-vitals-4.2.4.tgz",
      "integrity": "sha512-r4DIlprAGwJ7YM11VZp4R884m0Vmgr6EAKe3P+kO0PPj3Unqyvv59rczf6UiGcb9Z8QxZVcqKNwv/g0WNdWwsw==",
      "license": "Apache-2.0"
    },
    "node_modules/websocket-driver": {
      "version": "0.7.4",
      "resolved": "https://registry.npmjs.org/websocket-driver/-/websocket-driver-0.7.4.tgz",
      "integrity": "sha512-b17KeDIQVjvb0ssuSDF2cYXSg2iztliJ4B9WdsuB6J952qCPKmnVq4DyW5motImXHDC1cBT/1UezrJVsKw5zjg==",
      "license": "Apache-2.0",
      "dependencies": {
        "http-parser-js": ">=0.5.1",
        "safe-buffer": ">=5.1.0",
        "websocket-extensions": ">=0.1.1"
      },
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/websocket-extensions": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/websocket-extensions/-/websocket-extensions-0.1.4.tgz",
      "integrity": "sha512-OqedPIGOfsDlo31UNwYbCFMSaO9m9G/0faIHj5/dZFDMFqPTcx6UwqyOy3COEaEOg/9VsGIpdqn62W5KhoKSpg==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/wrap-ansi": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/ws": {
      "version": "8.17.1",
      "resolved": "https://registry.npmjs.org/ws/-/ws-8.17.1.tgz",
      "integrity": "sha512-6XQFvXTkbfUOZOKKILFG1PDK2NDQs4azKQl26T0YS5CxqWLgXajbPZ+h4gZekJyRqFU8pvnbAbbs/3TgRPy+GQ==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "peerDependencies": {
        "bufferutil": "^4.0.1",
        "utf-8-validate": ">=5.0.2"
      },
      "peerDependenciesMeta": {
        "bufferutil": {
          "optional": true
        },
        "utf-8-validate": {
          "optional": true
        }
      }
    },
    "node_modules/xmlhttprequest-ssl": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/xmlhttprequest-ssl/-/xmlhttprequest-ssl-2.1.2.tgz",
      "integrity": "sha512-TEU+nJVUUnA4CYJFLvK5X9AOeH4KvDvhIfm0vV1GaQRtchnG0hgK5p8hw/xjv8cunWYCsiPCSDzObPyhEwq3KQ==",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/y18n": {
      "version": "5.0.8",
      "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
      "integrity": "sha512-0pfFzegeDWJHJIAmTLRP2DwHjdF5s7jo9tuztdQxAhINCdvS+3nGINqPd00AphqJR/0LhANUS6/+7SCb98YOfA==",
      "license": "ISC",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/yargs": {
      "version": "17.7.2",
      "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
      "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
      "license": "MIT",
      "dependencies": {
        "cliui": "^8.0.1",
        "escalade": "^3.1.1",
        "get-caller-file": "^2.0.5",
        "require-directory": "^2.1.1",
        "string-width": "^4.2.3",
        "y18n": "^5.0.5",
        "yargs-parser": "^21.1.1"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yargs-parser": {
      "version": "21.1.1",
      "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
      "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    }
  }
}

```

```my-frontend\index.html
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SwiftDelivery | Airfreight Logistics</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css">
</head>
<body>
  <header class="main-header">
    <div class="header-left">
      <strong class="site-title">‚úàÔ∏è SwiftDelivery</strong>
    </div>

    <!-- Top navigation with auto-scroll to sections -->
    <nav class="top-nav">
      <a href="#home" data-i18n="home">Home</a>
      <a href="#gallery" data-i18n="gallery">Gallery</a>
      <a href="#services" data-i18n="services">Services</a>
      <a href="#track" data-i18n="track">Track</a>
      <a href="#contact" data-i18n="contact">Contact</a>
      <a href="#livechat" data-i18n="liveChatTitle">Live Chat</a>
      <a href="#faq" data-i18n="faq">FAQ</a>
      <a href="#login" data-i18n="login">Login</a>
      <a href="#register" data-i18n="register">Register</a>
    </nav>

    <div class="header-right">
      <!-- Day/Night toggle -->
      <label class="theme-toggle">
        <input type="checkbox" id="themeToggle" aria-label="Toggle dark mode" />
        <span class="slider"></span>
      </label>

      <!-- Menu button for sidebar (mobile) -->
      <button id="menuToggle" aria-label="Toggle menu">‚ò∞</button>
    </div>
  </header>

  <!-- Sidebar (kept mainly for mobile) -->
  <aside id="sideMenu" class="animated-sidebar right-sidebar">
    <button id="closeMenu" aria-label="Close menu">‚úñ</button>
    <ul>
      <li><a href="#home" data-i18n="home">Home</a></li>
      <li><a href="#gallery" data-i18n="gallery">Gallery</a></li>
      <li><a href="#services" data-i18n="services">Services</a></li>
      <li><a href="#track" data-i18n="track">Track</a></li>
      <li><a href="#contact" data-i18n="contact">Contact</a></li>
      <li><a href="#faq" data-i18n="faq">FAQ</a></li>
      <li><a href="#livechat" data-i18n="liveChatTitle">Live Chat</a></li>
      <li><a href="#login" data-i18n="login">Login</a></li>
      <li><a href="#register" data-i18n="register">Register</a></li>
      <li>
        <select id="sidebarLanguageSelect">
          <option value="en">English</option>
          <option value="fr">Fran√ßais</option>
          <option value="es">Espa√±ol</option>
          <option value="de">Deutsch</option>
          <option value="zh">‰∏≠Êñá</option>
          <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
          <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
          <option value="pt">Portugu√™s</option>
          <option value="ru">–†—É—Å—Å–∫–∏–π</option>
          <option value="ja">Êó•Êú¨Ë™û</option>
          <option value="it">Italiano</option>
          <option value="pl">Polski</option>
          <option value="ko">ÌïúÍµ≠Ïñ¥</option>
          <option value="vi">Ti·∫øng Vi·ªát</option>
          <option value="th">‡πÑ‡∏ó‡∏¢</option>
          <option value="tr">T√ºrk√ße</option>
          <option value="id">Bahasa Indonesia</option>
          <option value="nl">Nederlands</option>
          <option value="sv">Svenska</option>
          <option value="el">ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨</option>
          <option value="cs">ƒåe≈°tina</option>
          <option value="hu">Magyar</option>
          <option value="ro">Rom√¢nƒÉ</option>
          <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
          <option value="bn">‡¶¨‡¶æ‡¶ô‡ßç‡¶ó‡¶æ‡¶≤‡¶ø</option>
          <option value="sw">Kiswahili</option>
          <option value="ur">ÿßÿ±ÿØŸà</option>
          <option value="am">·ä†·àõ·à≠·äõ</option>
          <option value="fil">Filipino</option>
          <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</option>
          <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
          <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
          <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
          <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
          <option value="or">‡¨ì‡¨°‡¨ø‡¨Ü</option>
          <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
          <option value="ms">Bahasa Melayu</option>
          <option value="my">·Äô·Äº·Äî·Ä∫·Äô·Ä¨</option>
          <option value="fi">Suomi</option>
          <option value="da">Dansk</option>
          <option value="no">Norsk</option>
          <option value="he">◊¢◊ë◊®◊ô◊™</option>
          <option value="fa">ŸÅÿßÿ±ÿ≥€å</option>
        </select>
      </li>
    </ul>
  </aside>

  <!-- React root for login/register and chat/admin features -->
  <div id="root">
    <!-- React app will mount here -->
  </div>

  <main>
    <section id="home" class="hero">
      <div class="hero-content">
        <h1 data-i18n="welcome">SwiftDelivery Airfreight Logistics</h1>
        <p data-i18n="intro">Global cargo solutions with speed, safety, and precision.</p>
        <a href="#contact" class="cta-button" data-i18n="getStarted">Get Started</a>
      </div>
    </section>

    <section class="highlight">
      <h1>Swift Delivery</h1>
      <p>Manage your deliveries easily.</p>
      <a href="courier-tracking.html" target="_blank" rel="noopener noreferrer" class="track-btn">
        üöö Track Courier
      </a>
    </section>

    <section id="gallery" class="gallery">
      <h2 data-i18n="galleryTitle">Fleet &amp; Facilities</h2>
      <div class="gallery-slider">
        <div class="slide">
          <img src="https://i.ibb.co/HfdMYGr9/Air-1-2560x1060.jpg" alt="Cargo Aircraft" />
        </div>
        <div class="slide">
          <img src="https://i.ibb.co/cS8fDdg5/couriers-unloading-packages-from-a-delivery-truck.jpg" alt="Cargo Warehouse" />
        </div>
        <div class="slide">
          <img src="https://i.ibb.co/Fbyy5gdn/istockphoto-1472189910-612x612.webp" alt="Loading Operation" />
        </div>
        <div class="slide">
          <img src="https://i.ibb.co/1YkQxrHt/person-wearing-orange-tshirt-name-tag-11547159641.webp" alt="SwiftDelivery Team" />
        </div>
        <div class="slide">
          <img src="https://i.ibb.co/SD706kNR/istockphoto-1297658517-612x612.jpg" alt="Real-time Tracking" />
        </div>
      </div>
    </section>

    <section id="services" class="services">
      <h2 data-i18n="servicesTitle">Our Services</h2>
      <div class="service-grid">
        <div class="service-card">
          <h3 data-i18n="service1">Airfreight Express</h3>
          <p data-i18n="service1Desc">
            Priority cargo delivery with guaranteed timelines, ensuring your urgent shipments reach their destination quickly and safely.
          </p>
        </div>
        <div class="service-card">
          <h3 data-i18n="service2">Global Warehousing</h3>
          <p data-i18n="service2Desc">
            Secure storage solutions across strategically located international hubs, enabling efficient inventory management and quick distribution.
          </p>
        </div>
        <div class="service-card">
          <h3 data-i18n="service3">Customs Clearance</h3>
          <p data-i18n="service3Desc">
            Expert handling of documentation and border processing to expedite shipment clearance, minimizing delays and compliance risks.
          </p>
        </div>
        <div class="service-card">
          <h3 data-i18n="service4">Temperature-Controlled Cargo</h3>
          <p data-i18n="service4Desc">
            Specialized transport and storage for pharmaceuticals, perishables, and sensitive goods requiring strict temperature regulation.
          </p>
        </div>
        <div class="service-card">
          <h3 data-i18n="service5">Dangerous Goods Transport</h3>
          <p data-i18n="service5Desc">
            Certified and compliant handling of hazardous materials with stringent safety standards and legal requirements.
          </p>
        </div>
      </div>
    </section>

    <section id="booking" class="booking">
      <h2 data-i18n="bookingTitle">Booking Dashboard</h2>
      <form action="https://api.web3forms.com/submit" method="POST">
        <input type="hidden" name="access_key" value="6f0cf1cf-d8ed-410b-a733-9ee33d4643ba" />
        <input type="text" name="name" required placeholder="Full Name" data-i18n="bookingNamePlaceholder" />
        <input type="email" name="email" required placeholder="Email Address" data-i18n="bookingEmailPlaceholder" />
        <textarea
          name="message"
          required
          placeholder="Booking Details (date, cargo type, destination)"
          data-i18n="bookingMessagePlaceholder"
        ></textarea>
        <button type="submit" data-i18n="bookingSubmitButton">Submit Booking</button>
      </form>
    </section>

    <section id="testimonials" class="testimonials">
      <h2 data-i18n="testimonialsTitle">Customer Testimonials</h2>
      <div class="testimonial-grid">
        <div class="testimonial-card">
          <p data-i18n="testimonial1Text">
            "SwiftDelivery got our medical supplies across borders in record time. Highly recommended!"
          </p>
          <span data-i18n="testimonial1Author">- Dr. Amina Yusuf</span>
        </div>
        <div class="testimonial-card">
          <p data-i18n="testimonial2Text">
            "Their tracking system is top-notch. I knew exactly where my shipment was at all times."
          </p>
          <span data-i18n="testimonial2Author">- James Okoro</span>
        </div>
        <div class="testimonial-card">
          <p data-i18n="testimonial3Text">
            "Professional, fast, and reliable. SwiftDelivery is our go-to logistics partner."
          </p>
          <span data-i18n="testimonial3Author">- GlobalTech Ltd.</span>
        </div>
      </div>
    </section>

    <section id="contact" class="contact">
      <h2 data-i18n="contactTitle">Contact Us</h2>
      <form action="https://api.web3forms.com/submit" method="POST">
        <input type="hidden" name="access_key" value="237d4b4c-c4de-472e-a7f1-d22490311751" />
        <input type="text" name="name" required placeholder="Your Name" />
        <input type="email" name="email" required placeholder="Your Email" />
        <textarea name="message" required placeholder="Your Message"></textarea>
        <button type="submit" data-i18n="submitButton">Submit Form</button>
      </form>
    </section>

    <section id="track" class="tracking">
      <h2 data-i18n="trackTitle">Pickup &amp; Delivery Tracking</h2>
      <form id="trackingForm">
        <div class="form-row">
          <input type="text" id="trackingIdInput" required placeholder="Enter Tracking ID (e.g., SWIFT-1234567890-ABCDE)" />
        </div>
        <button type="submit" data-i18n="trackButton">Track Shipment</button>
      </form>
      <div class="map-container" id="leafletMapContainer" style="height: 400px; border-radius: 12px; overflow: hidden; margin-top: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <div id="trackingMap" style="width: 100%; height: 100%;"></div>
      </div>
      <div id="trackingInfo" style="margin-top: 20px; display: none;">
        <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; border-left: 4px solid #4f46e5;">
          <h3 style="margin: 0 0 10px 0;">üì¶ Your Package</h3>
          <p id="trackingStatus" style="margin: 5px 0;"><strong>Status:</strong> <span id="statusValue">-</span></p>
          <p id="trackingRecipient" style="margin: 5px 0;"><strong>Recipient:</strong> <span id="recipientValue">-</span></p>
          <p id="trackingEmail" style="margin: 5px 0;"><strong>Email:</strong> <span id="emailValue">-</span></p>
          <p id="trackingCoords" style="margin: 5px 0;"><strong>Location:</strong> <span id="coordsValue">-</span></p>
          <p id="trackingTime" style="margin: 5px 0;"><strong>Last Updated:</strong> <span id="timeValue">-</span></p>
          <button id="clearTrackingBtn" style="margin-top: 15px; padding: 10px 20px; background: #ef4444; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">Clear Search</button>
        </div>
      </div>
    </section>

    <!-- Tracking Modal Overlay -->
    <div id="trackingModalOverlay" class="tracking-modal-overlay" style="display: none !important; visibility: hidden !important; opacity: 0 !important; pointer-events: none !important;">
      <div class="tracking-modal-container">
        <!-- Modal Header -->
        <div class="tracking-modal-header">
          <h1 class="tracking-modal-title">üì¶ Live Tracking</h1>
          <button type="button" id="closeTrackingModal" class="tracking-modal-close" aria-label="Close tracking">‚úï</button>
        </div>

        <!-- Modal Content -->
        <div class="tracking-modal-content">
          <!-- Map Section -->
          <div class="tracking-modal-map-section">
            <div id="trackingModalMap" class="tracking-modal-map"></div>
            <div class="tracking-modal-map-controls">
              <button type="button" class="map-control-btn satellite-toggle" title="Toggle Satellite View" onclick="toggleTrackingMapView()">üõ∞Ô∏è Satellite</button>
            </div>
          </div>

          <!-- Info Section -->
          <div class="tracking-modal-info-section">
            <!-- Package Status -->
            <div class="tracking-info-card">
              <div class="info-card-header">
                <h2>üìç Package Status</h2>
                <span id="modalStatusBadge" class="status-badge"></span>
              </div>
              <div class="info-card-content">
                <div class="info-row">
                  <span class="info-label">Tracking ID:</span>
                  <span id="modalTrackingId" class="info-value">-</span>
                </div>
                <div class="info-row">
                  <span class="info-label">Status:</span>
                  <span id="modalStatus" class="info-value">-</span>
                </div>
                <div class="info-row">
                  <span class="info-label">Recipient:</span>
                  <span id="modalRecipient" class="info-value">-</span>
                </div>
                <div class="info-row">
                  <span class="info-label">Email:</span>
                  <span id="modalEmail" class="info-value">-</span>
                </div>
              </div>
            </div>

            <!-- Location Info -->
            <div class="tracking-info-card">
              <div class="info-card-header">
                <h2>üìå Location Details</h2>
              </div>
              <div class="info-card-content">
                <div class="info-row">
                  <span class="info-label">Current Location:</span>
                  <span id="modalLocation" class="info-value">-</span>
                </div>
                <div class="info-row">
                  <span class="info-label">Last Updated:</span>
                  <span id="modalUpdated" class="info-value">-</span>
                </div>
              </div>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container">
              <div class="progress-bar" id="modalProgressBar" style="width: 0%"></div>
            </div>

            <!-- Tracking Timeline -->
            <div class="tracking-timeline" id="trackingTimeline" style="display: none;">
              <h3 style="margin-bottom: 15px; color: var(--text-light);">üìç Journey Timeline</h3>
              <div class="timeline-container" id="timelineContainer"></div>
            </div>

            <!-- Event Log -->
            <div class="event-log-container" id="eventLogContainer" style="display: none;">
              <div class="event-log-header" id="eventLogHeader">
                <span>üìã Detailed Events</span>
                <span class="event-log-toggle" id="eventLogToggle">‚ñº</span>
              </div>
              <div class="event-log-items" id="eventLogItems"></div>
            </div>

            <!-- Close Button -->
            <button type="button" id="closeModalButton" class="tracking-modal-action-btn">Close Tracking</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Admin-Customer Messaging System -->
    <div id="messagingSystemOverlay" class="messaging-overlay">
      <div class="messaging-container">
        <!-- Messaging Header -->
        <div class="messaging-header">
          <div class="messaging-header-info">
            <h2 class="messaging-title">üí¨ Support Chat</h2>
            <span class="messaging-status" id="agentStatus">Waiting for agent...</span>
          </div>
          <button type="button" id="closeMessagingBtn" class="messaging-close" aria-label="Close messaging">‚úï</button>
        </div>

        <!-- Messages Display Area -->
        <div class="messaging-body" id="messagingBody">
          <div class="system-message">Welcome to SwiftDelivery Support! An agent will assist you shortly.</div>
        </div>

        <!-- Message Input Area -->
        <div class="messaging-input-section">
          <form id="messagingForm" class="messaging-form">
            <input 
              type="text" 
              id="messageInput" 
              placeholder="Type your message..." 
              class="messaging-input"
              autocomplete="off"
            />
            <button type="submit" class="messaging-send-btn">Send</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Floating Messaging Button for Logged-in Users -->
    <button id="floatingMessagingBtn" class="floating-messaging-btn" title="Contact Support">üí¨</button>

    <section id="faq" class="faq">
      <h2 data-i18n="faqTitle">Frequently Asked Questions</h2>
      <details>
        <summary data-i18n="faq1Q">How fast is airfreight delivery?</summary>
        <p data-i18n="faq1A">
          Most airfreight shipments arrive within 24‚Äì48 hours, depending on the destination, flight availability, and customs processing.
          We prioritize speed and reliability, ensuring your cargo reaches its destination as quickly as possible. Expedited options are
          available for urgent shipments.
        </p>
      </details>
      <details>
        <summary data-i18n="faq2Q">Do you handle international customs?</summary>
        <p data-i18n="faq2A">
          Yes, we provide comprehensive customs clearance services for all international shipments. Our experienced team navigates complex
          regulations and documentation to ensure smooth border transitions, minimizing delays and avoiding compliance issues.
        </p>
      </details>
      <details>
        <summary data-i18n="faq3Q">Can I track my cargo in real time?</summary>
        <p data-i18n="faq3A">
          Absolutely. Our advanced tracking system offers live updates, GPS location data, and status notifications throughout the journey.
          You'll have full visibility from pickup to final delivery, accessible via our online portal or mobile app.
        </p>
      </details>
      <details>
        <summary data-i18n="faq4Q">Do you offer temperature-controlled shipping?</summary>
        <p data-i18n="faq4A">
          Yes, we specialize in cold-chain logistics tailored for sensitive goods such as pharmaceuticals, vaccines, fresh produce, and
          other perishables. Our temperature-controlled containers and monitoring systems maintain optimal conditions throughout transit.
        </p>
      </details>
      <details>
        <summary data-i18n="faq5Q">Is weekend delivery available?</summary>
        <p data-i18n="faq5A">
          Weekend delivery is available in select regions and for eligible service tiers. To confirm availability for your shipment, please
          contact our support team. We strive to accommodate your schedule with flexible delivery options.
        </p>
      </details>
    </section>

    <section id="livechat" class="livechat">
      <h2 data-i18n="liveChatTitle">Live Chat Support</h2>
      <form action="https://api.web3forms.com/submit" method="POST">
        <input type="hidden" name="access_key" value="6f0cf1cf-d8ed-410b-a733-9ee33d4643ba" />
        <input type="text" name="name" required placeholder="Your Name" data-i18n="liveChatNamePlaceholder" />
        <input type="email" name="email" required placeholder="Your Email" />
        <textarea name="message" required placeholder="Your Message" data-i18n="liveChatMessagePlaceholder"></textarea>
        <button type="submit" data-i18n="submitButton">Submit Form</button>
      </form>
    </section>

    <div id="chatbot" class="chatbot">
      <div class="chat-header">
        <span data-i18n="chatbotTitle">SwiftDelivery Bot</span>
        <button id="voiceModeToggle" type="button">Voice: Off</button>
        <button id="closeChatbot" aria-label="Close chat">‚úñ</button>
      </div>
      <div class="chat-body" id="chatBody">
        <div class="bot-message" data-i18n="chatbotGreeting">Hi there! How can I help you today?</div>
      </div>
      <div class="chat-input" style="display: flex; gap: 8px; align-items: flex-start;">
        <div style="flex-shrink: 0; width: 140px;">
          <button id="voiceToggleBtn" type="button" title="Toggle voice" style="padding: 8px 12px; background: #9ca3af; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 600; width: 100%; white-space: nowrap;">üîá Voice</button>
          <div id="voiceControls" style="display: none; margin-top: 4px; gap: 4px; flex-direction: column; flex-shrink: 0;">
            <button id="voiceListenBtn" type="button" style="padding: 8px 10px; background: #4f46e5; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 600; width: 100%; white-space: nowrap;">üé§ Speak</button>
            <button id="voiceSendBtn" type="button" style="padding: 8px 10px; background: #10b981; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 600; width: 100%; display: none; white-space: nowrap;">‚úì Send</button>
          </div>
        </div>
        <div style="flex: 1; display: flex; gap: 8px; align-items: flex-start;">
          <input
            type="text"
            id="chatMessage"
            placeholder="Type your message..."
            data-i18n="chatMessagePlaceholder"
            style="flex: 1; padding: 8px 12px; border: 1px solid #e5e7eb; border-radius: 4px; font-size: 14px;"
          />
          <button id="sendChat" type="button" data-i18n="sendButton" style="padding: 8px 16px; background: #4f46e5; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: 600;">Send</button>
        </div>
      </div>
    </div>

    <section class="newsletter">
      <h2 data-i18n="newsletterTitle">Stay Updated</h2>
      <p data-i18n="newsletterText">Subscribe to our newsletter for airfreight tips, updates, and exclusive offers.</p>
      <form id="newsletterForm">
        <label for="newsletterEmail" data-i18n="emailLabel">Email</label>
        <input type="email" id="newsletterEmail" name="newsletterEmail" required />
        <button type="submit" data-i18n="subscribeButton">Subscribe</button>
      </form>
    </section>

    <section class="social-media">
      <h2 data-i18n="followUs">Follow Us</h2>
      <ul class="social-icons">
        <li><a href="#" aria-label="Facebook">‚ìï</a></li>
        <li><a href="#" aria-label="Twitter">ùïè</a></li>
        <li><a href="#" aria-label="Instagram">üÖæ</a></li>
        <li><a href="#" aria-label="LinkedIn">[in]</a></li>
      </ul>
    </section>
  </main>

  <footer class="footer">
    <div class="footer-links">
      <div class="footer-column">
        <h4 data-i18n="company">Company</h4>
        <ul>
          <li><a href="#about" data-i18n="about">About Us</a></li>
          <li><a href="#services" data-i18n="services">Services</a></li>
          <li><a href="#gallery" data-i18n="gallery">Gallery</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4 data-i18n="support">Support</h4>
        <ul>
          <li><a href="#faq" data-i18n="faq">FAQ</a></li>
          <li><a href="#contact" data-i18n="contact">Contact</a></li>
          <li><a href="#" data-i18n="helpCenter">Help Center</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4 data-i18n="legal">Legal</h4>
        <ul>
          <li><a href="#" data-i18n="privacy">Privacy Policy</a></li>
          <li><a href="#" data-i18n="terms">Terms of Service</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p data-i18n="footerNote">¬© 2025 SwiftDelivery. All rights reserved.</p>
    </div>
  </footer>

  <!-- Lottie animation -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <lottie-player
    src="https://assets2.lottiefiles.com/packages/lf20_hzgq1iov.json"
    background="transparent"
    speed="1"
    style="width: 60px; height: 60px;"
    loop
    autoplay
  ></lottie-player>

  <!-- AOS animation -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>
    if (window.AOS && typeof AOS.init === "function") {
      AOS.init();
    }
  </script>

  <!-- Tawk.to live chat (replace YOUR_PROPERTY_ID) -->
  <script type="text/javascript">
    var Tawk_API = Tawk_API || {},
      Tawk_LoadStart = new Date();
    (function () {
      var s = document.createElement("script");
      s.async = true;
      s.src = "https://embed.tawk.to/YOUR_PROPERTY_ID/default";
      s.charset = "UTF-8";
      s.setAttribute("crossorigin", "anonymous");
      document.body.appendChild(s);
    })();
  </script>

  <!-- Leaflet -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>

  <!-- Client-side AI model (no API key) -->
  <script src="script.js"></script>
  <script type="module" src="/src/main.jsx"></script>
</body>
</html>

```

```my-frontend\handleLanguageChange(e.target.value

```

```my-frontend\firebase.json
{
  "hosting": {
    "public": "build",
    "ignore": [
      "firebase.json",
      "**/.*",
      "**/node_modules/**"
    ],
    "rewrites": [
      {
        "source": "**",
        "destination": "/index.html"
      }
    ]
  }
}

```

```my-frontend\document.body.classList.remove('user-is-tabbing'))

```

```my-frontend\document.body.classList.remove('theme-transition')

```

```my-frontend\favicon.ico\Copilot_20251115_192558.png
Binary file.
```

```my-frontend\dist\index.html
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SwiftDelivery | Airfreight Logistics</title>
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css">
  <script type="module" crossorigin src="/assets/index-AsJQlRn9.js"></script>
  <link rel="stylesheet" crossorigin href="/assets/index-ds4Gt-O7.css">
</head>
<body>
  <header class="main-header">
    <div class="header-left">
      <strong class="site-title">‚úàÔ∏è SwiftDelivery</strong>
    </div>

    <!-- Top navigation with auto-scroll to sections -->
    <nav class="top-nav">
      <a href="#home" data-i18n="home">Home</a>
      <a href="#gallery" data-i18n="gallery">Gallery</a>
      <a href="#services" data-i18n="services">Services</a>
      <a href="#track" data-i18n="track">Track</a>
      <a href="#contact" data-i18n="contact">Contact</a>
      <a href="#livechat" data-i18n="liveChatTitle">Live Chat</a>
      <a href="#faq" data-i18n="faq">FAQ</a>
      <a href="#login" data-i18n="login">Login</a>
      <a href="#register" data-i18n="register">Register</a>
    </nav>

    <div class="header-right">
      <!-- Day/Night toggle -->
      <label class="theme-toggle">
        <input type="checkbox" id="themeToggle" aria-label="Toggle dark mode" />
        <span class="slider"></span>
      </label>

      <!-- Menu button for sidebar (mobile) -->
      <button id="menuToggle" aria-label="Toggle menu">‚ò∞</button>
    </div>
  </header>

  <!-- Sidebar (kept mainly for mobile) -->
  <aside id="sideMenu" class="animated-sidebar right-sidebar">
    <button id="closeMenu" aria-label="Close menu">‚úñ</button>
    <ul>
      <li><a href="#home" data-i18n="home">Home</a></li>
      <li><a href="#gallery" data-i18n="gallery">Gallery</a></li>
      <li><a href="#services" data-i18n="services">Services</a></li>
      <li><a href="#track" data-i18n="track">Track</a></li>
      <li><a href="#contact" data-i18n="contact">Contact</a></li>
      <li><a href="#faq" data-i18n="faq">FAQ</a></li>
      <li><a href="#livechat" data-i18n="liveChatTitle">Live Chat</a></li>
      <li><a href="#login" data-i18n="login">Login</a></li>
      <li><a href="#register" data-i18n="register">Register</a></li>
      <li>
        <select id="sidebarLanguageSelect">
          <option value="en">English</option>
          <option value="fr">Fran√ßais</option>
          <option value="es">Espa√±ol</option>
          <option value="de">Deutsch</option>
          <option value="zh">‰∏≠Êñá</option>
          <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
          <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
          <option value="pt">Portugu√™s</option>
          <option value="ru">–†—É—Å—Å–∫–∏–π</option>
          <option value="ja">Êó•Êú¨Ë™û</option>
          <option value="it">Italiano</option>
          <option value="pl">Polski</option>
          <option value="ko">ÌïúÍµ≠Ïñ¥</option>
          <option value="vi">Ti·∫øng Vi·ªát</option>
          <option value="th">‡πÑ‡∏ó‡∏¢</option>
          <option value="tr">T√ºrk√ße</option>
          <option value="id">Bahasa Indonesia</option>
          <option value="nl">Nederlands</option>
          <option value="sv">Svenska</option>
          <option value="el">ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨</option>
          <option value="cs">ƒåe≈°tina</option>
          <option value="hu">Magyar</option>
          <option value="ro">Rom√¢nƒÉ</option>
          <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
          <option value="bn">‡¶¨‡¶æ‡¶ô‡ßç‡¶ó‡¶æ‡¶≤‡¶ø</option>
          <option value="sw">Kiswahili</option>
          <option value="ur">ÿßÿ±ÿØŸà</option>
          <option value="am">·ä†·àõ·à≠·äõ</option>
          <option value="fil">Filipino</option>
          <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</option>
          <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
          <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
          <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
          <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
          <option value="or">‡¨ì‡¨°‡¨ø‡¨Ü</option>
          <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
          <option value="ms">Bahasa Melayu</option>
          <option value="my">·Äô·Äº·Äî·Ä∫·Äô·Ä¨</option>
          <option value="fi">Suomi</option>
          <option value="da">Dansk</option>
          <option value="no">Norsk</option>
          <option value="he">◊¢◊ë◊®◊ô◊™</option>
          <option value="fa">ŸÅÿßÿ±ÿ≥€å</option>
        </select>
      </li>
    </ul>
  </aside>

  <!-- React root for login/register and chat/admin features -->
  <div id="root">
    <!-- React app will mount here -->
  </div>

  <main>
    <section id="home" class="hero">
      <div class="hero-content">
        <h1 data-i18n="welcome">SwiftDelivery Airfreight Logistics</h1>
        <p data-i18n="intro">Global cargo solutions with speed, safety, and precision.</p>
        <a href="#contact" class="cta-button" data-i18n="getStarted">Get Started</a>
      </div>
    </section>

    <section class="highlight">
      <h1>Swift Delivery</h1>
      <p>Manage your deliveries easily.</p>
      <a href="courier-tracking.html" target="_blank" rel="noopener noreferrer" class="track-btn">
        üöö Track Courier
      </a>
    </section>

    <section id="gallery" class="gallery">
      <h2 data-i18n="galleryTitle">Fleet &amp; Facilities</h2>
      <div class="gallery-slider">
        <div class="slide">
          <img src="https://i.ibb.co/HfdMYGr9/Air-1-2560x1060.jpg" alt="Cargo Aircraft" />
        </div>
        <div class="slide">
          <img src="https://i.ibb.co/cS8fDdg5/couriers-unloading-packages-from-a-delivery-truck.jpg" alt="Cargo Warehouse" />
        </div>
        <div class="slide">
          <img src="https://i.ibb.co/Fbyy5gdn/istockphoto-1472189910-612x612.webp" alt="Loading Operation" />
        </div>
        <div class="slide">
          <img src="https://i.ibb.co/1YkQxrHt/person-wearing-orange-tshirt-name-tag-11547159641.webp" alt="SwiftDelivery Team" />
        </div>
        <div class="slide">
          <img src="https://i.ibb.co/SD706kNR/istockphoto-1297658517-612x612.jpg" alt="Real-time Tracking" />
        </div>
      </div>
    </section>

    <section id="services" class="services">
      <h2 data-i18n="servicesTitle">Our Services</h2>
      <div class="service-grid">
        <div class="service-card">
          <h3 data-i18n="service1">Airfreight Express</h3>
          <p data-i18n="service1Desc">
            Priority cargo delivery with guaranteed timelines, ensuring your urgent shipments reach their destination quickly and safely.
          </p>
        </div>
        <div class="service-card">
          <h3 data-i18n="service2">Global Warehousing</h3>
          <p data-i18n="service2Desc">
            Secure storage solutions across strategically located international hubs, enabling efficient inventory management and quick distribution.
          </p>
        </div>
        <div class="service-card">
          <h3 data-i18n="service3">Customs Clearance</h3>
          <p data-i18n="service3Desc">
            Expert handling of documentation and border processing to expedite shipment clearance, minimizing delays and compliance risks.
          </p>
        </div>
        <div class="service-card">
          <h3 data-i18n="service4">Temperature-Controlled Cargo</h3>
          <p data-i18n="service4Desc">
            Specialized transport and storage for pharmaceuticals, perishables, and sensitive goods requiring strict temperature regulation.
          </p>
        </div>
        <div class="service-card">
          <h3 data-i18n="service5">Dangerous Goods Transport</h3>
          <p data-i18n="service5Desc">
            Certified and compliant handling of hazardous materials with stringent safety standards and legal requirements.
          </p>
        </div>
      </div>
    </section>

    <section id="booking" class="booking">
      <h2 data-i18n="bookingTitle">Booking Dashboard</h2>
      <form action="https://api.web3forms.com/submit" method="POST">
        <input type="hidden" name="access_key" value="6f0cf1cf-d8ed-410b-a733-9ee33d4643ba" />
        <input type="text" name="name" required placeholder="Full Name" data-i18n="bookingNamePlaceholder" />
        <input type="email" name="email" required placeholder="Email Address" data-i18n="bookingEmailPlaceholder" />
        <textarea
          name="message"
          required
          placeholder="Booking Details (date, cargo type, destination)"
          data-i18n="bookingMessagePlaceholder"
        ></textarea>
        <button type="submit" data-i18n="bookingSubmitButton">Submit Booking</button>
      </form>
    </section>

    <section id="testimonials" class="testimonials">
      <h2 data-i18n="testimonialsTitle">Customer Testimonials</h2>
      <div class="testimonial-grid">
        <div class="testimonial-card">
          <p data-i18n="testimonial1Text">
            "SwiftDelivery got our medical supplies across borders in record time. Highly recommended!"
          </p>
          <span data-i18n="testimonial1Author">- Dr. Amina Yusuf</span>
        </div>
        <div class="testimonial-card">
          <p data-i18n="testimonial2Text">
            "Their tracking system is top-notch. I knew exactly where my shipment was at all times."
          </p>
          <span data-i18n="testimonial2Author">- James Okoro</span>
        </div>
        <div class="testimonial-card">
          <p data-i18n="testimonial3Text">
            "Professional, fast, and reliable. SwiftDelivery is our go-to logistics partner."
          </p>
          <span data-i18n="testimonial3Author">- GlobalTech Ltd.</span>
        </div>
      </div>
    </section>

    <section id="contact" class="contact">
      <h2 data-i18n="contactTitle">Contact Us</h2>
      <form action="https://api.web3forms.com/submit" method="POST">
        <input type="hidden" name="access_key" value="237d4b4c-c4de-472e-a7f1-d22490311751" />
        <input type="text" name="name" required placeholder="Your Name" />
        <input type="email" name="email" required placeholder="Your Email" />
        <textarea name="message" required placeholder="Your Message"></textarea>
        <button type="submit" data-i18n="submitButton">Submit Form</button>
      </form>
    </section>

    <section id="track" class="tracking">
      <h2 data-i18n="trackTitle">Pickup &amp; Delivery Tracking</h2>
      <form id="trackingForm">
        <div class="form-row">
          <input type="text" id="trackingIdInput" required placeholder="Enter Tracking ID (e.g., SWIFT-1234567890-ABCDE)" />
        </div>
        <button type="submit" data-i18n="trackButton">Track Shipment</button>
      </form>
      <div class="map-container" id="leafletMapContainer" style="height: 400px; border-radius: 12px; overflow: hidden; margin-top: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <div id="trackingMap" style="width: 100%; height: 100%;"></div>
      </div>
      <div id="trackingInfo" style="margin-top: 20px; display: none;">
        <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; border-left: 4px solid #4f46e5;">
          <h3 style="margin: 0 0 10px 0;">üì¶ Your Package</h3>
          <p id="trackingStatus" style="margin: 5px 0;"><strong>Status:</strong> <span id="statusValue">-</span></p>
          <p id="trackingRecipient" style="margin: 5px 0;"><strong>Recipient:</strong> <span id="recipientValue">-</span></p>
          <p id="trackingEmail" style="margin: 5px 0;"><strong>Email:</strong> <span id="emailValue">-</span></p>
          <p id="trackingCoords" style="margin: 5px 0;"><strong>Location:</strong> <span id="coordsValue">-</span></p>
          <p id="trackingTime" style="margin: 5px 0;"><strong>Last Updated:</strong> <span id="timeValue">-</span></p>
          <button id="clearTrackingBtn" style="margin-top: 15px; padding: 10px 20px; background: #ef4444; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">Clear Search</button>
        </div>
      </div>
    </section>

    <!-- Tracking Modal Overlay -->
    <div id="trackingModalOverlay" class="tracking-modal-overlay" style="display: none !important; visibility: hidden !important; opacity: 0 !important; pointer-events: none !important;">
      <div class="tracking-modal-container">
        <!-- Modal Header -->
        <div class="tracking-modal-header">
          <h1 class="tracking-modal-title">üì¶ Live Tracking</h1>
          <button type="button" id="closeTrackingModal" class="tracking-modal-close" aria-label="Close tracking">‚úï</button>
        </div>

        <!-- Modal Content -->
        <div class="tracking-modal-content">
          <!-- Map Section -->
          <div class="tracking-modal-map-section">
            <div id="trackingModalMap" class="tracking-modal-map"></div>
            <div class="tracking-modal-map-controls">
              <button type="button" class="map-control-btn satellite-toggle" title="Toggle Satellite View" onclick="toggleTrackingMapView()">üõ∞Ô∏è Satellite</button>
            </div>
          </div>

          <!-- Info Section -->
          <div class="tracking-modal-info-section">
            <!-- Package Status -->
            <div class="tracking-info-card">
              <div class="info-card-header">
                <h2>üìç Package Status</h2>
                <span id="modalStatusBadge" class="status-badge"></span>
              </div>
              <div class="info-card-content">
                <div class="info-row">
                  <span class="info-label">Tracking ID:</span>
                  <span id="modalTrackingId" class="info-value">-</span>
                </div>
                <div class="info-row">
                  <span class="info-label">Status:</span>
                  <span id="modalStatus" class="info-value">-</span>
                </div>
                <div class="info-row">
                  <span class="info-label">Recipient:</span>
                  <span id="modalRecipient" class="info-value">-</span>
                </div>
                <div class="info-row">
                  <span class="info-label">Email:</span>
                  <span id="modalEmail" class="info-value">-</span>
                </div>
              </div>
            </div>

            <!-- Location Info -->
            <div class="tracking-info-card">
              <div class="info-card-header">
                <h2>üìå Location Details</h2>
              </div>
              <div class="info-card-content">
                <div class="info-row">
                  <span class="info-label">Current Location:</span>
                  <span id="modalLocation" class="info-value">-</span>
                </div>
                <div class="info-row">
                  <span class="info-label">Last Updated:</span>
                  <span id="modalUpdated" class="info-value">-</span>
                </div>
              </div>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container">
              <div class="progress-bar" id="modalProgressBar" style="width: 0%"></div>
            </div>

            <!-- Tracking Timeline -->
            <div class="tracking-timeline" id="trackingTimeline" style="display: none;">
              <h3 style="margin-bottom: 15px; color: var(--text-light);">üìç Journey Timeline</h3>
              <div class="timeline-container" id="timelineContainer"></div>
            </div>

            <!-- Event Log -->
            <div class="event-log-container" id="eventLogContainer" style="display: none;">
              <div class="event-log-header" id="eventLogHeader">
                <span>üìã Detailed Events</span>
                <span class="event-log-toggle" id="eventLogToggle">‚ñº</span>
              </div>
              <div class="event-log-items" id="eventLogItems"></div>
            </div>

            <!-- Close Button -->
            <button type="button" id="closeModalButton" class="tracking-modal-action-btn">Close Tracking</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Admin-Customer Messaging System -->
    <div id="messagingSystemOverlay" class="messaging-overlay">
      <div class="messaging-container">
        <!-- Messaging Header -->
        <div class="messaging-header">
          <div class="messaging-header-info">
            <h2 class="messaging-title">üí¨ Support Chat</h2>
            <span class="messaging-status" id="agentStatus">Waiting for agent...</span>
          </div>
          <button type="button" id="closeMessagingBtn" class="messaging-close" aria-label="Close messaging">‚úï</button>
        </div>

        <!-- Messages Display Area -->
        <div class="messaging-body" id="messagingBody">
          <div class="system-message">Welcome to SwiftDelivery Support! An agent will assist you shortly.</div>
        </div>

        <!-- Message Input Area -->
        <div class="messaging-input-section">
          <form id="messagingForm" class="messaging-form">
            <input 
              type="text" 
              id="messageInput" 
              placeholder="Type your message..." 
              class="messaging-input"
              autocomplete="off"
            />
            <button type="submit" class="messaging-send-btn">Send</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Floating Messaging Button for Logged-in Users -->
    <button id="floatingMessagingBtn" class="floating-messaging-btn" title="Contact Support">üí¨</button>

    <section id="faq" class="faq">
      <h2 data-i18n="faqTitle">Frequently Asked Questions</h2>
      <details>
        <summary data-i18n="faq1Q">How fast is airfreight delivery?</summary>
        <p data-i18n="faq1A">
          Most airfreight shipments arrive within 24‚Äì48 hours, depending on the destination, flight availability, and customs processing.
          We prioritize speed and reliability, ensuring your cargo reaches its destination as quickly as possible. Expedited options are
          available for urgent shipments.
        </p>
      </details>
      <details>
        <summary data-i18n="faq2Q">Do you handle international customs?</summary>
        <p data-i18n="faq2A">
          Yes, we provide comprehensive customs clearance services for all international shipments. Our experienced team navigates complex
          regulations and documentation to ensure smooth border transitions, minimizing delays and avoiding compliance issues.
        </p>
      </details>
      <details>
        <summary data-i18n="faq3Q">Can I track my cargo in real time?</summary>
        <p data-i18n="faq3A">
          Absolutely. Our advanced tracking system offers live updates, GPS location data, and status notifications throughout the journey.
          You'll have full visibility from pickup to final delivery, accessible via our online portal or mobile app.
        </p>
      </details>
      <details>
        <summary data-i18n="faq4Q">Do you offer temperature-controlled shipping?</summary>
        <p data-i18n="faq4A">
          Yes, we specialize in cold-chain logistics tailored for sensitive goods such as pharmaceuticals, vaccines, fresh produce, and
          other perishables. Our temperature-controlled containers and monitoring systems maintain optimal conditions throughout transit.
        </p>
      </details>
      <details>
        <summary data-i18n="faq5Q">Is weekend delivery available?</summary>
        <p data-i18n="faq5A">
          Weekend delivery is available in select regions and for eligible service tiers. To confirm availability for your shipment, please
          contact our support team. We strive to accommodate your schedule with flexible delivery options.
        </p>
      </details>
    </section>

    <section id="livechat" class="livechat">
      <h2 data-i18n="liveChatTitle">Live Chat Support</h2>
      <form action="https://api.web3forms.com/submit" method="POST">
        <input type="hidden" name="access_key" value="6f0cf1cf-d8ed-410b-a733-9ee33d4643ba" />
        <input type="text" name="name" required placeholder="Your Name" data-i18n="liveChatNamePlaceholder" />
        <input type="email" name="email" required placeholder="Your Email" />
        <textarea name="message" required placeholder="Your Message" data-i18n="liveChatMessagePlaceholder"></textarea>
        <button type="submit" data-i18n="submitButton">Submit Form</button>
      </form>
    </section>

    <div id="chatbot" class="chatbot">
      <div class="chat-header">
        <span data-i18n="chatbotTitle">SwiftDelivery Bot</span>
        <button id="voiceModeToggle" type="button">Voice: Off</button>
        <button id="closeChatbot" aria-label="Close chat">‚úñ</button>
      </div>
      <div class="chat-body" id="chatBody">
        <div class="bot-message" data-i18n="chatbotGreeting">Hi there! How can I help you today?</div>
      </div>
      <div class="chat-input" style="display: flex; gap: 8px; align-items: flex-start;">
        <div style="flex-shrink: 0; width: 140px;">
          <button id="voiceToggleBtn" type="button" title="Toggle voice" style="padding: 8px 12px; background: #9ca3af; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 600; width: 100%; white-space: nowrap;">üîá Voice</button>
          <div id="voiceControls" style="display: none; margin-top: 4px; gap: 4px; flex-direction: column; flex-shrink: 0;">
            <button id="voiceListenBtn" type="button" style="padding: 8px 10px; background: #4f46e5; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 600; width: 100%; white-space: nowrap;">üé§ Speak</button>
            <button id="voiceSendBtn" type="button" style="padding: 8px 10px; background: #10b981; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 600; width: 100%; display: none; white-space: nowrap;">‚úì Send</button>
          </div>
        </div>
        <div style="flex: 1; display: flex; gap: 8px; align-items: flex-start;">
          <input
            type="text"
            id="chatMessage"
            placeholder="Type your message..."
            data-i18n="chatMessagePlaceholder"
            style="flex: 1; padding: 8px 12px; border: 1px solid #e5e7eb; border-radius: 4px; font-size: 14px;"
          />
          <button id="sendChat" type="button" data-i18n="sendButton" style="padding: 8px 16px; background: #4f46e5; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: 600;">Send</button>
        </div>
      </div>
    </div>

    <section class="newsletter">
      <h2 data-i18n="newsletterTitle">Stay Updated</h2>
      <p data-i18n="newsletterText">Subscribe to our newsletter for airfreight tips, updates, and exclusive offers.</p>
      <form id="newsletterForm">
        <label for="newsletterEmail" data-i18n="emailLabel">Email</label>
        <input type="email" id="newsletterEmail" name="newsletterEmail" required />
        <button type="submit" data-i18n="subscribeButton">Subscribe</button>
      </form>
    </section>

    <section class="social-media">
      <h2 data-i18n="followUs">Follow Us</h2>
      <ul class="social-icons">
        <li><a href="#" aria-label="Facebook">‚ìï</a></li>
        <li><a href="#" aria-label="Twitter">ùïè</a></li>
        <li><a href="#" aria-label="Instagram">üÖæ</a></li>
        <li><a href="#" aria-label="LinkedIn">[in]</a></li>
      </ul>
    </section>
  </main>

  <footer class="footer">
    <div class="footer-links">
      <div class="footer-column">
        <h4 data-i18n="company">Company</h4>
        <ul>
          <li><a href="#about" data-i18n="about">About Us</a></li>
          <li><a href="#services" data-i18n="services">Services</a></li>
          <li><a href="#gallery" data-i18n="gallery">Gallery</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4 data-i18n="support">Support</h4>
        <ul>
          <li><a href="#faq" data-i18n="faq">FAQ</a></li>
          <li><a href="#contact" data-i18n="contact">Contact</a></li>
          <li><a href="#" data-i18n="helpCenter">Help Center</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4 data-i18n="legal">Legal</h4>
        <ul>
          <li><a href="#" data-i18n="privacy">Privacy Policy</a></li>
          <li><a href="#" data-i18n="terms">Terms of Service</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p data-i18n="footerNote">¬© 2025 SwiftDelivery. All rights reserved.</p>
    </div>
  </footer>

  <!-- Lottie animation -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <lottie-player
    src="https://assets2.lottiefiles.com/packages/lf20_hzgq1iov.json"
    background="transparent"
    speed="1"
    style="width: 60px; height: 60px;"
    loop
    autoplay
  ></lottie-player>

  <!-- AOS animation -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>
    if (window.AOS && typeof AOS.init === "function") {
      AOS.init();
    }
  </script>

  <!-- Tawk.to live chat (replace YOUR_PROPERTY_ID) -->
  <script type="text/javascript">
    var Tawk_API = Tawk_API || {},
      Tawk_LoadStart = new Date();
    (function () {
      var s = document.createElement("script");
      s.async = true;
      s.src = "https://embed.tawk.to/YOUR_PROPERTY_ID/default";
      s.charset = "UTF-8";
      s.setAttribute("crossorigin", "anonymous");
      document.body.appendChild(s);
    })();
  </script>

  <!-- Leaflet -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>

  <!-- Client-side AI model (no API key) -->
  <script src="script.js"></script>
</body>
</html>

```

```my-frontend\dist\assets\index-ds4Gt-O7.css
:root{--primary-color: #0078d7;--accent-color: #00b6f1;--text-light: #222;--text-dark: #eee;--bg-light: #ffffff;--bg-dark: #121212;--blur-bg: rgba(255, 255, 255, .6);--transition-speed: .5s;--border-radius: 8px;--shadow-light: 0 2px 8px rgba(0, 0, 0, .1);--shadow-dark: 0 2px 8px rgba(255, 255, 255, .1)}[data-theme=dark]{--primary-color: #00b6f1;--accent-color: #0078d7;--text-light: #eee;--text-dark: #222;--bg-light: #121212;--bg-dark: #ffffff;--blur-bg: rgba(18, 18, 18, .6)}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Segoe UI,sans-serif;background-color:var(--bg-light);color:var(--text-light);transition:background-color var(--transition-speed),color var(--transition-speed)}[data-theme=dark] body{background-color:var(--bg-dark);color:var(--text-dark)}body.tracking-page-blurred{filter:blur(3px)}a{text-decoration:none;color:inherit}button{cursor:pointer;font-family:inherit}.header{position:fixed;top:0;width:100%;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background-color:var(--blur-bg);display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;z-index:2000;transition:background-color var(--transition-speed)}.logo{font-size:1.5rem;font-weight:700}.top-nav ul{display:flex;gap:1rem;list-style:none}.top-nav a{padding:.5rem 1rem;border-radius:var(--border-radius);transition:background-color .3s ease}.top-nav a:hover{background-color:var(--primary-color);color:#fff}.theme-switcher{display:flex;align-items:center;gap:.5rem}#themeToggle{width:40px;height:20px;appearance:none;background-color:#ccc;border-radius:10px;position:relative;outline:none;transition:background-color var(--transition-speed)}#themeToggle:checked{background-color:var(--primary-color)}#themeToggle:before{content:"";position:absolute;top:2px;left:2px;width:16px;height:16px;background-color:#fff;border-radius:50%;transition:transform var(--transition-speed)}#themeToggle:checked:before{transform:translate(20px)}#menuToggle{font-size:1.5rem;background:none;border:none;color:var(--text-light)}[data-theme=dark] #menuToggle{color:var(--text-dark)}#sideMenu{position:fixed;top:0;left:-100%;width:250px;height:100%;background-color:var(--bg-light);box-shadow:var(--shadow-light);transition:left var(--transition-speed);z-index:1999;padding:2rem 1rem}[data-theme=dark] #sideMenu{background-color:var(--bg-dark);box-shadow:var(--shadow-dark)}#sideMenu.open{left:0}#closeMenu{background:none;border:none;font-size:1.5rem;float:right;cursor:pointer;margin-bottom:1rem}#sideMenu ul{list-style:none;padding:0}#sideMenu li{margin-bottom:1rem}#sideMenu a{display:block;padding:.5rem 1rem;border-radius:var(--border-radius);transition:background-color .3s ease}#sideMenu a:hover{background-color:var(--primary-color);color:#fff}.side-menu{width:250px;background:#222;color:#fff;position:fixed;left:0;top:0;bottom:0;overflow-y:auto;transform:translate(0);transition:transform .3s ease}.side-menu.hidden{transform:translate(-100%)}#menu-toggle{position:fixed;top:16px;left:16px;background:#2566ff;color:#fff;border:none;font-size:24px;cursor:pointer;z-index:3000}.hero{height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(to right,var(--primary-color),var(--accent-color));color:#fff;text-align:center;padding-top:5rem}.hero-content h1{font-size:3rem;margin-bottom:1rem}.hero-content p{font-size:1.2rem;margin-bottom:2rem}.cta-button{background-color:#fff;color:var(--primary-color);padding:.75rem 1.5rem;border-radius:var(--border-radius);font-weight:700;transition:background-color var(--transition-speed),color var(--transition-speed)}.cta-button:hover{background-color:var(--primary-color);color:#fff}.gallery{padding:4rem 2rem;background-color:var(--bg-light)}[data-theme=dark] .gallery{background-color:var(--bg-dark)}.gallery h2{text-align:center;font-size:2rem;margin-bottom:2rem;color:var(--primary-color)}.gallery-slider{display:flex;overflow-x:auto;scroll-snap-type:x mandatory;gap:1rem;padding:1rem 0}.gallery-slider .slide{flex:0 0 auto;scroll-snap-align:center;width:300px;height:200px;border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow-light)}[data-theme=dark] .gallery-slider .slide{box-shadow:var(--shadow-dark)}.gallery-slider img{width:100%;height:100%;object-fit:cover}.services{padding:4rem 2rem;background-color:var(--bg-light)}[data-theme=dark] .services{background-color:var(--bg-dark)}.services h2{text-align:center;font-size:2rem;margin-bottom:2rem;color:var(--primary-color)}.service-grid{display:flex;flex-wrap:wrap;gap:2rem;justify-content:center}.service-card{background-color:#f9f9f9;padding:1.5rem;border-radius:var(--border-radius);box-shadow:var(--shadow-light);max-width:300px;text-align:center}[data-theme=dark] .service-card{background-color:#1e1e1e;box-shadow:var(--shadow-dark);color:#eee}.service-card h3{margin-bottom:1rem;color:var(--primary-color)}.service-card p{font-size:1rem;line-height:1.5}.booking{padding:4rem 2rem;background-color:var(--bg-light)}[data-theme=dark] .booking{background-color:var(--bg-dark)}.booking h2{text-align:center;font-size:2rem;margin-bottom:2rem;color:var(--primary-color)}.booking form{max-width:500px;margin:auto;background-color:#fff;padding:2rem;border-radius:var(--border-radius);box-shadow:var(--shadow-light)}[data-theme=dark] .booking form{background-color:#1e1e1e;color:#eee;box-shadow:var(--shadow-dark)}.booking input,.booking textarea{width:100%;padding:.75rem;margin-bottom:1rem;border:1px solid #ccc;border-radius:var(--border-radius)}.booking button{background-color:var(--primary-color);color:#fff;border:none;padding:.75rem;border-radius:var(--border-radius);cursor:pointer;font-weight:700;transition:background-color var(--transition-speed)}.booking button:hover{background-color:var(--accent-color)}.testimonials{padding:4rem 2rem;background-color:var(--bg-light)}[data-theme=dark] .testimonials{background-color:var(--bg-dark)}.testimonials h2{text-align:center;font-size:2rem;margin-bottom:2rem;color:var(--primary-color)}.testimonial-grid{display:flex;flex-wrap:wrap;gap:2rem;justify-content:center}.testimonial-card{background-color:#f9f9f9;padding:1.5rem;border-radius:var(--border-radius);box-shadow:var(--shadow-light);max-width:300px;text-align:center}[data-theme=dark] .testimonial-card{background-color:#1e1e1e;box-shadow:var(--shadow-dark);color:#eee}.testimonial-card p{font-style:italic;margin-bottom:1rem}.testimonial-card span{font-weight:700;color:var(--primary-color)}.contact,.login,.register{padding:4rem 2rem;background-color:var(--bg-light)}[data-theme=dark] .contact,[data-theme=dark] .login,[data-theme=dark] .register{background-color:var(--bg-dark)}.contact h2,.login h2,.register h2{text-align:center;font-size:2rem;margin-bottom:2rem;color:var(--primary-color)}.contact form,.login form,.register form{max-width:500px;margin:auto;background-color:#fff;padding:2rem;border-radius:var(--border-radius);box-shadow:var(--shadow-light)}[data-theme=dark] .contact form,[data-theme=dark] .login form,[data-theme=dark] .register form{background-color:#1e1e1e;color:#eee;box-shadow:var(--shadow-dark)}form input,form textarea{width:100%;padding:.75rem;margin-bottom:1rem;border:1px solid #ccc;border-radius:var(--border-radius)}form button{background-color:var(--primary-color);color:#fff;border:none;padding:.75rem;border-radius:var(--border-radius);cursor:pointer;font-weight:700;transition:background-color var(--transition-speed)}form button:hover{background-color:var(--accent-color)}.tracking{padding:4rem 2rem;background-color:var(--bg-light)}[data-theme=dark] .tracking{background-color:var(--bg-dark)}.tracking h2{text-align:center;font-size:2rem;margin-bottom:2rem;color:var(--primary-color)}.tracking form{max-width:500px;margin:auto;background-color:#fff;padding:2rem;border-radius:var(--border-radius);box-shadow:var(--shadow-light);pointer-events:auto}[data-theme=dark] .tracking form{background-color:#1e1e1e;color:#eee;box-shadow:var(--shadow-dark)}.tracking .form-row{display:flex;gap:1rem;margin-bottom:1rem}.tracking .form-row input{flex:1}.tracking input,.tracking textarea{width:100%;padding:.75rem;margin-bottom:1rem;border:1px solid #ccc;border-radius:var(--border-radius);pointer-events:auto}.tracking button{background-color:var(--primary-color);color:#fff;border:none;padding:.75rem;border-radius:var(--border-radius);cursor:pointer;font-weight:700;transition:background-color var(--transition-speed);pointer-events:auto}.tracking button:hover{background-color:var(--accent-color)}.map-container{margin-top:2rem;border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow-light)}[data-theme=dark] .map-container{box-shadow:var(--shadow-dark)}.faq{padding:4rem 2rem;background-color:var(--bg-light);max-width:800px;margin:auto}[data-theme=dark] .faq{background-color:var(--bg-dark)}.faq h2{text-align:center;font-size:2rem;margin-bottom:2rem;color:var(--primary-color)}.faq details{margin-bottom:1.5rem;border-radius:var(--border-radius);background-color:#f9f9f9;border:1px solid #ddd;box-shadow:var(--shadow-light);overflow:hidden;transition:all .3s ease}[data-theme=dark] .faq details{background-color:#1e1e1e;border-color:#444;box-shadow:var(--shadow-dark)}.faq summary{padding:1rem 1.5rem;font-weight:600;font-size:1.1rem;cursor:pointer;position:relative;list-style:none}.faq summary::marker{display:none}.faq summary:after{content:"‚ûï";position:absolute;right:1.5rem;font-size:1.2rem;transition:transform .3s ease}.faq details[open] summary:after{content:"‚ûñ";transform:rotate(180deg)}.faq p{padding:0 1.5rem 1rem;font-size:1rem;line-height:1.6;color:var(--text-light);animation:fadeIn .4s ease-in}[data-theme=dark] .faq p{color:var(--text-dark)}@keyframes fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.chatbot{position:fixed;bottom:1rem;right:1rem;left:auto;width:300px;background-color:var(--bg-light);border-radius:var(--border-radius);box-shadow:var(--shadow-light);overflow:hidden;z-index:2200;display:flex;flex-direction:column}body.admin-bot-left .chatbot{right:auto;left:1rem}[data-theme=dark] .chatbot{background-color:var(--bg-dark);box-shadow:var(--shadow-dark)}.chat-header{background-color:var(--primary-color);color:#fff;padding:.75rem;display:flex;justify-content:space-between;align-items:center}.chat-body{padding:1rem;height:200px;overflow-y:auto}.chat-input input{flex:1;padding:.5rem;border:none;outline:none}.chat-input button{background-color:var(--primary-color);color:#fff;border:none;padding:.5rem 1rem;cursor:pointer;z-index:2220}.user-message,.bot-message{margin-bottom:.5rem;padding:.5rem;border-radius:var(--border-radius)}.user-message{background-color:#e0f7fa;align-self:flex-end}.bot-message{background-color:#f1f1f1;align-self:flex-start}.newsletter{padding:4rem 2rem;background-color:var(--bg-light);text-align:center}[data-theme=dark] .newsletter{background-color:var(--bg-dark)}.newsletter h2{font-size:2rem;margin-bottom:1rem;color:var(--primary-color)}.newsletter p{font-size:1rem;margin-bottom:1.5rem}.newsletter form{display:flex;justify-content:center;gap:1rem;flex-wrap:wrap}.newsletter input{padding:.75rem;border:1px solid #ccc;border-radius:var(--border-radius);width:250px}.newsletter button{background-color:var(--primary-color);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:var(--border-radius);font-weight:700;transition:background-color var(--transition-speed)}.newsletter button:hover{background-color:var(--accent-color)}.social-media{padding:2rem;text-align:center}.social-media h2{font-size:1.5rem;margin-bottom:1rem;color:var(--primary-color)}.social-icons{display:flex;justify-content:center;gap:1rem;list-style:none;padding:0}.social-icons a{font-size:2rem;color:var(--primary-color);transition:transform .3s ease}.social-icons a:hover{transform:scale(1.2)}.footer{background-color:var(--primary-color);color:#fff;padding:2rem}.footer-links{display:flex;justify-content:space-around;flex-wrap:wrap;gap:2rem}.footer-column h4{margin-bottom:1rem;font-size:1.2rem}.footer-column ul{list-style:none;padding:0}.footer-column li{margin-bottom:.5rem}.footer-column a{color:#fff;text-decoration:none;transition:text-decoration .3s ease}.footer-column a:hover{text-decoration:underline}.footer-bottom{text-align:center;margin-top:2rem;font-size:.9rem}@media(max-width:768px){.top-nav ul{display:none}#menuToggle{display:block}.footer-links,.gallery-slider{flex-direction:column;align-items:center}.chatbot{width:90%;right:5%;left:auto}body.admin-bot-left .chatbot{right:auto;left:5%}.newsletter form{flex-direction:column;align-items:center}.newsletter input{width:100%;max-width:300px}.tracking .form-row{flex-direction:column}.testimonial-grid{flex-direction:column;align-items:center}.booking form,.livechat form{width:100%;padding:1rem}}button,input,select,a,summary{outline:none}button:focus,input:focus,select:focus,a:focus,summary:focus{box-shadow:0 0 0 2px var(--accent-color)}body.theme-transition{transition:background-color .6s ease,color .6s ease}*,*:before,*:after{box-sizing:border-box;transition-timing-function:ease-in-out}body{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;line-height:1.6;color:#333;background:linear-gradient(135deg,#f0f4f8,#fff);padding:20px;transition:background-color .3s ease,color .3s ease;margin:0}h1,h2,h3,h4,h5,h6{font-weight:600;margin-bottom:.75em;color:#222;letter-spacing:.02em}a{color:#0056b3;text-decoration:none;transition:color .3s ease,transform .3s ease;cursor:pointer}a:hover,a:focus{color:#023e8a;text-decoration:underline;transform:scale(1.05);outline:none}button,.btn{background-color:#007bff;color:#fff;border:none;padding:.6em 1.2em;font-size:1em;border-radius:4px;box-shadow:0 4px 6px #007bff66;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease,transform .2s ease}button:hover,.btn:hover,button:focus,.btn:focus{background-color:#0056b3;box-shadow:0 6px 10px #0056b3b3;transform:translateY(-2px);outline:none}section,.card{box-shadow:0 2px 8px #0000001a;border-radius:6px;padding:20px;margin-bottom:24px;background-color:#fafafa;transition:box-shadow .3s ease}section:hover,.card:hover{box-shadow:0 6px 16px #00000026}:focus-visible{outline:3px solid #0056b3;outline-offset:3px}html{scroll-behavior:smooth}body.high-contrast{background:#000!important;color:#fff!important}@media(prefers-contrast:more){body{background:#000!important;color:#fff!important}}body.high-contrast a{color:#ff0!important}@media(prefers-contrast:more){body a{color:#ff0!important}}body.high-contrast .btn{background:#fff!important;color:#000!important;border:3px solid #ff0!important}@media(prefers-contrast:more){body .btn{background:#fff!important;color:#000!important;border:3px solid #ff0!important}}button,.btn,input[type=button],input[type=submit],label,select,.nav-link{min-width:48px;min-height:48px;font-size:1.2rem;padding:.75em 1.2em;border-radius:var(--border-radius, 8px)}a:focus,button:focus,input:focus,select:focus,textarea:focus,.btn:focus,.nav-link:focus{outline:3px solid #00b6f1;outline-offset:3px;box-shadow:0 0 0 4px #00b6f133;border-radius:var(--border-radius, 8px)}:focus:not(:focus-visible){outline:none;box-shadow:none}.sr-only{position:absolute!important;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}.skip-to-content{position:absolute;top:-40px;left:0;background:#00b6f1;color:#fff;padding:8px 16px;z-index:1000;transition:top .2s}.skip-to-content:focus{top:0}body{transition:background .5s cubic-bezier(.77,0,.175,1),color .4s;background:#f4f7fa;color:#222}body.dark-mode{background:#131c26;color:#e7eaf1}header,nav,.card,.btn,input,textarea,select{transition:background .5s,color .4s,box-shadow .4s}header{background:#ffffffb3;-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px);box-shadow:0 2px 16px #14181c14}body.dark-mode header{background:#191c22d9;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);box-shadow:0 2px 20px #0a0c1242}.btn{background:#2566ff;color:#fff;border:none;transition:background .3s,color .3s}body.dark-mode .btn{background:#0052b1;color:#f6f8fc}.card{background:#fff;color:#222;box-shadow:0 2px 10px #4a92ff0a}body.dark-mode .card{background:#202b3e;color:#f4f7fa;box-shadow:0 2px 20px #0a0c1236}input,textarea,select{background:#fff;color:#222}body.dark-mode input,body.dark-mode textarea,body.dark-mode select{background:#192029;color:#e7eaf1;border:1px solid #224477}a{color:#2a60e0;transition:color .3s}body.dark-mode a{color:#7bc9ff}.modal,.overlay{transition:background .4s,color .4s}.theme-toggle{transition:background .3s,color .25s}body.dark-mode .theme-toggle{background:#223354;color:#e9f1ff}body.dark-mode.high-contrast{background:#000!important;color:#fff700!important}body.dark-mode.high-contrast header,body.dark-mode.high-contrast nav,body.dark-mode.high-contrast .card{background:#222!important;color:#ffe600!important;border:3px solid #ffd800!important;box-shadow:0 2px 16px #ff0a!important}body.dark-mode.high-contrast a,body.dark-mode.high-contrast .btn{color:#ff0!important;background:#0d0d0d!important;border:3px solid #25f4ee!important;font-weight:700!important;text-shadow:1px 1px 4px #000,0 0 2px #fff700}body.dark-mode.high-contrast :focus{outline:4px solid #25f4ee!important;outline-offset:2px!important;box-shadow:0 0 0 5px #ffe60099!important}body.dark-mode.high-contrast input,body.dark-mode.high-contrast select,body.dark-mode.high-contrast textarea{background:#222!important;color:#bfa42b!important;border:3px solid #d1b84c!important}body.dark-mode.high-contrast header,body.dark-mode.high-contrast nav,body.dark-mode.high-contrast .card{background:#111!important;color:#bfa42b!important;border:3px solid #ffd800!important;box-shadow:0 0 12px #ff0a!important}body.dark-mode.high-contrast a,body.dark-mode.high-contrast .btn{color:#ff0!important;background:#0e0e0e!important;border:3px solid #25f4ee!important;font-weight:700!important;text-shadow:1px 1px 4px #000,0 0 3px #fff700}body.dark-mode.high-contrast input,body.dark-mode.high-contrast select,body.dark-mode.high-contrast textarea{background:#222!important;color:#fff700!important;border:3px solid #ffe600!important}body.dark-mode.high-contrast :focus{outline:4px solid #42985a!important;outline-offset:2px!important;box-shadow:0 0 0 6px #ffe60099!important}body.dark-mode.high-contrast{background:#000!important;color:#bfa42b!important}body.dark-mode.high-contrast header,body.dark-mode.high-contrast nav,body.dark-mode.high-contrast .card{background:#111!important;color:#bfa42b!important;border:3px solid #bfa42b!important;box-shadow:0 0 12px #bfa42bcc!important}body.dark-mode.high-contrast a,body.dark-mode.high-contrast .btn{color:#bfa42b!important;background:#1a1a0d!important;border:3px solid #42985a!important;font-weight:700!important;text-shadow:1px 1px 4px #000,0 0 3px #bfa42b}.register{padding:4rem 2rem;background-color:var(--bg-light);max-width:500px;margin:2rem auto;border-radius:var(--border-radius);box-shadow:var(--shadow-light);transition:background-color var(--transition-speed),box-shadow var(--transition-speed)}[data-theme=dark] .register{background-color:var(--bg-dark);box-shadow:var(--shadow-dark)}.register h2{text-align:center;font-size:2rem;margin-bottom:2rem;color:var(--primary-color)}#registerSection input{width:100%;padding:.75rem;margin-bottom:1rem;border:1px solid #ccc;border-radius:var(--border-radius);font-size:1rem;box-sizing:border-box}[data-theme=dark] #registerSection input{background-color:#192029;color:#e7eaf1;border-color:#247}#registerBtn{display:block;width:100%;background-color:var(--primary-color);color:#fff;border:none;padding:.75rem;font-size:1.1rem;font-weight:700;border-radius:var(--border-radius);cursor:pointer;transition:background-color .3s ease}#registerBtn:hover{background-color:var(--accent-color)}[data-theme=dark] #registerBtn:hover{background-color:var(--primary-color)}.chatbot{width:300px;border:1px solid #ccc;border-radius:6px;font-family:Arial,sans-serif;display:flex;flex-direction:column}.chat-header{background:#4caf50;color:#fff;padding:8px;display:flex;justify-content:space-between;align-items:center}.chat-body{flex:1;padding:10px;overflow-y:auto;background:#f9f9f9}.chat-input{display:flex;border-top:1px solid #ccc}.chat-input input{flex:1;padding:8px;border:none}.chat-input button{padding:8px 12px;background:#4caf50;color:#fff;border:none;cursor:pointer}.user-message{text-align:right;margin:5px 0;color:#333}.bot-message{text-align:left;margin:5px 0;color:#555}.chatbox-container{border:1px solid #ccc;padding:1rem;max-width:500px;margin:0 auto;background-color:#fff;border-radius:8px;box-shadow:0 0 8px #0000000d}.chatbox-messages{height:300px;overflow-y:auto;margin-bottom:1rem;padding-right:8px}.chatbox-message{margin:.5rem 0;font-size:.95rem}.chatbox-user{text-align:right;color:#333}.chatbox-bot{text-align:left;color:#555}.chatbox-input{display:flex;gap:8px}.chatbox-input input{flex:1;padding:.5rem;border:1px solid #aaa;border-radius:4px}.chatbox-input button{padding:.5rem 1rem;background-color:#07c;color:#fff;border:none;border-radius:4px;cursor:pointer}.chatbox-input button:hover{background-color:#005fa3}.track-btn{display:inline-block;background-color:#007bff;color:#fff;padding:10px 20px;margin-top:20px;border-radius:6px;text-decoration:none;font-weight:700;transition:background-color .3s ease}body{background-color:#121212;color:#f0f0f0;font-family:Arial,sans-serif;text-align:center;padding-top:50px}.track-btn{display:inline-block;background-color:#007bff;color:#fff;padding:10px 20px;margin-top:20px;border-radius:6px;text-decoration:none;font-weight:700;transition:background-color .3s ease;box-shadow:0 2px 6px #0000004d}.track-btn:hover{background-color:#0056b3}:root{--chat-primary: #2563eb;--chat-primary-hover: #1d4ed8;--chat-secondary: #f8fafc;--chat-border: #e2e8f0;--chat-shadow: 0 10px 25px rgba(0, 0, 0, .1);--chat-shadow-hover: 0 20px 40px rgba(0, 0, 0, .15);--chat-radius: 16px;--chat-transition: all .3s cubic-bezier(.4, 0, .2, 1)}#chatToggleBtn{position:fixed!important;bottom:32px!important;right:32px!important;z-index:2100!important;padding:16px 24px!important;border-radius:50px!important;background:linear-gradient(135deg,var(--chat-primary),var(--chat-primary-hover))!important;color:#fff!important;border:none!important;cursor:pointer!important;font-weight:600!important;font-size:16px!important;box-shadow:var(--chat-shadow)!important;transition:var(--chat-transition)!important;display:flex!important;align-items:center!important;gap:8px!important}#chatToggleBtn:hover{transform:translateY(-2px)!important;box-shadow:var(--chat-shadow-hover)!important}#chatToggleBtn:active{transform:translateY(0)!important}#chatbot{position:fixed!important;bottom:100px!important;right:32px!important;z-index:2000!important;width:380px!important;max-width:calc(100vw - 64px)!important;height:600px!important;max-height:calc(100vh - 200px)!important;background:#fff!important;border-radius:var(--chat-radius)!important;box-shadow:var(--chat-shadow-hover)!important;display:flex!important;flex-direction:column!important;overflow:hidden!important;border:1px solid var(--chat-border)!important;-webkit-backdrop-filter:blur(10px)!important;backdrop-filter:blur(10px)!important}.chat-header{background:linear-gradient(135deg,var(--chat-primary),var(--chat-primary-hover));color:#fff;padding:20px 24px;display:flex;align-items:center;justify-content:space-between;border-radius:var(--chat-radius) var(--chat-radius) 0 0}.chat-header h3{margin:0;font-size:18px;font-weight:600;display:flex;align-items:center;gap:8px}.chat-status{display:flex;align-items:center;gap:6px;font-size:12px;opacity:.9}.status-dot{width:8px;height:8px;background:#10b981;border-radius:50%;animation:pulse 2s infinite}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}#closeChatbot{background:none!important;border:none!important;color:#fff!important;font-size:24px!important;cursor:pointer!important;padding:4px!important;border-radius:6px!important;transition:var(--chat-transition)!important;width:32px!important;height:32px!important;display:flex!important;align-items:center!important;justify-content:center!important}#closeChatbot:hover{background:#ffffff1a!important}.chat-body,#chatBody{flex:1;padding:20px;overflow-y:auto;background:#fafbfc;display:flex;flex-direction:column;gap:16px}.chat-body::-webkit-scrollbar,#chatBody::-webkit-scrollbar{width:6px}.chat-body::-webkit-scrollbar-track,#chatBody::-webkit-scrollbar-track{background:transparent}.chat-body::-webkit-scrollbar-thumb,#chatBody::-webkit-scrollbar-thumb{background:var(--chat-border);border-radius:3px}.chat-body::-webkit-scrollbar-thumb:hover,#chatBody::-webkit-scrollbar-thumb:hover{background:#cbd5e1}.chat-message,.user-message,.bot-message{max-width:85%;padding:12px 16px;border-radius:18px;font-size:14px;line-height:1.4;word-wrap:break-word;animation:messageSlide .3s ease-out;margin-bottom:8px}@keyframes messageSlide{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.user-message{background:linear-gradient(135deg,var(--chat-primary),var(--chat-primary-hover));color:#fff;align-self:flex-end;border-bottom-right-radius:6px;margin-left:auto}.bot-message{background:#fff;color:#374151;align-self:flex-start;border:1px solid var(--chat-border);border-bottom-left-radius:6px;box-shadow:0 2px 4px #0000000d}.system-message{background:#fef3c7;color:#92400e;align-self:center;font-size:12px;padding:8px 12px;border-radius:12px;text-align:center;max-width:90%}.typing-indicator{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#fff;border:1px solid var(--chat-border);border-radius:18px 18px 18px 6px;align-self:flex-start;max-width:85%}.typing-dots{display:flex;gap:4px}.typing-dot{width:6px;height:6px;background:#9ca3af;border-radius:50%;animation:typingBounce 1.4s infinite ease-in-out}.typing-dot:nth-child(1){animation-delay:-.32s}.typing-dot:nth-child(2){animation-delay:-.16s}@keyframes typingBounce{0%,80%,to{transform:scale(.8);opacity:.5}40%{transform:scale(1);opacity:1}}.chat-input{padding:20px;background:#fff;border-top:1px solid var(--chat-border);display:flex;gap:12px;align-items:flex-end}#chatMessage{flex:1!important;padding:12px 16px!important;border:2px solid var(--chat-border)!important;border-radius:24px!important;font-size:14px!important;resize:none!important;outline:none!important;transition:var(--chat-transition)!important;max-height:100px!important;min-height:44px!important;font-family:inherit!important}#chatMessage:focus{border-color:var(--chat-primary)!important;box-shadow:0 0 0 3px #2563eb1a!important}#sendChat{background:var(--chat-primary)!important;color:#fff!important;border:none!important;border-radius:50%!important;width:44px!important;height:44px!important;cursor:pointer!important;transition:var(--chat-transition)!important;display:flex!important;align-items:center!important;justify-content:center!important;font-size:18px!important}#sendChat:hover{background:var(--chat-primary-hover)!important;transform:scale(1.05)!important}#sendChat:active{transform:scale(.95)!important}#sendChat:disabled{background:#9ca3af!important;cursor:not-allowed!important;transform:none!important}.quick-actions{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px}.quick-action{background:#fff;border:1px solid var(--chat-border);color:var(--chat-primary);padding:8px 12px;border-radius:16px;font-size:12px;cursor:pointer;transition:var(--chat-transition)}.quick-action:hover{background:var(--chat-primary);color:#fff;transform:translateY(-1px)}.agent-request{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;padding:16px;border-radius:12px;text-align:center;margin:16px 0}.agent-status{background:#ecfdf5;border:1px solid #10b981;color:#065f46;padding:12px;border-radius:8px;font-size:13px;display:flex;align-items:center;gap:8px}.agent-status.connecting{background:#fef3c7;border-color:#f59e0b;color:#92400e}[data-theme=dark] #chatbot{background:#1f2937!important;border-color:#374151!important}[data-theme=dark] .chat-body,[data-theme=dark] #chatBody{background:#111827!important}[data-theme=dark] .bot-message{background:#374151!important;color:#f9fafb!important;border-color:#4b5563!important}[data-theme=dark] .chat-input{background:#1f2937!important;border-color:#374151!important}[data-theme=dark] #chatMessage{background:#374151!important;color:#f9fafb!important;border-color:#4b5563!important}[data-theme=dark] #chatMessage:focus{border-color:var(--chat-primary)!important}[data-theme=dark] .quick-action{background:#374151!important;border-color:#4b5563!important;color:#f9fafb!important}@media(max-width:768px){#chatbot{width:calc(100vw - 32px)!important;height:calc(100vh - 120px)!important;bottom:16px!important;right:16px!important}#chatToggleBtn{bottom:16px!important;right:16px!important}}.main-header{position:sticky;top:0;z-index:1000;display:flex;justify-content:space-between;align-items:center;padding:.75rem 1.5rem;background:var(--header-bg, #ffffff);color:var(--header-text, #111111);box-shadow:0 2px 4px #0000000f}.site-title{font-size:1.5rem;font-weight:800}.header-right{display:flex;align-items:center;gap:.75rem}#menuToggle{font-size:1.4rem;background:transparent;border:none;cursor:pointer;color:inherit}.right-sidebar{position:fixed;top:0;right:0;height:100vh;width:260px;background:var(--sidebar-bg, #ffffff);box-shadow:-2px 0 6px #0000001f;transform:translate(100%);transition:transform .3s ease;z-index:999;padding:1rem}.right-sidebar.open{transform:translate(0)}#closeMenu{background:transparent;border:none;font-size:1.2rem;cursor:pointer;float:right}#sideMenu ul{list-style:none;padding:0;margin:2.5rem 0 0}#sideMenu li{margin-bottom:.75rem}#sideMenu a{text-decoration:none;color:inherit}.theme-toggle{position:relative;display:inline-block;width:50px;height:26px}.theme-toggle input{opacity:0;width:0;height:0}.theme-toggle .slider{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:34px}.theme-toggle .slider:before{position:absolute;content:"";height:20px;width:20px;left:4px;bottom:3px;background-color:#fff;transition:.4s;border-radius:50%}.theme-toggle input:checked+.slider{background-color:#111827}.theme-toggle input:checked+.slider:before{transform:translate(22px)}main{padding-top:4rem}html[data-theme=light]{--header-bg: #ffffff;--header-text: #111111;--sidebar-bg: #ffffff}html[data-theme=dark]{--header-bg: #111827;--header-text: #f9fafb;--sidebar-bg: #030712;background:#020617;color:#e5e7eb}.main-header{position:sticky;top:0;z-index:1000;display:flex;justify-content:space-between;align-items:center;padding:.75rem 1.5rem;background:#0f172a73;backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);border-bottom:1px solid rgba(255,255,255,.18);color:var(--header-text, #f9fafb)}body{background:radial-gradient(circle at top,#0f172a 0,#020617 45%,#000)}.site-title{font-size:1.6rem;font-weight:800;letter-spacing:.04em}#sideMenu,.right-sidebar{position:fixed;top:0;left:0;right:auto;height:100vh;width:260px;transform:translate(-100%);transition:transform .3s ease;z-index:999}#sideMenu.open,.right-sidebar.open{transform:translate(0)}html[dir=rtl] #sideMenu,html[dir=rtl] .right-sidebar{left:0;right:auto}.tracking-modal-overlay.active,.tracking-modal-overlay.active *,.messaging-overlay,.messaging-container,.floating-messaging-btn{pointer-events:auto!important;z-index:99999!important}.highlight{padding:2rem 1rem;background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff;text-align:center}.highlight h1{font-size:1.5rem;margin-bottom:.5rem;font-style:italic}.highlight p{font-size:1rem;margin-bottom:1rem;font-style:italic;opacity:.95}.track-btn{display:inline-block;padding:10px 20px;background:#fff;color:#4f46e5;border-radius:6px;font-weight:600;text-decoration:none;transition:background .3s,transform .3s}.track-btn:hover{background:#f0f0f0;transform:translateY(-2px)}.tracking-modal-overlay{position:fixed!important;inset:0!important;background:#00000080!important;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);z-index:3000!important;animation:fadeIn .3s ease;overflow-y:auto;padding:20px;visibility:hidden!important;opacity:0!important;display:none!important;align-items:center;justify-content:center;transition:visibility .3s ease,opacity .3s ease;pointer-events:none!important}.tracking-modal-overlay.active{visibility:visible!important;opacity:1!important;display:flex!important;pointer-events:auto!important}@keyframes slideUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}.tracking-modal-container{background:#fff;border-radius:16px;box-shadow:0 20px 60px #0000004d;width:95vw;max-width:1400px;max-height:95vh;display:flex;flex-direction:column;animation:slideUp .4s ease;overflow:hidden}[data-theme=dark] .tracking-modal-container{background:#1a1a1a;color:#eee}.tracking-modal-header{padding:24px;background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(0,0,0,.1)}.tracking-modal-title{font-size:24px;font-weight:700;margin:0}.tracking-modal-close{background:#fff3;border:none;color:#fff;font-size:24px;width:44px;height:44px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.tracking-modal-close:hover{background:#ffffff4d;transform:rotate(90deg)}.tracking-modal-content{display:grid;grid-template-columns:1fr 450px;gap:24px;padding:28px;overflow-y:auto;flex:1}@media(max-width:1200px){.tracking-modal-content{grid-template-columns:1fr 380px;gap:20px;padding:20px}}@media(max-width:992px){.tracking-modal-content{grid-template-columns:1fr;gap:20px;padding:20px}}@media(max-width:768px){.tracking-modal-content{grid-template-columns:1fr;gap:16px;padding:16px}}.tracking-modal-map-section{position:relative;background:#f0f0f0;border-radius:12px;overflow:hidden;min-height:400px}[data-theme=dark] .tracking-modal-map-section{background:#2a2a2a}.tracking-modal-map{width:100%;height:100%;min-height:400px}.tracking-modal-map-controls{position:absolute;top:12px;right:12px;display:flex;gap:8px;z-index:10}.map-control-btn{background:#fff;border:none;padding:10px 16px;border-radius:8px;cursor:pointer;font-weight:600;font-size:13px;box-shadow:0 2px 8px #00000026;transition:all .3s ease;display:flex;align-items:center;gap:6px}.map-control-btn:hover{background:#f5f5f5;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.map-control-btn.active{background:#4f46e5;color:#fff}.tracking-modal-info-section{display:flex;flex-direction:column;gap:16px;overflow-y:auto;max-height:100%}.tracking-info-card{background:#f8f9fa;border-radius:12px;padding:16px;border:1px solid #e0e0e0}[data-theme=dark] .tracking-info-card{background:#2a2a2a;border-color:#444}.info-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.info-card-header h2{font-size:16px;font-weight:700;margin:0;color:#333;font-style:italic}[data-theme=dark] .info-card-header h2{color:#eee}.status-badge{display:inline-block;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;background:#dcfce7;color:#166534}.status-badge.pending{background:#fef3c7;color:#92400e}.status-badge.in-transit{background:#dbeafe;color:#0c4a6e}.status-badge.delivered{background:#dcfce7;color:#166534}.status-badge.failed{background:#fee2e2;color:#991b1b}.info-card-content{display:flex;flex-direction:column;gap:8px}.info-row{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;font-size:13px}.info-label{font-weight:600;color:#666;min-width:120px;font-style:italic}[data-theme=dark] .info-label{color:#aaa}.info-value{color:#333;text-align:right;flex:1;word-break:break-word;font-style:italic}[data-theme=dark] .info-value{color:#eee}.tracking-modal-action-btn{padding:12px 20px;background:#ef4444;color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:auto;width:100%}.tracking-modal-action-btn:hover{background:#dc2626;transform:translateY(-2px)}.tracking-modal-loading{display:flex;align-items:center;justify-content:center;min-height:400px}.tracking-modal-loading:after{content:"";width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #4f46e5;border-radius:50%;animation:spin 1s linear infinite}@keyframes courierPulse{0%,to{box-shadow:0 0 #4f46e5b3}50%{box-shadow:0 0 0 10px #4f46e500}}.courier-marker-active{animation:courierPulse 2s infinite}.messaging-overlay{position:fixed;top:70px;right:350px;width:320px;height:500px;background:#fff;border-radius:12px;box-shadow:0 10px 40px #0003;z-index:1500;display:flex;flex-direction:column;visibility:hidden;opacity:0;transform:translateY(-20px) scale(.95);transition:all .3s ease;pointer-events:none;-webkit-user-select:none;user-select:none}.messaging-overlay.active{visibility:visible;opacity:1;transform:translateY(0) scale(1);pointer-events:auto;-webkit-user-select:auto;user-select:auto}[data-theme=dark] .messaging-overlay{background:#1a1a1a;color:#eee}.messaging-container{display:flex;flex-direction:column;height:100%;overflow:hidden}.messaging-header{padding:16px 20px;background:linear-gradient(135deg,#7c3aed,#6d28d9);color:#fff;display:flex;justify-content:space-between;align-items:flex-start;border-radius:12px 12px 0 0;cursor:move}.messaging-header-info{flex:1}.messaging-title{font-size:16px;font-weight:700;margin:0 0 4px}.messaging-status{font-size:12px;opacity:.9;display:block}.messaging-close{background:#fff3;border:none;color:#fff;width:32px;height:32px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;font-size:18px}.messaging-close:hover{background:#fff6;transform:rotate(90deg)}.messaging-body{flex:1;overflow-y:auto;padding:16px 20px;display:flex;flex-direction:column;gap:12px;background:#f8f9fa}[data-theme=dark] .messaging-body{background:#2a2a2a}.message-item{display:flex;animation:slideInMessage .3s ease}@keyframes slideInMessage{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.message-item.customer{justify-content:flex-end}.message-item.admin{justify-content:flex-start}.message-bubble{max-width:80%;padding:10px 14px;border-radius:12px;font-size:13px;line-height:1.4;word-wrap:break-word}.message-item.customer .message-bubble{background:#4f46e5;color:#fff;border-radius:12px 12px 0}.message-item.admin .message-bubble{background:#fff;color:#333;border:1px solid #e0e0e0;border-radius:12px 12px 12px 0}[data-theme=dark] .message-item.admin .message-bubble{background:#333;color:#eee;border-color:#444}.system-message{text-align:center;font-size:12px;color:#999;padding:8px 0;font-style:italic}[data-theme=dark] .system-message{color:#666}.message-time{font-size:11px;color:#999;margin-top:4px;text-align:right}[data-theme=dark] .message-time{color:#666}.messaging-input-section{padding:16px 20px;border-top:1px solid #e0e0e0;background:#fff;border-radius:0 0 16px 16px}[data-theme=dark] .messaging-input-section{background:#1a1a1a;border-top-color:#333}.messaging-form{display:flex;gap:8px;pointer-events:auto}.messaging-input{flex:1;padding:10px 14px;border:1px solid #e0e0e0;border-radius:8px;font-size:13px;font-family:inherit;transition:border-color .3s ease;pointer-events:auto}.messaging-input:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}[data-theme=dark] .messaging-input{background:#2a2a2a;border-color:#444;color:#eee}.messaging-send-btn{padding:10px 16px;background:#7c3aed;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;font-size:13px;transition:all .3s ease;pointer-events:auto}.messaging-send-btn:hover{background:#6d28d9;transform:translateY(-2px)}.messaging-send-btn:active{transform:translateY(0)}@media(max-width:480px){.messaging-overlay{width:calc(100% - 40px);height:400px;right:20px;top:70px}.message-bubble{max-width:100%}}.floating-messaging-btn{position:fixed;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#7c3aed,#6d28d9);color:#fff;border:none;font-size:24px;cursor:pointer;box-shadow:0 4px 12px #7c3aed66;display:none!important;align-items:center;justify-content:center;transition:all .3s ease;z-index:1400;visibility:hidden!important;pointer-events:none!important}.floating-messaging-btn:hover{transform:scale(1.1);box-shadow:0 6px 20px #7c3aed99}.floating-messaging-btn:active{transform:scale(.95)}.floating-messaging-btn.visible,#messagingSystemOverlay,.messaging-overlay{display:none!important;visibility:hidden!important;pointer-events:none!important}@media(max-width:1200px){.messaging-overlay{right:20px}.floating-messaging-btn{right:20px;bottom:520px}}@media(max-width:480px){.floating-messaging-btn{width:48px;height:48px;font-size:20px;bottom:420px}}@keyframes pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes slideInDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}@keyframes slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes staggerFadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes glow{0%,to{box-shadow:0 0 5px #0078d780}50%{box-shadow:0 0 20px #0078d7cc}}@keyframes lineAnimation{0%{stroke-dashoffset:1000}to{stroke-dashoffset:0}}@keyframes shimmer{0%{background-position:-1000px 0}to{background-position:1000px 0}}@keyframes expandHeight{0%{max-height:0;opacity:0}to{max-height:500px;opacity:1}}@keyframes collapseHeight{0%{max-height:500px;opacity:1}to{max-height:0;opacity:0}}@keyframes toastSlideIn{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}@keyframes toastSlideOut{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(100%)}}@keyframes checkmark{0%{transform:scale(0) rotate(-45deg);opacity:0}50%{transform:scale(1.2)}to{transform:scale(1) rotate(0);opacity:1}}.tracking-spinner{width:40px;height:40px;border:4px solid rgba(0,120,215,.2);border-top-color:#0078d7;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto}.pulse-btn{animation:pulse 2s infinite}.tracking-modal-overlay.active{animation:fadeIn .3s ease-out}.tracking-modal-container{animation:slideInUp .5s ease-out}.tracking-modal-map-section{animation:slideInDown .6s ease-out .1s both}.tracking-info-card{animation:staggerFadeIn .6s ease-out both}.tracking-info-card:nth-child(1){animation-delay:.3s}.tracking-info-card:nth-child(2){animation-delay:.5s}.tracking-modal-action-btn{animation:staggerFadeIn .6s ease-out .7s both}.tracking-timeline{position:relative;padding:20px 0}.timeline-container{display:flex;flex-direction:column;gap:20px;padding:20px;background:var(--bg-light);border-radius:12px;border:1px solid rgba(0,120,215,.2)}[data-theme=dark] .timeline-container{background:var(--bg-dark);border-color:#00b6f133}.timeline-item{display:flex;gap:15px;position:relative;animation:slideInUp .5s ease-out}.timeline-item:before{content:"";position:absolute;left:8px;top:35px;width:2px;height:calc(100% + 20px);background:#0078d733}.timeline-item:last-child:before{display:none}.timeline-marker{width:16px;height:16px;border-radius:50%;background:#0078d7;border:3px solid var(--bg-light);flex-shrink:0;position:relative;z-index:1;margin-top:2px;box-shadow:0 0 0 4px #0078d71a}[data-theme=dark] .timeline-marker{border-color:var(--bg-dark)}.timeline-marker.completed{background:#10b981;animation:checkmark .6s ease-out}.timeline-marker.current{background:#f59e0b;animation:pulse 2s infinite}.timeline-content{flex:1;padding-top:5px}.timeline-label{font-weight:600;color:var(--text-light);margin-bottom:4px;font-size:14px}[data-theme=dark] .timeline-label{color:var(--text-dark)}.timeline-time{font-size:12px;color:#888;margin-bottom:4px}.timeline-location{font-size:12px;color:#666}[data-theme=dark] .timeline-location{color:#aaa}.progress-container{width:100%;height:8px;background:#0078d71a;border-radius:10px;overflow:hidden;margin:15px 0}.progress-bar{height:100%;background:linear-gradient(90deg,#0078d7,#00b6f1);border-radius:10px;transition:width .6s ease-out;position:relative}.progress-bar:after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);animation:shimmer 2s infinite}.event-log-container{padding:20px;background:var(--bg-light);border-radius:12px;border:1px solid rgba(0,120,215,.2);margin-top:20px}[data-theme=dark] .event-log-container{background:var(--bg-dark);border-color:#00b6f133}.event-log-header{display:flex;justify-content:space-between;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;font-weight:600;color:var(--text-light);margin-bottom:0}[data-theme=dark] .event-log-header{color:var(--text-dark)}.event-log-header:hover{color:#0078d7}.event-log-toggle{font-size:20px;transition:transform .3s ease}.event-log-toggle.expanded{transform:rotate(180deg)}.event-log-items{max-height:0;overflow:hidden;animation:expandHeight .3s ease-out forwards}.event-log-items.collapsed{animation:collapseHeight .3s ease-out forwards}.event-log-item{display:flex;gap:15px;padding:12px 0;border-bottom:1px solid rgba(0,120,215,.1);font-size:14px}.event-log-item:last-child{border-bottom:none}.event-log-icon{font-size:18px;flex-shrink:0}.event-log-details{flex:1}.event-log-title{font-weight:600;margin-bottom:4px;color:var(--text-light)}[data-theme=dark] .event-log-title{color:var(--text-dark)}.event-log-time{font-size:12px;color:#888}.toast-container{position:fixed;top:80px;right:20px;z-index:9999;display:flex;flex-direction:column;gap:10px}.toast{background:#10b981;color:#fff;padding:14px 20px;border-radius:8px;box-shadow:0 4px 12px #00000026;animation:toastSlideIn .3s ease-out;display:flex;align-items:center;gap:10px;max-width:350px;word-wrap:break-word}.toast.error{background:#ef4444}.toast.warning{background:#f59e0b}.toast.info{background:#0078d7}.toast.remove{animation:toastSlideOut .3s ease-out forwards}.toast-icon{font-size:18px;flex-shrink:0}.tracking-form-loading .track-btn{animation:pulse 1.5s infinite;opacity:.8}.track-btn{transition:all .3s ease}.skeleton{background:linear-gradient(90deg,#0078d71a,#0078d74d,#0078d71a);background-size:200% 100%;animation:shimmer 2s infinite;border-radius:8px}.skeleton-text{height:16px;margin:8px 0;border-radius:4px}.skeleton-bar{height:8px;margin:10px 0;border-radius:4px}.glow-effect{animation:glow 2s infinite}.status-badge{display:inline-block;padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;animation:slideInDown .4s ease-out}.status-badge.pending{background:#f99e0b33;color:#f59e0b;border:1px solid #f59e0b}.status-badge.in-transit{background:#3b82f633;color:#3b82f6;border:1px solid #3b82f6;animation:pulse 2s infinite}.status-badge.delivered{background:#10b98133;color:#10b981;border:1px solid #10b981}.status-badge.failed{background:#ef444433;color:#ef4444;border:1px solid #ef4444}.tracking-modal-map-controls{display:flex;gap:10px;flex-wrap:wrap}.map-control-btn{padding:8px 12px;border:none;border-radius:6px;background:#ffffffe6;color:#222;cursor:pointer;font-size:12px;font-weight:600;transition:all .2s ease;box-shadow:0 2px 8px #0000001a}.map-control-btn:hover{background:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.map-control-btn:active{transform:translateY(0)}@media(max-width:768px){.tracking-modal-content{flex-direction:column}.toast-container{right:10px;left:10px}.toast{max-width:100%}.timeline-item{gap:12px}.timeline-marker{width:14px;height:14px}}@media(max-width:480px){.tracking-info-card{padding:12px}.toast{padding:12px 16px;font-size:13px}.event-log-container{padding:15px}.progress-container{margin:10px 0}}@keyframes slideIn{0%{transform:scale(.9) translateY(20px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}@keyframes fadeInOverlay{0%{opacity:0}to{opacity:1}}.tracking-modal-overlay{position:fixed;inset:0;width:100%;height:100%;background-color:#00000080;display:flex!important;align-items:center;justify-content:center;z-index:99999!important;animation:fadeInOverlay .3s ease-out;pointer-events:auto!important;visibility:visible!important;opacity:1!important}.tracking-modal-content{background:#fff;border-radius:16px;box-shadow:0 20px 60px #0000004d;width:95vw;max-width:1400px;max-height:90vh;display:flex!important;flex-direction:column;overflow:hidden;animation:slideIn .3s ease-out;pointer-events:auto!important;position:relative;z-index:100000!important;visibility:visible!important;opacity:1!important}.tracking-modal-header{display:flex!important;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e2e8f0;background-color:#f9fafb;pointer-events:auto!important;visibility:visible!important}.tracking-modal-title{margin:0;font-size:20px;font-weight:600;color:#1a202c}.tracking-modal-close{background:linear-gradient(135deg,#f56565,#e53e3e);color:#fff;border:none;border-radius:50%;width:36px;height:36px;cursor:pointer;font-size:18px;font-weight:700;display:flex;align-items:center;justify-content:center;transition:all .2s ease;box-shadow:0 2px 8px #0000001a;pointer-events:auto;z-index:10001}.tracking-modal-close:hover{background:linear-gradient(135deg,#e53e3e,#c53030);transform:scale(1.1);box-shadow:0 4px 12px #f565654d}.tracking-modal-close:active{transform:scale(.95)}.tracking-modal-body{flex:1!important;overflow:auto!important;padding:20px;pointer-events:auto!important;background:#fff;visibility:visible!important;display:block!important}.tracking-modal-body::-webkit-scrollbar{width:8px}.tracking-modal-body::-webkit-scrollbar-track{background:#f1f5f9}.tracking-modal-body::-webkit-scrollbar-thumb{background:#cbd5e0;border-radius:10px}.tracking-modal-body::-webkit-scrollbar-thumb:hover{background:#a0aec0}@media(max-width:1024px){.tracking-modal-content{width:98vw;max-height:95vh}}@media(max-width:768px){.tracking-modal-content{width:100vw;max-width:100vw;max-height:100vh;border-radius:0}.tracking-modal-header{padding:16px 20px}.tracking-modal-title{font-size:18px}.tracking-modal-body{padding:16px}}@media(max-width:480px){.tracking-modal-close{width:32px;height:32px;font-size:16px}.tracking-modal-header{padding:12px 16px}.tracking-modal-title{font-size:16px}.tracking-modal-body{padding:12px}}.leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg{max-width:none!important;max-height:none!important}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer,.leaflet-container .leaflet-tile{max-width:none!important;max-height:none!important;width:auto;padding:0}.leaflet-container img.leaflet-tile{mix-blend-mode:plus-lighter}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}svg.leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline-offset:1px}.leaflet-container a{color:#0078a8}.leaflet-zoom-box{border:2px dotted #38f;background:#ffffff80}.leaflet-container{font-family:Helvetica Neue,Arial,Helvetica,sans-serif;font-size:12px;font-size:.75rem;line-height:1.5}.leaflet-bar{box-shadow:0 1px 5px #000000a6;border-radius:4px}.leaflet-bar a{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover,.leaflet-bar a:focus{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{box-shadow:0 1px 5px #0006;background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block;font-size:13px;font-size:1.08333em}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=)}.leaflet-container .leaflet-control-attribution{background:#fff;background:#fffc;margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333;line-height:1.4}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover,.leaflet-control-attribution a:focus{text-decoration:underline}.leaflet-attribution-flag{display:inline!important;vertical-align:baseline!important;width:1em;height:.6669em}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;white-space:nowrap;-moz-box-sizing:border-box;box-sizing:border-box;background:#fffc;text-shadow:1px 1px #fff}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 24px 13px 20px;line-height:1.3;font-size:13px;font-size:1.08333em;min-height:1px}.leaflet-popup-content p{margin:1.3em 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-top:-1px;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;pointer-events:auto;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;color:#333;box-shadow:0 3px 14px #0006}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;border:none;text-align:center;width:24px;height:24px;font:16px/24px Tahoma,Verdana,sans-serif;color:#757575;text-decoration:none;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover,.leaflet-container a.leaflet-popup-close-button:focus{color:#585858}.leaflet-popup-scrolled{overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=.70710678,M12=.70710678,M21=-.70710678,M22=.70710678)}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px #0006}.leaflet-tooltip.leaflet-interactive{cursor:pointer;pointer-events:auto}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}@media print{.leaflet-control{-webkit-print-color-adjust:exact;print-color-adjust:exact}}.live-tracking-section{background:linear-gradient(135deg,#f5f7fb,#e9ecef);padding:24px;border-radius:16px;margin-bottom:24px;box-shadow:0 10px 30px #00000014}.section-title{font-size:24px;font-weight:700;color:#1a202c;margin-bottom:20px;display:flex;align-items:center;gap:10px}.error-message{background-color:#fed7d7;color:#c53030;padding:12px 16px;border-radius:8px;margin-bottom:16px;border-left:4px solid #c53030;font-size:14px}.success-message{background-color:#c6f6d5;color:#22543d;padding:12px 16px;border-radius:8px;margin-bottom:16px;border-left:4px solid #22c55e;font-size:14px}.tracking-layout{display:grid;grid-template-columns:280px minmax(0,1fr);gap:20px}.tracking-sidebar{background:#fff;border-radius:12px;padding:16px;box-shadow:0 4px 12px #0000000f;height:fit-content;position:sticky;top:20px}.sidebar-title{font-size:16px;font-weight:600;color:#2d3748;margin-bottom:12px;padding-bottom:12px;border-bottom:2px solid #e2e8f0}.sidebar-hint{font-size:12px;color:#a0aec0;margin-bottom:12px;padding:0 4px}.users-list{display:flex;flex-direction:column;gap:8px;max-height:calc(100vh - 300px);overflow-y:auto}.users-list::-webkit-scrollbar{width:6px}.users-list::-webkit-scrollbar-track{background:#f1f5f9;border-radius:10px}.users-list::-webkit-scrollbar-thumb{background:#cbd5e0;border-radius:10px}.users-list::-webkit-scrollbar-thumb:hover{background:#a0aec0}.user-item{background:#f7fafc;border:1px solid #e2e8f0;padding:10px 12px;border-radius:8px;cursor:pointer;transition:all .3s ease;text-align:left;font-size:13px}.user-item:hover{background:#edf2f7;border-color:#cbd5e0;transform:translate(2px)}.user-item.active{background:linear-gradient(135deg,#4f46e5,#6366f1);color:#fff;border-color:#4f46e5;box-shadow:0 4px 12px #4f46e54d}.user-info{display:flex;flex-direction:column;gap:2px}.user-info strong{font-weight:600;display:block}.user-email{font-size:12px;opacity:.8;word-break:break-all}.user-item.active .user-email{opacity:.9}.no-users{text-align:center;color:#718096;font-size:14px;padding:20px 10px;font-style:italic}.no-users-icon{font-size:32px;display:block;margin-bottom:8px}.no-users small{font-size:12px;color:#a0aec0;display:block;margin-top:8px}.user-avatar{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px;flex-shrink:0}.user-item{display:flex;align-items:center;gap:8px}.selected-badge{margin-left:auto;font-size:16px}.tracking-map-wrapper{display:flex;flex-direction:column;gap:16px}.tracking-map{width:100%;height:400px;border-radius:12px;overflow:hidden;box-shadow:0 8px 20px #0000001a;background:#e0e7ff;position:relative}.map-loading{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;color:#718096}.loading-spinner{width:40px;height:40px;border:4px solid #e2e8f0;border-top:4px solid #4f46e5;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 12px}.tracking-controls{display:flex;gap:12px;align-items:center;background:#fff;padding:16px;border-radius:12px;box-shadow:0 4px 12px #0000000f;flex-wrap:wrap}.selected-user-display{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#f0f4ff;border-radius:8px;border:1px solid #c7d2fe}.selected-user-info{display:flex;align-items:center;gap:8px}.label{font-size:12px;font-weight:600;color:#718096;text-transform:uppercase}.user-name{font-size:14px;font-weight:600;color:#4f46e5}.no-selection{font-size:14px;color:#a0aec0;font-style:italic}.status-control{display:flex;flex-direction:column;gap:6px;flex:1;min-width:200px}.status-control label{font-size:13px;font-weight:600;color:#2d3748}.status-select{padding:10px 12px;border:1px solid #cbd5e0;border-radius:8px;font-size:14px;color:#2d3748;background:#fff;cursor:pointer;transition:all .2s ease}.status-select:hover:not(:disabled){border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.status-select:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.status-select:disabled{background:#f7fafc;color:#a0aec0;cursor:not-allowed}.pin-button{padding:10px 16px;background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;border-radius:8px;font-weight:600;font-size:14px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #10b9814d;white-space:nowrap}.pin-button:hover:not(:disabled){background:linear-gradient(135deg,#059669,#047857);transform:translateY(-2px);box-shadow:0 6px 16px #10b98166}.pin-button:active:not(:disabled){transform:translateY(0)}.pin-button.active{background:linear-gradient(135deg,#f59e0b,#d97706);box-shadow:0 4px 12px #f59e0b4d;animation:pulse 2s infinite}.pin-button:disabled{background:#cbd5e0;cursor:not-allowed;opacity:.6}@keyframes pulse{0%,to{opacity:1}50%{opacity:.8}}.tracking-id-box{background:#fff;padding:16px;border-radius:12px;box-shadow:0 4px 12px #0000000f;border-left:4px solid #4f46e5}.id-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.records-count{font-size:11px;color:#a0aec0;background:#f7fafc;padding:4px 8px;border-radius:4px;font-weight:500}.id-label{font-size:13px;font-weight:600;color:#718096;margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.id-display{display:flex;gap:8px;align-items:center}.tracking-id{font-family:Monaco,Courier New,monospace;font-size:16px;font-weight:700;color:#4f46e5;word-break:break-all;padding:8px 12px;background:#f0f4ff;border-radius:6px;flex:1}.copy-button{padding:8px 12px;background:#4f46e5;color:#fff;border:none;border-radius:6px;font-size:12px;font-weight:600;cursor:pointer;transition:all .2s ease;white-space:nowrap}.copy-button:hover{background:#3f35d6;box-shadow:0 2px 8px #4f46e54d}.id-placeholder{color:#a0aec0;font-size:14px;font-style:italic;display:flex;align-items:center;gap:8px}.placeholder-icon{font-size:24px}.instructions-box{background:#f0f4ff;padding:16px;border-radius:12px;border:1px solid #c7d2fe;margin-top:16px}.instructions-box h4{margin-top:0;margin-bottom:12px;font-size:13px;font-weight:600;color:#4f46e5}.instructions-box ol{margin:0;padding-left:20px}.instructions-box li{margin-bottom:8px;font-size:13px;color:#4a5568;line-height:1.5}@media(max-width:1200px){.tracking-layout{grid-template-columns:1fr}.tracking-sidebar{position:static}}@media(max-width:768px){.live-tracking-section{padding:16px}.section-title{font-size:20px}.tracking-map{height:300px}.tracking-controls{flex-direction:column}.status-control{min-width:unset;width:100%}.pin-button{width:100%}.users-list{max-height:300px}}@media(max-width:480px){.tracking-map{height:250px}.id-display{flex-direction:column}.copy-button{width:100%}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes containerPopOut{0%{opacity:0;transform:scale(.5) translateY(80px);filter:blur(20px)}40%{filter:blur(10px)}70%{filter:blur(3px)}to{opacity:1;transform:scale(1) translateY(0);filter:blur(0px)}}.container-initial{opacity:0!important;transform:scale(.5) translateY(80px)!important;filter:blur(20px)!important}.container-animate-pop{animation:containerPopOut 1.2s cubic-bezier(.12,.65,.25,1.08) forwards!important;opacity:1!important;transform:scale(1) translateY(0)!important;filter:blur(0px)!important}body.tracking-page-blurred{filter:blur(3px)!important}@media(max-width:768px){.container{padding:16px!important}.title{font-size:24px!important}.subtitle{font-size:14px!important}.contentWrapper{display:grid!important;grid-template-columns:1fr!important;gap:16px!important}.map{height:300px!important}.searchForm,.inputWrapper{flex-direction:column!important}.searchButton{width:100%}.detailsGrid{grid-template-columns:1fr!important}.placeholderSection{padding:40px 16px!important}}@media(max-width:480px){.container{padding:12px!important}.title{font-size:20px!important}.headerSection{margin-bottom:20px!important}.map{height:250px!important}.cardHeader{flex-direction:column!important;align-items:flex-start!important}.clearButton{align-self:flex-end}.detailsGrid{gap:8px!important}.placeholderIcon{font-size:40px!important}.placeholderTitle{font-size:16px!important}.placeholderText{font-size:12px!important}}

```

```my-frontend\dist\assets\index-AsJQlRn9.js
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function t(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(a){if(a.ep)return;a.ep=!0;const u=t(a);fetch(a.href,u)}})();function Nd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Zm={exports:{}},rt={};var a0;function aL(){if(a0)return rt;a0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),I=Symbol.iterator;function V(B){return B===null||typeof B!="object"?null:(B=I&&B[I]||B["@@iterator"],typeof B=="function"?B:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,q={};function W(B,K,te){this.props=B,this.context=K,this.refs=q,this.updater=te||N}W.prototype.isReactComponent={},W.prototype.setState=function(B,K){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,K,"setState")},W.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function $(){}$.prototype=W.prototype;function re(B,K,te){this.props=B,this.context=K,this.refs=q,this.updater=te||N}var ie=re.prototype=new $;ie.constructor=re,H(ie,W.prototype),ie.isPureReactComponent=!0;var ee=Array.isArray;function X(){}var O={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function M(B,K,te){var fe=te.ref;return{$$typeof:n,type:B,key:K,ref:fe!==void 0?fe:null,props:te}}function j(B,K){return M(B.type,K,B.props)}function U(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function G(B){var K={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(te){return K[te]})}var F=/\/+/g;function ke(B,K){return typeof B=="object"&&B!==null&&B.key!=null?G(""+B.key):K.toString(36)}function Le(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(X,X):(B.status="pending",B.then(function(K){B.status==="pending"&&(B.status="fulfilled",B.value=K)},function(K){B.status==="pending"&&(B.status="rejected",B.reason=K)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function ne(B,K,te,fe,Q){var Ae=typeof B;(Ae==="undefined"||Ae==="boolean")&&(B=null);var Ie=!1;if(B===null)Ie=!0;else switch(Ae){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(B.$$typeof){case n:case e:Ie=!0;break;case w:return Ie=B._init,ne(Ie(B._payload),K,te,fe,Q)}}if(Ie)return Q=Q(B),Ie=fe===""?"."+ke(B,0):fe,ee(Q)?(te="",Ie!=null&&(te=Ie.replace(F,"$&/")+"/"),ne(Q,K,te,"",function(ze){return ze})):Q!=null&&(U(Q)&&(Q=j(Q,te+(Q.key==null||B&&B.key===Q.key?"":(""+Q.key).replace(F,"$&/")+"/")+Ie)),K.push(Q)),1;Ie=0;var De=fe===""?".":fe+":";if(ee(B))for(var Qe=0;Qe<B.length;Qe++)fe=B[Qe],Ae=De+ke(fe,Qe),Ie+=ne(fe,K,te,Ae,Q);else if(Qe=V(B),typeof Qe=="function")for(B=Qe.call(B),Qe=0;!(fe=B.next()).done;)fe=fe.value,Ae=De+ke(fe,Qe++),Ie+=ne(fe,K,te,Ae,Q);else if(Ae==="object"){if(typeof B.then=="function")return ne(Le(B),K,te,fe,Q);throw K=String(B),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function me(B,K,te){if(B==null)return B;var fe=[],Q=0;return ne(B,fe,"","",function(Ae){return K.call(te,Ae,Q++)}),fe}function ge(B){if(B._status===-1){var K=B._result;K=K(),K.then(function(te){(B._status===0||B._status===-1)&&(B._status=1,B._result=te)},function(te){(B._status===0||B._status===-1)&&(B._status=2,B._result=te)}),B._status===-1&&(B._status=0,B._result=K)}if(B._status===1)return B._result.default;throw B._result}var _e=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},ue={map:me,forEach:function(B,K,te){me(B,function(){K.apply(this,arguments)},te)},count:function(B){var K=0;return me(B,function(){K++}),K},toArray:function(B){return me(B,function(K){return K})||[]},only:function(B){if(!U(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return rt.Activity=T,rt.Children=ue,rt.Component=W,rt.Fragment=t,rt.Profiler=a,rt.PureComponent=re,rt.StrictMode=r,rt.Suspense=v,rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,rt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return O.H.useMemoCache(B)}},rt.cache=function(B){return function(){return B.apply(null,arguments)}},rt.cacheSignal=function(){return null},rt.cloneElement=function(B,K,te){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var fe=H({},B.props),Q=B.key;if(K!=null)for(Ae in K.key!==void 0&&(Q=""+K.key),K)!P.call(K,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&K.ref===void 0||(fe[Ae]=K[Ae]);var Ae=arguments.length-2;if(Ae===1)fe.children=te;else if(1<Ae){for(var Ie=Array(Ae),De=0;De<Ae;De++)Ie[De]=arguments[De+2];fe.children=Ie}return M(B.type,Q,fe)},rt.createContext=function(B){return B={$$typeof:f,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:u,_context:B},B},rt.createElement=function(B,K,te){var fe,Q={},Ae=null;if(K!=null)for(fe in K.key!==void 0&&(Ae=""+K.key),K)P.call(K,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Q[fe]=K[fe]);var Ie=arguments.length-2;if(Ie===1)Q.children=te;else if(1<Ie){for(var De=Array(Ie),Qe=0;Qe<Ie;Qe++)De[Qe]=arguments[Qe+2];Q.children=De}if(B&&B.defaultProps)for(fe in Ie=B.defaultProps,Ie)Q[fe]===void 0&&(Q[fe]=Ie[fe]);return M(B,Ae,Q)},rt.createRef=function(){return{current:null}},rt.forwardRef=function(B){return{$$typeof:g,render:B}},rt.isValidElement=U,rt.lazy=function(B){return{$$typeof:w,_payload:{_status:-1,_result:B},_init:ge}},rt.memo=function(B,K){return{$$typeof:_,type:B,compare:K===void 0?null:K}},rt.startTransition=function(B){var K=O.T,te={};O.T=te;try{var fe=B(),Q=O.S;Q!==null&&Q(te,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(X,_e)}catch(Ae){_e(Ae)}finally{K!==null&&te.types!==null&&(K.types=te.types),O.T=K}},rt.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},rt.use=function(B){return O.H.use(B)},rt.useActionState=function(B,K,te){return O.H.useActionState(B,K,te)},rt.useCallback=function(B,K){return O.H.useCallback(B,K)},rt.useContext=function(B){return O.H.useContext(B)},rt.useDebugValue=function(){},rt.useDeferredValue=function(B,K){return O.H.useDeferredValue(B,K)},rt.useEffect=function(B,K){return O.H.useEffect(B,K)},rt.useEffectEvent=function(B){return O.H.useEffectEvent(B)},rt.useId=function(){return O.H.useId()},rt.useImperativeHandle=function(B,K,te){return O.H.useImperativeHandle(B,K,te)},rt.useInsertionEffect=function(B,K){return O.H.useInsertionEffect(B,K)},rt.useLayoutEffect=function(B,K){return O.H.useLayoutEffect(B,K)},rt.useMemo=function(B,K){return O.H.useMemo(B,K)},rt.useOptimistic=function(B,K){return O.H.useOptimistic(B,K)},rt.useReducer=function(B,K,te){return O.H.useReducer(B,K,te)},rt.useRef=function(B){return O.H.useRef(B)},rt.useState=function(B){return O.H.useState(B)},rt.useSyncExternalStore=function(B,K,te){return O.H.useSyncExternalStore(B,K,te)},rt.useTransition=function(){return O.H.useTransition()},rt.version="19.2.0",rt}var l0;function nv(){return l0||(l0=1,Zm.exports=aL()),Zm.exports}var b=nv();const x=Nd(b);var Gm={exports:{}},Mc={},Wm={exports:{}},Km={};var u0;function lL(){return u0||(u0=1,(function(n){function e(ne,me){var ge=ne.length;ne.push(me);e:for(;0<ge;){var _e=ge-1>>>1,ue=ne[_e];if(0<a(ue,me))ne[_e]=me,ne[ge]=ue,ge=_e;else break e}}function t(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var me=ne[0],ge=ne.pop();if(ge!==me){ne[0]=ge;e:for(var _e=0,ue=ne.length,B=ue>>>1;_e<B;){var K=2*(_e+1)-1,te=ne[K],fe=K+1,Q=ne[fe];if(0>a(te,ge))fe<ue&&0>a(Q,te)?(ne[_e]=Q,ne[fe]=ge,_e=fe):(ne[_e]=te,ne[K]=ge,_e=K);else if(fe<ue&&0>a(Q,ge))ne[_e]=Q,ne[fe]=ge,_e=fe;else break e}}return me}function a(ne,me){var ge=ne.sortIndex-me.sortIndex;return ge!==0?ge:ne.id-me.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();n.unstable_now=function(){return f.now()-g}}var v=[],_=[],w=1,T=null,I=3,V=!1,N=!1,H=!1,q=!1,W=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function ie(ne){for(var me=t(_);me!==null;){if(me.callback===null)r(_);else if(me.startTime<=ne)r(_),me.sortIndex=me.expirationTime,e(v,me);else break;me=t(_)}}function ee(ne){if(H=!1,ie(ne),!N)if(t(v)!==null)N=!0,X||(X=!0,G());else{var me=t(_);me!==null&&Le(ee,me.startTime-ne)}}var X=!1,O=-1,P=5,M=-1;function j(){return q?!0:!(n.unstable_now()-M<P)}function U(){if(q=!1,X){var ne=n.unstable_now();M=ne;var me=!0;try{e:{N=!1,H&&(H=!1,$(O),O=-1),V=!0;var ge=I;try{t:{for(ie(ne),T=t(v);T!==null&&!(T.expirationTime>ne&&j());){var _e=T.callback;if(typeof _e=="function"){T.callback=null,I=T.priorityLevel;var ue=_e(T.expirationTime<=ne);if(ne=n.unstable_now(),typeof ue=="function"){T.callback=ue,ie(ne),me=!0;break t}T===t(v)&&r(v),ie(ne)}else r(v);T=t(v)}if(T!==null)me=!0;else{var B=t(_);B!==null&&Le(ee,B.startTime-ne),me=!1}}break e}finally{T=null,I=ge,V=!1}me=void 0}}finally{me?G():X=!1}}}var G;if(typeof re=="function")G=function(){re(U)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ke=F.port2;F.port1.onmessage=U,G=function(){ke.postMessage(null)}}else G=function(){W(U,0)};function Le(ne,me){O=W(function(){ne(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_next=function(ne){switch(I){case 1:case 2:case 3:var me=3;break;default:me=I}var ge=I;I=me;try{return ne()}finally{I=ge}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(ne,me){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ge=I;I=ne;try{return me()}finally{I=ge}},n.unstable_scheduleCallback=function(ne,me,ge){var _e=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?_e+ge:_e):ge=_e,ne){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ge+ue,ne={id:w++,callback:me,priorityLevel:ne,startTime:ge,expirationTime:ue,sortIndex:-1},ge>_e?(ne.sortIndex=ge,e(_,ne),t(v)===null&&ne===t(_)&&(H?($(O),O=-1):H=!0,Le(ee,ge-_e))):(ne.sortIndex=ue,e(v,ne),N||V||(N=!0,X||(X=!0,G()))),ne},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(ne){var me=I;return function(){var ge=I;I=me;try{return ne.apply(this,arguments)}finally{I=ge}}}})(Km)),Km}var c0;function uL(){return c0||(c0=1,Wm.exports=lL()),Wm.exports}var Ym={exports:{}},vi={};var h0;function cL(){if(h0)return vi;h0=1;var n=nv();function e(v){var _="https://react.dev/errors/"+v;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)_+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function u(v,_,w){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:v,containerInfo:_,implementation:w}}var f=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,_){if(v==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return vi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vi.createPortal=function(v,_){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return u(v,_,null,w)},vi.flushSync=function(v){var _=f.T,w=r.p;try{if(f.T=null,r.p=2,v)return v()}finally{f.T=_,r.p=w,r.d.f()}},vi.preconnect=function(v,_){typeof v=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(v,_))},vi.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},vi.preinit=function(v,_){if(typeof v=="string"&&_&&typeof _.as=="string"){var w=_.as,T=g(w,_.crossOrigin),I=typeof _.integrity=="string"?_.integrity:void 0,V=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;w==="style"?r.d.S(v,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:T,integrity:I,fetchPriority:V}):w==="script"&&r.d.X(v,{crossOrigin:T,integrity:I,fetchPriority:V,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},vi.preinitModule=function(v,_){if(typeof v=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var w=g(_.as,_.crossOrigin);r.d.M(v,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(v)},vi.preload=function(v,_){if(typeof v=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var w=_.as,T=g(w,_.crossOrigin);r.d.L(v,w,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},vi.preloadModule=function(v,_){if(typeof v=="string")if(_){var w=g(_.as,_.crossOrigin);r.d.m(v,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(v)},vi.requestFormReset=function(v){r.d.r(v)},vi.unstable_batchedUpdates=function(v,_){return v(_)},vi.useFormState=function(v,_,w){return f.H.useFormState(v,_,w)},vi.useFormStatus=function(){return f.H.useHostTransitionStatus()},vi.version="19.2.0",vi}var f0;function TS(){if(f0)return Ym.exports;f0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ym.exports=cL(),Ym.exports}var d0;function hL(){if(d0)return Mc;d0=1;var n=uL(),e=nv(),t=TS();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function u(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function f(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function g(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function v(i){if(u(i)!==i)throw Error(r(188))}function _(i){var s=i.alternate;if(!s){if(s=u(i),s===null)throw Error(r(188));return s!==i?null:i}for(var l=i,h=s;;){var m=l.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===l)return v(m),i;if(y===h)return v(m),s;y=y.sibling}throw Error(r(188))}if(l.return!==h.return)l=m,h=y;else{for(var A=!1,D=m.child;D;){if(D===l){A=!0,l=m,h=y;break}if(D===h){A=!0,h=m,l=y;break}D=D.sibling}if(!A){for(D=y.child;D;){if(D===l){A=!0,l=y,h=m;break}if(D===h){A=!0,h=y,l=m;break}D=D.sibling}if(!A)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:s}function w(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=w(i),s!==null)return s;i=i.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),re=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var F=Symbol.for("react.client.reference");function ke(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===F?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case H:return"Fragment";case W:return"Profiler";case q:return"StrictMode";case ee:return"Suspense";case X:return"SuspenseList";case M:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case N:return"Portal";case re:return i.displayName||"Context";case $:return(i._context.displayName||"Context")+".Consumer";case ie:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return s=i.displayName||null,s!==null?s:ke(i.type)||"Memo";case P:s=i._payload,i=i._init;try{return ke(i(s))}catch{}}return null}var Le=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},_e=[],ue=-1;function B(i){return{current:i}}function K(i){0>ue||(i.current=_e[ue],_e[ue]=null,ue--)}function te(i,s){ue++,_e[ue]=i.current,i.current=s}var fe=B(null),Q=B(null),Ae=B(null),Ie=B(null);function De(i,s){switch(te(Ae,s),te(Q,i),te(fe,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?IE(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=IE(s),i=ME(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}K(fe),te(fe,i)}function Qe(){K(fe),K(Q),K(Ae)}function ze(i){i.memoizedState!==null&&te(Ie,i);var s=fe.current,l=ME(s,i.type);s!==l&&(te(Q,i),te(fe,l))}function Je(i){Q.current===i&&(K(fe),K(Q)),Ie.current===i&&(K(Ie),xc._currentValue=ge)}var Ut,an;function ln(i){if(Ut===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Ut=s&&s[1]||"",an=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ut+i+an}var ot=!1;function Pi(i,s){if(!i||ot)return"";ot=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(ye){var pe=ye}Reflect.construct(i,[],Ce)}else{try{Ce.call()}catch(ye){pe=ye}i.call(Ce.prototype)}}else{try{throw Error()}catch(ye){pe=ye}(Ce=i())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(ye){if(ye&&pe&&typeof ye.stack=="string")return[ye.stack,pe.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),A=y[0],D=y[1];if(A&&D){var Y=A.split(`
`),he=D.split(`
`);for(m=h=0;h<Y.length&&!Y[h].includes("DetermineComponentFrameRoot");)h++;for(;m<he.length&&!he[m].includes("DetermineComponentFrameRoot");)m++;if(h===Y.length||m===he.length)for(h=Y.length-1,m=he.length-1;1<=h&&0<=m&&Y[h]!==he[m];)m--;for(;1<=h&&0<=m;h--,m--)if(Y[h]!==he[m]){if(h!==1||m!==1)do if(h--,m--,0>m||Y[h]!==he[m]){var be=`
`+Y[h].replace(" at new "," at ");return i.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",i.displayName)),be}while(1<=h&&0<=m);break}}}finally{ot=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?ln(l):""}function Di(i,s){switch(i.tag){case 26:case 27:case 5:return ln(i.type);case 16:return ln("Lazy");case 13:return i.child!==s&&s!==null?ln("Suspense Fallback"):ln("Suspense");case 19:return ln("SuspenseList");case 0:case 15:return Pi(i.type,!1);case 11:return Pi(i.type.render,!1);case 1:return Pi(i.type,!0);case 31:return ln("Activity");default:return""}}function Ni(i){try{var s="",l=null;do s+=Di(i,l),l=i,i=i.return;while(i);return s}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var ui=Object.prototype.hasOwnProperty,ae=n.unstable_scheduleCallback,Pe=n.unstable_cancelCallback,We=n.unstable_shouldYield,rn=n.unstable_requestPaint,Ct=n.unstable_now,Wt=n.unstable_getCurrentPriorityLevel,nt=n.unstable_ImmediatePriority,dt=n.unstable_UserBlockingPriority,An=n.unstable_NormalPriority,yr=n.unstable_LowPriority,ir=n.unstable_IdlePriority,wi=n.log,Si=n.unstable_setDisableYieldValue,ci=null,un=null;function xn(i){if(typeof wi=="function"&&Si(i),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(ci,i)}catch{}}var Ln=Math.clz32?Math.clz32:zr,Vi=Math.log,as=Math.LN2;function zr(i){return i>>>=0,i===0?32:31-(Vi(i)/as|0)|0}var rr=256,hi=262144,zi=4194304;function Hn(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Xn(i,s,l){var h=i.pendingLanes;if(h===0)return 0;var m=0,y=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var D=h&134217727;return D!==0?(h=D&~y,h!==0?m=Hn(h):(A&=D,A!==0?m=Hn(A):l||(l=D&~i,l!==0&&(m=Hn(l))))):(D=h&~y,D!==0?m=Hn(D):A!==0?m=Hn(A):l||(l=h&~i,l!==0&&(m=Hn(l)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,l=s&-s,y>=l||y===32&&(l&4194048)!==0)?s:m}function Ti(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Br(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _r(){var i=zi;return zi<<=1,(zi&62914560)===0&&(zi=4194304),i}function Bi(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function Ui(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Xt(i,s,l,h,m,y){var A=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var D=i.entanglements,Y=i.expirationTimes,he=i.hiddenUpdates;for(l=A&~l;0<l;){var be=31-Ln(l),Ce=1<<be;D[be]=0,Y[be]=-1;var pe=he[be];if(pe!==null)for(he[be]=null,be=0;be<pe.length;be++){var ye=pe[be];ye!==null&&(ye.lane&=-536870913)}l&=~Ce}h!==0&&$e(i,h,0),y!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=y&~(A&~s))}function $e(i,s,l){i.pendingLanes|=s,i.suspendedLanes&=~s;var h=31-Ln(s);i.entangledLanes|=s,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function ls(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var h=31-Ln(l),m=1<<h;m&s|i[h]&s&&(i[h]|=s),l&=~m}}function us(i,s){var l=s&-s;return l=(l&42)!==0?1:fi(l),(l&(i.suspendedLanes|s))!==0?0:l}function fi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ue(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Er(){var i=me.p;return i!==0?i:(i=window.event,i===void 0?32:e0(i.type))}function Oa(i,s){var l=me.p;try{return me.p=i,s()}finally{me.p=l}}var sr=Math.random().toString(36).slice(2),Jt="__reactFiber$"+sr,bn="__reactProps$"+sr,or="__reactContainer$"+sr,Ci="__reactEvents$"+sr,ar="__reactListeners$"+sr,kl="__reactHandles$"+sr,Pa="__reactResources$"+sr,Ur="__reactMarker$"+sr;function Hs(i){delete i[Jt],delete i[bn],delete i[Ci],delete i[ar],delete i[kl]}function br(i){var s=i[Jt];if(s)return s;for(var l=i.parentNode;l;){if(s=l[or]||l[Jt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=zE(i);i!==null;){if(l=i[Jt])return l;i=zE(i)}return s}i=l,l=i.parentNode}return null}function jr(i){if(i=i[Jt]||i[or]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function wr(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function lr(i){var s=i[Pa];return s||(s=i[Pa]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function cn(i){i[Ur]=!0}var Co=new Set,cs={};function Jn(i,s){ji(i,s),ji(i+"Capture",s)}function ji(i,s){for(cs[i]=s,i=0;i<s.length;i++)Co.add(s[i])}var qs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ao={},xo={};function hs(i){return ui.call(xo,i)?!0:ui.call(Ao,i)?!1:qs.test(i)?xo[i]=!0:(Ao[i]=!0,!1)}function lt(i,s,l){if(hs(s))if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+l)}}function Rt(i,s,l){if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+l)}}function ei(i,s,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(s,l,""+h)}}function gn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Fr(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Da(i,s,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var m=h.get,y=h.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return m.call(this)},set:function(A){l=""+A,y.call(this,A)}}),Object.defineProperty(i,s,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function et(i){if(!i._valueTracker){var s=Fr(i)?"checked":"value";i._valueTracker=Da(i,s,""+i[s])}}function Kt(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return i&&(h=Fr(i)?i.checked?"true":"false":i.value),i=h,i!==l?(s.setValue(i),!0):!1}function fs(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Fi=/[\n"\\]/g;function At(i){return i.replace(Fi,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ds(i,s,l,h,m,y,A,D){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+gn(s)):i.value!==""+gn(s)&&(i.value=""+gn(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?Hi(i,A,gn(s)):l!=null?Hi(i,A,gn(l)):h!=null&&i.removeAttribute("value"),m==null&&y!=null&&(i.defaultChecked=!!y),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+gn(D):i.removeAttribute("name")}function Sr(i,s,l,h,m,y,A,D){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),s!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){et(i);return}l=l!=null?""+gn(l):"",s=s!=null?""+gn(s):l,D||s===i.value||(i.value=s),i.defaultValue=s}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=D?i.checked:!!h,i.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),et(i)}function Hi(i,s,l){s==="number"&&fs(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Ke(i,s,l,h){if(i=i.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<i.length;l++)m=s.hasOwnProperty("$"+i[l].value),i[l].selected!==m&&(i[l].selected=m),m&&h&&(i[l].defaultSelected=!0)}else{for(l=""+gn(l),s=null,m=0;m<i.length;m++){if(i[m].value===l){i[m].selected=!0,h&&(i[m].defaultSelected=!0);return}s!==null||i[m].disabled||(s=i[m])}s!==null&&(s.selected=!0)}}function Ai(i,s,l){if(s!=null&&(s=""+gn(s),s!==i.value&&(i.value=s),l==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=l!=null?""+gn(l):""}function qi(i,s,l,h){if(s==null){if(h!=null){if(l!=null)throw Error(r(92));if(Le(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),s=l}l=gn(s),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),et(i)}function qn(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var Na=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hr(i,s,l){var h=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":h?i.setProperty(s,l):typeof l!="number"||l===0||Na.has(s)?s==="float"?i.cssFloat=l:i[s]=(""+l).trim():i[s]=l+"px"}function Lo(i,s,l){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var m in s)h=s[m],s.hasOwnProperty(m)&&l[m]!==h&&Hr(i,m,h)}else for(var y in s)s.hasOwnProperty(y)&&Hr(i,y,s[y])}function Zs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ro=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Va=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zi(i){return Va.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function hn(){}var Gs=null;function ps(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var qr=null,qe=null;function xi(i){var s=jr(i);if(s&&(i=s.stateNode)){var l=i[bn]||null;e:switch(i=s.stateNode,s.type){case"input":if(ds(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+At(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==i&&h.form===i.form){var m=h[bn]||null;if(!m)throw Error(r(90));ds(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<l.length;s++)h=l[s],h.form===i.form&&Kt(h)}break e;case"textarea":Ai(i,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Ke(i,!!l.multiple,s,!1)}}}var It=!1;function za(i,s,l){if(It)return i(s,l);It=!0;try{var h=i(s);return h}finally{if(It=!1,(qr!==null||qe!==null)&&(cf(),qr&&(s=qr,i=qe,qe=qr=null,xi(s),i)))for(s=0;s<i.length;s++)xi(i[s])}}function Zn(i,s){var l=i.stateNode;if(l===null)return null;var h=l[bn]||null;if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,s,typeof l));return l}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ws=!1;if(Li)try{var Gn={};Object.defineProperty(Gn,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",Gn,Gn),window.removeEventListener("test",Gn,Gn)}catch{Ws=!1}var ti=null,Tr=null,Ht=null;function di(){if(Ht)return Ht;var i,s=Tr,l=s.length,h,m="value"in ti?ti.value:ti.textContent,y=m.length;for(i=0;i<l&&s[i]===m[i];i++);var A=l-i;for(h=1;h<=A&&s[l-h]===m[y-h];h++);return Ht=m.slice(i,1<h?1-h:void 0)}function ms(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Zr(){return!0}function Yt(){return!1}function zn(i){function s(l,h,m,y,A){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=A,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(l=i[D],this[D]=l?l(y):y[D]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Zr:Yt,this.isPropagationStopped=Yt,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Zr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Zr)},persist:function(){},isPersistent:Zr}),s}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ks=zn(ur),Gr=T({},ur,{view:0,detail:0}),pt=zn(Gr),gs,Wn,wn,vs=T({},Gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==wn&&(wn&&i.type==="mousemove"?(gs=i.screenX-wn.screenX,Wn=i.screenY-wn.screenY):Wn=gs=0,wn=i),gs)},movementY:function(i){return"movementY"in i?i.movementY:Wn}}),Ol=zn(vs),Wr=T({},vs,{dataTransfer:0}),Pl=zn(Wr),Io=T({},Gr,{relatedTarget:0}),ys=zn(Io),Dl=T({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),_s=zn(Dl),Ku=T({},ur,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ri=zn(Ku),Ys=T({},ur,{data:0}),Mo=zn(Ys),cr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ko={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Po(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Oo[i])?!!s[i]:!1}function Es(){return Po}var Ba=T({},Gr,{key:function(i){if(i.key){var s=cr[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ms(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ko[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(i){return i.type==="keypress"?ms(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ms(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ua=zn(Ba),Kr=T({},vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ja=zn(Kr),Do=T({},Gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),Nl=zn(Do),Fa=T({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),$s=zn(Fa),Rn=T({},vs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Cr=zn(Rn),Vl=T({},ur,{newState:0,oldState:0}),Gi=zn(Vl),d=[9,13,27,32],S=Li&&"CompositionEvent"in window,R=null;Li&&"documentMode"in document&&(R=document.documentMode);var z=Li&&"TextEvent"in window&&!R,le=Li&&(!S||R&&8<R&&11>=R),ve=" ",Me=!1;function Mt(i,s){switch(i){case"keyup":return d.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fn(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ut=!1;function zt(i,s){switch(i){case"compositionend":return fn(s);case"keypress":return s.which!==32?null:(Me=!0,ve);case"textInput":return i=s.data,i===ve&&Me?null:i;default:return null}}function en(i,s){if(ut)return i==="compositionend"||!S&&Mt(i,s)?(i=di(),Ht=Tr=ti=null,ut=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return le&&s.locale!=="ko"?null:s.data;default:return null}}var bs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sn(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!bs[i.type]:s==="textarea"}function Qs(i,s,l,h){qr?qe?qe.push(h):qe=[h]:qr=h,s=vf(s,"onChange"),0<s.length&&(l=new Ks("onChange","change",null,l,h),i.push({event:l,listeners:s}))}var pi=null,Ha=null;function qa(i){TE(i,0)}function Za(i){var s=wr(i);if(Kt(s))return i}function Ga(i,s){if(i==="change")return s}var xh=!1;if(Li){var Ar;if(Li){var No="oninput"in document;if(!No){var Lh=document.createElement("div");Lh.setAttribute("oninput","return;"),No=typeof Lh.oninput=="function"}Ar=No}else Ar=!1;xh=Ar&&(!document.documentMode||9<document.documentMode)}function zl(){pi&&(pi.detachEvent("onpropertychange",Rh),Ha=pi=null)}function Rh(i){if(i.propertyName==="value"&&Za(Ha)){var s=[];Qs(s,Ha,i,ps(i)),za(qa,s)}}function Yr(i,s,l){i==="focusin"?(zl(),pi=s,Ha=l,pi.attachEvent("onpropertychange",Rh)):i==="focusout"&&zl()}function cp(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Za(Ha)}function Vo(i,s){if(i==="click")return Za(s)}function hp(i,s){if(i==="input"||i==="change")return Za(s)}function $r(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Kn=typeof Object.is=="function"?Object.is:$r;function zo(i,s){if(Kn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!ui.call(s,m)||!Kn(i[m],s[m]))return!1}return!0}function Bl(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Wa(i,s){var l=Bl(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=s&&h>=s)return{node:l,offset:s-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Bl(l)}}function Ul(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Ul(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Ka(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=fs(i.document);s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=fs(i.document)}return s}function ws(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var jl=Li&&"documentMode"in document&&11>=document.documentMode,Ss=null,Fl=null,Ya=null,Bo=!1;function Ih(i,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Bo||Ss==null||Ss!==fs(h)||(h=Ss,"selectionStart"in h&&ws(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ya&&zo(Ya,h)||(Ya=h,h=vf(Fl,"onSelect"),0<h.length&&(s=new Ks("onSelect","select",null,s,l),i.push({event:s,listeners:h}),s.target=Ss)))}function Ts(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var Uo={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionrun:Ts("Transition","TransitionRun"),transitionstart:Ts("Transition","TransitionStart"),transitioncancel:Ts("Transition","TransitionCancel"),transitionend:Ts("Transition","TransitionEnd")},Hl={},Mh={};Li&&(Mh=document.createElement("div").style,"AnimationEvent"in window||(delete Uo.animationend.animation,delete Uo.animationiteration.animation,delete Uo.animationstart.animation),"TransitionEvent"in window||delete Uo.transitionend.transition);function Yn(i){if(Hl[i])return Hl[i];if(!Uo[i])return i;var s=Uo[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in Mh)return Hl[i]=s[l];return i}var $a=Yn("animationend"),kh=Yn("animationiteration"),Qa=Yn("animationstart"),fp=Yn("transitionrun"),Oh=Yn("transitionstart"),dp=Yn("transitioncancel"),jo=Yn("transitionend"),Ph=new Map,Cs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cs.push("scrollEnd");function Wi(i,s){Ph.set(i,s),Jn(s,[i])}var Xa=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Ki=[],mi=0,ql=0;function Ja(){for(var i=mi,s=ql=mi=0;s<i;){var l=Ki[s];Ki[s++]=null;var h=Ki[s];Ki[s++]=null;var m=Ki[s];Ki[s++]=null;var y=Ki[s];if(Ki[s++]=null,h!==null&&m!==null){var A=h.pending;A===null?m.next=m:(m.next=A.next,A.next=m),h.pending=m}y!==0&&Fo(l,m,y)}}function As(i,s,l,h){Ki[mi++]=i,Ki[mi++]=s,Ki[mi++]=l,Ki[mi++]=h,ql|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Yu(i,s,l,h){return As(i,s,l,h),el(i)}function xr(i,s){return As(i,null,null,s),el(i)}function Fo(i,s,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var m=!1,y=i.return;y!==null;)y.childLanes|=l,h=y.alternate,h!==null&&(h.childLanes|=l),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(m=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,m&&s!==null&&(m=31-Ln(l),i=y.hiddenUpdates,h=i[m],h===null?i[m]=[s]:h.push(s),s.lane=l|536870912),y):null}function el(i){if(50<Ec)throw Ec=0,mm=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Xs={};function pp(i,s,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(i,s,l,h){return new pp(i,s,l,h)}function Zl(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Lr(i,s){var l=i.alternate;return l===null?(l=gi(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function $u(i,s){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,s=l.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function tl(i,s,l,h,m,y){var A=0;if(h=i,typeof i=="function")Zl(i)&&(A=1);else if(typeof i=="string")A=Yx(i,l,fe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case M:return i=gi(31,l,s,m),i.elementType=M,i.lanes=y,i;case H:return Js(l.children,m,y,s);case q:A=8,m|=24;break;case W:return i=gi(12,l,s,m|2),i.elementType=W,i.lanes=y,i;case ee:return i=gi(13,l,s,m),i.elementType=ee,i.lanes=y,i;case X:return i=gi(19,l,s,m),i.elementType=X,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case re:A=10;break e;case $:A=9;break e;case ie:A=11;break e;case O:A=14;break e;case P:A=16,h=null;break e}A=29,l=Error(r(130,i===null?"null":typeof i,"")),h=null}return s=gi(A,l,s,m),s.elementType=i,s.type=h,s.lanes=y,s}function Js(i,s,l,h){return i=gi(7,i,h,s),i.lanes=l,i}function Gl(i,s,l){return i=gi(6,i,null,s),i.lanes=l,i}function Qu(i){var s=gi(18,null,null,0);return s.stateNode=i,s}function Xu(i,s,l){return s=gi(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var o=new WeakMap;function c(i,s){if(typeof i=="object"&&i!==null){var l=o.get(i);return l!==void 0?l:(s={value:i,source:s,stack:Ni(s)},o.set(i,s),s)}return{value:i,source:s,stack:Ni(s)}}var p=[],E=0,C=null,k=0,Z=[],oe=0,de=null,Te=1,Oe="";function Fe(i,s){p[E++]=k,p[E++]=C,C=i,k=s}function ct(i,s,l){Z[oe++]=Te,Z[oe++]=Oe,Z[oe++]=de,de=i;var h=Te;i=Oe;var m=32-Ln(h)-1;h&=~(1<<m),l+=1;var y=32-Ln(s)+m;if(30<y){var A=m-m%5;y=(h&(1<<A)-1).toString(32),h>>=A,m-=A,Te=1<<32-Ln(s)+m|l<<m|h,Oe=y+i}else Te=1<<y|l<<m|h,Oe=i}function Bn(i){i.return!==null&&(Fe(i,1),ct(i,1,0))}function vn(i){for(;i===C;)C=p[--E],p[E]=null,k=p[--E],p[E]=null;for(;i===de;)de=Z[--oe],Z[oe]=null,Oe=Z[--oe],Z[oe]=null,Te=Z[--oe],Z[oe]=null}function Ii(i,s){Z[oe++]=Te,Z[oe++]=Oe,Z[oe++]=de,Te=s.id,Oe=s.overflow,de=i}var kt=null,Ot=null,vt=!1,xs=null,Yi=!1,Wl=Error(r(519));function Ls(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nl(c(s,i)),Wl}function Ju(i){var s=i.stateNode,l=i.type,h=i.memoizedProps;switch(s[Jt]=i,s[bn]=h,l){case"dialog":_t("cancel",s),_t("close",s);break;case"iframe":case"object":case"embed":_t("load",s);break;case"video":case"audio":for(l=0;l<wc.length;l++)_t(wc[l],s);break;case"source":_t("error",s);break;case"img":case"image":case"link":_t("error",s),_t("load",s);break;case"details":_t("toggle",s);break;case"input":_t("invalid",s),Sr(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":_t("invalid",s);break;case"textarea":_t("invalid",s),qi(s,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||h.suppressHydrationWarning===!0||LE(s.textContent,l)?(h.popover!=null&&(_t("beforetoggle",s),_t("toggle",s)),h.onScroll!=null&&_t("scroll",s),h.onScrollEnd!=null&&_t("scrollend",s),h.onClick!=null&&(s.onclick=hn),s=!0):s=!1,s||Ls(i,!0)}function dn(i){for(kt=i.return;kt;)switch(kt.tag){case 5:case 31:case 13:Yi=!1;return;case 27:case 3:Yi=!0;return;default:kt=kt.return}}function Qr(i){if(i!==kt)return!1;if(!vt)return dn(i),vt=!0,!1;var s=i.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Im(i.type,i.memoizedProps)),l=!l),l&&Ot&&Ls(i),dn(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Ot=VE(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Ot=VE(i)}else s===27?(s=Ot,na(i.type)?(i=Dm,Dm=null,Ot=i):Ot=s):Ot=kt?Ir(i.stateNode.nextSibling):null;return!0}function eo(){Ot=kt=null,vt=!1}function ec(){var i=xs;return i!==null&&(Ji===null?Ji=i:Ji.push.apply(Ji,i),xs=null),i}function nl(i){xs===null?xs=[i]:xs.push(i)}var il=B(null),Rs=null,Xr=null;function Ho(i,s,l){te(il,s._currentValue),s._currentValue=l}function to(i){i._currentValue=il.current,K(il)}function mp(i,s,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),i===l)break;i=i.return}}function gp(i,s,l,h){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var y=m.dependencies;if(y!==null){var A=m.child;y=y.firstContext;e:for(;y!==null;){var D=y;y=m;for(var Y=0;Y<s.length;Y++)if(D.context===s[Y]){y.lanes|=l,D=y.alternate,D!==null&&(D.lanes|=l),mp(y.return,l,i),h||(A=null);break e}y=D.next}}else if(m.tag===18){if(A=m.return,A===null)throw Error(r(341));A.lanes|=l,y=A.alternate,y!==null&&(y.lanes|=l),mp(A,l,i),A=null}else A=m.child;if(A!==null)A.return=m;else for(A=m;A!==null;){if(A===i){A=null;break}if(m=A.sibling,m!==null){m.return=A.return,A=m;break}A=A.return}m=A}}function Kl(i,s,l,h){i=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var A=m.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var D=m.type;Kn(m.pendingProps.value,A.value)||(i!==null?i.push(D):i=[D])}}else if(m===Ie.current){if(A=m.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(xc):i=[xc])}m=m.return}i!==null&&gp(s,i,l,h),s.flags|=262144}function Dh(i){for(i=i.firstContext;i!==null;){if(!Kn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function rl(i){Rs=i,Xr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ni(i){return dy(Rs,i)}function Nh(i,s){return Rs===null&&rl(i),dy(i,s)}function dy(i,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Xr===null){if(i===null)throw Error(r(308));Xr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Xr=Xr.next=s;return l}var ZA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){s.aborted=!0,i.forEach(function(l){return l()})}},GA=n.unstable_scheduleCallback,WA=n.unstable_NormalPriority,In={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vp(){return{controller:new ZA,data:new Map,refCount:0}}function tc(i){i.refCount--,i.refCount===0&&GA(WA,function(){i.controller.abort()})}var nc=null,yp=0,Yl=0,$l=null;function KA(i,s){if(nc===null){var l=nc=[];yp=0,Yl=bm(),$l={status:"pending",value:void 0,then:function(h){l.push(h)}}}return yp++,s.then(py,py),s}function py(){if(--yp===0&&nc!==null){$l!==null&&($l.status="fulfilled");var i=nc;nc=null,Yl=0,$l=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function YA(i,s){var l=[],h={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return i.then(function(){h.status="fulfilled",h.value=s;for(var m=0;m<l.length;m++)(0,l[m])(s)},function(m){for(h.status="rejected",h.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),h}var my=ne.S;ne.S=function(i,s){X_=Ct(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&KA(i,s),my!==null&&my(i,s)};var sl=B(null);function _p(){var i=sl.current;return i!==null?i:$t.pooledCache}function Vh(i,s){s===null?te(sl,sl.current):te(sl,s.pool)}function gy(){var i=_p();return i===null?null:{parent:In._currentValue,pool:i}}var Ql=Error(r(460)),Ep=Error(r(474)),zh=Error(r(542)),Bh={then:function(){}};function vy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function yy(i,s,l){switch(l=i[l],l===void 0?i.push(s):l!==s&&(s.then(hn,hn),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Ey(i),i;default:if(typeof s.status=="string")s.then(hn,hn);else{if(i=$t,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(h){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=h}},function(h){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Ey(i),i}throw al=s,Ql}}function ol(i){try{var s=i._init;return s(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(al=l,Ql):l}}var al=null;function _y(){if(al===null)throw Error(r(459));var i=al;return al=null,i}function Ey(i){if(i===Ql||i===zh)throw Error(r(483))}var Xl=null,ic=0;function Uh(i){var s=ic;return ic+=1,Xl===null&&(Xl=[]),yy(Xl,i,s)}function rc(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function jh(i,s){throw s.$$typeof===I?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function by(i){function s(se,J){if(i){var ce=se.deletions;ce===null?(se.deletions=[J],se.flags|=16):ce.push(J)}}function l(se,J){if(!i)return null;for(;J!==null;)s(se,J),J=J.sibling;return null}function h(se){for(var J=new Map;se!==null;)se.key!==null?J.set(se.key,se):J.set(se.index,se),se=se.sibling;return J}function m(se,J){return se=Lr(se,J),se.index=0,se.sibling=null,se}function y(se,J,ce){return se.index=ce,i?(ce=se.alternate,ce!==null?(ce=ce.index,ce<J?(se.flags|=67108866,J):ce):(se.flags|=67108866,J)):(se.flags|=1048576,J)}function A(se){return i&&se.alternate===null&&(se.flags|=67108866),se}function D(se,J,ce,we){return J===null||J.tag!==6?(J=Gl(ce,se.mode,we),J.return=se,J):(J=m(J,ce),J.return=se,J)}function Y(se,J,ce,we){var Ze=ce.type;return Ze===H?be(se,J,ce.props.children,we,ce.key):J!==null&&(J.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===P&&ol(Ze)===J.type)?(J=m(J,ce.props),rc(J,ce),J.return=se,J):(J=tl(ce.type,ce.key,ce.props,null,se.mode,we),rc(J,ce),J.return=se,J)}function he(se,J,ce,we){return J===null||J.tag!==4||J.stateNode.containerInfo!==ce.containerInfo||J.stateNode.implementation!==ce.implementation?(J=Xu(ce,se.mode,we),J.return=se,J):(J=m(J,ce.children||[]),J.return=se,J)}function be(se,J,ce,we,Ze){return J===null||J.tag!==7?(J=Js(ce,se.mode,we,Ze),J.return=se,J):(J=m(J,ce),J.return=se,J)}function Ce(se,J,ce){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Gl(""+J,se.mode,ce),J.return=se,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case V:return ce=tl(J.type,J.key,J.props,null,se.mode,ce),rc(ce,J),ce.return=se,ce;case N:return J=Xu(J,se.mode,ce),J.return=se,J;case P:return J=ol(J),Ce(se,J,ce)}if(Le(J)||G(J))return J=Js(J,se.mode,ce,null),J.return=se,J;if(typeof J.then=="function")return Ce(se,Uh(J),ce);if(J.$$typeof===re)return Ce(se,Nh(se,J),ce);jh(se,J)}return null}function pe(se,J,ce,we){var Ze=J!==null?J.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Ze!==null?null:D(se,J,""+ce,we);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case V:return ce.key===Ze?Y(se,J,ce,we):null;case N:return ce.key===Ze?he(se,J,ce,we):null;case P:return ce=ol(ce),pe(se,J,ce,we)}if(Le(ce)||G(ce))return Ze!==null?null:be(se,J,ce,we,null);if(typeof ce.then=="function")return pe(se,J,Uh(ce),we);if(ce.$$typeof===re)return pe(se,J,Nh(se,ce),we);jh(se,ce)}return null}function ye(se,J,ce,we,Ze){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return se=se.get(ce)||null,D(J,se,""+we,Ze);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case V:return se=se.get(we.key===null?ce:we.key)||null,Y(J,se,we,Ze);case N:return se=se.get(we.key===null?ce:we.key)||null,he(J,se,we,Ze);case P:return we=ol(we),ye(se,J,ce,we,Ze)}if(Le(we)||G(we))return se=se.get(ce)||null,be(J,se,we,Ze,null);if(typeof we.then=="function")return ye(se,J,ce,Uh(we),Ze);if(we.$$typeof===re)return ye(se,J,ce,Nh(J,we),Ze);jh(J,we)}return null}function Be(se,J,ce,we){for(var Ze=null,Pt=null,je=J,ht=J=0,wt=null;je!==null&&ht<ce.length;ht++){je.index>ht?(wt=je,je=null):wt=je.sibling;var Dt=pe(se,je,ce[ht],we);if(Dt===null){je===null&&(je=wt);break}i&&je&&Dt.alternate===null&&s(se,je),J=y(Dt,J,ht),Pt===null?Ze=Dt:Pt.sibling=Dt,Pt=Dt,je=wt}if(ht===ce.length)return l(se,je),vt&&Fe(se,ht),Ze;if(je===null){for(;ht<ce.length;ht++)je=Ce(se,ce[ht],we),je!==null&&(J=y(je,J,ht),Pt===null?Ze=je:Pt.sibling=je,Pt=je);return vt&&Fe(se,ht),Ze}for(je=h(je);ht<ce.length;ht++)wt=ye(je,se,ht,ce[ht],we),wt!==null&&(i&&wt.alternate!==null&&je.delete(wt.key===null?ht:wt.key),J=y(wt,J,ht),Pt===null?Ze=wt:Pt.sibling=wt,Pt=wt);return i&&je.forEach(function(aa){return s(se,aa)}),vt&&Fe(se,ht),Ze}function Ye(se,J,ce,we){if(ce==null)throw Error(r(151));for(var Ze=null,Pt=null,je=J,ht=J=0,wt=null,Dt=ce.next();je!==null&&!Dt.done;ht++,Dt=ce.next()){je.index>ht?(wt=je,je=null):wt=je.sibling;var aa=pe(se,je,Dt.value,we);if(aa===null){je===null&&(je=wt);break}i&&je&&aa.alternate===null&&s(se,je),J=y(aa,J,ht),Pt===null?Ze=aa:Pt.sibling=aa,Pt=aa,je=wt}if(Dt.done)return l(se,je),vt&&Fe(se,ht),Ze;if(je===null){for(;!Dt.done;ht++,Dt=ce.next())Dt=Ce(se,Dt.value,we),Dt!==null&&(J=y(Dt,J,ht),Pt===null?Ze=Dt:Pt.sibling=Dt,Pt=Dt);return vt&&Fe(se,ht),Ze}for(je=h(je);!Dt.done;ht++,Dt=ce.next())Dt=ye(je,se,ht,Dt.value,we),Dt!==null&&(i&&Dt.alternate!==null&&je.delete(Dt.key===null?ht:Dt.key),J=y(Dt,J,ht),Pt===null?Ze=Dt:Pt.sibling=Dt,Pt=Dt);return i&&je.forEach(function(oL){return s(se,oL)}),vt&&Fe(se,ht),Ze}function Gt(se,J,ce,we){if(typeof ce=="object"&&ce!==null&&ce.type===H&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case V:e:{for(var Ze=ce.key;J!==null;){if(J.key===Ze){if(Ze=ce.type,Ze===H){if(J.tag===7){l(se,J.sibling),we=m(J,ce.props.children),we.return=se,se=we;break e}}else if(J.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===P&&ol(Ze)===J.type){l(se,J.sibling),we=m(J,ce.props),rc(we,ce),we.return=se,se=we;break e}l(se,J);break}else s(se,J);J=J.sibling}ce.type===H?(we=Js(ce.props.children,se.mode,we,ce.key),we.return=se,se=we):(we=tl(ce.type,ce.key,ce.props,null,se.mode,we),rc(we,ce),we.return=se,se=we)}return A(se);case N:e:{for(Ze=ce.key;J!==null;){if(J.key===Ze)if(J.tag===4&&J.stateNode.containerInfo===ce.containerInfo&&J.stateNode.implementation===ce.implementation){l(se,J.sibling),we=m(J,ce.children||[]),we.return=se,se=we;break e}else{l(se,J);break}else s(se,J);J=J.sibling}we=Xu(ce,se.mode,we),we.return=se,se=we}return A(se);case P:return ce=ol(ce),Gt(se,J,ce,we)}if(Le(ce))return Be(se,J,ce,we);if(G(ce)){if(Ze=G(ce),typeof Ze!="function")throw Error(r(150));return ce=Ze.call(ce),Ye(se,J,ce,we)}if(typeof ce.then=="function")return Gt(se,J,Uh(ce),we);if(ce.$$typeof===re)return Gt(se,J,Nh(se,ce),we);jh(se,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,J!==null&&J.tag===6?(l(se,J.sibling),we=m(J,ce),we.return=se,se=we):(l(se,J),we=Gl(ce,se.mode,we),we.return=se,se=we),A(se)):l(se,J)}return function(se,J,ce,we){try{ic=0;var Ze=Gt(se,J,ce,we);return Xl=null,Ze}catch(je){if(je===Ql||je===zh)throw je;var Pt=gi(29,je,null,se.mode);return Pt.lanes=we,Pt.return=se,Pt}finally{}}}var ll=by(!0),wy=by(!1),qo=!1;function bp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wp(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Zo(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Go(i,s,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Vt&2)!==0){var m=h.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),h.pending=s,s=el(i),Fo(i,null,l),s}return As(i,h,s,l),el(i)}function sc(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var h=s.lanes;h&=i.pendingLanes,l|=h,s.lanes=l,ls(i,l)}}function Sp(i,s){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?m=y=A:y=y.next=A,l=l.next}while(l!==null);y===null?m=y=s:y=y.next=s}else m=y=s;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}var Tp=!1;function oc(){if(Tp){var i=$l;if(i!==null)throw i}}function ac(i,s,l,h){Tp=!1;var m=i.updateQueue;qo=!1;var y=m.firstBaseUpdate,A=m.lastBaseUpdate,D=m.shared.pending;if(D!==null){m.shared.pending=null;var Y=D,he=Y.next;Y.next=null,A===null?y=he:A.next=he,A=Y;var be=i.alternate;be!==null&&(be=be.updateQueue,D=be.lastBaseUpdate,D!==A&&(D===null?be.firstBaseUpdate=he:D.next=he,be.lastBaseUpdate=Y))}if(y!==null){var Ce=m.baseState;A=0,be=he=Y=null,D=y;do{var pe=D.lane&-536870913,ye=pe!==D.lane;if(ye?(bt&pe)===pe:(h&pe)===pe){pe!==0&&pe===Yl&&(Tp=!0),be!==null&&(be=be.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Be=i,Ye=D;pe=s;var Gt=l;switch(Ye.tag){case 1:if(Be=Ye.payload,typeof Be=="function"){Ce=Be.call(Gt,Ce,pe);break e}Ce=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Ye.payload,pe=typeof Be=="function"?Be.call(Gt,Ce,pe):Be,pe==null)break e;Ce=T({},Ce,pe);break e;case 2:qo=!0}}pe=D.callback,pe!==null&&(i.flags|=64,ye&&(i.flags|=8192),ye=m.callbacks,ye===null?m.callbacks=[pe]:ye.push(pe))}else ye={lane:pe,tag:D.tag,payload:D.payload,callback:D.callback,next:null},be===null?(he=be=ye,Y=Ce):be=be.next=ye,A|=pe;if(D=D.next,D===null){if(D=m.shared.pending,D===null)break;ye=D,D=ye.next,ye.next=null,m.lastBaseUpdate=ye,m.shared.pending=null}}while(!0);be===null&&(Y=Ce),m.baseState=Y,m.firstBaseUpdate=he,m.lastBaseUpdate=be,y===null&&(m.shared.lanes=0),Qo|=A,i.lanes=A,i.memoizedState=Ce}}function Sy(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function Ty(i,s){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Sy(l[i],s)}var Jl=B(null),Fh=B(0);function Cy(i,s){i=co,te(Fh,i),te(Jl,s),co=i|s.baseLanes}function Cp(){te(Fh,co),te(Jl,Jl.current)}function Ap(){co=Fh.current,K(Jl),K(Fh)}var hr=B(null),Rr=null;function Wo(i){var s=i.alternate;te(Sn,Sn.current&1),te(hr,i),Rr===null&&(s===null||Jl.current!==null||s.memoizedState!==null)&&(Rr=i)}function xp(i){te(Sn,Sn.current),te(hr,i),Rr===null&&(Rr=i)}function Ay(i){i.tag===22?(te(Sn,Sn.current),te(hr,i),Rr===null&&(Rr=i)):Ko()}function Ko(){te(Sn,Sn.current),te(hr,hr.current)}function fr(i){K(hr),Rr===i&&(Rr=null),K(Sn)}var Sn=B(0);function Hh(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Om(l)||Pm(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var no=0,at=null,qt=null,Mn=null,qh=!1,eu=!1,ul=!1,Zh=0,lc=0,tu=null,$A=0;function yn(){throw Error(r(321))}function Lp(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!Kn(i[l],s[l]))return!1;return!0}function Rp(i,s,l,h,m,y){return no=y,at=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ne.H=i===null||i.memoizedState===null?u_:qp,ul=!1,y=l(h,m),ul=!1,eu&&(y=Ly(s,l,h,m)),xy(i),y}function xy(i){ne.H=hc;var s=qt!==null&&qt.next!==null;if(no=0,Mn=qt=at=null,qh=!1,lc=0,tu=null,s)throw Error(r(300));i===null||kn||(i=i.dependencies,i!==null&&Dh(i)&&(kn=!0))}function Ly(i,s,l,h){at=i;var m=0;do{if(eu&&(tu=null),lc=0,eu=!1,25<=m)throw Error(r(301));if(m+=1,Mn=qt=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}ne.H=c_,y=s(l,h)}while(eu);return y}function QA(){var i=ne.H,s=i.useState()[0];return s=typeof s.then=="function"?uc(s):s,i=i.useState()[0],(qt!==null?qt.memoizedState:null)!==i&&(at.flags|=1024),s}function Ip(){var i=Zh!==0;return Zh=0,i}function Mp(i,s,l){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~l}function kp(i){if(qh){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}qh=!1}no=0,Mn=qt=at=null,eu=!1,lc=Zh=0,tu=null}function Mi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?at.memoizedState=Mn=i:Mn=Mn.next=i,Mn}function Tn(){if(qt===null){var i=at.alternate;i=i!==null?i.memoizedState:null}else i=qt.next;var s=Mn===null?at.memoizedState:Mn.next;if(s!==null)Mn=s,qt=i;else{if(i===null)throw at.alternate===null?Error(r(467)):Error(r(310));qt=i,i={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Mn===null?at.memoizedState=Mn=i:Mn=Mn.next=i}return Mn}function Gh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uc(i){var s=lc;return lc+=1,tu===null&&(tu=[]),i=yy(tu,i,s),s=at,(Mn===null?s.memoizedState:Mn.next)===null&&(s=s.alternate,ne.H=s===null||s.memoizedState===null?u_:qp),i}function Wh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return uc(i);if(i.$$typeof===re)return ni(i)}throw Error(r(438,String(i)))}function Op(i){var s=null,l=at.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var h=at.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Gh(),at.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(i),h=0;h<i;h++)l[h]=j;return s.index++,l}function io(i,s){return typeof s=="function"?s(i):s}function Kh(i){var s=Tn();return Pp(s,qt,i)}function Pp(i,s,l){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var m=i.baseQueue,y=h.pending;if(y!==null){if(m!==null){var A=m.next;m.next=y.next,y.next=A}s.baseQueue=m=y,h.pending=null}if(y=i.baseState,m===null)i.memoizedState=y;else{s=m.next;var D=A=null,Y=null,he=s,be=!1;do{var Ce=he.lane&-536870913;if(Ce!==he.lane?(bt&Ce)===Ce:(no&Ce)===Ce){var pe=he.revertLane;if(pe===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Ce===Yl&&(be=!0);else if((no&pe)===pe){he=he.next,pe===Yl&&(be=!0);continue}else Ce={lane:0,revertLane:he.revertLane,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Y===null?(D=Y=Ce,A=y):Y=Y.next=Ce,at.lanes|=pe,Qo|=pe;Ce=he.action,ul&&l(y,Ce),y=he.hasEagerState?he.eagerState:l(y,Ce)}else pe={lane:Ce,revertLane:he.revertLane,gesture:he.gesture,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Y===null?(D=Y=pe,A=y):Y=Y.next=pe,at.lanes|=Ce,Qo|=Ce;he=he.next}while(he!==null&&he!==s);if(Y===null?A=y:Y.next=D,!Kn(y,i.memoizedState)&&(kn=!0,be&&(l=$l,l!==null)))throw l;i.memoizedState=y,i.baseState=A,i.baseQueue=Y,h.lastRenderedState=y}return m===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Dp(i){var s=Tn(),l=s.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var h=l.dispatch,m=l.pending,y=s.memoizedState;if(m!==null){l.pending=null;var A=m=m.next;do y=i(y,A.action),A=A.next;while(A!==m);Kn(y,s.memoizedState)||(kn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,h]}function Ry(i,s,l){var h=at,m=Tn(),y=vt;if(y){if(l===void 0)throw Error(r(407));l=l()}else l=s();var A=!Kn((qt||m).memoizedState,l);if(A&&(m.memoizedState=l,kn=!0),m=m.queue,zp(ky.bind(null,h,m,i),[i]),m.getSnapshot!==s||A||Mn!==null&&Mn.memoizedState.tag&1){if(h.flags|=2048,nu(9,{destroy:void 0},My.bind(null,h,m,l,s),null),$t===null)throw Error(r(349));y||(no&127)!==0||Iy(h,s,l)}return l}function Iy(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=at.updateQueue,s===null?(s=Gh(),at.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function My(i,s,l,h){s.value=l,s.getSnapshot=h,Oy(s)&&Py(i)}function ky(i,s,l){return l(function(){Oy(s)&&Py(i)})}function Oy(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!Kn(i,l)}catch{return!0}}function Py(i){var s=xr(i,2);s!==null&&er(s,i,2)}function Np(i){var s=Mi();if(typeof i=="function"){var l=i;if(i=l(),ul){xn(!0);try{l()}finally{xn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:i},s}function Dy(i,s,l,h){return i.baseState=l,Pp(i,qt,typeof h=="function"?h:io)}function XA(i,s,l,h,m){if(Qh(i))throw Error(r(485));if(i=s.action,i!==null){var y={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){y.listeners.push(A)}};ne.T!==null?l(!0):y.isTransition=!1,h(y),l=s.pending,l===null?(y.next=s.pending=y,Ny(s,y)):(y.next=l.next,s.pending=l.next=y)}}function Ny(i,s){var l=s.action,h=s.payload,m=i.state;if(s.isTransition){var y=ne.T,A={};ne.T=A;try{var D=l(m,h),Y=ne.S;Y!==null&&Y(A,D),Vy(i,s,D)}catch(he){Vp(i,s,he)}finally{y!==null&&A.types!==null&&(y.types=A.types),ne.T=y}}else try{y=l(m,h),Vy(i,s,y)}catch(he){Vp(i,s,he)}}function Vy(i,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){zy(i,s,h)},function(h){return Vp(i,s,h)}):zy(i,s,l)}function zy(i,s,l){s.status="fulfilled",s.value=l,By(s),i.state=l,s=i.pending,s!==null&&(l=s.next,l===s?i.pending=null:(l=l.next,s.next=l,Ny(i,l)))}function Vp(i,s,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=l,By(s),s=s.next;while(s!==h)}i.action=null}function By(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Uy(i,s){return s}function jy(i,s){if(vt){var l=$t.formState;if(l!==null){e:{var h=at;if(vt){if(Ot){t:{for(var m=Ot,y=Yi;m.nodeType!==8;){if(!y){m=null;break t}if(m=Ir(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Ot=Ir(m.nextSibling),h=m.data==="F!";break e}}Ls(h)}h=!1}h&&(s=l[0])}}return l=Mi(),l.memoizedState=l.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uy,lastRenderedState:s},l.queue=h,l=o_.bind(null,at,h),h.dispatch=l,h=Np(!1),y=Hp.bind(null,at,!1,h.queue),h=Mi(),m={state:s,dispatch:null,action:i,pending:null},h.queue=m,l=XA.bind(null,at,m,y,l),m.dispatch=l,h.memoizedState=i,[s,l,!1]}function Fy(i){var s=Tn();return Hy(s,qt,i)}function Hy(i,s,l){if(s=Pp(i,s,Uy)[0],i=Kh(io)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=uc(s)}catch(A){throw A===Ql?zh:A}else h=s;s=Tn();var m=s.queue,y=m.dispatch;return l!==s.memoizedState&&(at.flags|=2048,nu(9,{destroy:void 0},JA.bind(null,m,l),null)),[h,y,i]}function JA(i,s){i.action=s}function qy(i){var s=Tn(),l=qt;if(l!==null)return Hy(s,l,i);Tn(),s=s.memoizedState,l=Tn();var h=l.queue.dispatch;return l.memoizedState=i,[s,h,!1]}function nu(i,s,l,h){return i={tag:i,create:l,deps:h,inst:s,next:null},s=at.updateQueue,s===null&&(s=Gh(),at.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,s.lastEffect=i),i}function Zy(){return Tn().memoizedState}function Yh(i,s,l,h){var m=Mi();at.flags|=i,m.memoizedState=nu(1|s,{destroy:void 0},l,h===void 0?null:h)}function $h(i,s,l,h){var m=Tn();h=h===void 0?null:h;var y=m.memoizedState.inst;qt!==null&&h!==null&&Lp(h,qt.memoizedState.deps)?m.memoizedState=nu(s,y,l,h):(at.flags|=i,m.memoizedState=nu(1|s,y,l,h))}function Gy(i,s){Yh(8390656,8,i,s)}function zp(i,s){$h(2048,8,i,s)}function ex(i){at.flags|=4;var s=at.updateQueue;if(s===null)s=Gh(),at.updateQueue=s,s.events=[i];else{var l=s.events;l===null?s.events=[i]:l.push(i)}}function Wy(i){var s=Tn().memoizedState;return ex({ref:s,nextImpl:i}),function(){if((Vt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Ky(i,s){return $h(4,2,i,s)}function Yy(i,s){return $h(4,4,i,s)}function $y(i,s){if(typeof s=="function"){i=i();var l=s(i);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Qy(i,s,l){l=l!=null?l.concat([i]):null,$h(4,4,$y.bind(null,s,i),l)}function Bp(){}function Xy(i,s){var l=Tn();s=s===void 0?null:s;var h=l.memoizedState;return s!==null&&Lp(s,h[1])?h[0]:(l.memoizedState=[i,s],i)}function Jy(i,s){var l=Tn();s=s===void 0?null:s;var h=l.memoizedState;if(s!==null&&Lp(s,h[1]))return h[0];if(h=i(),ul){xn(!0);try{i()}finally{xn(!1)}}return l.memoizedState=[h,s],h}function Up(i,s,l){return l===void 0||(no&1073741824)!==0&&(bt&261930)===0?i.memoizedState=s:(i.memoizedState=l,i=eE(),at.lanes|=i,Qo|=i,l)}function e_(i,s,l,h){return Kn(l,s)?l:Jl.current!==null?(i=Up(i,l,h),Kn(i,s)||(kn=!0),i):(no&42)===0||(no&1073741824)!==0&&(bt&261930)===0?(kn=!0,i.memoizedState=l):(i=eE(),at.lanes|=i,Qo|=i,s)}function t_(i,s,l,h,m){var y=me.p;me.p=y!==0&&8>y?y:8;var A=ne.T,D={};ne.T=D,Hp(i,!1,s,l);try{var Y=m(),he=ne.S;if(he!==null&&he(D,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var be=YA(Y,h);cc(i,s,be,mr(i))}else cc(i,s,h,mr(i))}catch(Ce){cc(i,s,{then:function(){},status:"rejected",reason:Ce},mr())}finally{me.p=y,A!==null&&D.types!==null&&(A.types=D.types),ne.T=A}}function tx(){}function jp(i,s,l,h){if(i.tag!==5)throw Error(r(476));var m=n_(i).queue;t_(i,m,s,ge,l===null?tx:function(){return i_(i),l(h)})}function n_(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:ge},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:l},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function i_(i){var s=n_(i);s.next===null&&(s=i.alternate.memoizedState),cc(i,s.next.queue,{},mr())}function Fp(){return ni(xc)}function r_(){return Tn().memoizedState}function s_(){return Tn().memoizedState}function nx(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var l=mr();i=Zo(l);var h=Go(s,i,l);h!==null&&(er(h,s,l),sc(h,s,l)),s={cache:vp()},i.payload=s;return}s=s.return}}function ix(i,s,l){var h=mr();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Qh(i)?a_(s,l):(l=Yu(i,s,l,h),l!==null&&(er(l,i,h),l_(l,s,h)))}function o_(i,s,l){var h=mr();cc(i,s,l,h)}function cc(i,s,l,h){var m={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Qh(i))a_(s,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var A=s.lastRenderedState,D=y(A,l);if(m.hasEagerState=!0,m.eagerState=D,Kn(D,A))return As(i,s,m,0),$t===null&&Ja(),!1}catch{}finally{}if(l=Yu(i,s,m,h),l!==null)return er(l,i,h),l_(l,s,h),!0}return!1}function Hp(i,s,l,h){if(h={lane:2,revertLane:bm(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Qh(i)){if(s)throw Error(r(479))}else s=Yu(i,l,h,2),s!==null&&er(s,i,2)}function Qh(i){var s=i.alternate;return i===at||s!==null&&s===at}function a_(i,s){eu=qh=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function l_(i,s,l){if((l&4194048)!==0){var h=s.lanes;h&=i.pendingLanes,l|=h,s.lanes=l,ls(i,l)}}var hc={readContext:ni,use:Wh,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn,useHostTransitionStatus:yn,useFormState:yn,useActionState:yn,useOptimistic:yn,useMemoCache:yn,useCacheRefresh:yn};hc.useEffectEvent=yn;var u_={readContext:ni,use:Wh,useCallback:function(i,s){return Mi().memoizedState=[i,s===void 0?null:s],i},useContext:ni,useEffect:Gy,useImperativeHandle:function(i,s,l){l=l!=null?l.concat([i]):null,Yh(4194308,4,$y.bind(null,s,i),l)},useLayoutEffect:function(i,s){return Yh(4194308,4,i,s)},useInsertionEffect:function(i,s){Yh(4,2,i,s)},useMemo:function(i,s){var l=Mi();s=s===void 0?null:s;var h=i();if(ul){xn(!0);try{i()}finally{xn(!1)}}return l.memoizedState=[h,s],h},useReducer:function(i,s,l){var h=Mi();if(l!==void 0){var m=l(s);if(ul){xn(!0);try{l(s)}finally{xn(!1)}}}else m=s;return h.memoizedState=h.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},h.queue=i,i=i.dispatch=ix.bind(null,at,i),[h.memoizedState,i]},useRef:function(i){var s=Mi();return i={current:i},s.memoizedState=i},useState:function(i){i=Np(i);var s=i.queue,l=o_.bind(null,at,s);return s.dispatch=l,[i.memoizedState,l]},useDebugValue:Bp,useDeferredValue:function(i,s){var l=Mi();return Up(l,i,s)},useTransition:function(){var i=Np(!1);return i=t_.bind(null,at,i.queue,!0,!1),Mi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,l){var h=at,m=Mi();if(vt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=s(),$t===null)throw Error(r(349));(bt&127)!==0||Iy(h,s,l)}m.memoizedState=l;var y={value:l,getSnapshot:s};return m.queue=y,Gy(ky.bind(null,h,y,i),[i]),h.flags|=2048,nu(9,{destroy:void 0},My.bind(null,h,y,l,s),null),l},useId:function(){var i=Mi(),s=$t.identifierPrefix;if(vt){var l=Oe,h=Te;l=(h&~(1<<32-Ln(h)-1)).toString(32)+l,s="_"+s+"R_"+l,l=Zh++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=$A++,s="_"+s+"r_"+l.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Fp,useFormState:jy,useActionState:jy,useOptimistic:function(i){var s=Mi();s.memoizedState=s.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Hp.bind(null,at,!0,l),l.dispatch=s,[i,s]},useMemoCache:Op,useCacheRefresh:function(){return Mi().memoizedState=nx.bind(null,at)},useEffectEvent:function(i){var s=Mi(),l={impl:i};return s.memoizedState=l,function(){if((Vt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},qp={readContext:ni,use:Wh,useCallback:Xy,useContext:ni,useEffect:zp,useImperativeHandle:Qy,useInsertionEffect:Ky,useLayoutEffect:Yy,useMemo:Jy,useReducer:Kh,useRef:Zy,useState:function(){return Kh(io)},useDebugValue:Bp,useDeferredValue:function(i,s){var l=Tn();return e_(l,qt.memoizedState,i,s)},useTransition:function(){var i=Kh(io)[0],s=Tn().memoizedState;return[typeof i=="boolean"?i:uc(i),s]},useSyncExternalStore:Ry,useId:r_,useHostTransitionStatus:Fp,useFormState:Fy,useActionState:Fy,useOptimistic:function(i,s){var l=Tn();return Dy(l,qt,i,s)},useMemoCache:Op,useCacheRefresh:s_};qp.useEffectEvent=Wy;var c_={readContext:ni,use:Wh,useCallback:Xy,useContext:ni,useEffect:zp,useImperativeHandle:Qy,useInsertionEffect:Ky,useLayoutEffect:Yy,useMemo:Jy,useReducer:Dp,useRef:Zy,useState:function(){return Dp(io)},useDebugValue:Bp,useDeferredValue:function(i,s){var l=Tn();return qt===null?Up(l,i,s):e_(l,qt.memoizedState,i,s)},useTransition:function(){var i=Dp(io)[0],s=Tn().memoizedState;return[typeof i=="boolean"?i:uc(i),s]},useSyncExternalStore:Ry,useId:r_,useHostTransitionStatus:Fp,useFormState:qy,useActionState:qy,useOptimistic:function(i,s){var l=Tn();return qt!==null?Dy(l,qt,i,s):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Op,useCacheRefresh:s_};c_.useEffectEvent=Wy;function Zp(i,s,l,h){s=i.memoizedState,l=l(h,s),l=l==null?s:T({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Gp={enqueueSetState:function(i,s,l){i=i._reactInternals;var h=mr(),m=Zo(h);m.payload=s,l!=null&&(m.callback=l),s=Go(i,m,h),s!==null&&(er(s,i,h),sc(s,i,h))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var h=mr(),m=Zo(h);m.tag=1,m.payload=s,l!=null&&(m.callback=l),s=Go(i,m,h),s!==null&&(er(s,i,h),sc(s,i,h))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=mr(),h=Zo(l);h.tag=2,s!=null&&(h.callback=s),s=Go(i,h,l),s!==null&&(er(s,i,l),sc(s,i,l))}};function h_(i,s,l,h,m,y,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,A):s.prototype&&s.prototype.isPureReactComponent?!zo(l,h)||!zo(m,y):!0}function f_(i,s,l,h){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==i&&Gp.enqueueReplaceState(s,s.state,null)}function cl(i,s){var l=s;if("ref"in s){l={};for(var h in s)h!=="ref"&&(l[h]=s[h])}if(i=i.defaultProps){l===s&&(l=T({},l));for(var m in i)l[m]===void 0&&(l[m]=i[m])}return l}function d_(i){Xa(i)}function p_(i){console.error(i)}function m_(i){Xa(i)}function Xh(i,s){try{var l=i.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function g_(i,s,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Wp(i,s,l){return l=Zo(l),l.tag=3,l.payload={element:null},l.callback=function(){Xh(i,s)},l}function v_(i){return i=Zo(i),i.tag=3,i}function y_(i,s,l,h){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var y=h.value;i.payload=function(){return m(y)},i.callback=function(){g_(s,l,h)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){g_(s,l,h),typeof m!="function"&&(Xo===null?Xo=new Set([this]):Xo.add(this));var D=h.stack;this.componentDidCatch(h.value,{componentStack:D!==null?D:""})})}function rx(i,s,l,h,m){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=l.alternate,s!==null&&Kl(s,l,m,!0),l=hr.current,l!==null){switch(l.tag){case 31:case 13:return Rr===null?hf():l.alternate===null&&_n===0&&(_n=3),l.flags&=-257,l.flags|=65536,l.lanes=m,h===Bh?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([h]):s.add(h),ym(i,h,m)),!1;case 22:return l.flags|=65536,h===Bh?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([h]):l.add(h)),ym(i,h,m)),!1}throw Error(r(435,l.tag))}return ym(i,h,m),hf(),!1}if(vt)return s=hr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,h!==Wl&&(i=Error(r(422),{cause:h}),nl(c(i,l)))):(h!==Wl&&(s=Error(r(423),{cause:h}),nl(c(s,l))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,h=c(h,l),m=Wp(i.stateNode,h,m),Sp(i,m),_n!==4&&(_n=2)),!1;var y=Error(r(520),{cause:h});if(y=c(y,l),_c===null?_c=[y]:_c.push(y),_n!==4&&(_n=2),s===null)return!0;h=c(h,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,i=m&-m,l.lanes|=i,i=Wp(l.stateNode,h,i),Sp(l,i),!1;case 1:if(s=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Xo===null||!Xo.has(y))))return l.flags|=65536,m&=-m,l.lanes|=m,m=v_(m),y_(m,i,l,h),Sp(l,m),!1}l=l.return}while(l!==null);return!1}var Kp=Error(r(461)),kn=!1;function ii(i,s,l,h){s.child=i===null?wy(s,null,l,h):ll(s,i.child,l,h)}function __(i,s,l,h,m){l=l.render;var y=s.ref;if("ref"in h){var A={};for(var D in h)D!=="ref"&&(A[D]=h[D])}else A=h;return rl(s),h=Rp(i,s,l,A,y,m),D=Ip(),i!==null&&!kn?(Mp(i,s,m),ro(i,s,m)):(vt&&D&&Bn(s),s.flags|=1,ii(i,s,h,m),s.child)}function E_(i,s,l,h,m){if(i===null){var y=l.type;return typeof y=="function"&&!Zl(y)&&y.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=y,b_(i,s,y,h,m)):(i=tl(l.type,null,h,s,s.mode,m),i.ref=s.ref,i.return=s,s.child=i)}if(y=i.child,!nm(i,m)){var A=y.memoizedProps;if(l=l.compare,l=l!==null?l:zo,l(A,h)&&i.ref===s.ref)return ro(i,s,m)}return s.flags|=1,i=Lr(y,h),i.ref=s.ref,i.return=s,s.child=i}function b_(i,s,l,h,m){if(i!==null){var y=i.memoizedProps;if(zo(y,h)&&i.ref===s.ref)if(kn=!1,s.pendingProps=h=y,nm(i,m))(i.flags&131072)!==0&&(kn=!0);else return s.lanes=i.lanes,ro(i,s,m)}return Yp(i,s,l,h,m)}function w_(i,s,l,h){var m=h.children,y=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,i!==null){for(h=s.child=i.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;h=m&~y}else h=0,s.child=null;return S_(i,s,y,l,h)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Vh(s,y!==null?y.cachePool:null),y!==null?Cy(s,y):Cp(),Ay(s);else return h=s.lanes=536870912,S_(i,s,y!==null?y.baseLanes|l:l,l,h)}else y!==null?(Vh(s,y.cachePool),Cy(s,y),Ko(),s.memoizedState=null):(i!==null&&Vh(s,null),Cp(),Ko());return ii(i,s,m,l),s.child}function fc(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function S_(i,s,l,h,m){var y=_p();return y=y===null?null:{parent:In._currentValue,pool:y},s.memoizedState={baseLanes:l,cachePool:y},i!==null&&Vh(s,null),Cp(),Ay(s),i!==null&&Kl(i,s,h,!0),s.childLanes=m,null}function Jh(i,s){return s=tf({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function T_(i,s,l){return ll(s,i.child,null,l),i=Jh(s,s.pendingProps),i.flags|=2,fr(s),s.memoizedState=null,i}function sx(i,s,l){var h=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(vt){if(h.mode==="hidden")return i=Jh(s,h),s.lanes=536870912,fc(null,i);if(xp(s),(i=Ot)?(i=NE(i,Yi),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:de!==null?{id:Te,overflow:Oe}:null,retryLane:536870912,hydrationErrors:null},l=Qu(i),l.return=s,s.child=l,kt=s,Ot=null)):i=null,i===null)throw Ls(s);return s.lanes=536870912,null}return Jh(s,h)}var y=i.memoizedState;if(y!==null){var A=y.dehydrated;if(xp(s),m)if(s.flags&256)s.flags&=-257,s=T_(i,s,l);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(kn||Kl(i,s,l,!1),m=(l&i.childLanes)!==0,kn||m){if(h=$t,h!==null&&(A=us(h,l),A!==0&&A!==y.retryLane))throw y.retryLane=A,xr(i,A),er(h,i,A),Kp;hf(),s=T_(i,s,l)}else i=y.treeContext,Ot=Ir(A.nextSibling),kt=s,vt=!0,xs=null,Yi=!1,i!==null&&Ii(s,i),s=Jh(s,h),s.flags|=4096;return s}return i=Lr(i.child,{mode:h.mode,children:h.children}),i.ref=s.ref,s.child=i,i.return=s,i}function ef(i,s){var l=s.ref;if(l===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(s.flags|=4194816)}}function Yp(i,s,l,h,m){return rl(s),l=Rp(i,s,l,h,void 0,m),h=Ip(),i!==null&&!kn?(Mp(i,s,m),ro(i,s,m)):(vt&&h&&Bn(s),s.flags|=1,ii(i,s,l,m),s.child)}function C_(i,s,l,h,m,y){return rl(s),s.updateQueue=null,l=Ly(s,h,l,m),xy(i),h=Ip(),i!==null&&!kn?(Mp(i,s,y),ro(i,s,y)):(vt&&h&&Bn(s),s.flags|=1,ii(i,s,l,y),s.child)}function A_(i,s,l,h,m){if(rl(s),s.stateNode===null){var y=Xs,A=l.contextType;typeof A=="object"&&A!==null&&(y=ni(A)),y=new l(h,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Gp,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=h,y.state=s.memoizedState,y.refs={},bp(s),A=l.contextType,y.context=typeof A=="object"&&A!==null?ni(A):Xs,y.state=s.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Zp(s,l,A,h),y.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(A=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),A!==y.state&&Gp.enqueueReplaceState(y,y.state,null),ac(s,h,y,m),oc(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(i===null){y=s.stateNode;var D=s.memoizedProps,Y=cl(l,D);y.props=Y;var he=y.context,be=l.contextType;A=Xs,typeof be=="object"&&be!==null&&(A=ni(be));var Ce=l.getDerivedStateFromProps;be=typeof Ce=="function"||typeof y.getSnapshotBeforeUpdate=="function",D=s.pendingProps!==D,be||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(D||he!==A)&&f_(s,y,h,A),qo=!1;var pe=s.memoizedState;y.state=pe,ac(s,h,y,m),oc(),he=s.memoizedState,D||pe!==he||qo?(typeof Ce=="function"&&(Zp(s,l,Ce,h),he=s.memoizedState),(Y=qo||h_(s,l,Y,h,pe,he,A))?(be||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=he),y.props=h,y.state=he,y.context=A,h=Y):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{y=s.stateNode,wp(i,s),A=s.memoizedProps,be=cl(l,A),y.props=be,Ce=s.pendingProps,pe=y.context,he=l.contextType,Y=Xs,typeof he=="object"&&he!==null&&(Y=ni(he)),D=l.getDerivedStateFromProps,(he=typeof D=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A!==Ce||pe!==Y)&&f_(s,y,h,Y),qo=!1,pe=s.memoizedState,y.state=pe,ac(s,h,y,m),oc();var ye=s.memoizedState;A!==Ce||pe!==ye||qo||i!==null&&i.dependencies!==null&&Dh(i.dependencies)?(typeof D=="function"&&(Zp(s,l,D,h),ye=s.memoizedState),(be=qo||h_(s,l,be,h,pe,ye,Y)||i!==null&&i.dependencies!==null&&Dh(i.dependencies))?(he||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,ye,Y),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,ye,Y)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||A===i.memoizedProps&&pe===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&pe===i.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ye),y.props=h,y.state=ye,y.context=Y,h=be):(typeof y.componentDidUpdate!="function"||A===i.memoizedProps&&pe===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&pe===i.memoizedState||(s.flags|=1024),h=!1)}return y=h,ef(i,s),h=(s.flags&128)!==0,y||h?(y=s.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,i!==null&&h?(s.child=ll(s,i.child,null,m),s.child=ll(s,null,l,m)):ii(i,s,l,m),s.memoizedState=y.state,i=s.child):i=ro(i,s,m),i}function x_(i,s,l,h){return eo(),s.flags|=256,ii(i,s,l,h),s.child}var $p={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qp(i){return{baseLanes:i,cachePool:gy()}}function Xp(i,s,l){return i=i!==null?i.childLanes&~l:0,s&&(i|=pr),i}function L_(i,s,l){var h=s.pendingProps,m=!1,y=(s.flags&128)!==0,A;if((A=y)||(A=i!==null&&i.memoizedState===null?!1:(Sn.current&2)!==0),A&&(m=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if(vt){if(m?Wo(s):Ko(),(i=Ot)?(i=NE(i,Yi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:de!==null?{id:Te,overflow:Oe}:null,retryLane:536870912,hydrationErrors:null},l=Qu(i),l.return=s,s.child=l,kt=s,Ot=null)):i=null,i===null)throw Ls(s);return Pm(i)?s.lanes=32:s.lanes=536870912,null}var D=h.children;return h=h.fallback,m?(Ko(),m=s.mode,D=tf({mode:"hidden",children:D},m),h=Js(h,m,l,null),D.return=s,h.return=s,D.sibling=h,s.child=D,h=s.child,h.memoizedState=Qp(l),h.childLanes=Xp(i,A,l),s.memoizedState=$p,fc(null,h)):(Wo(s),Jp(s,D))}var Y=i.memoizedState;if(Y!==null&&(D=Y.dehydrated,D!==null)){if(y)s.flags&256?(Wo(s),s.flags&=-257,s=em(i,s,l)):s.memoizedState!==null?(Ko(),s.child=i.child,s.flags|=128,s=null):(Ko(),D=h.fallback,m=s.mode,h=tf({mode:"visible",children:h.children},m),D=Js(D,m,l,null),D.flags|=2,h.return=s,D.return=s,h.sibling=D,s.child=h,ll(s,i.child,null,l),h=s.child,h.memoizedState=Qp(l),h.childLanes=Xp(i,A,l),s.memoizedState=$p,s=fc(null,h));else if(Wo(s),Pm(D)){if(A=D.nextSibling&&D.nextSibling.dataset,A)var he=A.dgst;A=he,h=Error(r(419)),h.stack="",h.digest=A,nl({value:h,source:null,stack:null}),s=em(i,s,l)}else if(kn||Kl(i,s,l,!1),A=(l&i.childLanes)!==0,kn||A){if(A=$t,A!==null&&(h=us(A,l),h!==0&&h!==Y.retryLane))throw Y.retryLane=h,xr(i,h),er(A,i,h),Kp;Om(D)||hf(),s=em(i,s,l)}else Om(D)?(s.flags|=192,s.child=i.child,s=null):(i=Y.treeContext,Ot=Ir(D.nextSibling),kt=s,vt=!0,xs=null,Yi=!1,i!==null&&Ii(s,i),s=Jp(s,h.children),s.flags|=4096);return s}return m?(Ko(),D=h.fallback,m=s.mode,Y=i.child,he=Y.sibling,h=Lr(Y,{mode:"hidden",children:h.children}),h.subtreeFlags=Y.subtreeFlags&65011712,he!==null?D=Lr(he,D):(D=Js(D,m,l,null),D.flags|=2),D.return=s,h.return=s,h.sibling=D,s.child=h,fc(null,h),h=s.child,D=i.child.memoizedState,D===null?D=Qp(l):(m=D.cachePool,m!==null?(Y=In._currentValue,m=m.parent!==Y?{parent:Y,pool:Y}:m):m=gy(),D={baseLanes:D.baseLanes|l,cachePool:m}),h.memoizedState=D,h.childLanes=Xp(i,A,l),s.memoizedState=$p,fc(i.child,h)):(Wo(s),l=i.child,i=l.sibling,l=Lr(l,{mode:"visible",children:h.children}),l.return=s,l.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=l,s.memoizedState=null,l)}function Jp(i,s){return s=tf({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function tf(i,s){return i=gi(22,i,null,s),i.lanes=0,i}function em(i,s,l){return ll(s,i.child,null,l),i=Jp(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function R_(i,s,l){i.lanes|=s;var h=i.alternate;h!==null&&(h.lanes|=s),mp(i.return,s,l)}function tm(i,s,l,h,m,y){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m,treeForkCount:y}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=l,A.tailMode=m,A.treeForkCount=y)}function I_(i,s,l){var h=s.pendingProps,m=h.revealOrder,y=h.tail;h=h.children;var A=Sn.current,D=(A&2)!==0;if(D?(A=A&1|2,s.flags|=128):A&=1,te(Sn,A),ii(i,s,h,l),h=vt?k:0,!D&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&R_(i,l,s);else if(i.tag===19)R_(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(l=s.child,m=null;l!==null;)i=l.alternate,i!==null&&Hh(i)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),tm(s,!1,m,l,y,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(i=m.alternate,i!==null&&Hh(i)===null){s.child=m;break}i=m.sibling,m.sibling=l,l=m,m=i}tm(s,!0,l,null,y,h);break;case"together":tm(s,!1,null,null,void 0,h);break;default:s.memoizedState=null}return s.child}function ro(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),Qo|=s.lanes,(l&s.childLanes)===0)if(i!==null){if(Kl(i,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,l=Lr(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=Lr(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function nm(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Dh(i)))}function ox(i,s,l){switch(s.tag){case 3:De(s,s.stateNode.containerInfo),Ho(s,In,i.memoizedState.cache),eo();break;case 27:case 5:ze(s);break;case 4:De(s,s.stateNode.containerInfo);break;case 10:Ho(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,xp(s),null;break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(Wo(s),s.flags|=128,null):(l&s.child.childLanes)!==0?L_(i,s,l):(Wo(s),i=ro(i,s,l),i!==null?i.sibling:null);Wo(s);break;case 19:var m=(i.flags&128)!==0;if(h=(l&s.childLanes)!==0,h||(Kl(i,s,l,!1),h=(l&s.childLanes)!==0),m){if(h)return I_(i,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),te(Sn,Sn.current),h)break;return null;case 22:return s.lanes=0,w_(i,s,l,s.pendingProps);case 24:Ho(s,In,i.memoizedState.cache)}return ro(i,s,l)}function M_(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps)kn=!0;else{if(!nm(i,l)&&(s.flags&128)===0)return kn=!1,ox(i,s,l);kn=(i.flags&131072)!==0}else kn=!1,vt&&(s.flags&1048576)!==0&&ct(s,k,s.index);switch(s.lanes=0,s.tag){case 16:e:{var h=s.pendingProps;if(i=ol(s.elementType),s.type=i,typeof i=="function")Zl(i)?(h=cl(i,h),s.tag=1,s=A_(null,s,i,h,l)):(s.tag=0,s=Yp(null,s,i,h,l));else{if(i!=null){var m=i.$$typeof;if(m===ie){s.tag=11,s=__(null,s,i,h,l);break e}else if(m===O){s.tag=14,s=E_(null,s,i,h,l);break e}}throw s=ke(i)||i,Error(r(306,s,""))}}return s;case 0:return Yp(i,s,s.type,s.pendingProps,l);case 1:return h=s.type,m=cl(h,s.pendingProps),A_(i,s,h,m,l);case 3:e:{if(De(s,s.stateNode.containerInfo),i===null)throw Error(r(387));h=s.pendingProps;var y=s.memoizedState;m=y.element,wp(i,s),ac(s,h,null,l);var A=s.memoizedState;if(h=A.cache,Ho(s,In,h),h!==y.cache&&gp(s,[In],l,!0),oc(),h=A.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=x_(i,s,h,l);break e}else if(h!==m){m=c(Error(r(424)),s),nl(m),s=x_(i,s,h,l);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ot=Ir(i.firstChild),kt=s,vt=!0,xs=null,Yi=!0,l=wy(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(eo(),h===m){s=ro(i,s,l);break e}ii(i,s,h,l)}s=s.child}return s;case 26:return ef(i,s),i===null?(l=FE(s.type,null,s.pendingProps,null))?s.memoizedState=l:vt||(l=s.type,i=s.pendingProps,h=yf(Ae.current).createElement(l),h[Jt]=s,h[bn]=i,ri(h,l,i),cn(h),s.stateNode=h):s.memoizedState=FE(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ze(s),i===null&&vt&&(h=s.stateNode=BE(s.type,s.pendingProps,Ae.current),kt=s,Yi=!0,m=Ot,na(s.type)?(Dm=m,Ot=Ir(h.firstChild)):Ot=m),ii(i,s,s.pendingProps.children,l),ef(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&vt&&((m=h=Ot)&&(h=Nx(h,s.type,s.pendingProps,Yi),h!==null?(s.stateNode=h,kt=s,Ot=Ir(h.firstChild),Yi=!1,m=!0):m=!1),m||Ls(s)),ze(s),m=s.type,y=s.pendingProps,A=i!==null?i.memoizedProps:null,h=y.children,Im(m,y)?h=null:A!==null&&Im(m,A)&&(s.flags|=32),s.memoizedState!==null&&(m=Rp(i,s,QA,null,null,l),xc._currentValue=m),ef(i,s),ii(i,s,h,l),s.child;case 6:return i===null&&vt&&((i=l=Ot)&&(l=Vx(l,s.pendingProps,Yi),l!==null?(s.stateNode=l,kt=s,Ot=null,i=!0):i=!1),i||Ls(s)),null;case 13:return L_(i,s,l);case 4:return De(s,s.stateNode.containerInfo),h=s.pendingProps,i===null?s.child=ll(s,null,h,l):ii(i,s,h,l),s.child;case 11:return __(i,s,s.type,s.pendingProps,l);case 7:return ii(i,s,s.pendingProps,l),s.child;case 8:return ii(i,s,s.pendingProps.children,l),s.child;case 12:return ii(i,s,s.pendingProps.children,l),s.child;case 10:return h=s.pendingProps,Ho(s,s.type,h.value),ii(i,s,h.children,l),s.child;case 9:return m=s.type._context,h=s.pendingProps.children,rl(s),m=ni(m),h=h(m),s.flags|=1,ii(i,s,h,l),s.child;case 14:return E_(i,s,s.type,s.pendingProps,l);case 15:return b_(i,s,s.type,s.pendingProps,l);case 19:return I_(i,s,l);case 31:return sx(i,s,l);case 22:return w_(i,s,l,s.pendingProps);case 24:return rl(s),h=ni(In),i===null?(m=_p(),m===null&&(m=$t,y=vp(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=l),m=y),s.memoizedState={parent:h,cache:m},bp(s),Ho(s,In,m)):((i.lanes&l)!==0&&(wp(i,s),ac(s,null,null,l),oc()),m=i.memoizedState,y=s.memoizedState,m.parent!==h?(m={parent:h,cache:h},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Ho(s,In,h)):(h=y.cache,Ho(s,In,h),h!==m.cache&&gp(s,[In],l,!0))),ii(i,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function so(i){i.flags|=4}function im(i,s,l,h,m){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(rE())i.flags|=8192;else throw al=Bh,Ep}else i.flags&=-16777217}function k_(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!WE(s))if(rE())i.flags|=8192;else throw al=Bh,Ep}function nf(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?_r():536870912,i.lanes|=s,ou|=s)}function dc(i,s){if(!vt)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function tn(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(s)for(var m=i.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=h,i.childLanes=l,s}function ax(i,s,l){var h=s.pendingProps;switch(vn(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(s),null;case 1:return tn(s),null;case 3:return l=s.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),to(In),Qe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Qr(s)?so(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ec())),tn(s),null;case 26:var m=s.type,y=s.memoizedState;return i===null?(so(s),y!==null?(tn(s),k_(s,y)):(tn(s),im(s,m,null,h,l))):y?y!==i.memoizedState?(so(s),tn(s),k_(s,y)):(tn(s),s.flags&=-16777217):(i=i.memoizedProps,i!==h&&so(s),tn(s),im(s,m,i,h,l)),null;case 27:if(Je(s),l=Ae.current,m=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==h&&so(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return tn(s),null}i=fe.current,Qr(s)?Ju(s):(i=BE(m,h,l),s.stateNode=i,so(s))}return tn(s),null;case 5:if(Je(s),m=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==h&&so(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return tn(s),null}if(y=fe.current,Qr(s))Ju(s);else{var A=yf(Ae.current);switch(y){case 1:y=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=A.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof h.is=="string"?A.createElement("select",{is:h.is}):A.createElement("select"),h.multiple?y.multiple=!0:h.size&&(y.size=h.size);break;default:y=typeof h.is=="string"?A.createElement(m,{is:h.is}):A.createElement(m)}}y[Jt]=s,y[bn]=h;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)y.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=y;e:switch(ri(y,m,h),m){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&so(s)}}return tn(s),im(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,l),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==h&&so(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(r(166));if(i=Ae.current,Qr(s)){if(i=s.stateNode,l=s.memoizedProps,h=null,m=kt,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}i[Jt]=s,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||LE(i.nodeValue,l)),i||Ls(s,!0)}else i=yf(i).createTextNode(h),i[Jt]=s,s.stateNode=i}return tn(s),null;case 31:if(l=s.memoizedState,i===null||i.memoizedState!==null){if(h=Qr(s),l!==null){if(i===null){if(!h)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[Jt]=s}else eo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tn(s),i=!1}else l=ec(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return s.flags&256?(fr(s),s):(fr(s),null);if((s.flags&128)!==0)throw Error(r(558))}return tn(s),null;case 13:if(h=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Qr(s),h!==null&&h.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Jt]=s}else eo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tn(s),m=!1}else m=ec(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(fr(s),s):(fr(s),null)}return fr(s),(s.flags&128)!==0?(s.lanes=l,s):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=s.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==m&&(h.flags|=2048)),l!==i&&l&&(s.child.flags|=8192),nf(s,s.updateQueue),tn(s),null);case 4:return Qe(),i===null&&Cm(s.stateNode.containerInfo),tn(s),null;case 10:return to(s.type),tn(s),null;case 19:if(K(Sn),h=s.memoizedState,h===null)return tn(s),null;if(m=(s.flags&128)!==0,y=h.rendering,y===null)if(m)dc(h,!1);else{if(_n!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(y=Hh(i),y!==null){for(s.flags|=128,dc(h,!1),i=y.updateQueue,s.updateQueue=i,nf(s,i),s.subtreeFlags=0,i=l,l=s.child;l!==null;)$u(l,i),l=l.sibling;return te(Sn,Sn.current&1|2),vt&&Fe(s,h.treeForkCount),s.child}i=i.sibling}h.tail!==null&&Ct()>lf&&(s.flags|=128,m=!0,dc(h,!1),s.lanes=4194304)}else{if(!m)if(i=Hh(y),i!==null){if(s.flags|=128,m=!0,i=i.updateQueue,s.updateQueue=i,nf(s,i),dc(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!vt)return tn(s),null}else 2*Ct()-h.renderingStartTime>lf&&l!==536870912&&(s.flags|=128,m=!0,dc(h,!1),s.lanes=4194304);h.isBackwards?(y.sibling=s.child,s.child=y):(i=h.last,i!==null?i.sibling=y:s.child=y,h.last=y)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Ct(),i.sibling=null,l=Sn.current,te(Sn,m?l&1|2:l&1),vt&&Fe(s,h.treeForkCount),i):(tn(s),null);case 22:case 23:return fr(s),Ap(),h=s.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(l&536870912)!==0&&(s.flags&128)===0&&(tn(s),s.subtreeFlags&6&&(s.flags|=8192)):tn(s),l=s.updateQueue,l!==null&&nf(s,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==l&&(s.flags|=2048),i!==null&&K(sl),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),to(In),tn(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function lx(i,s){switch(vn(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return to(In),Qe(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Je(s),null;case 31:if(s.memoizedState!==null){if(fr(s),s.alternate===null)throw Error(r(340));eo()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(fr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));eo()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return K(Sn),null;case 4:return Qe(),null;case 10:return to(s.type),null;case 22:case 23:return fr(s),Ap(),i!==null&&K(sl),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return to(In),null;case 25:return null;default:return null}}function O_(i,s){switch(vn(s),s.tag){case 3:to(In),Qe();break;case 26:case 27:case 5:Je(s);break;case 4:Qe();break;case 31:s.memoizedState!==null&&fr(s);break;case 13:fr(s);break;case 19:K(Sn);break;case 10:to(s.type);break;case 22:case 23:fr(s),Ap(),i!==null&&K(sl);break;case 24:to(In)}}function pc(i,s){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&i)===i){h=void 0;var y=l.create,A=l.inst;h=y(),A.destroy=h}l=l.next}while(l!==m)}}catch(D){Ft(s,s.return,D)}}function Yo(i,s,l){try{var h=s.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var y=m.next;h=y;do{if((h.tag&i)===i){var A=h.inst,D=A.destroy;if(D!==void 0){A.destroy=void 0,m=s;var Y=l,he=D;try{he()}catch(be){Ft(m,Y,be)}}}h=h.next}while(h!==y)}}catch(be){Ft(s,s.return,be)}}function P_(i){var s=i.updateQueue;if(s!==null){var l=i.stateNode;try{Ty(s,l)}catch(h){Ft(i,i.return,h)}}}function D_(i,s,l){l.props=cl(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){Ft(i,s,h)}}function mc(i,s){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(m){Ft(i,s,m)}}function Is(i,s){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(m){Ft(i,s,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Ft(i,s,m)}else l.current=null}function N_(i){var s=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(m){Ft(i,i.return,m)}}function rm(i,s,l){try{var h=i.stateNode;Ix(h,i.type,l,s),h[bn]=s}catch(m){Ft(i,i.return,m)}}function V_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&na(i.type)||i.tag===4}function sm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||V_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&na(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function om(i,s,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(i),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=hn));else if(h!==4&&(h===27&&na(i.type)&&(l=i.stateNode,s=null),i=i.child,i!==null))for(om(i,s,l),i=i.sibling;i!==null;)om(i,s,l),i=i.sibling}function rf(i,s,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(h!==4&&(h===27&&na(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(rf(i,s,l),i=i.sibling;i!==null;)rf(i,s,l),i=i.sibling}function z_(i){var s=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);ri(s,h,l),s[Jt]=i,s[bn]=l}catch(y){Ft(i,i.return,y)}}var oo=!1,On=!1,am=!1,B_=typeof WeakSet=="function"?WeakSet:Set,$n=null;function ux(i,s){if(i=i.containerInfo,Lm=Cf,i=Ka(i),ws(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var A=0,D=-1,Y=-1,he=0,be=0,Ce=i,pe=null;t:for(;;){for(var ye;Ce!==l||m!==0&&Ce.nodeType!==3||(D=A+m),Ce!==y||h!==0&&Ce.nodeType!==3||(Y=A+h),Ce.nodeType===3&&(A+=Ce.nodeValue.length),(ye=Ce.firstChild)!==null;)pe=Ce,Ce=ye;for(;;){if(Ce===i)break t;if(pe===l&&++he===m&&(D=A),pe===y&&++be===h&&(Y=A),(ye=Ce.nextSibling)!==null)break;Ce=pe,pe=Ce.parentNode}Ce=ye}l=D===-1||Y===-1?null:{start:D,end:Y}}else l=null}l=l||{start:0,end:0}}else l=null;for(Rm={focusedElem:i,selectionRange:l},Cf=!1,$n=s;$n!==null;)if(s=$n,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,$n=i;else for(;$n!==null;){switch(s=$n,y=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)m=i[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,l=s,m=y.memoizedProps,y=y.memoizedState,h=l.stateNode;try{var Be=cl(l.type,m);i=h.getSnapshotBeforeUpdate(Be,y),h.__reactInternalSnapshotBeforeUpdate=i}catch(Ye){Ft(l,l.return,Ye)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,l=i.nodeType,l===9)km(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":km(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,$n=i;break}$n=s.return}}function U_(i,s,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:lo(i,l),h&4&&pc(5,l);break;case 1:if(lo(i,l),h&4)if(i=l.stateNode,s===null)try{i.componentDidMount()}catch(A){Ft(l,l.return,A)}else{var m=cl(l.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(m,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){Ft(l,l.return,A)}}h&64&&P_(l),h&512&&mc(l,l.return);break;case 3:if(lo(i,l),h&64&&(i=l.updateQueue,i!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{Ty(i,s)}catch(A){Ft(l,l.return,A)}}break;case 27:s===null&&h&4&&z_(l);case 26:case 5:lo(i,l),s===null&&h&4&&N_(l),h&512&&mc(l,l.return);break;case 12:lo(i,l);break;case 31:lo(i,l),h&4&&H_(i,l);break;case 13:lo(i,l),h&4&&q_(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=yx.bind(null,l),zx(i,l))));break;case 22:if(h=l.memoizedState!==null||oo,!h){s=s!==null&&s.memoizedState!==null||On,m=oo;var y=On;oo=h,(On=s)&&!y?uo(i,l,(l.subtreeFlags&8772)!==0):lo(i,l),oo=m,On=y}break;case 30:break;default:lo(i,l)}}function j_(i){var s=i.alternate;s!==null&&(i.alternate=null,j_(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Hs(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var on=null,$i=!1;function ao(i,s,l){for(l=l.child;l!==null;)F_(i,s,l),l=l.sibling}function F_(i,s,l){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(ci,l)}catch{}switch(l.tag){case 26:On||Is(l,s),ao(i,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:On||Is(l,s);var h=on,m=$i;na(l.type)&&(on=l.stateNode,$i=!1),ao(i,s,l),Tc(l.stateNode),on=h,$i=m;break;case 5:On||Is(l,s);case 6:if(h=on,m=$i,on=null,ao(i,s,l),on=h,$i=m,on!==null)if($i)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(l.stateNode)}catch(y){Ft(l,s,y)}else try{on.removeChild(l.stateNode)}catch(y){Ft(l,s,y)}break;case 18:on!==null&&($i?(i=on,PE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),pu(i)):PE(on,l.stateNode));break;case 4:h=on,m=$i,on=l.stateNode.containerInfo,$i=!0,ao(i,s,l),on=h,$i=m;break;case 0:case 11:case 14:case 15:Yo(2,l,s),On||Yo(4,l,s),ao(i,s,l);break;case 1:On||(Is(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"&&D_(l,s,h)),ao(i,s,l);break;case 21:ao(i,s,l);break;case 22:On=(h=On)||l.memoizedState!==null,ao(i,s,l),On=h;break;default:ao(i,s,l)}}function H_(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{pu(i)}catch(l){Ft(s,s.return,l)}}}function q_(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{pu(i)}catch(l){Ft(s,s.return,l)}}function cx(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new B_),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new B_),s;default:throw Error(r(435,i.tag))}}function sf(i,s){var l=cx(i);s.forEach(function(h){if(!l.has(h)){l.add(h);var m=_x.bind(null,i,h);h.then(m,m)}})}function Qi(i,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h],y=i,A=s,D=A;e:for(;D!==null;){switch(D.tag){case 27:if(na(D.type)){on=D.stateNode,$i=!1;break e}break;case 5:on=D.stateNode,$i=!1;break e;case 3:case 4:on=D.stateNode.containerInfo,$i=!0;break e}D=D.return}if(on===null)throw Error(r(160));F_(y,A,m),on=null,$i=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Z_(s,i),s=s.sibling}var Jr=null;function Z_(i,s){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Qi(s,i),Xi(i),h&4&&(Yo(3,i,i.return),pc(3,i),Yo(5,i,i.return));break;case 1:Qi(s,i),Xi(i),h&512&&(On||l===null||Is(l,l.return)),h&64&&oo&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var m=Jr;if(Qi(s,i),Xi(i),h&512&&(On||l===null||Is(l,l.return)),h&4){var y=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,m=m.ownerDocument||m;t:switch(h){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Ur]||y[Jt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(h),m.head.insertBefore(y,m.querySelector("head > title"))),ri(y,h,l),y[Jt]=i,cn(y),h=y;break e;case"link":var A=ZE("link","href",m).get(h+(l.href||""));if(A){for(var D=0;D<A.length;D++)if(y=A[D],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(D,1);break t}}y=m.createElement(h),ri(y,h,l),m.head.appendChild(y);break;case"meta":if(A=ZE("meta","content",m).get(h+(l.content||""))){for(D=0;D<A.length;D++)if(y=A[D],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(D,1);break t}}y=m.createElement(h),ri(y,h,l),m.head.appendChild(y);break;default:throw Error(r(468,h))}y[Jt]=i,cn(y),h=y}i.stateNode=h}else GE(m,i.type,i.stateNode);else i.stateNode=qE(m,h,i.memoizedProps);else y!==h?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,h===null?GE(m,i.type,i.stateNode):qE(m,h,i.memoizedProps)):h===null&&i.stateNode!==null&&rm(i,i.memoizedProps,l.memoizedProps)}break;case 27:Qi(s,i),Xi(i),h&512&&(On||l===null||Is(l,l.return)),l!==null&&h&4&&rm(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Qi(s,i),Xi(i),h&512&&(On||l===null||Is(l,l.return)),i.flags&32){m=i.stateNode;try{qn(m,"")}catch(Be){Ft(i,i.return,Be)}}h&4&&i.stateNode!=null&&(m=i.memoizedProps,rm(i,m,l!==null?l.memoizedProps:m)),h&1024&&(am=!0);break;case 6:if(Qi(s,i),Xi(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(Be){Ft(i,i.return,Be)}}break;case 3:if(bf=null,m=Jr,Jr=_f(s.containerInfo),Qi(s,i),Jr=m,Xi(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{pu(s.containerInfo)}catch(Be){Ft(i,i.return,Be)}am&&(am=!1,G_(i));break;case 4:h=Jr,Jr=_f(i.stateNode.containerInfo),Qi(s,i),Xi(i),Jr=h;break;case 12:Qi(s,i),Xi(i);break;case 31:Qi(s,i),Xi(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,sf(i,h)));break;case 13:Qi(s,i),Xi(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(af=Ct()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,sf(i,h)));break;case 22:m=i.memoizedState!==null;var Y=l!==null&&l.memoizedState!==null,he=oo,be=On;if(oo=he||m,On=be||Y,Qi(s,i),On=be,oo=he,Xi(i),h&8192)e:for(s=i.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(l===null||Y||oo||On||hl(i)),l=null,s=i;;){if(s.tag===5||s.tag===26){if(l===null){Y=l=s;try{if(y=Y.stateNode,m)A=y.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{D=Y.stateNode;var Ce=Y.memoizedProps.style,pe=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;D.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(Be){Ft(Y,Y.return,Be)}}}else if(s.tag===6){if(l===null){Y=s;try{Y.stateNode.nodeValue=m?"":Y.memoizedProps}catch(Be){Ft(Y,Y.return,Be)}}}else if(s.tag===18){if(l===null){Y=s;try{var ye=Y.stateNode;m?DE(ye,!0):DE(Y.stateNode,!1)}catch(Be){Ft(Y,Y.return,Be)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,sf(i,l))));break;case 19:Qi(s,i),Xi(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,sf(i,h)));break;case 30:break;case 21:break;default:Qi(s,i),Xi(i)}}function Xi(i){var s=i.flags;if(s&2){try{for(var l,h=i.return;h!==null;){if(V_(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var m=l.stateNode,y=sm(i);rf(i,y,m);break;case 5:var A=l.stateNode;l.flags&32&&(qn(A,""),l.flags&=-33);var D=sm(i);rf(i,D,A);break;case 3:case 4:var Y=l.stateNode.containerInfo,he=sm(i);om(i,he,Y);break;default:throw Error(r(161))}}catch(be){Ft(i,i.return,be)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function G_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;G_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function lo(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)U_(i,s.alternate,s),s=s.sibling}function hl(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Yo(4,s,s.return),hl(s);break;case 1:Is(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&D_(s,s.return,l),hl(s);break;case 27:Tc(s.stateNode);case 26:case 5:Is(s,s.return),hl(s);break;case 22:s.memoizedState===null&&hl(s);break;case 30:hl(s);break;default:hl(s)}i=i.sibling}}function uo(i,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,m=i,y=s,A=y.flags;switch(y.tag){case 0:case 11:case 15:uo(m,y,l),pc(4,y);break;case 1:if(uo(m,y,l),h=y,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(he){Ft(h,h.return,he)}if(h=y,m=h.updateQueue,m!==null){var D=h.stateNode;try{var Y=m.shared.hiddenCallbacks;if(Y!==null)for(m.shared.hiddenCallbacks=null,m=0;m<Y.length;m++)Sy(Y[m],D)}catch(he){Ft(h,h.return,he)}}l&&A&64&&P_(y),mc(y,y.return);break;case 27:z_(y);case 26:case 5:uo(m,y,l),l&&h===null&&A&4&&N_(y),mc(y,y.return);break;case 12:uo(m,y,l);break;case 31:uo(m,y,l),l&&A&4&&H_(m,y);break;case 13:uo(m,y,l),l&&A&4&&q_(m,y);break;case 22:y.memoizedState===null&&uo(m,y,l),mc(y,y.return);break;case 30:break;default:uo(m,y,l)}s=s.sibling}}function lm(i,s){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&tc(l))}function um(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&tc(i))}function es(i,s,l,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)W_(i,s,l,h),s=s.sibling}function W_(i,s,l,h){var m=s.flags;switch(s.tag){case 0:case 11:case 15:es(i,s,l,h),m&2048&&pc(9,s);break;case 1:es(i,s,l,h);break;case 3:es(i,s,l,h),m&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&tc(i)));break;case 12:if(m&2048){es(i,s,l,h),i=s.stateNode;try{var y=s.memoizedProps,A=y.id,D=y.onPostCommit;typeof D=="function"&&D(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Y){Ft(s,s.return,Y)}}else es(i,s,l,h);break;case 31:es(i,s,l,h);break;case 13:es(i,s,l,h);break;case 23:break;case 22:y=s.stateNode,A=s.alternate,s.memoizedState!==null?y._visibility&2?es(i,s,l,h):gc(i,s):y._visibility&2?es(i,s,l,h):(y._visibility|=2,iu(i,s,l,h,(s.subtreeFlags&10256)!==0||!1)),m&2048&&lm(A,s);break;case 24:es(i,s,l,h),m&2048&&um(s.alternate,s);break;default:es(i,s,l,h)}}function iu(i,s,l,h,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=i,A=s,D=l,Y=h,he=A.flags;switch(A.tag){case 0:case 11:case 15:iu(y,A,D,Y,m),pc(8,A);break;case 23:break;case 22:var be=A.stateNode;A.memoizedState!==null?be._visibility&2?iu(y,A,D,Y,m):gc(y,A):(be._visibility|=2,iu(y,A,D,Y,m)),m&&he&2048&&lm(A.alternate,A);break;case 24:iu(y,A,D,Y,m),m&&he&2048&&um(A.alternate,A);break;default:iu(y,A,D,Y,m)}s=s.sibling}}function gc(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=i,h=s,m=h.flags;switch(h.tag){case 22:gc(l,h),m&2048&&lm(h.alternate,h);break;case 24:gc(l,h),m&2048&&um(h.alternate,h);break;default:gc(l,h)}s=s.sibling}}var vc=8192;function ru(i,s,l){if(i.subtreeFlags&vc)for(i=i.child;i!==null;)K_(i,s,l),i=i.sibling}function K_(i,s,l){switch(i.tag){case 26:ru(i,s,l),i.flags&vc&&i.memoizedState!==null&&$x(l,Jr,i.memoizedState,i.memoizedProps);break;case 5:ru(i,s,l);break;case 3:case 4:var h=Jr;Jr=_f(i.stateNode.containerInfo),ru(i,s,l),Jr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=vc,vc=16777216,ru(i,s,l),vc=h):ru(i,s,l));break;default:ru(i,s,l)}}function Y_(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function yc(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var h=s[l];$n=h,Q_(h,i)}Y_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)$_(i),i=i.sibling}function $_(i){switch(i.tag){case 0:case 11:case 15:yc(i),i.flags&2048&&Yo(9,i,i.return);break;case 3:yc(i);break;case 12:yc(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,of(i)):yc(i);break;default:yc(i)}}function of(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var h=s[l];$n=h,Q_(h,i)}Y_(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Yo(8,s,s.return),of(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,of(s));break;default:of(s)}i=i.sibling}}function Q_(i,s){for(;$n!==null;){var l=$n;switch(l.tag){case 0:case 11:case 15:Yo(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:tc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,$n=h;else e:for(l=i;$n!==null;){h=$n;var m=h.sibling,y=h.return;if(j_(h),h===l){$n=null;break e}if(m!==null){m.return=y,$n=m;break e}$n=y}}}var hx={getCacheForType:function(i){var s=ni(In),l=s.data.get(i);return l===void 0&&(l=i(),s.data.set(i,l)),l},cacheSignal:function(){return ni(In).controller.signal}},fx=typeof WeakMap=="function"?WeakMap:Map,Vt=0,$t=null,yt=null,bt=0,jt=0,dr=null,$o=!1,su=!1,cm=!1,co=0,_n=0,Qo=0,fl=0,hm=0,pr=0,ou=0,_c=null,Ji=null,fm=!1,af=0,X_=0,lf=1/0,uf=null,Xo=null,Un=0,Jo=null,au=null,ho=0,dm=0,pm=null,J_=null,Ec=0,mm=null;function mr(){return(Vt&2)!==0&&bt!==0?bt&-bt:ne.T!==null?bm():Er()}function eE(){if(pr===0)if((bt&536870912)===0||vt){var i=hi;hi<<=1,(hi&3932160)===0&&(hi=262144),pr=i}else pr=536870912;return i=hr.current,i!==null&&(i.flags|=32),pr}function er(i,s,l){(i===$t&&(jt===2||jt===9)||i.cancelPendingCommit!==null)&&(lu(i,0),ea(i,bt,pr,!1)),Ui(i,l),((Vt&2)===0||i!==$t)&&(i===$t&&((Vt&2)===0&&(fl|=l),_n===4&&ea(i,bt,pr,!1)),Ms(i))}function tE(i,s,l){if((Vt&6)!==0)throw Error(r(327));var h=!l&&(s&127)===0&&(s&i.expiredLanes)===0||Ti(i,s),m=h?mx(i,s):vm(i,s,!0),y=h;do{if(m===0){su&&!h&&ea(i,s,0,!1);break}else{if(l=i.current.alternate,y&&!dx(l)){m=vm(i,s,!1),y=!1;continue}if(m===2){if(y=s,i.errorRecoveryDisabledLanes&y)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var D=i;m=_c;var Y=D.current.memoizedState.isDehydrated;if(Y&&(lu(D,A).flags|=256),A=vm(D,A,!1),A!==2){if(cm&&!Y){D.errorRecoveryDisabledLanes|=y,fl|=y,m=4;break e}y=Ji,Ji=m,y!==null&&(Ji===null?Ji=y:Ji.push.apply(Ji,y))}m=A}if(y=!1,m!==2)continue}}if(m===1){lu(i,0),ea(i,s,0,!0);break}e:{switch(h=i,y=m,y){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ea(h,s,pr,!$o);break e;case 2:Ji=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=af+300-Ct(),10<m)){if(ea(h,s,pr,!$o),Xn(h,0,!0)!==0)break e;ho=s,h.timeoutHandle=kE(nE.bind(null,h,l,Ji,uf,fm,s,pr,fl,ou,$o,y,"Throttled",-0,0),m);break e}nE(h,l,Ji,uf,fm,s,pr,fl,ou,$o,y,null,-0,0)}}break}while(!0);Ms(i)}function nE(i,s,l,h,m,y,A,D,Y,he,be,Ce,pe,ye){if(i.timeoutHandle=-1,Ce=s.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hn},K_(s,y,Ce);var Be=(y&62914560)===y?af-Ct():(y&4194048)===y?X_-Ct():0;if(Be=Qx(Ce,Be),Be!==null){ho=y,i.cancelPendingCommit=Be(cE.bind(null,i,s,y,l,h,m,A,D,Y,be,Ce,null,pe,ye)),ea(i,y,A,!he);return}}cE(i,s,y,l,h,m,A,D,Y)}function dx(i){for(var s=i;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var m=l[h],y=m.getSnapshot;m=m.value;try{if(!Kn(y(),m))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ea(i,s,l,h){s&=~hm,s&=~fl,i.suspendedLanes|=s,i.pingedLanes&=~s,h&&(i.warmLanes|=s),h=i.expirationTimes;for(var m=s;0<m;){var y=31-Ln(m),A=1<<y;h[y]=-1,m&=~A}l!==0&&$e(i,l,s)}function cf(){return(Vt&6)===0?(bc(0),!1):!0}function gm(){if(yt!==null){if(jt===0)var i=yt.return;else i=yt,Xr=Rs=null,kp(i),Xl=null,ic=0,i=yt;for(;i!==null;)O_(i.alternate,i),i=i.return;yt=null}}function lu(i,s){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,Ox(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),ho=0,gm(),$t=i,yt=l=Lr(i.current,null),bt=s,jt=0,dr=null,$o=!1,su=Ti(i,s),cm=!1,ou=pr=hm=fl=Qo=_n=0,Ji=_c=null,fm=!1,(s&8)!==0&&(s|=s&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=s;0<h;){var m=31-Ln(h),y=1<<m;s|=i[m],h&=~y}return co=s,Ja(),l}function iE(i,s){at=null,ne.H=hc,s===Ql||s===zh?(s=_y(),jt=3):s===Ep?(s=_y(),jt=4):jt=s===Kp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,dr=s,yt===null&&(_n=1,Xh(i,c(s,i.current)))}function rE(){var i=hr.current;return i===null?!0:(bt&4194048)===bt?Rr===null:(bt&62914560)===bt||(bt&536870912)!==0?i===Rr:!1}function sE(){var i=ne.H;return ne.H=hc,i===null?hc:i}function oE(){var i=ne.A;return ne.A=hx,i}function hf(){_n=4,$o||(bt&4194048)!==bt&&hr.current!==null||(su=!0),(Qo&134217727)===0&&(fl&134217727)===0||$t===null||ea($t,bt,pr,!1)}function vm(i,s,l){var h=Vt;Vt|=2;var m=sE(),y=oE();($t!==i||bt!==s)&&(uf=null,lu(i,s)),s=!1;var A=_n;e:do try{if(jt!==0&&yt!==null){var D=yt,Y=dr;switch(jt){case 8:gm(),A=6;break e;case 3:case 2:case 9:case 6:hr.current===null&&(s=!0);var he=jt;if(jt=0,dr=null,uu(i,D,Y,he),l&&su){A=0;break e}break;default:he=jt,jt=0,dr=null,uu(i,D,Y,he)}}px(),A=_n;break}catch(be){iE(i,be)}while(!0);return s&&i.shellSuspendCounter++,Xr=Rs=null,Vt=h,ne.H=m,ne.A=y,yt===null&&($t=null,bt=0,Ja()),A}function px(){for(;yt!==null;)aE(yt)}function mx(i,s){var l=Vt;Vt|=2;var h=sE(),m=oE();$t!==i||bt!==s?(uf=null,lf=Ct()+500,lu(i,s)):su=Ti(i,s);e:do try{if(jt!==0&&yt!==null){s=yt;var y=dr;t:switch(jt){case 1:jt=0,dr=null,uu(i,s,y,1);break;case 2:case 9:if(vy(y)){jt=0,dr=null,lE(s);break}s=function(){jt!==2&&jt!==9||$t!==i||(jt=7),Ms(i)},y.then(s,s);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:vy(y)?(jt=0,dr=null,lE(s)):(jt=0,dr=null,uu(i,s,y,7));break;case 5:var A=null;switch(yt.tag){case 26:A=yt.memoizedState;case 5:case 27:var D=yt;if(A?WE(A):D.stateNode.complete){jt=0,dr=null;var Y=D.sibling;if(Y!==null)yt=Y;else{var he=D.return;he!==null?(yt=he,ff(he)):yt=null}break t}}jt=0,dr=null,uu(i,s,y,5);break;case 6:jt=0,dr=null,uu(i,s,y,6);break;case 8:gm(),_n=6;break e;default:throw Error(r(462))}}gx();break}catch(be){iE(i,be)}while(!0);return Xr=Rs=null,ne.H=h,ne.A=m,Vt=l,yt!==null?0:($t=null,bt=0,Ja(),_n)}function gx(){for(;yt!==null&&!We();)aE(yt)}function aE(i){var s=M_(i.alternate,i,co);i.memoizedProps=i.pendingProps,s===null?ff(i):yt=s}function lE(i){var s=i,l=s.alternate;switch(s.tag){case 15:case 0:s=C_(l,s,s.pendingProps,s.type,void 0,bt);break;case 11:s=C_(l,s,s.pendingProps,s.type.render,s.ref,bt);break;case 5:kp(s);default:O_(l,s),s=yt=$u(s,co),s=M_(l,s,co)}i.memoizedProps=i.pendingProps,s===null?ff(i):yt=s}function uu(i,s,l,h){Xr=Rs=null,kp(s),Xl=null,ic=0;var m=s.return;try{if(rx(i,m,s,l,bt)){_n=1,Xh(i,c(l,i.current)),yt=null;return}}catch(y){if(m!==null)throw yt=m,y;_n=1,Xh(i,c(l,i.current)),yt=null;return}s.flags&32768?(vt||h===1?i=!0:su||(bt&536870912)!==0?i=!1:($o=i=!0,(h===2||h===9||h===3||h===6)&&(h=hr.current,h!==null&&h.tag===13&&(h.flags|=16384))),uE(s,i)):ff(s)}function ff(i){var s=i;do{if((s.flags&32768)!==0){uE(s,$o);return}i=s.return;var l=ax(s.alternate,s,co);if(l!==null){yt=l;return}if(s=s.sibling,s!==null){yt=s;return}yt=s=i}while(s!==null);_n===0&&(_n=5)}function uE(i,s){do{var l=lx(i.alternate,i);if(l!==null){l.flags&=32767,yt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(i=i.sibling,i!==null)){yt=i;return}yt=i=l}while(i!==null);_n=6,yt=null}function cE(i,s,l,h,m,y,A,D,Y){i.cancelPendingCommit=null;do df();while(Un!==0);if((Vt&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(y=s.lanes|s.childLanes,y|=ql,Xt(i,l,y,A,D,Y),i===$t&&(yt=$t=null,bt=0),au=s,Jo=i,ho=l,dm=y,pm=m,J_=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Ex(An,function(){return mE(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=ne.T,ne.T=null,m=me.p,me.p=2,A=Vt,Vt|=4;try{ux(i,s,l)}finally{Vt=A,me.p=m,ne.T=h}}Un=1,hE(),fE(),dE()}}function hE(){if(Un===1){Un=0;var i=Jo,s=au,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=ne.T,ne.T=null;var h=me.p;me.p=2;var m=Vt;Vt|=4;try{Z_(s,i);var y=Rm,A=Ka(i.containerInfo),D=y.focusedElem,Y=y.selectionRange;if(A!==D&&D&&D.ownerDocument&&Ul(D.ownerDocument.documentElement,D)){if(Y!==null&&ws(D)){var he=Y.start,be=Y.end;if(be===void 0&&(be=he),"selectionStart"in D)D.selectionStart=he,D.selectionEnd=Math.min(be,D.value.length);else{var Ce=D.ownerDocument||document,pe=Ce&&Ce.defaultView||window;if(pe.getSelection){var ye=pe.getSelection(),Be=D.textContent.length,Ye=Math.min(Y.start,Be),Gt=Y.end===void 0?Ye:Math.min(Y.end,Be);!ye.extend&&Ye>Gt&&(A=Gt,Gt=Ye,Ye=A);var se=Wa(D,Ye),J=Wa(D,Gt);if(se&&J&&(ye.rangeCount!==1||ye.anchorNode!==se.node||ye.anchorOffset!==se.offset||ye.focusNode!==J.node||ye.focusOffset!==J.offset)){var ce=Ce.createRange();ce.setStart(se.node,se.offset),ye.removeAllRanges(),Ye>Gt?(ye.addRange(ce),ye.extend(J.node,J.offset)):(ce.setEnd(J.node,J.offset),ye.addRange(ce))}}}}for(Ce=[],ye=D;ye=ye.parentNode;)ye.nodeType===1&&Ce.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<Ce.length;D++){var we=Ce[D];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}Cf=!!Lm,Rm=Lm=null}finally{Vt=m,me.p=h,ne.T=l}}i.current=s,Un=2}}function fE(){if(Un===2){Un=0;var i=Jo,s=au,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=ne.T,ne.T=null;var h=me.p;me.p=2;var m=Vt;Vt|=4;try{U_(i,s.alternate,s)}finally{Vt=m,me.p=h,ne.T=l}}Un=3}}function dE(){if(Un===4||Un===3){Un=0,rn();var i=Jo,s=au,l=ho,h=J_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Un=5:(Un=0,au=Jo=null,pE(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Xo=null),Ue(l),s=s.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(ci,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=ne.T,m=me.p,me.p=2,ne.T=null;try{for(var y=i.onRecoverableError,A=0;A<h.length;A++){var D=h[A];y(D.value,{componentStack:D.stack})}}finally{ne.T=s,me.p=m}}(ho&3)!==0&&df(),Ms(i),m=i.pendingLanes,(l&261930)!==0&&(m&42)!==0?i===mm?Ec++:(Ec=0,mm=i):Ec=0,bc(0)}}function pE(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,tc(s)))}function df(){return hE(),fE(),dE(),mE()}function mE(){if(Un!==5)return!1;var i=Jo,s=dm;dm=0;var l=Ue(ho),h=ne.T,m=me.p;try{me.p=32>l?32:l,ne.T=null,l=pm,pm=null;var y=Jo,A=ho;if(Un=0,au=Jo=null,ho=0,(Vt&6)!==0)throw Error(r(331));var D=Vt;if(Vt|=4,$_(y.current),W_(y,y.current,A,l),Vt=D,bc(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(ci,y)}catch{}return!0}finally{me.p=m,ne.T=h,pE(i,s)}}function gE(i,s,l){s=c(l,s),s=Wp(i.stateNode,s,2),i=Go(i,s,2),i!==null&&(Ui(i,2),Ms(i))}function Ft(i,s,l){if(i.tag===3)gE(i,i,l);else for(;s!==null;){if(s.tag===3){gE(s,i,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Xo===null||!Xo.has(h))){i=c(l,i),l=v_(2),h=Go(s,l,2),h!==null&&(y_(l,h,s,i),Ui(h,2),Ms(h));break}}s=s.return}}function ym(i,s,l){var h=i.pingCache;if(h===null){h=i.pingCache=new fx;var m=new Set;h.set(s,m)}else m=h.get(s),m===void 0&&(m=new Set,h.set(s,m));m.has(l)||(cm=!0,m.add(l),i=vx.bind(null,i,s,l),s.then(i,i))}function vx(i,s,l){var h=i.pingCache;h!==null&&h.delete(s),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,$t===i&&(bt&l)===l&&(_n===4||_n===3&&(bt&62914560)===bt&&300>Ct()-af?(Vt&2)===0&&lu(i,0):hm|=l,ou===bt&&(ou=0)),Ms(i)}function vE(i,s){s===0&&(s=_r()),i=xr(i,s),i!==null&&(Ui(i,s),Ms(i))}function yx(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),vE(i,l)}function _x(i,s){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,m=i.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(s),vE(i,l)}function Ex(i,s){return ae(i,s)}var pf=null,cu=null,_m=!1,mf=!1,Em=!1,ta=0;function Ms(i){i!==cu&&i.next===null&&(cu===null?pf=cu=i:cu=cu.next=i),mf=!0,_m||(_m=!0,wx())}function bc(i,s){if(!Em&&mf){Em=!0;do for(var l=!1,h=pf;h!==null;){if(i!==0){var m=h.pendingLanes;if(m===0)var y=0;else{var A=h.suspendedLanes,D=h.pingedLanes;y=(1<<31-Ln(42|i)+1)-1,y&=m&~(A&~D),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,bE(h,y))}else y=bt,y=Xn(h,h===$t?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||Ti(h,y)||(l=!0,bE(h,y));h=h.next}while(l);Em=!1}}function bx(){yE()}function yE(){mf=_m=!1;var i=0;ta!==0&&kx()&&(i=ta);for(var s=Ct(),l=null,h=pf;h!==null;){var m=h.next,y=_E(h,s);y===0?(h.next=null,l===null?pf=m:l.next=m,m===null&&(cu=l)):(l=h,(i!==0||(y&3)!==0)&&(mf=!0)),h=m}Un!==0&&Un!==5||bc(i),ta!==0&&(ta=0)}function _E(i,s){for(var l=i.suspendedLanes,h=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var A=31-Ln(y),D=1<<A,Y=m[A];Y===-1?((D&l)===0||(D&h)!==0)&&(m[A]=Br(D,s)):Y<=s&&(i.expiredLanes|=D),y&=~D}if(s=$t,l=bt,l=Xn(i,i===s?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===s&&(jt===2||jt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Pe(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Ti(i,l)){if(s=l&-l,s===i.callbackPriority)return s;switch(h!==null&&Pe(h),Ue(l)){case 2:case 8:l=dt;break;case 32:l=An;break;case 268435456:l=ir;break;default:l=An}return h=EE.bind(null,i),l=ae(l,h),i.callbackPriority=s,i.callbackNode=l,s}return h!==null&&h!==null&&Pe(h),i.callbackPriority=2,i.callbackNode=null,2}function EE(i,s){if(Un!==0&&Un!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(df()&&i.callbackNode!==l)return null;var h=bt;return h=Xn(i,i===$t?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(tE(i,h,s),_E(i,Ct()),i.callbackNode!=null&&i.callbackNode===l?EE.bind(null,i):null)}function bE(i,s){if(df())return null;tE(i,s,!0)}function wx(){Px(function(){(Vt&6)!==0?ae(nt,bx):yE()})}function bm(){if(ta===0){var i=Yl;i===0&&(i=rr,rr<<=1,(rr&261888)===0&&(rr=256)),ta=i}return ta}function wE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Zi(""+i)}function SE(i,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,i.id&&l.setAttribute("form",i.id),s.parentNode.insertBefore(l,s),i=new FormData(i),l.parentNode.removeChild(l),i}function Sx(i,s,l,h,m){if(s==="submit"&&l&&l.stateNode===m){var y=wE((m[bn]||null).action),A=h.submitter;A&&(s=(s=A[bn]||null)?wE(s.formAction):A.getAttribute("formAction"),s!==null&&(y=s,A=null));var D=new Ks("action","action",null,h,m);i.push({event:D,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ta!==0){var Y=A?SE(m,A):new FormData(m);jp(l,{pending:!0,data:Y,method:m.method,action:y},null,Y)}}else typeof y=="function"&&(D.preventDefault(),Y=A?SE(m,A):new FormData(m),jp(l,{pending:!0,data:Y,method:m.method,action:y},y,Y))},currentTarget:m}]})}}for(var wm=0;wm<Cs.length;wm++){var Sm=Cs[wm],Tx=Sm.toLowerCase(),Cx=Sm[0].toUpperCase()+Sm.slice(1);Wi(Tx,"on"+Cx)}Wi($a,"onAnimationEnd"),Wi(kh,"onAnimationIteration"),Wi(Qa,"onAnimationStart"),Wi("dblclick","onDoubleClick"),Wi("focusin","onFocus"),Wi("focusout","onBlur"),Wi(fp,"onTransitionRun"),Wi(Oh,"onTransitionStart"),Wi(dp,"onTransitionCancel"),Wi(jo,"onTransitionEnd"),ji("onMouseEnter",["mouseout","mouseover"]),ji("onMouseLeave",["mouseout","mouseover"]),ji("onPointerEnter",["pointerout","pointerover"]),ji("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ax=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wc));function TE(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],m=h.event;h=h.listeners;e:{var y=void 0;if(s)for(var A=h.length-1;0<=A;A--){var D=h[A],Y=D.instance,he=D.currentTarget;if(D=D.listener,Y!==y&&m.isPropagationStopped())break e;y=D,m.currentTarget=he;try{y(m)}catch(be){Xa(be)}m.currentTarget=null,y=Y}else for(A=0;A<h.length;A++){if(D=h[A],Y=D.instance,he=D.currentTarget,D=D.listener,Y!==y&&m.isPropagationStopped())break e;y=D,m.currentTarget=he;try{y(m)}catch(be){Xa(be)}m.currentTarget=null,y=Y}}}}function _t(i,s){var l=s[Ci];l===void 0&&(l=s[Ci]=new Set);var h=i+"__bubble";l.has(h)||(CE(s,i,2,!1),l.add(h))}function Tm(i,s,l){var h=0;s&&(h|=4),CE(l,i,h,s)}var gf="_reactListening"+Math.random().toString(36).slice(2);function Cm(i){if(!i[gf]){i[gf]=!0,Co.forEach(function(l){l!=="selectionchange"&&(Ax.has(l)||Tm(l,!1,i),Tm(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[gf]||(s[gf]=!0,Tm("selectionchange",!1,s))}}function CE(i,s,l,h){switch(e0(s)){case 2:var m=eL;break;case 8:m=tL;break;default:m=Um}l=m.bind(null,s,l,i),m=void 0,!Ws||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),h?m!==void 0?i.addEventListener(s,l,{capture:!0,passive:m}):i.addEventListener(s,l,!0):m!==void 0?i.addEventListener(s,l,{passive:m}):i.addEventListener(s,l,!1)}function Am(i,s,l,h,m){var y=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var D=h.stateNode.containerInfo;if(D===m)break;if(A===4)for(A=h.return;A!==null;){var Y=A.tag;if((Y===3||Y===4)&&A.stateNode.containerInfo===m)return;A=A.return}for(;D!==null;){if(A=br(D),A===null)return;if(Y=A.tag,Y===5||Y===6||Y===26||Y===27){h=y=A;continue e}D=D.parentNode}}h=h.return}za(function(){var he=y,be=ps(l),Ce=[];e:{var pe=Ph.get(i);if(pe!==void 0){var ye=Ks,Be=i;switch(i){case"keypress":if(ms(l)===0)break e;case"keydown":case"keyup":ye=Ua;break;case"focusin":Be="focus",ye=ys;break;case"focusout":Be="blur",ye=ys;break;case"beforeblur":case"afterblur":ye=ys;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=Ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Pl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Nl;break;case $a:case kh:case Qa:ye=_s;break;case jo:ye=$s;break;case"scroll":case"scrollend":ye=pt;break;case"wheel":ye=Cr;break;case"copy":case"cut":case"paste":ye=Ri;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=ja;break;case"toggle":case"beforetoggle":ye=Gi}var Ye=(s&4)!==0,Gt=!Ye&&(i==="scroll"||i==="scrollend"),se=Ye?pe!==null?pe+"Capture":null:pe;Ye=[];for(var J=he,ce;J!==null;){var we=J;if(ce=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ce===null||se===null||(we=Zn(J,se),we!=null&&Ye.push(Sc(J,we,ce))),Gt)break;J=J.return}0<Ye.length&&(pe=new ye(pe,Be,null,l,be),Ce.push({event:pe,listeners:Ye}))}}if((s&7)===0){e:{if(pe=i==="mouseover"||i==="pointerover",ye=i==="mouseout"||i==="pointerout",pe&&l!==Gs&&(Be=l.relatedTarget||l.fromElement)&&(br(Be)||Be[or]))break e;if((ye||pe)&&(pe=be.window===be?be:(pe=be.ownerDocument)?pe.defaultView||pe.parentWindow:window,ye?(Be=l.relatedTarget||l.toElement,ye=he,Be=Be?br(Be):null,Be!==null&&(Gt=u(Be),Ye=Be.tag,Be!==Gt||Ye!==5&&Ye!==27&&Ye!==6)&&(Be=null)):(ye=null,Be=he),ye!==Be)){if(Ye=Ol,we="onMouseLeave",se="onMouseEnter",J="mouse",(i==="pointerout"||i==="pointerover")&&(Ye=ja,we="onPointerLeave",se="onPointerEnter",J="pointer"),Gt=ye==null?pe:wr(ye),ce=Be==null?pe:wr(Be),pe=new Ye(we,J+"leave",ye,l,be),pe.target=Gt,pe.relatedTarget=ce,we=null,br(be)===he&&(Ye=new Ye(se,J+"enter",Be,l,be),Ye.target=ce,Ye.relatedTarget=Gt,we=Ye),Gt=we,ye&&Be)t:{for(Ye=xx,se=ye,J=Be,ce=0,we=se;we;we=Ye(we))ce++;we=0;for(var Ze=J;Ze;Ze=Ye(Ze))we++;for(;0<ce-we;)se=Ye(se),ce--;for(;0<we-ce;)J=Ye(J),we--;for(;ce--;){if(se===J||J!==null&&se===J.alternate){Ye=se;break t}se=Ye(se),J=Ye(J)}Ye=null}else Ye=null;ye!==null&&AE(Ce,pe,ye,Ye,!1),Be!==null&&Gt!==null&&AE(Ce,Gt,Be,Ye,!0)}}e:{if(pe=he?wr(he):window,ye=pe.nodeName&&pe.nodeName.toLowerCase(),ye==="select"||ye==="input"&&pe.type==="file")var Pt=Ga;else if(sn(pe))if(xh)Pt=hp;else{Pt=cp;var je=Yr}else ye=pe.nodeName,!ye||ye.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?he&&Zs(he.elementType)&&(Pt=Ga):Pt=Vo;if(Pt&&(Pt=Pt(i,he))){Qs(Ce,Pt,l,be);break e}je&&je(i,pe,he),i==="focusout"&&he&&pe.type==="number"&&he.memoizedProps.value!=null&&Hi(pe,"number",pe.value)}switch(je=he?wr(he):window,i){case"focusin":(sn(je)||je.contentEditable==="true")&&(Ss=je,Fl=he,Ya=null);break;case"focusout":Ya=Fl=Ss=null;break;case"mousedown":Bo=!0;break;case"contextmenu":case"mouseup":case"dragend":Bo=!1,Ih(Ce,l,be);break;case"selectionchange":if(jl)break;case"keydown":case"keyup":Ih(Ce,l,be)}var ht;if(S)e:{switch(i){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else ut?Mt(i,l)&&(wt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(wt="onCompositionStart");wt&&(le&&l.locale!=="ko"&&(ut||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&ut&&(ht=di()):(ti=be,Tr="value"in ti?ti.value:ti.textContent,ut=!0)),je=vf(he,wt),0<je.length&&(wt=new Mo(wt,i,null,l,be),Ce.push({event:wt,listeners:je}),ht?wt.data=ht:(ht=fn(l),ht!==null&&(wt.data=ht)))),(ht=z?zt(i,l):en(i,l))&&(wt=vf(he,"onBeforeInput"),0<wt.length&&(je=new Mo("onBeforeInput","beforeinput",null,l,be),Ce.push({event:je,listeners:wt}),je.data=ht)),Sx(Ce,i,he,l,be)}TE(Ce,s)})}function Sc(i,s,l){return{instance:i,listener:s,currentTarget:l}}function vf(i,s){for(var l=s+"Capture",h=[];i!==null;){var m=i,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Zn(i,l),m!=null&&h.unshift(Sc(i,m,y)),m=Zn(i,s),m!=null&&h.push(Sc(i,m,y))),i.tag===3)return h;i=i.return}return[]}function xx(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function AE(i,s,l,h,m){for(var y=s._reactName,A=[];l!==null&&l!==h;){var D=l,Y=D.alternate,he=D.stateNode;if(D=D.tag,Y!==null&&Y===h)break;D!==5&&D!==26&&D!==27||he===null||(Y=he,m?(he=Zn(l,y),he!=null&&A.unshift(Sc(l,he,Y))):m||(he=Zn(l,y),he!=null&&A.push(Sc(l,he,Y)))),l=l.return}A.length!==0&&i.push({event:s,listeners:A})}var Lx=/\r\n?/g,Rx=/\u0000|\uFFFD/g;function xE(i){return(typeof i=="string"?i:""+i).replace(Lx,`
`).replace(Rx,"")}function LE(i,s){return s=xE(s),xE(i)===s}function Zt(i,s,l,h,m,y){switch(l){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||qn(i,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&qn(i,""+h);break;case"className":Rt(i,"class",h);break;case"tabIndex":Rt(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Rt(i,l,h);break;case"style":Lo(i,h,y);break;case"data":if(s!=="object"){Rt(i,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Zi(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(s!=="input"&&Zt(i,s,"name",m.name,m,null),Zt(i,s,"formEncType",m.formEncType,m,null),Zt(i,s,"formMethod",m.formMethod,m,null),Zt(i,s,"formTarget",m.formTarget,m,null)):(Zt(i,s,"encType",m.encType,m,null),Zt(i,s,"method",m.method,m,null),Zt(i,s,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Zi(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=hn);break;case"onScroll":h!=null&&_t("scroll",i);break;case"onScrollEnd":h!=null&&_t("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=Zi(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":_t("beforetoggle",i),_t("toggle",i),lt(i,"popover",h);break;case"xlinkActuate":ei(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ei(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ei(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ei(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ei(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ei(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ei(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ei(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ei(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":lt(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ro.get(l)||l,lt(i,l,h))}}function xm(i,s,l,h,m,y){switch(l){case"style":Lo(i,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof h=="string"?qn(i,h):(typeof h=="number"||typeof h=="bigint")&&qn(i,""+h);break;case"onScroll":h!=null&&_t("scroll",i);break;case"onScrollEnd":h!=null&&_t("scrollend",i);break;case"onClick":h!=null&&(i.onclick=hn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cs.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),s=l.slice(2,m?l.length-7:void 0),y=i[bn]||null,y=y!=null?y[l]:null,typeof y=="function"&&i.removeEventListener(s,y,m),typeof h=="function")){typeof y!="function"&&y!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(s,h,m);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):lt(i,l,h)}}}function ri(i,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",i),_t("load",i);var h=!1,m=!1,y;for(y in l)if(l.hasOwnProperty(y)){var A=l[y];if(A!=null)switch(y){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Zt(i,s,y,A,l,null)}}m&&Zt(i,s,"srcSet",l.srcSet,l,null),h&&Zt(i,s,"src",l.src,l,null);return;case"input":_t("invalid",i);var D=y=A=m=null,Y=null,he=null;for(h in l)if(l.hasOwnProperty(h)){var be=l[h];if(be!=null)switch(h){case"name":m=be;break;case"type":A=be;break;case"checked":Y=be;break;case"defaultChecked":he=be;break;case"value":y=be;break;case"defaultValue":D=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,s));break;default:Zt(i,s,h,be,l,null)}}Sr(i,y,D,Y,he,A,m,!1);return;case"select":_t("invalid",i),h=A=y=null;for(m in l)if(l.hasOwnProperty(m)&&(D=l[m],D!=null))switch(m){case"value":y=D;break;case"defaultValue":A=D;break;case"multiple":h=D;default:Zt(i,s,m,D,l,null)}s=y,l=A,i.multiple=!!h,s!=null?Ke(i,!!h,s,!1):l!=null&&Ke(i,!!h,l,!0);return;case"textarea":_t("invalid",i),y=m=h=null;for(A in l)if(l.hasOwnProperty(A)&&(D=l[A],D!=null))switch(A){case"value":h=D;break;case"defaultValue":m=D;break;case"children":y=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:Zt(i,s,A,D,l,null)}qi(i,h,m,y);return;case"option":for(Y in l)if(l.hasOwnProperty(Y)&&(h=l[Y],h!=null))switch(Y){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Zt(i,s,Y,h,l,null)}return;case"dialog":_t("beforetoggle",i),_t("toggle",i),_t("cancel",i),_t("close",i);break;case"iframe":case"object":_t("load",i);break;case"video":case"audio":for(h=0;h<wc.length;h++)_t(wc[h],i);break;case"image":_t("error",i),_t("load",i);break;case"details":_t("toggle",i);break;case"embed":case"source":case"link":_t("error",i),_t("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in l)if(l.hasOwnProperty(he)&&(h=l[he],h!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Zt(i,s,he,h,l,null)}return;default:if(Zs(s)){for(be in l)l.hasOwnProperty(be)&&(h=l[be],h!==void 0&&xm(i,s,be,h,l,void 0));return}}for(D in l)l.hasOwnProperty(D)&&(h=l[D],h!=null&&Zt(i,s,D,h,l,null))}function Ix(i,s,l,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,A=null,D=null,Y=null,he=null,be=null;for(ye in l){var Ce=l[ye];if(l.hasOwnProperty(ye)&&Ce!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":Y=Ce;default:h.hasOwnProperty(ye)||Zt(i,s,ye,null,h,Ce)}}for(var pe in h){var ye=h[pe];if(Ce=l[pe],h.hasOwnProperty(pe)&&(ye!=null||Ce!=null))switch(pe){case"type":y=ye;break;case"name":m=ye;break;case"checked":he=ye;break;case"defaultChecked":be=ye;break;case"value":A=ye;break;case"defaultValue":D=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,s));break;default:ye!==Ce&&Zt(i,s,pe,ye,h,Ce)}}ds(i,A,D,Y,he,be,y,m);return;case"select":ye=A=D=pe=null;for(y in l)if(Y=l[y],l.hasOwnProperty(y)&&Y!=null)switch(y){case"value":break;case"multiple":ye=Y;default:h.hasOwnProperty(y)||Zt(i,s,y,null,h,Y)}for(m in h)if(y=h[m],Y=l[m],h.hasOwnProperty(m)&&(y!=null||Y!=null))switch(m){case"value":pe=y;break;case"defaultValue":D=y;break;case"multiple":A=y;default:y!==Y&&Zt(i,s,m,y,h,Y)}s=D,l=A,h=ye,pe!=null?Ke(i,!!l,pe,!1):!!h!=!!l&&(s!=null?Ke(i,!!l,s,!0):Ke(i,!!l,l?[]:"",!1));return;case"textarea":ye=pe=null;for(D in l)if(m=l[D],l.hasOwnProperty(D)&&m!=null&&!h.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Zt(i,s,D,null,h,m)}for(A in h)if(m=h[A],y=l[A],h.hasOwnProperty(A)&&(m!=null||y!=null))switch(A){case"value":pe=m;break;case"defaultValue":ye=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==y&&Zt(i,s,A,m,h,y)}Ai(i,pe,ye);return;case"option":for(var Be in l)if(pe=l[Be],l.hasOwnProperty(Be)&&pe!=null&&!h.hasOwnProperty(Be))switch(Be){case"selected":i.selected=!1;break;default:Zt(i,s,Be,null,h,pe)}for(Y in h)if(pe=h[Y],ye=l[Y],h.hasOwnProperty(Y)&&pe!==ye&&(pe!=null||ye!=null))switch(Y){case"selected":i.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:Zt(i,s,Y,pe,h,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ye in l)pe=l[Ye],l.hasOwnProperty(Ye)&&pe!=null&&!h.hasOwnProperty(Ye)&&Zt(i,s,Ye,null,h,pe);for(he in h)if(pe=h[he],ye=l[he],h.hasOwnProperty(he)&&pe!==ye&&(pe!=null||ye!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,s));break;default:Zt(i,s,he,pe,h,ye)}return;default:if(Zs(s)){for(var Gt in l)pe=l[Gt],l.hasOwnProperty(Gt)&&pe!==void 0&&!h.hasOwnProperty(Gt)&&xm(i,s,Gt,void 0,h,pe);for(be in h)pe=h[be],ye=l[be],!h.hasOwnProperty(be)||pe===ye||pe===void 0&&ye===void 0||xm(i,s,be,pe,h,ye);return}}for(var se in l)pe=l[se],l.hasOwnProperty(se)&&pe!=null&&!h.hasOwnProperty(se)&&Zt(i,s,se,null,h,pe);for(Ce in h)pe=h[Ce],ye=l[Ce],!h.hasOwnProperty(Ce)||pe===ye||pe==null&&ye==null||Zt(i,s,Ce,pe,h,ye)}function RE(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Mx(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var m=l[h],y=m.transferSize,A=m.initiatorType,D=m.duration;if(y&&D&&RE(A)){for(A=0,D=m.responseEnd,h+=1;h<l.length;h++){var Y=l[h],he=Y.startTime;if(he>D)break;var be=Y.transferSize,Ce=Y.initiatorType;be&&RE(Ce)&&(Y=Y.responseEnd,A+=be*(Y<D?1:(D-he)/(Y-he)))}if(--h,s+=8*(y+A)/(m.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Lm=null,Rm=null;function yf(i){return i.nodeType===9?i:i.ownerDocument}function IE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ME(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Im(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Mm=null;function kx(){var i=window.event;return i&&i.type==="popstate"?i===Mm?!1:(Mm=i,!0):(Mm=null,!1)}var kE=typeof setTimeout=="function"?setTimeout:void 0,Ox=typeof clearTimeout=="function"?clearTimeout:void 0,OE=typeof Promise=="function"?Promise:void 0,Px=typeof queueMicrotask=="function"?queueMicrotask:typeof OE<"u"?function(i){return OE.resolve(null).then(i).catch(Dx)}:kE;function Dx(i){setTimeout(function(){throw i})}function na(i){return i==="head"}function PE(i,s){var l=s,h=0;do{var m=l.nextSibling;if(i.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(m),pu(s);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")Tc(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,Tc(l);for(var y=l.firstChild;y;){var A=y.nextSibling,D=y.nodeName;y[Ur]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=A}}else l==="body"&&Tc(i.ownerDocument.body);l=m}while(l);pu(s)}function DE(i,s){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function km(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":km(l),Hs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function Nx(i,s,l,h){for(;i.nodeType===1;){var m=l;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Ur])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Ir(i.nextSibling),i===null)break}return null}function Vx(i,s,l){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Ir(i.nextSibling),i===null))return null;return i}function NE(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=Ir(i.nextSibling),i===null))return null;return i}function Om(i){return i.data==="$?"||i.data==="$~"}function Pm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function zx(i,s){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||l.readyState!=="loading")s();else{var h=function(){s(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Ir(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Dm=null;function VE(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(s===0)return Ir(i.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}i=i.nextSibling}return null}function zE(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return i;s--}else l!=="/$"&&l!=="/&"||s++}i=i.previousSibling}return null}function BE(i,s,l){switch(s=yf(l),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Tc(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Hs(i)}var Mr=new Map,UE=new Set;function _f(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var fo=me.d;me.d={f:Bx,r:Ux,D:jx,C:Fx,L:Hx,m:qx,X:Gx,S:Zx,M:Wx};function Bx(){var i=fo.f(),s=cf();return i||s}function Ux(i){var s=jr(i);s!==null&&s.tag===5&&s.type==="form"?i_(s):fo.r(i)}var hu=typeof document>"u"?null:document;function jE(i,s,l){var h=hu;if(h&&typeof s=="string"&&s){var m=At(s);m='link[rel="'+i+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),UE.has(m)||(UE.add(m),i={rel:i,crossOrigin:l,href:s},h.querySelector(m)===null&&(s=h.createElement("link"),ri(s,"link",i),cn(s),h.head.appendChild(s)))}}function jx(i){fo.D(i),jE("dns-prefetch",i,null)}function Fx(i,s){fo.C(i,s),jE("preconnect",i,s)}function Hx(i,s,l){fo.L(i,s,l);var h=hu;if(h&&i&&s){var m='link[rel="preload"][as="'+At(s)+'"]';s==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+At(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+At(l.imageSizes)+'"]')):m+='[href="'+At(i)+'"]';var y=m;switch(s){case"style":y=fu(i);break;case"script":y=du(i)}Mr.has(y)||(i=T({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:i,as:s},l),Mr.set(y,i),h.querySelector(m)!==null||s==="style"&&h.querySelector(Cc(y))||s==="script"&&h.querySelector(Ac(y))||(s=h.createElement("link"),ri(s,"link",i),cn(s),h.head.appendChild(s)))}}function qx(i,s){fo.m(i,s);var l=hu;if(l&&i){var h=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+At(h)+'"][href="'+At(i)+'"]',y=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=du(i)}if(!Mr.has(y)&&(i=T({rel:"modulepreload",href:i},s),Mr.set(y,i),l.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ac(y)))return}h=l.createElement("link"),ri(h,"link",i),cn(h),l.head.appendChild(h)}}}function Zx(i,s,l){fo.S(i,s,l);var h=hu;if(h&&i){var m=lr(h).hoistableStyles,y=fu(i);s=s||"default";var A=m.get(y);if(!A){var D={loading:0,preload:null};if(A=h.querySelector(Cc(y)))D.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":s},l),(l=Mr.get(y))&&Nm(i,l);var Y=A=h.createElement("link");cn(Y),ri(Y,"link",i),Y._p=new Promise(function(he,be){Y.onload=he,Y.onerror=be}),Y.addEventListener("load",function(){D.loading|=1}),Y.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Ef(A,s,h)}A={type:"stylesheet",instance:A,count:1,state:D},m.set(y,A)}}}function Gx(i,s){fo.X(i,s);var l=hu;if(l&&i){var h=lr(l).hoistableScripts,m=du(i),y=h.get(m);y||(y=l.querySelector(Ac(m)),y||(i=T({src:i,async:!0},s),(s=Mr.get(m))&&Vm(i,s),y=l.createElement("script"),cn(y),ri(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function Wx(i,s){fo.M(i,s);var l=hu;if(l&&i){var h=lr(l).hoistableScripts,m=du(i),y=h.get(m);y||(y=l.querySelector(Ac(m)),y||(i=T({src:i,async:!0,type:"module"},s),(s=Mr.get(m))&&Vm(i,s),y=l.createElement("script"),cn(y),ri(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function FE(i,s,l,h){var m=(m=Ae.current)?_f(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=fu(l.href),l=lr(m).hoistableStyles,h=l.get(s),h||(h={type:"style",instance:null,count:0,state:null},l.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=fu(l.href);var y=lr(m).hoistableStyles,A=y.get(i);if(A||(m=m.ownerDocument||m,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,A),(y=m.querySelector(Cc(i)))&&!y._p&&(A.instance=y,A.state.loading=5),Mr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Mr.set(i,l),y||Kx(m,i,l,A.state))),s&&h===null)throw Error(r(528,""));return A}if(s&&h!==null)throw Error(r(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=du(l),l=lr(m).hoistableScripts,h=l.get(s),h||(h={type:"script",instance:null,count:0,state:null},l.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function fu(i){return'href="'+At(i)+'"'}function Cc(i){return'link[rel="stylesheet"]['+i+"]"}function HE(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function Kx(i,s,l,h){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=i.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),ri(s,"link",l),cn(s),i.head.appendChild(s))}function du(i){return'[src="'+At(i)+'"]'}function Ac(i){return"script[async]"+i}function qE(i,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var h=i.querySelector('style[data-href~="'+At(l.href)+'"]');if(h)return s.instance=h,cn(h),h;var m=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),cn(h),ri(h,"style",m),Ef(h,l.precedence,i),s.instance=h;case"stylesheet":m=fu(l.href);var y=i.querySelector(Cc(m));if(y)return s.state.loading|=4,s.instance=y,cn(y),y;h=HE(l),(m=Mr.get(m))&&Nm(h,m),y=(i.ownerDocument||i).createElement("link"),cn(y);var A=y;return A._p=new Promise(function(D,Y){A.onload=D,A.onerror=Y}),ri(y,"link",h),s.state.loading|=4,Ef(y,l.precedence,i),s.instance=y;case"script":return y=du(l.src),(m=i.querySelector(Ac(y)))?(s.instance=m,cn(m),m):(h=l,(m=Mr.get(y))&&(h=T({},l),Vm(h,m)),i=i.ownerDocument||i,m=i.createElement("script"),cn(m),ri(m,"link",h),i.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,Ef(h,l.precedence,i));return s.instance}function Ef(i,s,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,y=m,A=0;A<h.length;A++){var D=h[A];if(D.dataset.precedence===s)y=D;else if(y!==m)break}y?y.parentNode.insertBefore(i,y.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(i,s.firstChild))}function Nm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Vm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var bf=null;function ZE(i,s,l){if(bf===null){var h=new Map,m=bf=new Map;m.set(l,h)}else m=bf,h=m.get(l),h||(h=new Map,m.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),m=0;m<l.length;m++){var y=l[m];if(!(y[Ur]||y[Jt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var A=y.getAttribute(s)||"";A=i+A;var D=h.get(A);D?D.push(y):h.set(A,[y])}}return h}function GE(i,s,l){i=i.ownerDocument||i,i.head.insertBefore(l,s==="title"?i.querySelector("head > title"):null)}function Yx(i,s,l){if(l===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function WE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function $x(i,s,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=fu(h.href),y=s.querySelector(Cc(m));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=wf.bind(i),s.then(i,i)),l.state.loading|=4,l.instance=y,cn(y);return}y=s.ownerDocument||s,h=HE(h),(m=Mr.get(m))&&Nm(h,m),y=y.createElement("link"),cn(y);var A=y;A._p=new Promise(function(D,Y){A.onload=D,A.onerror=Y}),ri(y,"link",h),l.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=wf.bind(i),s.addEventListener("load",l),s.addEventListener("error",l))}}var zm=0;function Qx(i,s){return i.stylesheets&&i.count===0&&Tf(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&Tf(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+s);0<i.imgBytes&&zm===0&&(zm=62500*Mx());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Tf(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>zm?50:800)+s);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(m)}}:null}function wf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Tf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Sf=null;function Tf(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Sf=new Map,s.forEach(Xx,i),Sf=null,wf.call(i))}function Xx(i,s){if(!(s.state.loading&4)){var l=Sf.get(i);if(l)var h=l.get(null);else{l=new Map,Sf.set(i,l);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var A=m[y];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),h=A)}h&&l.set(null,h)}m=s.instance,A=m.getAttribute("data-precedence"),y=l.get(A)||h,y===h&&l.set(null,m),l.set(A,m),this.count++,h=wf.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),y?y.parentNode.insertBefore(m,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),s.state.loading|=4}}var xc={$$typeof:re,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function Jx(i,s,l,h,m,y,A,D,Y){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.hiddenUpdates=Bi(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function KE(i,s,l,h,m,y,A,D,Y,he,be,Ce){return i=new Jx(i,s,l,A,Y,he,be,Ce,D),s=1,y===!0&&(s|=24),y=gi(3,null,null,s),i.current=y,y.stateNode=i,s=vp(),s.refCount++,i.pooledCache=s,s.refCount++,y.memoizedState={element:h,isDehydrated:l,cache:s},bp(y),i}function YE(i){return i?(i=Xs,i):Xs}function $E(i,s,l,h,m,y){m=YE(m),h.context===null?h.context=m:h.pendingContext=m,h=Zo(s),h.payload={element:l},y=y===void 0?null:y,y!==null&&(h.callback=y),l=Go(i,h,s),l!==null&&(er(l,i,s),sc(l,i,s))}function QE(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function Bm(i,s){QE(i,s),(i=i.alternate)&&QE(i,s)}function XE(i){if(i.tag===13||i.tag===31){var s=xr(i,67108864);s!==null&&er(s,i,67108864),Bm(i,67108864)}}function JE(i){if(i.tag===13||i.tag===31){var s=mr();s=fi(s);var l=xr(i,s);l!==null&&er(l,i,s),Bm(i,s)}}var Cf=!0;function eL(i,s,l,h){var m=ne.T;ne.T=null;var y=me.p;try{me.p=2,Um(i,s,l,h)}finally{me.p=y,ne.T=m}}function tL(i,s,l,h){var m=ne.T;ne.T=null;var y=me.p;try{me.p=8,Um(i,s,l,h)}finally{me.p=y,ne.T=m}}function Um(i,s,l,h){if(Cf){var m=jm(h);if(m===null)Am(i,s,h,Af,l),t0(i,h);else if(iL(m,i,s,l,h))h.stopPropagation();else if(t0(i,h),s&4&&-1<nL.indexOf(i)){for(;m!==null;){var y=jr(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var A=Hn(y.pendingLanes);if(A!==0){var D=y;for(D.pendingLanes|=2,D.entangledLanes|=2;A;){var Y=1<<31-Ln(A);D.entanglements[1]|=Y,A&=~Y}Ms(y),(Vt&6)===0&&(lf=Ct()+500,bc(0))}}break;case 31:case 13:D=xr(y,2),D!==null&&er(D,y,2),cf(),Bm(y,2)}if(y=jm(h),y===null&&Am(i,s,h,Af,l),y===m)break;m=y}m!==null&&h.stopPropagation()}else Am(i,s,h,null,l)}}function jm(i){return i=ps(i),Fm(i)}var Af=null;function Fm(i){if(Af=null,i=br(i),i!==null){var s=u(i);if(s===null)i=null;else{var l=s.tag;if(l===13){if(i=f(s),i!==null)return i;i=null}else if(l===31){if(i=g(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Af=i,null}function e0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wt()){case nt:return 2;case dt:return 8;case An:case yr:return 32;case ir:return 268435456;default:return 32}default:return 32}}var Hm=!1,ia=null,ra=null,sa=null,Lc=new Map,Rc=new Map,oa=[],nL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function t0(i,s){switch(i){case"focusin":case"focusout":ia=null;break;case"dragenter":case"dragleave":ra=null;break;case"mouseover":case"mouseout":sa=null;break;case"pointerover":case"pointerout":Lc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rc.delete(s.pointerId)}}function Ic(i,s,l,h,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},s!==null&&(s=jr(s),s!==null&&XE(s)),i):(i.eventSystemFlags|=h,s=i.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),i)}function iL(i,s,l,h,m){switch(s){case"focusin":return ia=Ic(ia,i,s,l,h,m),!0;case"dragenter":return ra=Ic(ra,i,s,l,h,m),!0;case"mouseover":return sa=Ic(sa,i,s,l,h,m),!0;case"pointerover":var y=m.pointerId;return Lc.set(y,Ic(Lc.get(y)||null,i,s,l,h,m)),!0;case"gotpointercapture":return y=m.pointerId,Rc.set(y,Ic(Rc.get(y)||null,i,s,l,h,m)),!0}return!1}function n0(i){var s=br(i.target);if(s!==null){var l=u(s);if(l!==null){if(s=l.tag,s===13){if(s=f(l),s!==null){i.blockedOn=s,Oa(i.priority,function(){JE(l)});return}}else if(s===31){if(s=g(l),s!==null){i.blockedOn=s,Oa(i.priority,function(){JE(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=jm(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);Gs=h,l.target.dispatchEvent(h),Gs=null}else return s=jr(l),s!==null&&XE(s),i.blockedOn=l,!1;s.shift()}return!0}function i0(i,s,l){xf(i)&&l.delete(s)}function rL(){Hm=!1,ia!==null&&xf(ia)&&(ia=null),ra!==null&&xf(ra)&&(ra=null),sa!==null&&xf(sa)&&(sa=null),Lc.forEach(i0),Rc.forEach(i0)}function Lf(i,s){i.blockedOn===s&&(i.blockedOn=null,Hm||(Hm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,rL)))}var Rf=null;function r0(i){Rf!==i&&(Rf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Rf===i&&(Rf=null);for(var s=0;s<i.length;s+=3){var l=i[s],h=i[s+1],m=i[s+2];if(typeof h!="function"){if(Fm(h||l)===null)continue;break}var y=jr(l);y!==null&&(i.splice(s,3),s-=3,jp(y,{pending:!0,data:m,method:l.method,action:h},h,m))}}))}function pu(i){function s(Y){return Lf(Y,i)}ia!==null&&Lf(ia,i),ra!==null&&Lf(ra,i),sa!==null&&Lf(sa,i),Lc.forEach(s),Rc.forEach(s);for(var l=0;l<oa.length;l++){var h=oa[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<oa.length&&(l=oa[0],l.blockedOn===null);)n0(l),l.blockedOn===null&&oa.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var m=l[h],y=l[h+1],A=m[bn]||null;if(typeof y=="function")A||r0(l);else if(A){var D=null;if(y&&y.hasAttribute("formAction")){if(m=y,A=y[bn]||null)D=A.formAction;else if(Fm(m)!==null)continue}else D=A.action;typeof D=="function"?l[h+1]=D:(l.splice(h,3),h-=3),r0(l)}}}function s0(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(A){return m=A})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function qm(i){this._internalRoot=i}If.prototype.render=qm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var l=s.current,h=mr();$E(l,h,i,s,null,null)},If.prototype.unmount=qm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;$E(i.current,2,null,i,null,null),cf(),s[or]=null}};function If(i){this._internalRoot=i}If.prototype.unstable_scheduleHydration=function(i){if(i){var s=Er();i={blockedOn:null,target:i,priority:s};for(var l=0;l<oa.length&&s!==0&&s<oa[l].priority;l++);oa.splice(l,0,i),l===0&&n0(i)}};var o0=e.version;if(o0!=="19.2.0")throw Error(r(527,o0,"19.2.0"));me.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=_(s),i=i!==null?w(i):null,i=i===null?null:i.stateNode,i};var sL={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mf.isDisabled&&Mf.supportsFiber)try{ci=Mf.inject(sL),un=Mf}catch{}}return Mc.createRoot=function(i,s){if(!a(i))throw Error(r(299));var l=!1,h="",m=d_,y=p_,A=m_;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=KE(i,1,!1,null,null,l,h,null,m,y,A,s0),i[or]=s.current,Cm(i),new qm(s)},Mc.hydrateRoot=function(i,s,l){if(!a(i))throw Error(r(299));var h=!1,m="",y=d_,A=p_,D=m_,Y=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(D=l.onRecoverableError),l.formState!==void 0&&(Y=l.formState)),s=KE(i,1,!0,s,l??null,h,m,Y,y,A,D,s0),s.context=YE(null),l=s.current,h=mr(),h=fi(h),m=Zo(h),m.callback=null,Go(l,m,h),l=h,s.current.lanes=l,Ui(s,l),Ms(s),i[or]=s.current,Cm(i),new If(s)},Mc.version="19.2.0",Mc}var p0;function fL(){if(p0)return Gm.exports;p0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Gm.exports=hL(),Gm.exports}var dL=fL();const pL=Nd(dL);var m0="popstate";function mL(n={}){function e(a,u){let{pathname:f="/",search:g="",hash:v=""}=Al(a.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),_g("",{pathname:f,search:g,hash:v},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function t(a,u){let f=a.document.querySelector("base"),g="";if(f&&f.getAttribute("href")){let v=a.location.href,_=v.indexOf("#");g=_===-1?v:v.slice(0,_)}return g+"#"+(typeof u=="string"?u:Jc(u))}function r(a,u){Vr(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return vL(e,t,r,n)}function pn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Vr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gL(){return Math.random().toString(36).substring(2,10)}function g0(n,e){return{usr:n.state,key:n.key,idx:e}}function _g(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Al(e):e,state:t,key:e&&e.key||r||gL()}}function Jc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Al(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function vL(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:u=!1}=r,f=a.history,g="POP",v=null,_=w();_==null&&(_=0,f.replaceState({...f.state,idx:_},""));function w(){return(f.state||{idx:null}).idx}function T(){g="POP";let q=w(),W=q==null?null:q-_;_=q,v&&v({action:g,location:H.location,delta:W})}function I(q,W){g="PUSH";let $=_g(H.location,q,W);t&&t($,q),_=w()+1;let re=g0($,_),ie=H.createHref($);try{f.pushState(re,"",ie)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;a.location.assign(ie)}u&&v&&v({action:g,location:H.location,delta:1})}function V(q,W){g="REPLACE";let $=_g(H.location,q,W);t&&t($,q),_=w();let re=g0($,_),ie=H.createHref($);f.replaceState(re,"",ie),u&&v&&v({action:g,location:H.location,delta:0})}function N(q){return yL(q)}let H={get action(){return g},get location(){return n(a,f)},listen(q){if(v)throw new Error("A history only accepts one active listener");return a.addEventListener(m0,T),v=q,()=>{a.removeEventListener(m0,T),v=null}},createHref(q){return e(a,q)},createURL:N,encodeLocation(q){let W=N(q);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:I,replace:V,go(q){return f.go(q)}};return H}function yL(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),pn(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Jc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function CS(n,e,t="/"){return _L(n,e,t,!1)}function _L(n,e,t,r){let a=typeof e=="string"?Al(e):e,u=vo(a.pathname||"/",t);if(u==null)return null;let f=AS(n);EL(f);let g=null;for(let v=0;g==null&&v<f.length;++v){let _=ML(u);g=RL(f[v],_,r)}return g}function AS(n,e=[],t=[],r="",a=!1){let u=(f,g,v=a,_)=>{let w={relativePath:_===void 0?f.path||"":_,caseSensitive:f.caseSensitive===!0,childrenIndex:g,route:f};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(r)&&v)return;pn(w.relativePath.startsWith(r),`Absolute route path "${w.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(r.length)}let T=go([r,w.relativePath]),I=t.concat(w);f.children&&f.children.length>0&&(pn(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),AS(f.children,e,I,T,v)),!(f.path==null&&!f.index)&&e.push({path:T,score:xL(T,f.index),routesMeta:I})};return n.forEach((f,g)=>{if(f.path===""||!f.path?.includes("?"))u(f,g);else for(let v of xS(f.path))u(f,g,!0,v)}),e}function xS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),u=t.replace(/\?$/,"");if(r.length===0)return a?[u,""]:[u];let f=xS(r.join("/")),g=[];return g.push(...f.map(v=>v===""?u:[u,v].join("/"))),a&&g.push(...f),g.map(v=>n.startsWith("/")&&v===""?"/":v)}function EL(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:LL(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var bL=/^:[\w-]+$/,wL=3,SL=2,TL=1,CL=10,AL=-2,v0=n=>n==="*";function xL(n,e){let t=n.split("/"),r=t.length;return t.some(v0)&&(r+=AL),e&&(r+=SL),t.filter(a=>!v0(a)).reduce((a,u)=>a+(bL.test(u)?wL:u===""?TL:CL),r)}function LL(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function RL(n,e,t=!1){let{routesMeta:r}=n,a={},u="/",f=[];for(let g=0;g<r.length;++g){let v=r[g],_=g===r.length-1,w=u==="/"?e:e.slice(u.length)||"/",T=od({path:v.relativePath,caseSensitive:v.caseSensitive,end:_},w),I=v.route;if(!T&&_&&t&&!r[r.length-1].route.index&&(T=od({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},w)),!T)return null;Object.assign(a,T.params),f.push({params:a,pathname:go([u,T.pathname]),pathnameBase:NL(go([u,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(u=go([u,T.pathnameBase]))}return f}function od(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=IL(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let u=a[0],f=u.replace(/(.)\/+$/,"$1"),g=a.slice(1);return{params:r.reduce((_,{paramName:w,isOptional:T},I)=>{if(w==="*"){let N=g[I]||"";f=u.slice(0,u.length-N.length).replace(/(.)\/+$/,"$1")}const V=g[I];return T&&!V?_[w]=void 0:_[w]=(V||"").replace(/%2F/g,"/"),_},{}),pathname:u,pathnameBase:f,pattern:n}}function IL(n,e=!1,t=!0){Vr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,g,v)=>(r.push({paramName:g,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function ML(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function vo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var kL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OL=n=>kL.test(n);function PL(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?Al(n):n,u;if(t)if(OL(t))u=t;else{if(t.includes("//")){let f=t;t=t.replace(/\/\/+/g,"/"),Vr(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${t}`)}t.startsWith("/")?u=y0(t.substring(1),"/"):u=y0(t,e)}else u=e;return{pathname:u,search:VL(r),hash:zL(a)}}function y0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function $m(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DL(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function LS(n){let e=DL(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function RS(n,e,t,r=!1){let a;typeof n=="string"?a=Al(n):(a={...n},pn(!a.pathname||!a.pathname.includes("?"),$m("?","pathname","search",a)),pn(!a.pathname||!a.pathname.includes("#"),$m("#","pathname","hash",a)),pn(!a.search||!a.search.includes("#"),$m("#","search","hash",a)));let u=n===""||a.pathname==="",f=u?"/":a.pathname,g;if(f==null)g=t;else{let T=e.length-1;if(!r&&f.startsWith("..")){let I=f.split("/");for(;I[0]==="..";)I.shift(),T-=1;a.pathname=I.join("/")}g=T>=0?e[T]:"/"}let v=PL(a,g),_=f&&f!=="/"&&f.endsWith("/"),w=(u||f===".")&&t.endsWith("/");return!v.pathname.endsWith("/")&&(_||w)&&(v.pathname+="/"),v}var go=n=>n.join("/").replace(/\/\/+/g,"/"),NL=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),VL=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,zL=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function BL(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var IS=["POST","PUT","PATCH","DELETE"];new Set(IS);var UL=["GET",...IS];new Set(UL);var Vu=b.createContext(null);Vu.displayName="DataRouter";var Vd=b.createContext(null);Vd.displayName="DataRouterState";b.createContext(!1);var MS=b.createContext({isTransitioning:!1});MS.displayName="ViewTransition";var jL=b.createContext(new Map);jL.displayName="Fetchers";var FL=b.createContext(null);FL.displayName="Await";var Fs=b.createContext(null);Fs.displayName="Navigation";var fh=b.createContext(null);fh.displayName="Location";var So=b.createContext({outlet:null,matches:[],isDataRoute:!1});So.displayName="Route";var iv=b.createContext(null);iv.displayName="RouteError";function HL(n,{relative:e}={}){pn(dh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=b.useContext(Fs),{hash:a,pathname:u,search:f}=mh(n,{relative:e}),g=u;return t!=="/"&&(g=u==="/"?t:go([t,u])),r.createHref({pathname:g,search:f,hash:a})}function dh(){return b.useContext(fh)!=null}function xl(){return pn(dh(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(fh).location}var kS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function OS(n){b.useContext(Fs).static||b.useLayoutEffect(n)}function ph(){let{isDataRoute:n}=b.useContext(So);return n?n1():qL()}function qL(){pn(dh(),"useNavigate() may be used only in the context of a <Router> component.");let n=b.useContext(Vu),{basename:e,navigator:t}=b.useContext(Fs),{matches:r}=b.useContext(So),{pathname:a}=xl(),u=JSON.stringify(LS(r)),f=b.useRef(!1);return OS(()=>{f.current=!0}),b.useCallback((v,_={})=>{if(Vr(f.current,kS),!f.current)return;if(typeof v=="number"){t.go(v);return}let w=RS(v,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:go([e,w.pathname])),(_.replace?t.replace:t.push)(w,_.state,_)},[e,t,u,a,n])}b.createContext(null);function mh(n,{relative:e}={}){let{matches:t}=b.useContext(So),{pathname:r}=xl(),a=JSON.stringify(LS(t));return b.useMemo(()=>RS(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function ZL(n,e){return PS(n,e)}function PS(n,e,t,r,a){pn(dh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=b.useContext(Fs),{matches:f}=b.useContext(So),g=f[f.length-1],v=g?g.params:{},_=g?g.pathname:"/",w=g?g.pathnameBase:"/",T=g&&g.route;{let $=T&&T.path||"";DS(_,!T||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let I=xl(),V;if(e){let $=typeof e=="string"?Al(e):e;pn(w==="/"||$.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${$.pathname}" was given in the \`location\` prop.`),V=$}else V=I;let N=V.pathname||"/",H=N;if(w!=="/"){let $=w.replace(/^\//,"").split("/");H="/"+N.replace(/^\//,"").split("/").slice($.length).join("/")}let q=CS(n,{pathname:H});Vr(T||q!=null,`No routes matched location "${V.pathname}${V.search}${V.hash}" `),Vr(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${V.pathname}${V.search}${V.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let W=$L(q&&q.map($=>Object.assign({},$,{params:Object.assign({},v,$.params),pathname:go([w,u.encodeLocation?u.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?w:go([w,u.encodeLocation?u.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),f,t,r,a);return e&&W?b.createElement(fh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...V},navigationType:"POP"}},W):W}function GL(){let n=t1(),e=BL(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},f=null;return console.error("Error handled by React Router default ErrorBoundary:",n),f=b.createElement(b.Fragment,null,b.createElement("p",null,"üíø Hey developer üëã"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:u},"ErrorBoundary")," or"," ",b.createElement("code",{style:u},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),t?b.createElement("pre",{style:a},t):null,f)}var WL=b.createElement(GL,null),KL=class extends b.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?b.createElement(So.Provider,{value:this.props.routeContext},b.createElement(iv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function YL({routeContext:n,match:e,children:t}){let r=b.useContext(Vu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(So.Provider,{value:n},t)}function $L(n,e=[],t=null,r=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,f=t?.errors;if(f!=null){let w=u.findIndex(T=>T.route.id&&f?.[T.route.id]!==void 0);pn(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,w+1))}let g=!1,v=-1;if(t)for(let w=0;w<u.length;w++){let T=u[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(v=w),T.route.id){let{loaderData:I,errors:V}=t,N=T.route.loader&&!I.hasOwnProperty(T.route.id)&&(!V||V[T.route.id]===void 0);if(T.route.lazy||N){g=!0,v>=0?u=u.slice(0,v+1):u=[u[0]];break}}}let _=t&&r?(w,T)=>{r(w,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:T})}:void 0;return u.reduceRight((w,T,I)=>{let V,N=!1,H=null,q=null;t&&(V=f&&T.route.id?f[T.route.id]:void 0,H=T.route.errorElement||WL,g&&(v<0&&I===0?(DS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,q=null):v===I&&(N=!0,q=T.route.hydrateFallbackElement||null)));let W=e.concat(u.slice(0,I+1)),$=()=>{let re;return V?re=H:N?re=q:T.route.Component?re=b.createElement(T.route.Component,null):T.route.element?re=T.route.element:re=w,b.createElement(YL,{match:T,routeContext:{outlet:w,matches:W,isDataRoute:t!=null},children:re})};return t&&(T.route.ErrorBoundary||T.route.errorElement||I===0)?b.createElement(KL,{location:t.location,revalidation:t.revalidation,component:H,error:V,children:$(),routeContext:{outlet:null,matches:W,isDataRoute:!0},onError:_}):$()},null)}function rv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QL(n){let e=b.useContext(Vu);return pn(e,rv(n)),e}function XL(n){let e=b.useContext(Vd);return pn(e,rv(n)),e}function JL(n){let e=b.useContext(So);return pn(e,rv(n)),e}function sv(n){let e=JL(n),t=e.matches[e.matches.length-1];return pn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function e1(){return sv("useRouteId")}function t1(){let n=b.useContext(iv),e=XL("useRouteError"),t=sv("useRouteError");return n!==void 0?n:e.errors?.[t]}function n1(){let{router:n}=QL("useNavigate"),e=sv("useNavigate"),t=b.useRef(!1);return OS(()=>{t.current=!0}),b.useCallback(async(a,u={})=>{Vr(t.current,kS),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...u}))},[n,e])}var _0={};function DS(n,e,t){!e&&!_0[n]&&(_0[n]=!0,Vr(!1,t))}b.memo(i1);function i1({routes:n,future:e,state:t,unstable_onError:r}){return PS(n,void 0,t,r,e)}function kr(n){pn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function r1({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:u=!1}){pn(!dh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),g=b.useMemo(()=>({basename:f,navigator:a,static:u,future:{}}),[f,a,u]);typeof t=="string"&&(t=Al(t));let{pathname:v="/",search:_="",hash:w="",state:T=null,key:I="default"}=t,V=b.useMemo(()=>{let N=vo(v,f);return N==null?null:{location:{pathname:N,search:_,hash:w,state:T,key:I},navigationType:r}},[f,v,_,w,T,I,r]);return Vr(V!=null,`<Router basename="${f}"> is not able to match the URL "${v}${_}${w}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:b.createElement(Fs.Provider,{value:g},b.createElement(fh.Provider,{children:e,value:V}))}function s1({children:n,location:e}){return ZL(Eg(n),e)}function Eg(n,e=[]){let t=[];return b.Children.forEach(n,(r,a)=>{if(!b.isValidElement(r))return;let u=[...e,a];if(r.type===b.Fragment){t.push.apply(t,Eg(r.props.children,u));return}pn(r.type===kr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let f={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(f.children=Eg(r.props.children,u)),t.push(f)}),t}var Hf="get",qf="application/x-www-form-urlencoded";function zd(n){return n!=null&&typeof n.tagName=="string"}function o1(n){return zd(n)&&n.tagName.toLowerCase()==="button"}function a1(n){return zd(n)&&n.tagName.toLowerCase()==="form"}function l1(n){return zd(n)&&n.tagName.toLowerCase()==="input"}function u1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function c1(n,e){return n.button===0&&(!e||e==="_self")&&!u1(n)}var kf=null;function h1(){if(kf===null)try{new FormData(document.createElement("form"),0),kf=!1}catch{kf=!0}return kf}var f1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qm(n){return n!=null&&!f1.has(n)?(Vr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qf}"`),null):n}function d1(n,e){let t,r,a,u,f;if(a1(n)){let g=n.getAttribute("action");r=g?vo(g,e):null,t=n.getAttribute("method")||Hf,a=Qm(n.getAttribute("enctype"))||qf,u=new FormData(n)}else if(o1(n)||l1(n)&&(n.type==="submit"||n.type==="image")){let g=n.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=n.getAttribute("formaction")||g.getAttribute("action");if(r=v?vo(v,e):null,t=n.getAttribute("formmethod")||g.getAttribute("method")||Hf,a=Qm(n.getAttribute("formenctype"))||Qm(g.getAttribute("enctype"))||qf,u=new FormData(g,n),!h1()){let{name:_,type:w,value:T}=n;if(w==="image"){let I=_?`${_}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else _&&u.append(_,T)}}else{if(zd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Hf,r=null,a=qf,f=n}return u&&a==="text/plain"&&(f=u,u=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ov(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function p1(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&vo(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function m1(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function g1(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function v1(n,e,t){let r=await Promise.all(n.map(async a=>{let u=e.routes[a.route.id];if(u){let f=await m1(u,t);return f.links?f.links():[]}return[]}));return b1(r.flat(1).filter(g1).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function E0(n,e,t,r,a,u){let f=(v,_)=>t[_]?v.route.id!==t[_].route.id:!0,g=(v,_)=>t[_].pathname!==v.pathname||t[_].route.path?.endsWith("*")&&t[_].params["*"]!==v.params["*"];return u==="assets"?e.filter((v,_)=>f(v,_)||g(v,_)):u==="data"?e.filter((v,_)=>{let w=r.routes[v.route.id];if(!w||!w.hasLoader)return!1;if(f(v,_)||g(v,_))return!0;if(v.route.shouldRevalidate){let T=v.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function y1(n,e,{includeHydrateFallback:t}={}){return _1(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let u=[a.module];return a.clientActionModule&&(u=u.concat(a.clientActionModule)),a.clientLoaderModule&&(u=u.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(u=u.concat(a.hydrateFallbackModule)),a.imports&&(u=u.concat(a.imports)),u}).flat(1))}function _1(n){return[...new Set(n)]}function E1(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function b1(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let u=JSON.stringify(E1(a));return t.has(u)||(t.add(u),r.push({key:u,link:a})),r},[])}function NS(){let n=b.useContext(Vu);return ov(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function w1(){let n=b.useContext(Vd);return ov(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var av=b.createContext(void 0);av.displayName="FrameworkContext";function VS(){let n=b.useContext(av);return ov(n,"You must render this element inside a <HydratedRouter> element"),n}function S1(n,e){let t=b.useContext(av),[r,a]=b.useState(!1),[u,f]=b.useState(!1),{onFocus:g,onBlur:v,onMouseEnter:_,onMouseLeave:w,onTouchStart:T}=e,I=b.useRef(null);b.useEffect(()=>{if(n==="render"&&f(!0),n==="viewport"){let H=W=>{W.forEach($=>{f($.isIntersecting)})},q=new IntersectionObserver(H,{threshold:.5});return I.current&&q.observe(I.current),()=>{q.disconnect()}}},[n]),b.useEffect(()=>{if(r){let H=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(H)}}},[r]);let V=()=>{a(!0)},N=()=>{a(!1),f(!1)};return t?n!=="intent"?[u,I,{}]:[u,I,{onFocus:kc(g,V),onBlur:kc(v,N),onMouseEnter:kc(_,V),onMouseLeave:kc(w,N),onTouchStart:kc(T,V)}]:[!1,I,{}]}function kc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function T1({page:n,...e}){let{router:t}=NS(),r=b.useMemo(()=>CS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?b.createElement(A1,{page:n,matches:r,...e}):null}function C1(n){let{manifest:e,routeModules:t}=VS(),[r,a]=b.useState([]);return b.useEffect(()=>{let u=!1;return v1(n,e,t).then(f=>{u||a(f)}),()=>{u=!0}},[n,e,t]),r}function A1({page:n,matches:e,...t}){let r=xl(),{manifest:a,routeModules:u}=VS(),{basename:f}=NS(),{loaderData:g,matches:v}=w1(),_=b.useMemo(()=>E0(n,e,v,a,r,"data"),[n,e,v,a,r]),w=b.useMemo(()=>E0(n,e,v,a,r,"assets"),[n,e,v,a,r]),T=b.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let N=new Set,H=!1;if(e.forEach(W=>{let $=a.routes[W.route.id];!$||!$.hasLoader||(!_.some(re=>re.route.id===W.route.id)&&W.route.id in g&&u[W.route.id]?.shouldRevalidate||$.hasClientLoader?H=!0:N.add(W.route.id))}),N.size===0)return[];let q=p1(n,f,"data");return H&&N.size>0&&q.searchParams.set("_routes",e.filter(W=>N.has(W.route.id)).map(W=>W.route.id).join(",")),[q.pathname+q.search]},[f,g,r,a,_,e,n,u]),I=b.useMemo(()=>y1(w,a),[w,a]),V=C1(w);return b.createElement(b.Fragment,null,T.map(N=>b.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),I.map(N=>b.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),V.map(({key:N,link:H})=>b.createElement("link",{key:N,nonce:t.nonce,...H})))}function x1(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var zS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zS&&(window.__reactRouterVersion="7.9.6")}catch{}function L1({basename:n,children:e,window:t}){let r=b.useRef();r.current==null&&(r.current=mL({window:t,v5Compat:!0}));let a=r.current,[u,f]=b.useState({action:a.action,location:a.location}),g=b.useCallback(v=>{b.startTransition(()=>f(v))},[f]);return b.useLayoutEffect(()=>a.listen(g),[a,g]),b.createElement(r1,{basename:n,children:e,location:u.location,navigationType:u.action,navigator:a})}var BS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,US=b.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:u,replace:f,state:g,target:v,to:_,preventScrollReset:w,viewTransition:T,...I},V){let{basename:N}=b.useContext(Fs),H=typeof _=="string"&&BS.test(_),q,W=!1;if(typeof _=="string"&&H&&(q=_,zS))try{let M=new URL(window.location.href),j=_.startsWith("//")?new URL(M.protocol+_):new URL(_),U=vo(j.pathname,N);j.origin===M.origin&&U!=null?_=U+j.search+j.hash:W=!0}catch{Vr(!1,`<Link to="${_}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=HL(_,{relative:a}),[re,ie,ee]=S1(r,I),X=k1(_,{replace:f,state:g,target:v,preventScrollReset:w,relative:a,viewTransition:T});function O(M){e&&e(M),M.defaultPrevented||X(M)}let P=b.createElement("a",{...I,...ee,href:q||$,onClick:W||u?e:O,ref:x1(V,ie),target:v,"data-discover":!H&&t==="render"?"true":void 0});return re&&!H?b.createElement(b.Fragment,null,P,b.createElement(T1,{page:$})):P});US.displayName="Link";var R1=b.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:u,to:f,viewTransition:g,children:v,..._},w){let T=mh(f,{relative:_.relative}),I=xl(),V=b.useContext(Vd),{navigator:N,basename:H}=b.useContext(Fs),q=V!=null&&V1(T)&&g===!0,W=N.encodeLocation?N.encodeLocation(T).pathname:T.pathname,$=I.pathname,re=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;t||($=$.toLowerCase(),re=re?re.toLowerCase():null,W=W.toLowerCase()),re&&H&&(re=vo(re,H)||re);const ie=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let ee=$===W||!a&&$.startsWith(W)&&$.charAt(ie)==="/",X=re!=null&&(re===W||!a&&re.startsWith(W)&&re.charAt(W.length)==="/"),O={isActive:ee,isPending:X,isTransitioning:q},P=ee?e:void 0,M;typeof r=="function"?M=r(O):M=[r,ee?"active":null,X?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(O):u;return b.createElement(US,{..._,"aria-current":P,className:M,ref:w,style:j,to:f,viewTransition:g},typeof v=="function"?v(O):v)});R1.displayName="NavLink";var I1=b.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:u,method:f=Hf,action:g,onSubmit:v,relative:_,preventScrollReset:w,viewTransition:T,...I},V)=>{let N=D1(),H=N1(g,{relative:_}),q=f.toLowerCase()==="get"?"get":"post",W=typeof g=="string"&&BS.test(g),$=re=>{if(v&&v(re),re.defaultPrevented)return;re.preventDefault();let ie=re.nativeEvent.submitter,ee=ie?.getAttribute("formmethod")||f;N(ie||re.currentTarget,{fetcherKey:e,method:ee,navigate:t,replace:a,state:u,relative:_,preventScrollReset:w,viewTransition:T})};return b.createElement("form",{ref:V,method:q,action:H,onSubmit:r?v:$,...I,"data-discover":!W&&n==="render"?"true":void 0})});I1.displayName="Form";function M1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jS(n){let e=b.useContext(Vu);return pn(e,M1(n)),e}function k1(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:u,viewTransition:f}={}){let g=ph(),v=xl(),_=mh(n,{relative:u});return b.useCallback(w=>{if(c1(w,e)){w.preventDefault();let T=t!==void 0?t:Jc(v)===Jc(_);g(n,{replace:T,state:r,preventScrollReset:a,relative:u,viewTransition:f})}},[v,g,_,t,r,e,n,a,u,f])}var O1=0,P1=()=>`__${String(++O1)}__`;function D1(){let{router:n}=jS("useSubmit"),{basename:e}=b.useContext(Fs),t=e1();return b.useCallback(async(r,a={})=>{let{action:u,method:f,encType:g,formData:v,body:_}=d1(r,e);if(a.navigate===!1){let w=a.fetcherKey||P1();await n.fetch(w,t,a.action||u,{preventScrollReset:a.preventScrollReset,formData:v,body:_,formMethod:a.method||f,formEncType:a.encType||g,flushSync:a.flushSync})}else await n.navigate(a.action||u,{preventScrollReset:a.preventScrollReset,formData:v,body:_,formMethod:a.method||f,formEncType:a.encType||g,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function N1(n,{relative:e}={}){let{basename:t}=b.useContext(Fs),r=b.useContext(So);pn(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),u={...mh(n||".",{relative:e})},f=xl();if(n==null){u.search=f.search;let g=new URLSearchParams(u.search),v=g.getAll("index");if(v.some(w=>w==="")){g.delete("index"),v.filter(T=>T).forEach(T=>g.append("index",T));let w=g.toString();u.search=w?`?${w}`:""}}return(!n||n===".")&&a.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:go([t,u.pathname])),Jc(u)}function V1(n,{relative:e}={}){let t=b.useContext(MS);pn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=jS("useViewTransitionState"),a=mh(n,{relative:e});if(!t.isTransitioning)return!1;let u=vo(t.currentLocation.pathname,r)||t.currentLocation.pathname,f=vo(t.nextLocation.pathname,r)||t.nextLocation.pathname;return od(a.pathname,f)!=null||od(a.pathname,u)!=null}var Ll=TS();const z1=Nd(Ll);function b0(){return null}const B1=()=>{};var w0={};const FS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},U1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const u=n[t++];e[r++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=n[t++],f=n[t++],g=n[t++],v=((a&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(v>>10)),e[r++]=String.fromCharCode(56320+(v&1023))}else{const u=n[t++],f=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(u&63)<<6|f&63)}}return e.join("")},HS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const u=n[a],f=a+1<n.length,g=f?n[a+1]:0,v=a+2<n.length,_=v?n[a+2]:0,w=u>>2,T=(u&3)<<4|g>>4;let I=(g&15)<<2|_>>6,V=_&63;v||(V=64,f||(I=64)),r.push(t[w],t[T],t[I],t[V])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(FS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):U1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const u=t[n.charAt(a++)],g=a<n.length?t[n.charAt(a)]:0;++a;const _=a<n.length?t[n.charAt(a)]:64;++a;const T=a<n.length?t[n.charAt(a)]:64;if(++a,u==null||g==null||_==null||T==null)throw new j1;const I=u<<2|g>>4;if(r.push(I),_!==64){const V=g<<4&240|_>>2;if(r.push(V),T!==64){const N=_<<6&192|T;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class j1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F1=function(n){const e=FS(n);return HS.encodeByteArray(e,!0)},ad=function(n){return F1(n).replace(/\./g,"")},qS=function(n){try{return HS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function H1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const q1=()=>H1().__FIREBASE_DEFAULTS__,Z1=()=>{if(typeof process>"u"||typeof w0>"u")return;const n=w0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},G1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&qS(n[1]);return e&&JSON.parse(e)},Bd=()=>{try{return B1()||q1()||Z1()||G1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ZS=n=>{var e,t;return(t=(e=Bd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},W1=n=>{const e=ZS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},GS=()=>{var n;return(n=Bd())===null||n===void 0?void 0:n.config},WS=n=>{var e;return(e=Bd())===null||e===void 0?void 0:e[`_${n}`]};class K1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function zu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function KS(n){return(await fetch(n,{credentials:"include"})).ok}function Y1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ad(JSON.stringify(t)),ad(JSON.stringify(f)),""].join(".")}const Zc={};function $1(){const n={prod:[],emulator:[]};for(const e of Object.keys(Zc))Zc[e]?n.emulator.push(e):n.prod.push(e);return n}function Q1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let S0=!1;function YS(n,e){if(typeof window>"u"||typeof document>"u"||!zu(window.location.host)||Zc[n]===e||Zc[n]||S0)return;Zc[n]=e;function t(I){return`__firebase__banner__${I}`}const r="__firebase__banner",u=$1().prod.length>0;function f(){const I=document.getElementById(r);I&&I.remove()}function g(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function v(I,V){I.setAttribute("width","24"),I.setAttribute("id",V),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function _(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{S0=!0,f()},I}function w(I,V){I.setAttribute("id",V),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function T(){const I=Q1(r),V=t("text"),N=document.getElementById(V)||document.createElement("span"),H=t("learnmore"),q=document.getElementById(H)||document.createElement("a"),W=t("preprendIcon"),$=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const re=I.element;g(re),w(q,H);const ie=_();v($,W),re.append($,N,q,ie),document.body.appendChild(re)}u?(N.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function bi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function X1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bi())}function J1(){var n;const e=(n=Bd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iR(){const n=bi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function rR(){return!J1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sR(){try{return typeof indexedDB=="object"}catch{return!1}}function oR(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var u;e(((u=a.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}const aR="FirebaseError";class To extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=aR,Object.setPrototypeOf(this,To.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gh.prototype.create)}}class gh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,u=this.errors[e],f=u?lR(u,r):"Error",g=`${this.serviceName}: ${f} (${a}).`;return new To(a,g,r)}}function lR(n,e){return n.replace(uR,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const uR=/\{\$([^}]+)}/g;function cR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function El(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const u=n[a],f=e[a];if(T0(u)&&T0(f)){if(!El(u,f))return!1}else if(u!==f)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function T0(n){return n!==null&&typeof n=="object"}function vh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hR(n,e){const t=new fR(n,e);return t.subscribe.bind(t)}class fR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");dR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Xm),a.error===void 0&&(a.error=Xm),a.complete===void 0&&(a.complete=Xm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Xm(){}function ai(n){return n&&n._delegate?n._delegate:n}class bl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const pl="[DEFAULT]";class pR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new K1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),a=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gR(e))try{this.getOrInitializeService({instanceIdentifier:pl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:a});r.resolve(u)}catch{}}}}clearInstance(e=pl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pl){return this.instances.has(e)}getOptions(e=pl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);r===g&&f.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),u=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;u.add(e),this.onInitCallbacks.set(a,u);const f=this.instances.get(a);return f&&e(f,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pl){return this.component?this.component.multipleInstances?e:pl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mR(n){return n===pl?void 0:n}function gR(n){return n.instantiationMode==="EAGER"}class vR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var St;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(St||(St={}));const yR={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},_R=St.INFO,ER={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},bR=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=ER[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lv{constructor(e){this.name=e,this._logLevel=_R,this._logHandler=bR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const wR=(n,e)=>e.some(t=>n instanceof t);let C0,A0;function SR(){return C0||(C0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TR(){return A0||(A0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $S=new WeakMap,bg=new WeakMap,QS=new WeakMap,Jm=new WeakMap,uv=new WeakMap;function CR(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",u),n.removeEventListener("error",f)},u=()=>{t(va(n.result)),a()},f=()=>{r(n.error),a()};n.addEventListener("success",u),n.addEventListener("error",f)});return e.then(t=>{t instanceof IDBCursor&&$S.set(t,n)}).catch(()=>{}),uv.set(e,n),e}function AR(n){if(bg.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",f),n.removeEventListener("abort",f)},u=()=>{t(),a()},f=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",u),n.addEventListener("error",f),n.addEventListener("abort",f)});bg.set(n,e)}let wg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||QS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return va(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xR(n){wg=n(wg)}function LR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(eg(this),e,...t);return QS.set(r,e.sort?e.sort():[e]),va(r)}:TR().includes(n)?function(...e){return n.apply(eg(this),e),va($S.get(this))}:function(...e){return va(n.apply(eg(this),e))}}function RR(n){return typeof n=="function"?LR(n):(n instanceof IDBTransaction&&AR(n),wR(n,SR())?new Proxy(n,wg):n)}function va(n){if(n instanceof IDBRequest)return CR(n);if(Jm.has(n))return Jm.get(n);const e=RR(n);return e!==n&&(Jm.set(n,e),uv.set(e,n)),e}const eg=n=>uv.get(n);function IR(n,e,{blocked:t,upgrade:r,blocking:a,terminated:u}={}){const f=indexedDB.open(n,e),g=va(f);return r&&f.addEventListener("upgradeneeded",v=>{r(va(f.result),v.oldVersion,v.newVersion,va(f.transaction),v)}),t&&f.addEventListener("blocked",v=>t(v.oldVersion,v.newVersion,v)),g.then(v=>{u&&v.addEventListener("close",()=>u()),a&&v.addEventListener("versionchange",_=>a(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const MR=["get","getKey","getAll","getAllKeys","count"],kR=["put","add","delete","clear"],tg=new Map;function x0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tg.get(e))return tg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=kR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||MR.includes(t)))return;const u=async function(f,...g){const v=this.transaction(f,a?"readwrite":"readonly");let _=v.store;return r&&(_=_.index(g.shift())),(await Promise.all([_[t](...g),a&&v.done]))[0]};return tg.set(e,u),u}xR(n=>({...n,get:(e,t,r)=>x0(e,t)||n.get(e,t,r),has:(e,t)=>!!x0(e,t)||n.has(e,t)}));class OR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function PR(n){const e=n.getComponent();return e?.type==="VERSION"}const Sg="@firebase/app",L0="0.13.2";const yo=new lv("@firebase/app"),DR="@firebase/app-compat",NR="@firebase/analytics-compat",VR="@firebase/analytics",zR="@firebase/app-check-compat",BR="@firebase/app-check",UR="@firebase/auth",jR="@firebase/auth-compat",FR="@firebase/database",HR="@firebase/data-connect",qR="@firebase/database-compat",ZR="@firebase/functions",GR="@firebase/functions-compat",WR="@firebase/installations",KR="@firebase/installations-compat",YR="@firebase/messaging",$R="@firebase/messaging-compat",QR="@firebase/performance",XR="@firebase/performance-compat",JR="@firebase/remote-config",eI="@firebase/remote-config-compat",tI="@firebase/storage",nI="@firebase/storage-compat",iI="@firebase/firestore",rI="@firebase/ai",sI="@firebase/firestore-compat",oI="firebase",aI="11.10.0";const Tg="[DEFAULT]",lI={[Sg]:"fire-core",[DR]:"fire-core-compat",[VR]:"fire-analytics",[NR]:"fire-analytics-compat",[BR]:"fire-app-check",[zR]:"fire-app-check-compat",[UR]:"fire-auth",[jR]:"fire-auth-compat",[FR]:"fire-rtdb",[HR]:"fire-data-connect",[qR]:"fire-rtdb-compat",[ZR]:"fire-fn",[GR]:"fire-fn-compat",[WR]:"fire-iid",[KR]:"fire-iid-compat",[YR]:"fire-fcm",[$R]:"fire-fcm-compat",[QR]:"fire-perf",[XR]:"fire-perf-compat",[JR]:"fire-rc",[eI]:"fire-rc-compat",[tI]:"fire-gcs",[nI]:"fire-gcs-compat",[iI]:"fire-fst",[sI]:"fire-fst-compat",[rI]:"fire-vertex","fire-js":"fire-js",[oI]:"fire-js-all"};const ld=new Map,uI=new Map,Cg=new Map;function R0(n,e){try{n.container.addComponent(e)}catch(t){yo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Iu(n){const e=n.name;if(Cg.has(e))return yo.debug(`There were multiple attempts to register component ${e}.`),!1;Cg.set(e,n);for(const t of ld.values())R0(t,n);for(const t of uI.values())R0(t,n);return!0}function cv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Os(n){return n==null?!1:n.settings!==void 0}const cI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ya=new gh("app","Firebase",cI);class hI{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ya.create("app-deleted",{appName:this._name})}}const Bu=aI;function XS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Tg,automaticDataCollectionEnabled:!0},e),a=r.name;if(typeof a!="string"||!a)throw ya.create("bad-app-name",{appName:String(a)});if(t||(t=GS()),!t)throw ya.create("no-options");const u=ld.get(a);if(u){if(El(t,u.options)&&El(r,u.config))return u;throw ya.create("duplicate-app",{appName:a})}const f=new vR(a);for(const v of Cg.values())f.addComponent(v);const g=new hI(t,r,f);return ld.set(a,g),g}function JS(n=Tg){const e=ld.get(n);if(!e&&n===Tg&&GS())return XS();if(!e)throw ya.create("no-app",{appName:n});return e}function _a(n,e,t){var r;let a=(r=lI[n])!==null&&r!==void 0?r:n;t&&(a+=`-${t}`);const u=a.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const g=[`Unable to register library "${a}" with version "${e}":`];u&&g.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&f&&g.push("and"),f&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yo.warn(g.join(" "));return}Iu(new bl(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const fI="firebase-heartbeat-database",dI=1,eh="firebase-heartbeat-store";let ng=null;function eT(){return ng||(ng=IR(fI,dI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(eh)}catch(t){console.warn(t)}}}}).catch(n=>{throw ya.create("idb-open",{originalErrorMessage:n.message})})),ng}async function pI(n){try{const t=(await eT()).transaction(eh),r=await t.objectStore(eh).get(tT(n));return await t.done,r}catch(e){if(e instanceof To)yo.warn(e.message);else{const t=ya.create("idb-get",{originalErrorMessage:e?.message});yo.warn(t.message)}}}async function I0(n,e){try{const r=(await eT()).transaction(eh,"readwrite");await r.objectStore(eh).put(e,tT(n)),await r.done}catch(t){if(t instanceof To)yo.warn(t.message);else{const r=ya.create("idb-set",{originalErrorMessage:t?.message});yo.warn(r.message)}}}function tT(n){return`${n.name}!${n.options.appId}`}const mI=1024,gI=30;class vI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _I(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=M0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:a}),this._heartbeatsCache.heartbeats.length>gI){const f=EI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=M0(),{heartbeatsToSend:r,unsentEntries:a}=yI(this._heartbeatsCache.heartbeats),u=ad(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return yo.warn(t),""}}}function M0(){return new Date().toISOString().substring(0,10)}function yI(n,e=mI){const t=[];let r=n.slice();for(const a of n){const u=t.find(f=>f.agent===a.agent);if(u){if(u.dates.push(a.date),k0(t)>e){u.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),k0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class _I{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sR()?oR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return I0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return I0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function k0(n){return ad(JSON.stringify({version:2,heartbeats:n})).length}function EI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function bI(n){Iu(new bl("platform-logger",e=>new OR(e),"PRIVATE")),Iu(new bl("heartbeat",e=>new vI(e),"PRIVATE")),_a(Sg,L0,n),_a(Sg,L0,"esm2017"),_a("fire-js","")}bI("");var wI="firebase",SI="11.10.0";_a(wI,SI,"app");function hv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}function nT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TI=nT,iT=new gh("auth","Firebase",nT());const ud=new lv("@firebase/auth");function CI(n,...e){ud.logLevel<=St.WARN&&ud.warn(`Auth (${Bu}): ${n}`,...e)}function Zf(n,...e){ud.logLevel<=St.ERROR&&ud.error(`Auth (${Bu}): ${n}`,...e)}function _o(n,...e){throw fv(n,...e)}function Ps(n,...e){return fv(n,...e)}function rT(n,e,t){const r=Object.assign(Object.assign({},TI()),{[e]:t});return new gh("auth","Firebase",r).create(e,{appName:n.name})}function vl(n){return rT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return iT.create(n,...e)}function tt(n,e,...t){if(!n)throw fv(e,...t)}function po(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Zf(e),new Error(e)}function Eo(n,e){n||po(e)}function Ag(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function AI(){return O0()==="http:"||O0()==="https:"}function O0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function xI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AI()||tR()||"connection"in navigator)?navigator.onLine:!0}function LI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class yh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Eo(t>e,"Short delay should be less than long delay!"),this.isMobile=X1()||nR()}get(){return xI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dv(n,e){Eo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class sT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;po("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;po("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;po("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const RI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const II=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],MI=new yh(3e4,6e4);function pv(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Uu(n,e,t,r,a={}){return oT(n,a,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const g=vh(Object.assign({key:n.config.apiKey},f)).slice(1),v=await n._getAdditionalHeaders();v["Content-Type"]="application/json",n.languageCode&&(v["X-Firebase-Locale"]=n.languageCode);const _=Object.assign({method:e,headers:v},u);return eR()||(_.referrerPolicy="no-referrer"),n.emulatorConfig&&zu(n.emulatorConfig.host)&&(_.credentials="include"),sT.fetch()(await aT(n,n.config.apiHost,t,g),_)})}async function oT(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},RI),e);try{const a=new OI(n),u=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Of(n,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[v,_]=g.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Of(n,"credential-already-in-use",f);if(v==="EMAIL_EXISTS")throw Of(n,"email-already-in-use",f);if(v==="USER_DISABLED")throw Of(n,"user-disabled",f);const w=r[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw rT(n,w,_);_o(n,w)}}catch(a){if(a instanceof To)throw a;_o(n,"network-request-failed",{message:String(a)})}}async function kI(n,e,t,r,a={}){const u=await Uu(n,e,t,r,a);return"mfaPendingCredential"in u&&_o(n,"multi-factor-auth-required",{_serverResponse:u}),u}async function aT(n,e,t,r){const a=`${e}${t}?${r}`,u=n,f=u.config.emulator?dv(n.config,a):`${n.config.apiScheme}://${a}`;return II.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class OI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ps(this.auth,"network-request-failed")),MI.get())})}}function Of(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Ps(n,e,r);return a.customData._tokenResponse=t,a}async function PI(n,e){return Uu(n,"POST","/v1/accounts:delete",e)}async function cd(n,e){return Uu(n,"POST","/v1/accounts:lookup",e)}function Gc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DI(n,e=!1){const t=ai(n),r=await t.getIdToken(e),a=mv(r);tt(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const u=typeof a.firebase=="object"?a.firebase:void 0,f=u?.sign_in_provider;return{claims:a,token:r,authTime:Gc(ig(a.auth_time)),issuedAtTime:Gc(ig(a.iat)),expirationTime:Gc(ig(a.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function ig(n){return Number(n)*1e3}function mv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Zf("JWT malformed, contained fewer than 3 sections"),null;try{const a=qS(t);return a?JSON.parse(a):(Zf("Failed to decode base64 JWT payload"),null)}catch(a){return Zf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function P0(n){const e=mv(n);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function th(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof To&&NI(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function NI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class VI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class xg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gc(this.lastLoginAt),this.creationTime=Gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hd(n){var e;const t=n.auth,r=await n.getIdToken(),a=await th(n,cd(t,{idToken:r}));tt(a?.users.length,t,"internal-error");const u=a.users[0];n._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?lT(u.providerUserInfo):[],g=BI(n.providerData,f),v=n.isAnonymous,_=!(n.email&&u.passwordHash)&&!g?.length,w=v?_:!1,T={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:g,metadata:new xg(u.createdAt,u.lastLoginAt),isAnonymous:w};Object.assign(n,T)}async function zI(n){const e=ai(n);await hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BI(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function lT(n){return n.map(e=>{var{providerId:t}=e,r=hv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function UI(n,e){const t=await oT(n,{},async()=>{const r=vh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:u}=n.config,f=await aT(n,a,"/v1/token",`key=${u}`),g=await n._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:g,body:r};return n.emulatorConfig&&zu(n.emulatorConfig.host)&&(v.credentials="include"),sT.fetch()(f,v)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function jI(n,e){return Uu(n,"POST","/v2/accounts:revokeToken",pv(n,e))}class Su{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):P0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const t=P0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:u}=await UI(e,t);this.updateTokensAndExpiration(r,a,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:u}=t,f=new Su;return r&&(tt(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),a&&(tt(typeof a=="string","internal-error",{appName:e}),f.accessToken=a),u&&(tt(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Su,this.toJSON())}_performRefresh(){return po("not implemented")}}function la(n,e){tt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class is{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,u=hv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new xg(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await th(this,this.stsTokenManager.getToken(this.auth,e));return tt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return DI(this,e)}reload(){return zI(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await hd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Os(this.auth.app))return Promise.reject(vl(this.auth));const e=await this.getIdToken();return await th(this,PI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,u,f,g,v,_,w;const T=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(a=t.email)!==null&&a!==void 0?a:void 0,V=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,N=(f=t.photoURL)!==null&&f!==void 0?f:void 0,H=(g=t.tenantId)!==null&&g!==void 0?g:void 0,q=(v=t._redirectEventId)!==null&&v!==void 0?v:void 0,W=(_=t.createdAt)!==null&&_!==void 0?_:void 0,$=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:re,emailVerified:ie,isAnonymous:ee,providerData:X,stsTokenManager:O}=t;tt(re&&O,e,"internal-error");const P=Su.fromJSON(this.name,O);tt(typeof re=="string",e,"internal-error"),la(T,e.name),la(I,e.name),tt(typeof ie=="boolean",e,"internal-error"),tt(typeof ee=="boolean",e,"internal-error"),la(V,e.name),la(N,e.name),la(H,e.name),la(q,e.name),la(W,e.name),la($,e.name);const M=new is({uid:re,auth:e,email:I,emailVerified:ie,displayName:T,isAnonymous:ee,photoURL:N,phoneNumber:V,tenantId:H,stsTokenManager:P,createdAt:W,lastLoginAt:$});return X&&Array.isArray(X)&&(M.providerData=X.map(j=>Object.assign({},j))),q&&(M._redirectEventId=q),M}static async _fromIdTokenResponse(e,t,r=!1){const a=new Su;a.updateFromServerResponse(t);const u=new is({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await hd(u),u}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];tt(a.localId!==void 0,"internal-error");const u=a.providerUserInfo!==void 0?lT(a.providerUserInfo):[],f=!(a.email&&a.passwordHash)&&!u?.length,g=new Su;g.updateFromIdToken(r);const v=new is({uid:a.localId,auth:e,stsTokenManager:g,isAnonymous:f}),_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new xg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!u?.length};return Object.assign(v,_),v}}const D0=new Map;function mo(n){Eo(n instanceof Function,"Expected a class definition");let e=D0.get(n);return e?(Eo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,D0.set(n,e),e)}class uT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uT.type="NONE";const N0=uT;function Gf(n,e,t){return`firebase:${n}:${e}:${t}`}class Tu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:u}=this.auth;this.fullUserKey=Gf(this.userKey,a.apiKey,u),this.fullPersistenceKey=Gf("persistence",a.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cd(this.auth,{idToken:e}).catch(()=>{});return t?is._fromGetAccountInfoResponse(this.auth,t,e):null}return is._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Tu(mo(N0),e,r);const a=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=a[0]||mo(N0);const f=Gf(r,e.config.apiKey,e.name);let g=null;for(const _ of t)try{const w=await _._get(f);if(w){let T;if(typeof w=="string"){const I=await cd(e,{idToken:w}).catch(()=>{});if(!I)break;T=await is._fromGetAccountInfoResponse(e,I,w)}else T=is._fromJSON(e,w);_!==u&&(g=T),u=_;break}}catch{}const v=a.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!v.length?new Tu(u,e,r):(u=v[0],g&&await u._set(f,g.toJSON()),await Promise.all(t.map(async _=>{if(_!==u)try{await _._remove(f)}catch{}})),new Tu(u,e,r))}}function V0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mT(e))return"Blackberry";if(gT(e))return"Webos";if(hT(e))return"Safari";if((e.includes("chrome/")||fT(e))&&!e.includes("edge/"))return"Chrome";if(pT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function cT(n=bi()){return/firefox\//i.test(n)}function hT(n=bi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fT(n=bi()){return/crios\//i.test(n)}function dT(n=bi()){return/iemobile/i.test(n)}function pT(n=bi()){return/android/i.test(n)}function mT(n=bi()){return/blackberry/i.test(n)}function gT(n=bi()){return/webos/i.test(n)}function gv(n=bi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function FI(n=bi()){var e;return gv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HI(){return iR()&&document.documentMode===10}function vT(n=bi()){return gv(n)||pT(n)||gT(n)||mT(n)||/windows phone/i.test(n)||dT(n)}function yT(n,e=[]){let t;switch(n){case"Browser":t=V0(bi());break;case"Worker":t=`${V0(bi())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bu}/${r}`}class qI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((f,g)=>{try{const v=e(u);f(v)}catch(v){g(v)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function ZI(n,e={}){return Uu(n,"GET","/v2/passwordPolicy",pv(n,e))}const GI=6;class WI{constructor(e){var t,r,a,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=f.minPasswordLength)!==null&&t!==void 0?t:GI,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,u,f,g;const v={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,v),this.validatePasswordCharacterOptions(e,v),v.isValid&&(v.isValid=(t=v.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),v.isValid&&(v.isValid=(r=v.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),v.isValid&&(v.isValid=(a=v.containsLowercaseLetter)!==null&&a!==void 0?a:!0),v.isValid&&(v.isValid=(u=v.containsUppercaseLetter)!==null&&u!==void 0?u:!0),v.isValid&&(v.isValid=(f=v.containsNumericCharacter)!==null&&f!==void 0?f:!0),v.isValid&&(v.isValid=(g=v.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),v}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class KI{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new z0(this),this.idTokenSubscription=new z0(this),this.beforeStateQueue=new qI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=mo(t)),this._initializationPromise=this.queue(async()=>{var r,a,u;if(!this._deleted&&(this.persistenceManager=await Tu.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cd(this,{idToken:e}),r=await is._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Os(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,g=a?._redirectEventId,v=await this.tryRedirectSignIn(e);(!f||f===g)&&v?.user&&(a=v.user,u=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(a)}catch(f){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Os(this.app))return Promise.reject(vl(this));const t=e?ai(e):null;return t&&tt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Os(this.app)?Promise.reject(vl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Os(this.app)?Promise.reject(vl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZI(this),t=new WI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await jI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&mo(e)||this._popupRedirectResolver;tt(t,this,"argument-error"),this.redirectPersistenceManager=await Tu.create(this,[mo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof t=="function"){const v=e.addObserver(t,r,a);return()=>{f=!0,v()}}else{const v=e.addObserver(t);return()=>{f=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&CI(`Error while retrieving App Check token: ${t.error}`),t?.token}}function vv(n){return ai(n)}class z0{constructor(e){this.auth=e,this.observer=null,this.addObserver=hR(t=>this.observer=t)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let yv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YI(n){yv=n}function $I(n){return yv.loadJS(n)}function QI(){return yv.gapiScript}function XI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function JI(n,e){const t=cv(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),u=t.getOptions();if(El(u,e??{}))return a;_o(a,"already-initialized")}return t.initialize({options:e})}function eM(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(mo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function tM(n,e,t){const r=vv(n);tt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,u=_T(e),{host:f,port:g}=nM(e),v=g===null?"":`:${g}`,_={url:`${u}//${f}${v}/`},w=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){tt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),tt(El(_,r.config.emulator)&&El(w,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=w,r.settings.appVerificationDisabledForTesting=!0,zu(f)?(KS(`${u}//${f}${v}`),YS("Auth",!0)):iM()}function _T(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function nM(n){const e=_T(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const u=a[1];return{host:u,port:B0(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:B0(f)}}}function B0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function iM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class ET{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return po("not implemented")}_getIdTokenResponse(e){return po("not implemented")}_linkToIdToken(e,t){return po("not implemented")}_getReauthenticationResolver(e){return po("not implemented")}}async function Cu(n,e){return kI(n,"POST","/v1/accounts:signInWithIdp",pv(n,e))}const rM="http://localhost";class wl extends ET{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_o("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,u=hv(t,["providerId","signInMethod"]);if(!r||!a)return null;const f=new wl(r,a);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const t=this.buildRequest();return Cu(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Cu(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Cu(e,t)}buildRequest(){const e={requestUri:rM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vh(t)}return e}}class bT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _h extends bT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ha extends _h{constructor(){super("facebook.com")}static credential(e){return wl._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.FACEBOOK_SIGN_IN_METHOD="facebook.com";ha.PROVIDER_ID="facebook.com";class fa extends _h{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wl._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return fa.credential(t,r)}catch{return null}}}fa.GOOGLE_SIGN_IN_METHOD="google.com";fa.PROVIDER_ID="google.com";class da extends _h{constructor(){super("github.com")}static credential(e){return wl._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return da.credential(e.oauthAccessToken)}catch{return null}}}da.GITHUB_SIGN_IN_METHOD="github.com";da.PROVIDER_ID="github.com";class pa extends _h{constructor(){super("twitter.com")}static credential(e,t){return wl._fromParams({providerId:pa.PROVIDER_ID,signInMethod:pa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pa.credentialFromTaggedObject(e)}static credentialFromError(e){return pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return pa.credential(t,r)}catch{return null}}}pa.TWITTER_SIGN_IN_METHOD="twitter.com";pa.PROVIDER_ID="twitter.com";class Mu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const u=await is._fromIdTokenResponse(e,r,a),f=U0(r);return new Mu({user:u,providerId:f,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=U0(r);return new Mu({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function U0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class fd extends To{constructor(e,t,r,a){var u;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,fd.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new fd(e,t,r,a)}}function wT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?fd._fromErrorAndOperation(n,u,e,r):u})}async function sM(n,e,t=!1){const r=await th(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Mu._forOperation(n,"link",r)}async function oM(n,e,t=!1){const{auth:r}=n;if(Os(r.app))return Promise.reject(vl(r));const a="reauthenticate";try{const u=await th(n,wT(r,a,e,n),t);tt(u.idToken,r,"internal-error");const f=mv(u.idToken);tt(f,r,"internal-error");const{sub:g}=f;return tt(n.uid===g,r,"user-mismatch"),Mu._forOperation(n,a,u)}catch(u){throw u?.code==="auth/user-not-found"&&_o(r,"user-mismatch"),u}}async function aM(n,e,t=!1){if(Os(n.app))return Promise.reject(vl(n));const r="signIn",a=await wT(n,r,e),u=await Mu._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(u.user),u}function lM(n,e,t,r){return ai(n).onIdTokenChanged(e,t,r)}function uM(n,e,t){return ai(n).beforeAuthStateChanged(e,t)}function cM(n){return ai(n).signOut()}const dd="__sak";class ST{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dd,"1"),this.storage.removeItem(dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hM=1e3,fM=10;class TT extends ST{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((f,g,v)=>{this.notifyListeners(f,v)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const f=this.storage.getItem(r);!t&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);HI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,fM):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},hM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}TT.type="LOCAL";const dM=TT;class CT extends ST{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}CT.type="SESSION";const AT=CT;function pM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Ud{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Ud(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:u}=t.data,f=this.handlersMap[a];if(!f?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const g=Array.from(f).map(async _=>_(t.origin,u)),v=await pM(g);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:v})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ud.receivers=[];function _v(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class mM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let u,f;return new Promise((g,v)=>{const _=_v("",20);a.port1.start();const w=setTimeout(()=>{v(new Error("unsupported_event"))},r);f={messageChannel:a,onMessage(T){const I=T;if(I.data.eventId===_)switch(I.data.status){case"ack":clearTimeout(w),u=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(I.data.response);break;default:clearTimeout(w),clearTimeout(u),v(new Error("invalid_response"));break}}},this.handlers.add(f),a.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[a.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Ds(){return window}function gM(n){Ds().location.href=n}function xT(){return typeof Ds().WorkerGlobalScope<"u"&&typeof Ds().importScripts=="function"}async function vM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yM(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function _M(){return xT()?self:null}const LT="firebaseLocalStorageDb",EM=1,pd="firebaseLocalStorage",RT="fbase_key";class Eh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jd(n,e){return n.transaction([pd],e?"readwrite":"readonly").objectStore(pd)}function bM(){const n=indexedDB.deleteDatabase(LT);return new Eh(n).toPromise()}function Lg(){const n=indexedDB.open(LT,EM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(pd,{keyPath:RT})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(pd)?e(r):(r.close(),await bM(),e(await Lg()))})})}async function j0(n,e,t){const r=jd(n,!0).put({[RT]:e,value:t});return new Eh(r).toPromise()}async function wM(n,e){const t=jd(n,!1).get(e),r=await new Eh(t).toPromise();return r===void 0?null:r.value}function F0(n,e){const t=jd(n,!0).delete(e);return new Eh(t).toPromise()}const SM=800,TM=3;class IT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>TM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ud._getInstance(_M()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await vM(),!this.activeServiceWorker)return;this.sender=new mM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lg();return await j0(e,dd,"1"),await F0(e,dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>j0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>wM(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>F0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const u=jd(a,!1).getAll();return new Eh(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:u}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IT.type="LOCAL";const CM=IT;new yh(3e4,6e4);function AM(n,e){return e?mo(e):(tt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Ev extends ET{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Cu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Cu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xM(n){return aM(n.auth,new Ev(n),n.bypassAuthState)}function LM(n){const{auth:e,user:t}=n;return tt(t,e,"internal-error"),oM(t,new Ev(n),n.bypassAuthState)}async function RM(n){const{auth:e,user:t}=n;return tt(t,e,"internal-error"),sM(t,new Ev(n),n.bypassAuthState)}class MT{constructor(e,t,r,a,u=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:u,error:f,type:g}=e;if(f){this.reject(f);return}const v={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(v))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xM;case"linkViaPopup":case"linkViaRedirect":return RM;case"reauthViaPopup":case"reauthViaRedirect":return LM;default:_o(this.auth,"internal-error")}}resolve(e){Eo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Eo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const IM=new yh(2e3,1e4);class Eu extends MT{constructor(e,t,r,a,u){super(e,t,a,u),this.provider=r,this.authWindow=null,this.pollId=null,Eu.currentPopupAction&&Eu.currentPopupAction.cancel(),Eu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){Eo(this.filter.length===1,"Popup operations only handle one event");const e=_v();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IM.get())};e()}}Eu.currentPopupAction=null;const MM="pendingRedirect",Wf=new Map;class kM extends MT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Wf.get(this.auth._key());if(!e){try{const r=await OM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Wf.set(this.auth._key(),e)}return this.bypassAuthState||Wf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OM(n,e){const t=NM(e),r=DM(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function PM(n,e){Wf.set(n._key(),e)}function DM(n){return mo(n._redirectPersistence)}function NM(n){return Gf(MM,n.config.apiKey,n.name)}async function VM(n,e,t=!1){if(Os(n.app))return Promise.reject(vl(n));const r=vv(n),a=AM(r,e),f=await new kM(r,a,t).execute();return f&&!t&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}const zM=600*1e3;class BM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!kT(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ps(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zM&&this.cachedEventUids.clear(),this.cachedEventUids.has(H0(e))}saveEventToCache(e){this.cachedEventUids.add(H0(e)),this.lastProcessedEventTime=Date.now()}}function H0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function kT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function UM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kT(n);default:return!1}}async function jM(n,e={}){return Uu(n,"GET","/v1/projects",e)}const FM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HM=/^https?/;async function qM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await jM(n);for(const t of e)try{if(ZM(t))return}catch{}_o(n,"unauthorized-domain")}function ZM(n){const e=Ag(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const f=new URL(n);return f.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&f.hostname===r}if(!HM.test(t))return!1;if(FM.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const GM=new yh(3e4,6e4);function q0(){const n=Ds().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function WM(n){return new Promise((e,t)=>{var r,a,u;function f(){q0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{q0(),t(Ps(n,"network-request-failed"))},timeout:GM.get()})}if(!((a=(r=Ds().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((u=Ds().gapi)===null||u===void 0)&&u.load)f();else{const g=XI("iframefcb");return Ds()[g]=()=>{gapi.load?f():t(Ps(n,"network-request-failed"))},$I(`${QI()}?onload=${g}`).catch(v=>t(v))}}).catch(e=>{throw Kf=null,e})}let Kf=null;function KM(n){return Kf=Kf||WM(n),Kf}const YM=new yh(5e3,15e3),$M="__/auth/iframe",QM="emulator/auth/iframe",XM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ek(n){const e=n.config;tt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?dv(e,QM):`https://${n.config.authDomain}/${$M}`,r={apiKey:e.apiKey,appName:n.name,v:Bu},a=JM.get(n.config.apiHost);a&&(r.eid=a);const u=n._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${vh(r).slice(1)}`}async function tk(n){const e=await KM(n),t=Ds().gapi;return tt(t,n,"internal-error"),e.open({where:document.body,url:ek(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XM,dontclear:!0},r=>new Promise(async(a,u)=>{await r.restyle({setHideOnLeave:!1});const f=Ps(n,"network-request-failed"),g=Ds().setTimeout(()=>{u(f)},YM.get());function v(){Ds().clearTimeout(g),a(r)}r.ping(v).then(v,()=>{u(f)})}))}const nk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ik=500,rk=600,sk="_blank",ok="http://localhost";class Z0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ak(n,e,t,r=ik,a=rk){const u=Math.max((window.screen.availHeight-a)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const v=Object.assign(Object.assign({},nk),{width:r.toString(),height:a.toString(),top:u,left:f}),_=bi().toLowerCase();t&&(g=fT(_)?sk:t),cT(_)&&(e=e||ok,v.scrollbars="yes");const w=Object.entries(v).reduce((I,[V,N])=>`${I}${V}=${N},`,"");if(FI(_)&&g!=="_self")return lk(e||"",g),new Z0(null);const T=window.open(e||"",g,w);tt(T,n,"popup-blocked");try{T.focus()}catch{}return new Z0(T)}function lk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const uk="__/auth/handler",ck="emulator/auth/handler",hk=encodeURIComponent("fac");async function G0(n,e,t,r,a,u){tt(n.config.authDomain,n,"auth-domain-config-required"),tt(n.config.apiKey,n,"invalid-api-key");const f={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Bu,eventId:a};if(e instanceof bT){e.setDefaultLanguage(n.languageCode),f.providerId=e.providerId||"",cR(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))f[w]=T}if(e instanceof _h){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(f.scopes=w.join(","))}n.tenantId&&(f.tid=n.tenantId);const g=f;for(const w of Object.keys(g))g[w]===void 0&&delete g[w];const v=await n._getAppCheckToken(),_=v?`#${hk}=${encodeURIComponent(v)}`:"";return`${fk(n)}?${vh(g).slice(1)}${_}`}function fk({config:n}){return n.emulator?dv(n,ck):`https://${n.authDomain}/${uk}`}const rg="webStorageSupport";class dk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AT,this._completeRedirectFn=VM,this._overrideRedirectResult=PM}async _openPopup(e,t,r,a){var u;Eo((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await G0(e,t,r,Ag(),a);return ak(e,f,_v())}async _openRedirect(e,t,r,a){await this._originValidation(e);const u=await G0(e,t,r,Ag(),a);return gM(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:u}=this.eventManagers[t];return a?Promise.resolve(a):(Eo(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await tk(e),r=new BM(e);return t.register("authEvent",a=>(tt(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rg,{type:rg},a=>{var u;const f=(u=a?.[0])===null||u===void 0?void 0:u[rg];f!==void 0&&t(!!f),_o(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vT()||hT()||gv()}}const pk=dk;var W0="@firebase/auth",K0="1.10.8";class mk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vk(n){Iu(new bl("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=r.options;tt(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const v={apiKey:f,authDomain:g,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yT(n)},_=new KI(r,a,u,v);return eM(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Iu(new bl("auth-internal",e=>{const t=vv(e.getProvider("auth").getImmediate());return(r=>new mk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_a(W0,K0,gk(n)),_a(W0,K0,"esm2017")}const yk=300,_k=WS("authIdTokenMaxAge")||yk;let Y0=null;const Ek=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>_k)return;const a=t?.token;Y0!==a&&(Y0=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function bk(n=JS()){const e=cv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=JI(n,{popupRedirectResolver:pk,persistence:[CM,dM,AT]}),r=WS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=Ek(u.toString());uM(t,f,()=>f(t.currentUser)),lM(t,g=>f(g))}}const a=ZS("auth");return a&&tM(t,`http://${a}`),t}function wk(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}YI({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const u=Ps("internal-error");u.customData=a,t(u)},r.type="text/javascript",r.charset="UTF-8",wk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vk("Browser");var $0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ea,OT;(function(){var n;function e(O,P){function M(){}M.prototype=P.prototype,O.D=P.prototype,O.prototype=new M,O.prototype.constructor=O,O.C=function(j,U,G){for(var F=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)F[ke-2]=arguments[ke];return P.prototype[U].apply(j,F)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,P,M){M||(M=0);var j=Array(16);if(typeof P=="string")for(var U=0;16>U;++U)j[U]=P.charCodeAt(M++)|P.charCodeAt(M++)<<8|P.charCodeAt(M++)<<16|P.charCodeAt(M++)<<24;else for(U=0;16>U;++U)j[U]=P[M++]|P[M++]<<8|P[M++]<<16|P[M++]<<24;P=O.g[0],M=O.g[1],U=O.g[2];var G=O.g[3],F=P+(G^M&(U^G))+j[0]+3614090360&4294967295;P=M+(F<<7&4294967295|F>>>25),F=G+(U^P&(M^U))+j[1]+3905402710&4294967295,G=P+(F<<12&4294967295|F>>>20),F=U+(M^G&(P^M))+j[2]+606105819&4294967295,U=G+(F<<17&4294967295|F>>>15),F=M+(P^U&(G^P))+j[3]+3250441966&4294967295,M=U+(F<<22&4294967295|F>>>10),F=P+(G^M&(U^G))+j[4]+4118548399&4294967295,P=M+(F<<7&4294967295|F>>>25),F=G+(U^P&(M^U))+j[5]+1200080426&4294967295,G=P+(F<<12&4294967295|F>>>20),F=U+(M^G&(P^M))+j[6]+2821735955&4294967295,U=G+(F<<17&4294967295|F>>>15),F=M+(P^U&(G^P))+j[7]+4249261313&4294967295,M=U+(F<<22&4294967295|F>>>10),F=P+(G^M&(U^G))+j[8]+1770035416&4294967295,P=M+(F<<7&4294967295|F>>>25),F=G+(U^P&(M^U))+j[9]+2336552879&4294967295,G=P+(F<<12&4294967295|F>>>20),F=U+(M^G&(P^M))+j[10]+4294925233&4294967295,U=G+(F<<17&4294967295|F>>>15),F=M+(P^U&(G^P))+j[11]+2304563134&4294967295,M=U+(F<<22&4294967295|F>>>10),F=P+(G^M&(U^G))+j[12]+1804603682&4294967295,P=M+(F<<7&4294967295|F>>>25),F=G+(U^P&(M^U))+j[13]+4254626195&4294967295,G=P+(F<<12&4294967295|F>>>20),F=U+(M^G&(P^M))+j[14]+2792965006&4294967295,U=G+(F<<17&4294967295|F>>>15),F=M+(P^U&(G^P))+j[15]+1236535329&4294967295,M=U+(F<<22&4294967295|F>>>10),F=P+(U^G&(M^U))+j[1]+4129170786&4294967295,P=M+(F<<5&4294967295|F>>>27),F=G+(M^U&(P^M))+j[6]+3225465664&4294967295,G=P+(F<<9&4294967295|F>>>23),F=U+(P^M&(G^P))+j[11]+643717713&4294967295,U=G+(F<<14&4294967295|F>>>18),F=M+(G^P&(U^G))+j[0]+3921069994&4294967295,M=U+(F<<20&4294967295|F>>>12),F=P+(U^G&(M^U))+j[5]+3593408605&4294967295,P=M+(F<<5&4294967295|F>>>27),F=G+(M^U&(P^M))+j[10]+38016083&4294967295,G=P+(F<<9&4294967295|F>>>23),F=U+(P^M&(G^P))+j[15]+3634488961&4294967295,U=G+(F<<14&4294967295|F>>>18),F=M+(G^P&(U^G))+j[4]+3889429448&4294967295,M=U+(F<<20&4294967295|F>>>12),F=P+(U^G&(M^U))+j[9]+568446438&4294967295,P=M+(F<<5&4294967295|F>>>27),F=G+(M^U&(P^M))+j[14]+3275163606&4294967295,G=P+(F<<9&4294967295|F>>>23),F=U+(P^M&(G^P))+j[3]+4107603335&4294967295,U=G+(F<<14&4294967295|F>>>18),F=M+(G^P&(U^G))+j[8]+1163531501&4294967295,M=U+(F<<20&4294967295|F>>>12),F=P+(U^G&(M^U))+j[13]+2850285829&4294967295,P=M+(F<<5&4294967295|F>>>27),F=G+(M^U&(P^M))+j[2]+4243563512&4294967295,G=P+(F<<9&4294967295|F>>>23),F=U+(P^M&(G^P))+j[7]+1735328473&4294967295,U=G+(F<<14&4294967295|F>>>18),F=M+(G^P&(U^G))+j[12]+2368359562&4294967295,M=U+(F<<20&4294967295|F>>>12),F=P+(M^U^G)+j[5]+4294588738&4294967295,P=M+(F<<4&4294967295|F>>>28),F=G+(P^M^U)+j[8]+2272392833&4294967295,G=P+(F<<11&4294967295|F>>>21),F=U+(G^P^M)+j[11]+1839030562&4294967295,U=G+(F<<16&4294967295|F>>>16),F=M+(U^G^P)+j[14]+4259657740&4294967295,M=U+(F<<23&4294967295|F>>>9),F=P+(M^U^G)+j[1]+2763975236&4294967295,P=M+(F<<4&4294967295|F>>>28),F=G+(P^M^U)+j[4]+1272893353&4294967295,G=P+(F<<11&4294967295|F>>>21),F=U+(G^P^M)+j[7]+4139469664&4294967295,U=G+(F<<16&4294967295|F>>>16),F=M+(U^G^P)+j[10]+3200236656&4294967295,M=U+(F<<23&4294967295|F>>>9),F=P+(M^U^G)+j[13]+681279174&4294967295,P=M+(F<<4&4294967295|F>>>28),F=G+(P^M^U)+j[0]+3936430074&4294967295,G=P+(F<<11&4294967295|F>>>21),F=U+(G^P^M)+j[3]+3572445317&4294967295,U=G+(F<<16&4294967295|F>>>16),F=M+(U^G^P)+j[6]+76029189&4294967295,M=U+(F<<23&4294967295|F>>>9),F=P+(M^U^G)+j[9]+3654602809&4294967295,P=M+(F<<4&4294967295|F>>>28),F=G+(P^M^U)+j[12]+3873151461&4294967295,G=P+(F<<11&4294967295|F>>>21),F=U+(G^P^M)+j[15]+530742520&4294967295,U=G+(F<<16&4294967295|F>>>16),F=M+(U^G^P)+j[2]+3299628645&4294967295,M=U+(F<<23&4294967295|F>>>9),F=P+(U^(M|~G))+j[0]+4096336452&4294967295,P=M+(F<<6&4294967295|F>>>26),F=G+(M^(P|~U))+j[7]+1126891415&4294967295,G=P+(F<<10&4294967295|F>>>22),F=U+(P^(G|~M))+j[14]+2878612391&4294967295,U=G+(F<<15&4294967295|F>>>17),F=M+(G^(U|~P))+j[5]+4237533241&4294967295,M=U+(F<<21&4294967295|F>>>11),F=P+(U^(M|~G))+j[12]+1700485571&4294967295,P=M+(F<<6&4294967295|F>>>26),F=G+(M^(P|~U))+j[3]+2399980690&4294967295,G=P+(F<<10&4294967295|F>>>22),F=U+(P^(G|~M))+j[10]+4293915773&4294967295,U=G+(F<<15&4294967295|F>>>17),F=M+(G^(U|~P))+j[1]+2240044497&4294967295,M=U+(F<<21&4294967295|F>>>11),F=P+(U^(M|~G))+j[8]+1873313359&4294967295,P=M+(F<<6&4294967295|F>>>26),F=G+(M^(P|~U))+j[15]+4264355552&4294967295,G=P+(F<<10&4294967295|F>>>22),F=U+(P^(G|~M))+j[6]+2734768916&4294967295,U=G+(F<<15&4294967295|F>>>17),F=M+(G^(U|~P))+j[13]+1309151649&4294967295,M=U+(F<<21&4294967295|F>>>11),F=P+(U^(M|~G))+j[4]+4149444226&4294967295,P=M+(F<<6&4294967295|F>>>26),F=G+(M^(P|~U))+j[11]+3174756917&4294967295,G=P+(F<<10&4294967295|F>>>22),F=U+(P^(G|~M))+j[2]+718787259&4294967295,U=G+(F<<15&4294967295|F>>>17),F=M+(G^(U|~P))+j[9]+3951481745&4294967295,O.g[0]=O.g[0]+P&4294967295,O.g[1]=O.g[1]+(U+(F<<21&4294967295|F>>>11))&4294967295,O.g[2]=O.g[2]+U&4294967295,O.g[3]=O.g[3]+G&4294967295}r.prototype.u=function(O,P){P===void 0&&(P=O.length);for(var M=P-this.blockSize,j=this.B,U=this.h,G=0;G<P;){if(U==0)for(;G<=M;)a(this,O,G),G+=this.blockSize;if(typeof O=="string"){for(;G<P;)if(j[U++]=O.charCodeAt(G++),U==this.blockSize){a(this,j),U=0;break}}else for(;G<P;)if(j[U++]=O[G++],U==this.blockSize){a(this,j),U=0;break}}this.h=U,this.o+=P},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var P=1;P<O.length-8;++P)O[P]=0;var M=8*this.o;for(P=O.length-8;P<O.length;++P)O[P]=M&255,M/=256;for(this.u(O),O=Array(16),P=M=0;4>P;++P)for(var j=0;32>j;j+=8)O[M++]=this.g[P]>>>j&255;return O};function u(O,P){var M=g;return Object.prototype.hasOwnProperty.call(M,O)?M[O]:M[O]=P(O)}function f(O,P){this.h=P;for(var M=[],j=!0,U=O.length-1;0<=U;U--){var G=O[U]|0;j&&G==P||(M[U]=G,j=!1)}this.g=M}var g={};function v(O){return-128<=O&&128>O?u(O,function(P){return new f([P|0],0>P?-1:0)}):new f([O|0],0>O?-1:0)}function _(O){if(isNaN(O)||!isFinite(O))return T;if(0>O)return q(_(-O));for(var P=[],M=1,j=0;O>=M;j++)P[j]=O/M|0,M*=4294967296;return new f(P,0)}function w(O,P){if(O.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(O.charAt(0)=="-")return q(w(O.substring(1),P));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=_(Math.pow(P,8)),j=T,U=0;U<O.length;U+=8){var G=Math.min(8,O.length-U),F=parseInt(O.substring(U,U+G),P);8>G?(G=_(Math.pow(P,G)),j=j.j(G).add(_(F))):(j=j.j(M),j=j.add(_(F)))}return j}var T=v(0),I=v(1),V=v(16777216);n=f.prototype,n.m=function(){if(H(this))return-q(this).m();for(var O=0,P=1,M=0;M<this.g.length;M++){var j=this.i(M);O+=(0<=j?j:4294967296+j)*P,P*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(N(this))return"0";if(H(this))return"-"+q(this).toString(O);for(var P=_(Math.pow(O,6)),M=this,j="";;){var U=ie(M,P).g;M=W(M,U.j(P));var G=((0<M.g.length?M.g[0]:M.h)>>>0).toString(O);if(M=U,N(M))return G+j;for(;6>G.length;)G="0"+G;j=G+j}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function N(O){if(O.h!=0)return!1;for(var P=0;P<O.g.length;P++)if(O.g[P]!=0)return!1;return!0}function H(O){return O.h==-1}n.l=function(O){return O=W(this,O),H(O)?-1:N(O)?0:1};function q(O){for(var P=O.g.length,M=[],j=0;j<P;j++)M[j]=~O.g[j];return new f(M,~O.h).add(I)}n.abs=function(){return H(this)?q(this):this},n.add=function(O){for(var P=Math.max(this.g.length,O.g.length),M=[],j=0,U=0;U<=P;U++){var G=j+(this.i(U)&65535)+(O.i(U)&65535),F=(G>>>16)+(this.i(U)>>>16)+(O.i(U)>>>16);j=F>>>16,G&=65535,F&=65535,M[U]=F<<16|G}return new f(M,M[M.length-1]&-2147483648?-1:0)};function W(O,P){return O.add(q(P))}n.j=function(O){if(N(this)||N(O))return T;if(H(this))return H(O)?q(this).j(q(O)):q(q(this).j(O));if(H(O))return q(this.j(q(O)));if(0>this.l(V)&&0>O.l(V))return _(this.m()*O.m());for(var P=this.g.length+O.g.length,M=[],j=0;j<2*P;j++)M[j]=0;for(j=0;j<this.g.length;j++)for(var U=0;U<O.g.length;U++){var G=this.i(j)>>>16,F=this.i(j)&65535,ke=O.i(U)>>>16,Le=O.i(U)&65535;M[2*j+2*U]+=F*Le,$(M,2*j+2*U),M[2*j+2*U+1]+=G*Le,$(M,2*j+2*U+1),M[2*j+2*U+1]+=F*ke,$(M,2*j+2*U+1),M[2*j+2*U+2]+=G*ke,$(M,2*j+2*U+2)}for(j=0;j<P;j++)M[j]=M[2*j+1]<<16|M[2*j];for(j=P;j<2*P;j++)M[j]=0;return new f(M,0)};function $(O,P){for(;(O[P]&65535)!=O[P];)O[P+1]+=O[P]>>>16,O[P]&=65535,P++}function re(O,P){this.g=O,this.h=P}function ie(O,P){if(N(P))throw Error("division by zero");if(N(O))return new re(T,T);if(H(O))return P=ie(q(O),P),new re(q(P.g),q(P.h));if(H(P))return P=ie(O,q(P)),new re(q(P.g),P.h);if(30<O.g.length){if(H(O)||H(P))throw Error("slowDivide_ only works with positive integers.");for(var M=I,j=P;0>=j.l(O);)M=ee(M),j=ee(j);var U=X(M,1),G=X(j,1);for(j=X(j,2),M=X(M,2);!N(j);){var F=G.add(j);0>=F.l(O)&&(U=U.add(M),G=F),j=X(j,1),M=X(M,1)}return P=W(O,U.j(P)),new re(U,P)}for(U=T;0<=O.l(P);){for(M=Math.max(1,Math.floor(O.m()/P.m())),j=Math.ceil(Math.log(M)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),G=_(M),F=G.j(P);H(F)||0<F.l(O);)M-=j,G=_(M),F=G.j(P);N(G)&&(G=I),U=U.add(G),O=W(O,F)}return new re(U,O)}n.A=function(O){return ie(this,O).h},n.and=function(O){for(var P=Math.max(this.g.length,O.g.length),M=[],j=0;j<P;j++)M[j]=this.i(j)&O.i(j);return new f(M,this.h&O.h)},n.or=function(O){for(var P=Math.max(this.g.length,O.g.length),M=[],j=0;j<P;j++)M[j]=this.i(j)|O.i(j);return new f(M,this.h|O.h)},n.xor=function(O){for(var P=Math.max(this.g.length,O.g.length),M=[],j=0;j<P;j++)M[j]=this.i(j)^O.i(j);return new f(M,this.h^O.h)};function ee(O){for(var P=O.g.length+1,M=[],j=0;j<P;j++)M[j]=O.i(j)<<1|O.i(j-1)>>>31;return new f(M,O.h)}function X(O,P){var M=P>>5;P%=32;for(var j=O.g.length-M,U=[],G=0;G<j;G++)U[G]=0<P?O.i(G+M)>>>P|O.i(G+M+1)<<32-P:O.i(G+M);return new f(U,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,OT=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=w,Ea=f}).apply(typeof $0<"u"?$0:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var PT,zc,DT,Yf,Rg,NT,VT,zT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,S,R){return d==Array.prototype||d==Object.prototype||(d[S]=R.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var S=0;S<d.length;++S){var R=d[S];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=t(this);function a(d,S){if(S)e:{var R=r;d=d.split(".");for(var z=0;z<d.length-1;z++){var le=d[z];if(!(le in R))break e;R=R[le]}d=d[d.length-1],z=R[d],S=S(z),S!=z&&S!=null&&e(R,d,{configurable:!0,writable:!0,value:S})}}function u(d,S){d instanceof String&&(d+="");var R=0,z=!1,le={next:function(){if(!z&&R<d.length){var ve=R++;return{value:S(ve,d[ve]),done:!1}}return z=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}a("Array.prototype.values",function(d){return d||function(){return u(this,function(S,R){return R})}});var f=f||{},g=this||self;function v(d){var S=typeof d;return S=S!="object"?S:d?Array.isArray(d)?"array":S:"null",S=="array"||S=="object"&&typeof d.length=="number"}function _(d){var S=typeof d;return S=="object"&&d!=null||S=="function"}function w(d,S,R){return d.call.apply(d.bind,arguments)}function T(d,S,R){if(!d)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,z),d.apply(S,le)}}return function(){return d.apply(S,arguments)}}function I(d,S,R){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:T,I.apply(null,arguments)}function V(d,S){var R=Array.prototype.slice.call(arguments,1);return function(){var z=R.slice();return z.push.apply(z,arguments),d.apply(this,z)}}function N(d,S){function R(){}R.prototype=S.prototype,d.aa=S.prototype,d.prototype=new R,d.prototype.constructor=d,d.Qb=function(z,le,ve){for(var Me=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)Me[Mt-2]=arguments[Mt];return S.prototype[le].apply(z,Me)}}function H(d){const S=d.length;if(0<S){const R=Array(S);for(let z=0;z<S;z++)R[z]=d[z];return R}return[]}function q(d,S){for(let R=1;R<arguments.length;R++){const z=arguments[R];if(v(z)){const le=d.length||0,ve=z.length||0;d.length=le+ve;for(let Me=0;Me<ve;Me++)d[le+Me]=z[Me]}else d.push(z)}}class W{constructor(S,R){this.i=S,this.j=R,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function $(d){return/^[\s\xa0]*$/.test(d)}function re(){var d=g.navigator;return d&&(d=d.userAgent)?d:""}function ie(d){return ie[" "](d),d}ie[" "]=function(){};var ee=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function X(d,S,R){for(const z in d)S.call(R,d[z],z,d)}function O(d,S){for(const R in d)S.call(void 0,d[R],R,d)}function P(d){const S={};for(const R in d)S[R]=d[R];return S}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(d,S){let R,z;for(let le=1;le<arguments.length;le++){z=arguments[le];for(R in z)d[R]=z[R];for(let ve=0;ve<M.length;ve++)R=M[ve],Object.prototype.hasOwnProperty.call(z,R)&&(d[R]=z[R])}}function U(d){var S=1;d=d.split(":");const R=[];for(;0<S&&d.length;)R.push(d.shift()),S--;return d.length&&R.push(d.join(":")),R}function G(d){g.setTimeout(()=>{throw d},0)}function F(){var d=_e;let S=null;return d.g&&(S=d.g,d.g=d.g.next,d.g||(d.h=null),S.next=null),S}class ke{constructor(){this.h=this.g=null}add(S,R){const z=Le.get();z.set(S,R),this.h?this.h.next=z:this.g=z,this.h=z}}var Le=new W(()=>new ne,d=>d.reset());class ne{constructor(){this.next=this.g=this.h=null}set(S,R){this.h=S,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let me,ge=!1,_e=new ke,ue=()=>{const d=g.Promise.resolve(void 0);me=()=>{d.then(B)}};var B=()=>{for(var d;d=F();){try{d.h.call(d.g)}catch(R){G(R)}var S=Le;S.j(d),100>S.h&&(S.h++,d.next=S.g,S.g=d)}ge=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(d,S){this.type=d,this.g=this.target=S,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var fe=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var d=!1,S=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const R=()=>{};g.addEventListener("test",R,S),g.removeEventListener("test",R,S)}catch{}return d})();function Q(d,S){if(te.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var R=this.type=d.type,z=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=S,S=d.relatedTarget){if(ee){e:{try{ie(S.nodeName);var le=!0;break e}catch{}le=!1}le||(S=null)}}else R=="mouseover"?S=d.fromElement:R=="mouseout"&&(S=d.toElement);this.relatedTarget=S,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ae[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Q.aa.h.call(this)}}N(Q,te);var Ae={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),De=0;function Qe(d,S,R,z,le){this.listener=d,this.proxy=null,this.src=S,this.type=R,this.capture=!!z,this.ha=le,this.key=++De,this.da=this.fa=!1}function ze(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Je(d){this.src=d,this.g={},this.h=0}Je.prototype.add=function(d,S,R,z,le){var ve=d.toString();d=this.g[ve],d||(d=this.g[ve]=[],this.h++);var Me=an(d,S,z,le);return-1<Me?(S=d[Me],R||(S.fa=!1)):(S=new Qe(S,this.src,ve,!!z,le),S.fa=R,d.push(S)),S};function Ut(d,S){var R=S.type;if(R in d.g){var z=d.g[R],le=Array.prototype.indexOf.call(z,S,void 0),ve;(ve=0<=le)&&Array.prototype.splice.call(z,le,1),ve&&(ze(S),d.g[R].length==0&&(delete d.g[R],d.h--))}}function an(d,S,R,z){for(var le=0;le<d.length;++le){var ve=d[le];if(!ve.da&&ve.listener==S&&ve.capture==!!R&&ve.ha==z)return le}return-1}var ln="closure_lm_"+(1e6*Math.random()|0),ot={};function Pi(d,S,R,z,le){if(Array.isArray(S)){for(var ve=0;ve<S.length;ve++)Pi(d,S[ve],R,z,le);return null}return R=Wt(R),d&&d[Ie]?d.K(S,R,_(z)?!!z.capture:!1,le):Di(d,S,R,!1,z,le)}function Di(d,S,R,z,le,ve){if(!S)throw Error("Invalid event type");var Me=_(le)?!!le.capture:!!le,Mt=rn(d);if(Mt||(d[ln]=Mt=new Je(d)),R=Mt.add(S,R,z,Me,ve),R.proxy)return R;if(z=Ni(),R.proxy=z,z.src=d,z.listener=R,d.addEventListener)fe||(le=Me),le===void 0&&(le=!1),d.addEventListener(S.toString(),z,le);else if(d.attachEvent)d.attachEvent(Pe(S.toString()),z);else if(d.addListener&&d.removeListener)d.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Ni(){function d(R){return S.call(d.src,d.listener,R)}const S=We;return d}function ui(d,S,R,z,le){if(Array.isArray(S))for(var ve=0;ve<S.length;ve++)ui(d,S[ve],R,z,le);else z=_(z)?!!z.capture:!!z,R=Wt(R),d&&d[Ie]?(d=d.i,S=String(S).toString(),S in d.g&&(ve=d.g[S],R=an(ve,R,z,le),-1<R&&(ze(ve[R]),Array.prototype.splice.call(ve,R,1),ve.length==0&&(delete d.g[S],d.h--)))):d&&(d=rn(d))&&(S=d.g[S.toString()],d=-1,S&&(d=an(S,R,z,le)),(R=-1<d?S[d]:null)&&ae(R))}function ae(d){if(typeof d!="number"&&d&&!d.da){var S=d.src;if(S&&S[Ie])Ut(S.i,d);else{var R=d.type,z=d.proxy;S.removeEventListener?S.removeEventListener(R,z,d.capture):S.detachEvent?S.detachEvent(Pe(R),z):S.addListener&&S.removeListener&&S.removeListener(z),(R=rn(S))?(Ut(R,d),R.h==0&&(R.src=null,S[ln]=null)):ze(d)}}}function Pe(d){return d in ot?ot[d]:ot[d]="on"+d}function We(d,S){if(d.da)d=!0;else{S=new Q(S,this);var R=d.listener,z=d.ha||d.src;d.fa&&ae(d),d=R.call(z,S)}return d}function rn(d){return d=d[ln],d instanceof Je?d:null}var Ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wt(d){return typeof d=="function"?d:(d[Ct]||(d[Ct]=function(S){return d.handleEvent(S)}),d[Ct])}function nt(){K.call(this),this.i=new Je(this),this.M=this,this.F=null}N(nt,K),nt.prototype[Ie]=!0,nt.prototype.removeEventListener=function(d,S,R,z){ui(this,d,S,R,z)};function dt(d,S){var R,z=d.F;if(z)for(R=[];z;z=z.F)R.push(z);if(d=d.M,z=S.type||S,typeof S=="string")S=new te(S,d);else if(S instanceof te)S.target=S.target||d;else{var le=S;S=new te(z,d),j(S,le)}if(le=!0,R)for(var ve=R.length-1;0<=ve;ve--){var Me=S.g=R[ve];le=An(Me,z,!0,S)&&le}if(Me=S.g=d,le=An(Me,z,!0,S)&&le,le=An(Me,z,!1,S)&&le,R)for(ve=0;ve<R.length;ve++)Me=S.g=R[ve],le=An(Me,z,!1,S)&&le}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var d=this.i,S;for(S in d.g){for(var R=d.g[S],z=0;z<R.length;z++)ze(R[z]);delete d.g[S],d.h--}}this.F=null},nt.prototype.K=function(d,S,R,z){return this.i.add(String(d),S,!1,R,z)},nt.prototype.L=function(d,S,R,z){return this.i.add(String(d),S,!0,R,z)};function An(d,S,R,z){if(S=d.i.g[String(S)],!S)return!0;S=S.concat();for(var le=!0,ve=0;ve<S.length;++ve){var Me=S[ve];if(Me&&!Me.da&&Me.capture==R){var Mt=Me.listener,fn=Me.ha||Me.src;Me.fa&&Ut(d.i,Me),le=Mt.call(fn,z)!==!1&&le}}return le&&!z.defaultPrevented}function yr(d,S,R){if(typeof d=="function")R&&(d=I(d,R));else if(d&&typeof d.handleEvent=="function")d=I(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:g.setTimeout(d,S||0)}function ir(d){d.g=yr(()=>{d.g=null,d.i&&(d.i=!1,ir(d))},d.l);const S=d.h;d.h=null,d.m.apply(null,S)}class wi extends K{constructor(S,R){super(),this.m=S,this.l=R,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:ir(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(d){K.call(this),this.h=d,this.g={}}N(Si,K);var ci=[];function un(d){X(d.g,function(S,R){this.g.hasOwnProperty(R)&&ae(S)},d),d.g={}}Si.prototype.N=function(){Si.aa.N.call(this),un(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xn=g.JSON.stringify,Ln=g.JSON.parse,Vi=class{stringify(d){return g.JSON.stringify(d,void 0)}parse(d){return g.JSON.parse(d,void 0)}};function as(){}as.prototype.h=null;function zr(d){return d.h||(d.h=d.i())}function rr(){}var hi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zi(){te.call(this,"d")}N(zi,te);function Hn(){te.call(this,"c")}N(Hn,te);var Xn={},Ti=null;function Br(){return Ti=Ti||new nt}Xn.La="serverreachability";function _r(d){te.call(this,Xn.La,d)}N(_r,te);function Bi(d){const S=Br();dt(S,new _r(S))}Xn.STAT_EVENT="statevent";function Ui(d,S){te.call(this,Xn.STAT_EVENT,d),this.stat=S}N(Ui,te);function Xt(d){const S=Br();dt(S,new Ui(S,d))}Xn.Ma="timingevent";function $e(d,S){te.call(this,Xn.Ma,d),this.size=S}N($e,te);function ls(d,S){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){d()},S)}function us(){this.g=!0}us.prototype.xa=function(){this.g=!1};function fi(d,S,R,z,le,ve){d.info(function(){if(d.g)if(ve)for(var Me="",Mt=ve.split("&"),fn=0;fn<Mt.length;fn++){var ut=Mt[fn].split("=");if(1<ut.length){var zt=ut[0];ut=ut[1];var en=zt.split("_");Me=2<=en.length&&en[1]=="type"?Me+(zt+"="+ut+"&"):Me+(zt+"=redacted&")}}else Me=null;else Me=ve;return"XMLHTTP REQ ("+z+") [attempt "+le+"]: "+S+`
`+R+`
`+Me})}function Ue(d,S,R,z,le,ve,Me){d.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+le+"]: "+S+`
`+R+`
`+ve+" "+Me})}function Er(d,S,R,z){d.info(function(){return"XMLHTTP TEXT ("+S+"): "+sr(d,R)+(z?" "+z:"")})}function Oa(d,S){d.info(function(){return"TIMEOUT: "+S})}us.prototype.info=function(){};function sr(d,S){if(!d.g)return S;if(!S)return null;try{var R=JSON.parse(S);if(R){for(d=0;d<R.length;d++)if(Array.isArray(R[d])){var z=R[d];if(!(2>z.length)){var le=z[1];if(Array.isArray(le)&&!(1>le.length)){var ve=le[0];if(ve!="noop"&&ve!="stop"&&ve!="close")for(var Me=1;Me<le.length;Me++)le[Me]=""}}}}return xn(R)}catch{return S}}var Jt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},or;function Ci(){}N(Ci,as),Ci.prototype.g=function(){return new XMLHttpRequest},Ci.prototype.i=function(){return{}},or=new Ci;function ar(d,S,R,z){this.j=d,this.i=S,this.l=R,this.R=z||1,this.U=new Si(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kl}function kl(){this.i=null,this.g="",this.h=!1}var Pa={},Ur={};function Hs(d,S,R){d.L=1,d.v=Ai(At(S)),d.m=R,d.P=!0,br(d,null)}function br(d,S){d.F=Date.now(),lr(d),d.A=At(d.v);var R=d.A,z=d.R;Array.isArray(z)||(z=[String(z)]),qr(R.i,"t",z),d.C=0,R=d.j.J,d.h=new kl,d.g=Nl(d.j,R?S:null,!d.m),0<d.O&&(d.M=new wi(I(d.Y,d,d.g),d.O)),S=d.U,R=d.g,z=d.ca;var le="readystatechange";Array.isArray(le)||(le&&(ci[0]=le.toString()),le=ci);for(var ve=0;ve<le.length;ve++){var Me=Pi(R,le[ve],z||S.handleEvent,!1,S.h||S);if(!Me)break;S.g[Me.key]=Me}S=d.H?P(d.H):{},d.m?(d.u||(d.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,S)):(d.u="GET",d.g.ea(d.A,d.u,null,S)),Bi(),fi(d.i,d.u,d.A,d.l,d.R,d.m)}ar.prototype.ca=function(d){d=d.target;const S=this.M;S&&wn(d)==3?S.j():this.Y(d)},ar.prototype.Y=function(d){try{if(d==this.g)e:{const en=wn(this.g);var S=this.g.Ba();const bs=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||vs(this.g)))){this.J||en!=4||S==7||(S==8||0>=bs?Bi(3):Bi(2)),Co(this);var R=this.g.Z();this.X=R;t:if(jr(this)){var z=vs(this.g);d="";var le=z.length,ve=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jn(this),cs(this);var Me="";break t}this.h.i=new g.TextDecoder}for(S=0;S<le;S++)this.h.h=!0,d+=this.h.i.decode(z[S],{stream:!(ve&&S==le-1)});z.length=0,this.h.g+=d,this.C=0,Me=this.h.g}else Me=this.g.oa();if(this.o=R==200,Ue(this.i,this.u,this.A,this.l,this.R,en,R),this.o){if(this.T&&!this.K){t:{if(this.g){var Mt,fn=this.g;if((Mt=fn.g?fn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Mt)){var ut=Mt;break t}}ut=null}if(R=ut)Er(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ji(this,R);else{this.o=!1,this.s=3,Xt(12),Jn(this),cs(this);break e}}if(this.P){R=!0;let sn;for(;!this.J&&this.C<Me.length;)if(sn=wr(this,Me),sn==Ur){en==4&&(this.s=4,Xt(14),R=!1),Er(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Pa){this.s=4,Xt(15),Er(this.i,this.l,Me,"[Invalid Chunk]"),R=!1;break}else Er(this.i,this.l,sn,null),ji(this,sn);if(jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||Me.length!=0||this.h.h||(this.s=1,Xt(16),R=!1),this.o=this.o&&R,!R)Er(this.i,this.l,Me,"[Invalid Chunked Response]"),Jn(this),cs(this);else if(0<Me.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+Me.length),Oo(zt),zt.M=!0,Xt(11))}}else Er(this.i,this.l,Me,null),ji(this,Me);en==4&&Jn(this),this.o&&!this.J&&(en==4?Ba(this.j,this):(this.o=!1,lr(this)))}else Ol(this.g),R==400&&0<Me.indexOf("Unknown SID")?(this.s=3,Xt(12)):(this.s=0,Xt(13)),Jn(this),cs(this)}}}catch{}finally{}};function jr(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function wr(d,S){var R=d.C,z=S.indexOf(`
`,R);return z==-1?Ur:(R=Number(S.substring(R,z)),isNaN(R)?Pa:(z+=1,z+R>S.length?Ur:(S=S.slice(z,z+R),d.C=z+R,S)))}ar.prototype.cancel=function(){this.J=!0,Jn(this)};function lr(d){d.S=Date.now()+d.I,cn(d,d.I)}function cn(d,S){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ls(I(d.ba,d),S)}function Co(d){d.B&&(g.clearTimeout(d.B),d.B=null)}ar.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Oa(this.i,this.A),this.L!=2&&(Bi(),Xt(17)),Jn(this),this.s=2,cs(this)):cn(this,this.S-d)};function cs(d){d.j.G==0||d.J||Ba(d.j,d)}function Jn(d){Co(d);var S=d.M;S&&typeof S.ma=="function"&&S.ma(),d.M=null,un(d.U),d.g&&(S=d.g,d.g=null,S.abort(),S.ma())}function ji(d,S){try{var R=d.j;if(R.G!=0&&(R.g==d||lt(R.h,d))){if(!d.K&&lt(R.h,d)&&R.G==3){try{var z=R.Da.g.parse(S)}catch{z=null}if(Array.isArray(z)&&z.length==3){var le=z;if(le[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<d.F)Es(R),ys(R);else break e;ko(R),Xt(18)}}else R.za=le[1],0<R.za-R.T&&37500>le[2]&&R.F&&R.v==0&&!R.C&&(R.C=ls(I(R.Za,R),6e3));if(1>=hs(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else Kr(R,11)}else if((d.K||R.g==d)&&Es(R),!$(S))for(le=R.Da.g.parse(S),S=0;S<le.length;S++){let ut=le[S];if(R.T=ut[0],ut=ut[1],R.G==2)if(ut[0]=="c"){R.K=ut[1],R.ia=ut[2];const zt=ut[3];zt!=null&&(R.la=zt,R.j.info("VER="+R.la));const en=ut[4];en!=null&&(R.Aa=en,R.j.info("SVER="+R.Aa));const bs=ut[5];bs!=null&&typeof bs=="number"&&0<bs&&(z=1.5*bs,R.L=z,R.j.info("backChannelRequestTimeoutMs_="+z)),z=R;const sn=d.g;if(sn){const Qs=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qs){var ve=z.h;ve.g||Qs.indexOf("spdy")==-1&&Qs.indexOf("quic")==-1&&Qs.indexOf("h2")==-1||(ve.j=ve.l,ve.g=new Set,ve.h&&(Rt(ve,ve.h),ve.h=null))}if(z.D){const pi=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;pi&&(z.ya=pi,Ke(z.I,z.D,pi))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-d.F,R.j.info("Handshake RTT: "+R.R+"ms")),z=R;var Me=d;if(z.qa=Do(z,z.J?z.ia:null,z.W),Me.K){ei(z.h,Me);var Mt=Me,fn=z.L;fn&&(Mt.I=fn),Mt.B&&(Co(Mt),lr(Mt)),z.g=Me}else cr(z);0<R.i.length&&_s(R)}else ut[0]!="stop"&&ut[0]!="close"||Kr(R,7);else R.G==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?Kr(R,7):Io(R):ut[0]!="noop"&&R.l&&R.l.ta(ut),R.v=0)}}Bi(4)}catch{}}var qs=class{constructor(d,S){this.g=d,this.map=S}};function Ao(d){this.l=d||10,g.PerformanceNavigationTiming?(d=g.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xo(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function hs(d){return d.h?1:d.g?d.g.size:0}function lt(d,S){return d.h?d.h==S:d.g?d.g.has(S):!1}function Rt(d,S){d.g?d.g.add(S):d.h=S}function ei(d,S){d.h&&d.h==S?d.h=null:d.g&&d.g.has(S)&&d.g.delete(S)}Ao.prototype.cancel=function(){if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function gn(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let S=d.i;for(const R of d.g.values())S=S.concat(R.D);return S}return H(d.i)}function Fr(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(v(d)){for(var S=[],R=d.length,z=0;z<R;z++)S.push(d[z]);return S}S=[],R=0;for(z in d)S[R++]=d[z];return S}function Da(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(v(d)||typeof d=="string"){var S=[];d=d.length;for(var R=0;R<d;R++)S.push(R);return S}S=[],R=0;for(const z in d)S[R++]=z;return S}}}function et(d,S){if(d.forEach&&typeof d.forEach=="function")d.forEach(S,void 0);else if(v(d)||typeof d=="string")Array.prototype.forEach.call(d,S,void 0);else for(var R=Da(d),z=Fr(d),le=z.length,ve=0;ve<le;ve++)S.call(void 0,z[ve],R&&R[ve],d)}var Kt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fs(d,S){if(d){d=d.split("&");for(var R=0;R<d.length;R++){var z=d[R].indexOf("="),le=null;if(0<=z){var ve=d[R].substring(0,z);le=d[R].substring(z+1)}else ve=d[R];S(ve,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Fi(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Fi){this.h=d.h,ds(this,d.j),this.o=d.o,this.g=d.g,Sr(this,d.s),this.l=d.l;var S=d.i,R=new Zi;R.i=S.i,S.g&&(R.g=new Map(S.g),R.h=S.h),Hi(this,R),this.m=d.m}else d&&(S=String(d).match(Kt))?(this.h=!1,ds(this,S[1]||"",!0),this.o=qi(S[2]||""),this.g=qi(S[3]||"",!0),Sr(this,S[4]),this.l=qi(S[5]||"",!0),Hi(this,S[6]||"",!0),this.m=qi(S[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}Fi.prototype.toString=function(){var d=[],S=this.j;S&&d.push(qn(S,Hr,!0),":");var R=this.g;return(R||S=="file")&&(d.push("//"),(S=this.o)&&d.push(qn(S,Hr,!0),"@"),d.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&d.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&d.push("/"),d.push(qn(R,R.charAt(0)=="/"?Zs:Lo,!0))),(R=this.i.toString())&&d.push("?",R),(R=this.m)&&d.push("#",qn(R,Va)),d.join("")};function At(d){return new Fi(d)}function ds(d,S,R){d.j=R?qi(S,!0):S,d.j&&(d.j=d.j.replace(/:$/,""))}function Sr(d,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);d.s=S}else d.s=null}function Hi(d,S,R){S instanceof Zi?(d.i=S,xi(d.i,d.h)):(R||(S=qn(S,Ro)),d.i=new Zi(S,d.h))}function Ke(d,S,R){d.i.set(S,R)}function Ai(d){return Ke(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function qi(d,S){return d?S?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function qn(d,S,R){return typeof d=="string"?(d=encodeURI(d).replace(S,Na),R&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Na(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Hr=/[#\/\?@]/g,Lo=/[#\?:]/g,Zs=/[#\?]/g,Ro=/[#\?@]/g,Va=/#/g;function Zi(d,S){this.h=this.g=null,this.i=d||null,this.j=!!S}function hn(d){d.g||(d.g=new Map,d.h=0,d.i&&fs(d.i,function(S,R){d.add(decodeURIComponent(S.replace(/\+/g," ")),R)}))}n=Zi.prototype,n.add=function(d,S){hn(this),this.i=null,d=qe(this,d);var R=this.g.get(d);return R||this.g.set(d,R=[]),R.push(S),this.h+=1,this};function Gs(d,S){hn(d),S=qe(d,S),d.g.has(S)&&(d.i=null,d.h-=d.g.get(S).length,d.g.delete(S))}function ps(d,S){return hn(d),S=qe(d,S),d.g.has(S)}n.forEach=function(d,S){hn(this),this.g.forEach(function(R,z){R.forEach(function(le){d.call(S,le,z,this)},this)},this)},n.na=function(){hn(this);const d=Array.from(this.g.values()),S=Array.from(this.g.keys()),R=[];for(let z=0;z<S.length;z++){const le=d[z];for(let ve=0;ve<le.length;ve++)R.push(S[z])}return R},n.V=function(d){hn(this);let S=[];if(typeof d=="string")ps(this,d)&&(S=S.concat(this.g.get(qe(this,d))));else{d=Array.from(this.g.values());for(let R=0;R<d.length;R++)S=S.concat(d[R])}return S},n.set=function(d,S){return hn(this),this.i=null,d=qe(this,d),ps(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[S]),this.h+=1,this},n.get=function(d,S){return d?(d=this.V(d),0<d.length?String(d[0]):S):S};function qr(d,S,R){Gs(d,S),0<R.length&&(d.i=null,d.g.set(qe(d,S),H(R)),d.h+=R.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],S=Array.from(this.g.keys());for(var R=0;R<S.length;R++){var z=S[R];const ve=encodeURIComponent(String(z)),Me=this.V(z);for(z=0;z<Me.length;z++){var le=ve;Me[z]!==""&&(le+="="+encodeURIComponent(String(Me[z]))),d.push(le)}}return this.i=d.join("&")};function qe(d,S){return S=String(S),d.j&&(S=S.toLowerCase()),S}function xi(d,S){S&&!d.j&&(hn(d),d.i=null,d.g.forEach(function(R,z){var le=z.toLowerCase();z!=le&&(Gs(this,z),qr(this,le,R))},d)),d.j=S}function It(d,S){const R=new us;if(g.Image){const z=new Image;z.onload=V(Zn,R,"TestLoadImage: loaded",!0,S,z),z.onerror=V(Zn,R,"TestLoadImage: error",!1,S,z),z.onabort=V(Zn,R,"TestLoadImage: abort",!1,S,z),z.ontimeout=V(Zn,R,"TestLoadImage: timeout",!1,S,z),g.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=d}else S(!1)}function za(d,S){const R=new us,z=new AbortController,le=setTimeout(()=>{z.abort(),Zn(R,"TestPingServer: timeout",!1,S)},1e4);fetch(d,{signal:z.signal}).then(ve=>{clearTimeout(le),ve.ok?Zn(R,"TestPingServer: ok",!0,S):Zn(R,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(le),Zn(R,"TestPingServer: error",!1,S)})}function Zn(d,S,R,z,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),z(R)}catch{}}function Li(){this.g=new Vi}function Ws(d,S,R){const z=R||"";try{et(d,function(le,ve){let Me=le;_(le)&&(Me=xn(le)),S.push(z+ve+"="+encodeURIComponent(Me))})}catch(le){throw S.push(z+"type="+encodeURIComponent("_badmap")),le}}function Gn(d){this.l=d.Ub||null,this.j=d.eb||!1}N(Gn,as),Gn.prototype.g=function(){return new ti(this.l,this.j)},Gn.prototype.i=(function(d){return function(){return d}})({});function ti(d,S){nt.call(this),this.D=d,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(ti,nt),n=ti.prototype,n.open=function(d,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=S,this.readyState=1,di(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(S.body=d),(this.D||g).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ht(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tr(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tr(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var S=d.value?d.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!d.done}))&&(this.response=this.responseText+=S)}d.done?Ht(this):di(this),this.readyState==3&&Tr(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Ht(this))},n.Qa=function(d){this.g&&(this.response=d,Ht(this))},n.ga=function(){this.g&&Ht(this)};function Ht(d){d.readyState=4,d.l=null,d.j=null,d.v=null,di(d)}n.setRequestHeader=function(d,S){this.u.append(d,S)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],S=this.h.entries();for(var R=S.next();!R.done;)R=R.value,d.push(R[0]+": "+R[1]),R=S.next();return d.join(`\r
`)};function di(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ti.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ms(d){let S="";return X(d,function(R,z){S+=z,S+=":",S+=R,S+=`\r
`}),S}function Zr(d,S,R){e:{for(z in R){var z=!1;break e}z=!0}z||(R=ms(R),typeof d=="string"?R!=null&&encodeURIComponent(String(R)):Ke(d,S,R))}function Yt(d){nt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Yt,nt);var zn=/^https?$/i,ur=["POST","PUT"];n=Yt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,S,R,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);S=S?S.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():or.g(),this.v=this.o?zr(this.o):zr(or),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(S,String(d),!0),this.B=!1}catch(ve){Ks(this,ve);return}if(d=R||"",R=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var le in z)R.set(le,z[le]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ve of z.keys())R.set(ve,z.get(ve));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(R.keys()).find(ve=>ve.toLowerCase()=="content-type"),le=g.FormData&&d instanceof g.FormData,!(0<=Array.prototype.indexOf.call(ur,S,void 0))||z||le||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ve,Me]of R)this.g.setRequestHeader(ve,Me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wn(this),this.u=!0,this.g.send(d),this.u=!1}catch(ve){Ks(this,ve)}};function Ks(d,S){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=S,d.m=5,Gr(d),gs(d)}function Gr(d){d.A||(d.A=!0,dt(d,"complete"),dt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,dt(this,"complete"),dt(this,"abort"),gs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gs(this,!0)),Yt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?pt(this):this.bb())},n.bb=function(){pt(this)};function pt(d){if(d.h&&typeof f<"u"&&(!d.v[1]||wn(d)!=4||d.Z()!=2)){if(d.u&&wn(d)==4)yr(d.Ea,0,d);else if(dt(d,"readystatechange"),wn(d)==4){d.h=!1;try{const Me=d.Z();e:switch(Me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var R;if(!(R=S)){var z;if(z=Me===0){var le=String(d.D).match(Kt)[1]||null;!le&&g.self&&g.self.location&&(le=g.self.location.protocol.slice(0,-1)),z=!zn.test(le?le.toLowerCase():"")}R=z}if(R)dt(d,"complete"),dt(d,"success");else{d.m=6;try{var ve=2<wn(d)?d.g.statusText:""}catch{ve=""}d.l=ve+" ["+d.Z()+"]",Gr(d)}}finally{gs(d)}}}}function gs(d,S){if(d.g){Wn(d);const R=d.g,z=d.v[0]?()=>{}:null;d.g=null,d.v=null,S||dt(d,"ready");try{R.onreadystatechange=z}catch{}}}function Wn(d){d.I&&(g.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function wn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var S=this.g.responseText;return d&&S.indexOf(d)==0&&(S=S.substring(d.length)),Ln(S)}};function vs(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ol(d){const S={};d=(d.g&&2<=wn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<d.length;z++){if($(d[z]))continue;var R=U(d[z]);const le=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ve=S[le]||[];S[le]=ve,ve.push(R)}O(S,function(z){return z.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(d,S,R){return R&&R.internalChannelParams&&R.internalChannelParams[d]||S}function Pl(d){this.Aa=0,this.i=[],this.j=new us,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wr("baseRetryDelayMs",5e3,d),this.cb=Wr("retryDelaySeedMs",1e4,d),this.Wa=Wr("forwardChannelMaxRetries",2,d),this.wa=Wr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ao(d&&d.concurrentRequestLimit),this.Da=new Li,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Pl.prototype,n.la=8,n.G=1,n.connect=function(d,S,R,z){Xt(0),this.W=d,this.H=S||{},R&&z!==void 0&&(this.H.OSID=R,this.H.OAID=z),this.F=this.X,this.I=Do(this,null,this.W),_s(this)};function Io(d){if(Dl(d),d.G==3){var S=d.U++,R=At(d.I);if(Ke(R,"SID",d.K),Ke(R,"RID",S),Ke(R,"TYPE","terminate"),Ys(d,R),S=new ar(d,d.j,S),S.L=2,S.v=Ai(At(R)),R=!1,g.navigator&&g.navigator.sendBeacon)try{R=g.navigator.sendBeacon(S.v.toString(),"")}catch{}!R&&g.Image&&(new Image().src=S.v,R=!0),R||(S.g=Nl(S.j,null),S.g.ea(S.v)),S.F=Date.now(),lr(S)}ja(d)}function ys(d){d.g&&(Oo(d),d.g.cancel(),d.g=null)}function Dl(d){ys(d),d.u&&(g.clearTimeout(d.u),d.u=null),Es(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&g.clearTimeout(d.s),d.s=null)}function _s(d){if(!xo(d.h)&&!d.s){d.s=!0;var S=d.Ga;me||ue(),ge||(me(),ge=!0),_e.add(S,d),d.B=0}}function Ku(d,S){return hs(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=S.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ls(I(d.Ga,d,S),Ua(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const le=new ar(this,this.j,d);let ve=this.o;if(this.S&&(ve?(ve=P(ve),j(ve,this.S)):ve=this.S),this.m!==null||this.O||(le.H=ve,ve=null),this.P)e:{for(var S=0,R=0;R<this.i.length;R++){t:{var z=this.i[R];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(S+=z,4096<S){S=R;break e}if(S===4096||R===this.i.length-1){S=R+1;break e}}S=1e3}else S=1e3;S=Mo(this,le,S),R=At(this.I),Ke(R,"RID",d),Ke(R,"CVER",22),this.D&&Ke(R,"X-HTTP-Session-Id",this.D),Ys(this,R),ve&&(this.O?S="headers="+encodeURIComponent(String(ms(ve)))+"&"+S:this.m&&Zr(R,this.m,ve)),Rt(this.h,le),this.Ua&&Ke(R,"TYPE","init"),this.P?(Ke(R,"$req",S),Ke(R,"SID","null"),le.T=!0,Hs(le,R,null)):Hs(le,R,S),this.G=2}}else this.G==3&&(d?Ri(this,d):this.i.length==0||xo(this.h)||Ri(this))};function Ri(d,S){var R;S?R=S.l:R=d.U++;const z=At(d.I);Ke(z,"SID",d.K),Ke(z,"RID",R),Ke(z,"AID",d.T),Ys(d,z),d.m&&d.o&&Zr(z,d.m,d.o),R=new ar(d,d.j,R,d.B+1),d.m===null&&(R.H=d.o),S&&(d.i=S.D.concat(d.i)),S=Mo(d,R,1e3),R.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Rt(d.h,R),Hs(R,z,S)}function Ys(d,S){d.H&&X(d.H,function(R,z){Ke(S,z,R)}),d.l&&et({},function(R,z){Ke(S,z,R)})}function Mo(d,S,R){R=Math.min(d.i.length,R);var z=d.l?I(d.l.Na,d.l,d):null;e:{var le=d.i;let ve=-1;for(;;){const Me=["count="+R];ve==-1?0<R?(ve=le[0].g,Me.push("ofs="+ve)):ve=0:Me.push("ofs="+ve);let Mt=!0;for(let fn=0;fn<R;fn++){let ut=le[fn].g;const zt=le[fn].map;if(ut-=ve,0>ut)ve=Math.max(0,le[fn].g-100),Mt=!1;else try{Ws(zt,Me,"req"+ut+"_")}catch{z&&z(zt)}}if(Mt){z=Me.join("&");break e}}}return d=d.i.splice(0,R),S.D=d,z}function cr(d){if(!d.g&&!d.u){d.Y=1;var S=d.Fa;me||ue(),ge||(me(),ge=!0),_e.add(S,d),d.v=0}}function ko(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ls(I(d.Fa,d),Ua(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Po(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ls(I(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xt(10),ys(this),Po(this))};function Oo(d){d.A!=null&&(g.clearTimeout(d.A),d.A=null)}function Po(d){d.g=new ar(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var S=At(d.qa);Ke(S,"RID","rpc"),Ke(S,"SID",d.K),Ke(S,"AID",d.T),Ke(S,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ke(S,"TO",d.ja),Ke(S,"TYPE","xmlhttp"),Ys(d,S),d.m&&d.o&&Zr(S,d.m,d.o),d.L&&(d.g.I=d.L);var R=d.g;d=d.ia,R.L=1,R.v=Ai(At(S)),R.m=null,R.P=!0,br(R,d)}n.Za=function(){this.C!=null&&(this.C=null,ys(this),ko(this),Xt(19))};function Es(d){d.C!=null&&(g.clearTimeout(d.C),d.C=null)}function Ba(d,S){var R=null;if(d.g==S){Es(d),Oo(d),d.g=null;var z=2}else if(lt(d.h,S))R=S.D,ei(d.h,S),z=1;else return;if(d.G!=0){if(S.o)if(z==1){R=S.m?S.m.length:0,S=Date.now()-S.F;var le=d.B;z=Br(),dt(z,new $e(z,R)),_s(d)}else cr(d);else if(le=S.s,le==3||le==0&&0<S.X||!(z==1&&Ku(d,S)||z==2&&ko(d)))switch(R&&0<R.length&&(S=d.h,S.i=S.i.concat(R)),le){case 1:Kr(d,5);break;case 4:Kr(d,10);break;case 3:Kr(d,6);break;default:Kr(d,2)}}}function Ua(d,S){let R=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(R*=2),R*S}function Kr(d,S){if(d.j.info("Error code "+S),S==2){var R=I(d.fb,d),z=d.Xa;const le=!z;z=new Fi(z||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||ds(z,"https"),Ai(z),le?It(z.toString(),R):za(z.toString(),R)}else Xt(2);d.G=0,d.l&&d.l.sa(S),ja(d),Dl(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function ja(d){if(d.G=0,d.ka=[],d.l){const S=gn(d.h);(S.length!=0||d.i.length!=0)&&(q(d.ka,S),q(d.ka,d.i),d.h.i.length=0,H(d.i),d.i.length=0),d.l.ra()}}function Do(d,S,R){var z=R instanceof Fi?At(R):new Fi(R);if(z.g!="")S&&(z.g=S+"."+z.g),Sr(z,z.s);else{var le=g.location;z=le.protocol,S=S?S+"."+le.hostname:le.hostname,le=+le.port;var ve=new Fi(null);z&&ds(ve,z),S&&(ve.g=S),le&&Sr(ve,le),R&&(ve.l=R),z=ve}return R=d.D,S=d.ya,R&&S&&Ke(z,R,S),Ke(z,"VER",d.la),Ys(d,z),z}function Nl(d,S,R){if(S&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=d.Ca&&!d.pa?new Yt(new Gn({eb:R})):new Yt(d.pa),S.Ha(d.J),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fa(){}n=Fa.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function $s(){}$s.prototype.g=function(d,S){return new Rn(d,S)};function Rn(d,S){nt.call(this),this.g=new Pl(S),this.l=d,this.h=S&&S.messageUrlParams||null,d=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(d?d["X-WebChannel-Content-Type"]=S.messageContentType:d={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(d?d["X-WebChannel-Client-Profile"]=S.va:d={"X-WebChannel-Client-Profile":S.va}),this.g.S=d,(d=S&&S.Sb)&&!$(d)&&(this.g.m=d),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!$(S)&&(this.g.D=S,d=this.h,d!==null&&S in d&&(d=this.h,S in d&&delete d[S])),this.j=new Gi(this)}N(Rn,nt),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){Io(this.g)},Rn.prototype.o=function(d){var S=this.g;if(typeof d=="string"){var R={};R.__data__=d,d=R}else this.u&&(R={},R.__data__=xn(d),d=R);S.i.push(new qs(S.Ya++,d)),S.G==3&&_s(S)},Rn.prototype.N=function(){this.g.l=null,delete this.j,Io(this.g),delete this.g,Rn.aa.N.call(this)};function Cr(d){zi.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var S=d.__sm__;if(S){e:{for(const R in S){d=R;break e}d=void 0}(this.i=d)&&(d=this.i,S=S!==null&&d in S?S[d]:void 0),this.data=S}else this.data=d}N(Cr,zi);function Vl(){Hn.call(this),this.status=1}N(Vl,Hn);function Gi(d){this.g=d}N(Gi,Fa),Gi.prototype.ua=function(){dt(this.g,"a")},Gi.prototype.ta=function(d){dt(this.g,new Cr(d))},Gi.prototype.sa=function(d){dt(this.g,new Vl)},Gi.prototype.ra=function(){dt(this.g,"b")},$s.prototype.createWebChannel=$s.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,zT=function(){return new $s},VT=function(){return Br()},NT=Xn,Rg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jt.NO_ERROR=0,Jt.TIMEOUT=8,Jt.HTTP_ERROR=6,Yf=Jt,bn.COMPLETE="complete",DT=bn,rr.EventType=hi,hi.OPEN="a",hi.CLOSE="b",hi.ERROR="c",hi.MESSAGE="d",nt.prototype.listen=nt.prototype.K,zc=rr,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,PT=Yt}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});const Q0="@firebase/firestore",X0="4.8.0";class _i{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_i.UNAUTHENTICATED=new _i(null),_i.GOOGLE_CREDENTIALS=new _i("google-credentials-uid"),_i.FIRST_PARTY=new _i("first-party-uid"),_i.MOCK_USER=new _i("mock-user");let ju="11.10.0";const Sl=new lv("@firebase/firestore");function mu(){return Sl.logLevel}function Ve(n,...e){if(Sl.logLevel<=St.DEBUG){const t=e.map(bv);Sl.debug(`Firestore (${ju}): ${n}`,...t)}}function bo(n,...e){if(Sl.logLevel<=St.ERROR){const t=e.map(bv);Sl.error(`Firestore (${ju}): ${n}`,...t)}}function Ta(n,...e){if(Sl.logLevel<=St.WARN){const t=e.map(bv);Sl.warn(`Firestore (${ju}): ${n}`,...t)}}function bv(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Xe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,BT(n,r,t)}function BT(n,e,t){let r=`FIRESTORE (${ju}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bo(r),new Error(r)}function Bt(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||BT(e,a,r)}function st(n,e){return n}const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends To{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ba{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class UT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_i.UNAUTHENTICATED)))}shutdown(){}}class Tk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ck{constructor(e){this.t=e,this.currentUser=_i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Bt(this.o===void 0,42304);let r=this.i;const a=v=>this.i!==r?(r=this.i,t(v)):Promise.resolve();let u=new ba;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ba,e.enqueueRetryable((()=>a(this.currentUser)))};const f=()=>{const v=u;e.enqueueRetryable((async()=>{await v.promise,await a(this.currentUser)}))},g=v=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((v=>g(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ba)}}),0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Bt(typeof r.accessToken=="string",31837,{l:r}),new UT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Bt(e===null||typeof e=="string",2055,{h:e}),new _i(e)}}class Ak{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=_i.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xk{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Ak(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(_i.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class J0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Os(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Bt(this.o===void 0,3512);const r=u=>{u.error!=null&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,Ve("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const a=u=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>a(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?a(u):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new J0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Bt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new J0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Rk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function jT(){return new TextEncoder}class wv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=Rk(40);for(let u=0;u<a.length;++u)r.length<20&&a[u]<t&&(r+=e.charAt(a[u]%62))}return r}}function mt(n,e){return n<e?-1:n>e?1:0}function Ig(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return mt(r,a);{const u=jT(),f=Ik(u.encode(eb(n,t)),u.encode(eb(e,t)));return f!==0?f:mt(r,a)}}t+=r>65535?2:1}return mt(n.length,e.length)}function eb(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Ik(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return mt(n[t],e[t]);return mt(n.length,e.length)}function ku(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}const tb="__name__";class ks{constructor(e,t,r){t===void 0?t=0:t>e.length&&Xe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Xe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ks.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ks?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const u=ks.compareSegments(e.get(a),t.get(a));if(u!==0)return u}return mt(e.length,t.length)}static compareSegments(e,t){const r=ks.isNumericId(e),a=ks.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?ks.extractNumericId(e).compare(ks.extractNumericId(t)):Ig(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ea.fromString(e.substring(4,e.length-2))}}class Qt extends ks{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(Se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new Qt(t)}static emptyPath(){return new Qt([])}}const Mk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oi extends ks{construct(e,t,r){return new oi(e,t,r)}static isValidIdentifier(e){return Mk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tb}static keyField(){return new oi([tb])}static fromServerFormat(e){const t=[];let r="",a=0;const u=()=>{if(r.length===0)throw new Ne(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let f=!1;for(;a<e.length;){const g=e[a];if(g==="\\"){if(a+1===e.length)throw new Ne(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[a+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Ne(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,a+=2}else g==="`"?(f=!f,a++):g!=="."||f?(r+=g,a++):(u(),a++)}if(u(),f)throw new Ne(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new oi(t)}static emptyPath(){return new oi([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Qt.fromString(e))}static fromName(e){return new Ge(Qt.fromString(e).popFirst(5))}static empty(){return new Ge(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Qt(e.slice()))}}function FT(n,e,t){if(!t)throw new Ne(Se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kk(n,e,t,r){if(e===!0&&r===!0)throw new Ne(Se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nb(n){if(!Ge.isDocumentKey(n))throw new Ne(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ib(n){if(Ge.isDocumentKey(n))throw new Ne(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function HT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Fd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Xe(12329,{type:typeof n})}function rs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fd(n);throw new Ne(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Nn(n,e){const t={typeString:n};return e&&(t.value=e),t}function bh(n,e){if(!HT(n))throw new Ne(Se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const f=n[r];if(a&&typeof f!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(u!==void 0&&f!==u.value){t=`Expected '${r}' field to equal '${u.value}'`;break}}if(t)throw new Ne(Se.INVALID_ARGUMENT,t);return!0}const rb=-62135596800,sb=1e6;class nn{static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*sb);return new nn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rb)throw new Ne(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sb}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bh(e,nn._jsonSchema))return new nn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nn._jsonSchemaVersion="firestore/timestamp/1.0",nn._jsonSchema={type:Nn("string",nn._jsonSchemaVersion),seconds:Nn("number"),nanoseconds:Nn("number")};class it{static fromTimestamp(e){return new it(e)}static min(){return new it(new nn(0,0))}static max(){return new it(new nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const nh=-1;function Ok(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=it.fromTimestamp(r===1e9?new nn(t+1,0):new nn(t,r));return new Ca(a,Ge.empty(),e)}function Pk(n){return new Ca(n.readTime,n.key,nh)}class Ca{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ca(it.min(),Ge.empty(),nh)}static max(){return new Ca(it.max(),Ge.empty(),nh)}}function Dk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ge.comparator(n.documentKey,e.documentKey),t!==0?t:mt(n.largestBatchId,e.largestBatchId))}const Nk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Fu(n){if(n.code!==Se.FAILED_PRECONDITION||n.message!==Nk)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe(((r,a)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,a)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(t){return xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.reject(t)}static resolve(e){return new xe(((t,r)=>{t(e)}))}static reject(e){return new xe(((t,r)=>{r(e)}))}static waitFor(e){return new xe(((t,r)=>{let a=0,u=0,f=!1;e.forEach((g=>{++a,g.next((()=>{++u,f&&u===a&&t()}),(v=>r(v)))})),f=!0,u===a&&t()}))}static or(e){let t=xe.resolve(!1);for(const r of e)t=t.next((a=>a?xe.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,u)=>{r.push(t.call(this,a,u))})),this.waitFor(r)}static mapArray(e,t){return new xe(((r,a)=>{const u=e.length,f=new Array(u);let g=0;for(let v=0;v<u;v++){const _=v;t(e[_]).next((w=>{f[_]=w,++g,g===u&&r(f)}),(w=>a(w)))}}))}static doWhile(e,t){return new xe(((r,a)=>{const u=()=>{e()===!0?t().next((()=>{u()}),a):r()};u()}))}}function zk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Hu(n){return n.name==="IndexedDbTransactionError"}class Hd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Hd.ue=-1;const Sv=-1;function qd(n){return n==null}function md(n){return n===0&&1/n==-1/0}function Bk(n){return typeof n=="number"&&Number.isInteger(n)&&!md(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const qT="";function Uk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ob(e)),e=jk(n.get(t),e);return ob(e)}function jk(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const u=n.charAt(a);switch(u){case"\0":t+="";break;case qT:t+="";break;default:t+=u}}return t}function ob(n){return n+qT+""}function ab(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ma(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mn{constructor(e,t){this.comparator=e,this.root=t||si.EMPTY}insert(e,t){return new mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,si.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Df(this.root,e,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Df(this.root,e,this.comparator,!0)}}class Df{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&a&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class si{constructor(e,t,r,a,u){this.key=e,this.value=t,this.color=r??si.RED,this.left=a??si.EMPTY,this.right=u??si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,u){return new si(e??this.key,t??this.value,r??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const u=r(e,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(e,t,r),null):u===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return si.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Xe(27949);return e+(this.isRed()?0:1)}}si.EMPTY=null,si.RED=!0,si.BLACK=!1;si.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe(57766)}get value(){throw Xe(16141)}get color(){throw Xe(16727)}get left(){throw Xe(29726)}get right(){throw Xe(36894)}copy(e,t,r,a,u){return this}insert(e,t,r){return new si(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lb(this.data.getIterator())}getIteratorFrom(e){return new lb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=r.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class lb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class vr{constructor(e){this.fields=e,e.sort(oi.comparator)}static empty(){return new vr([])}unionWith(e){let t=new jn(oi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new vr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ku(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class GT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class li{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new GT("Invalid base64 string: "+u):u}})(e);return new li(t)}static fromUint8Array(e){const t=(function(a){let u="";for(let f=0;f<a.length;++f)u+=String.fromCharCode(a[f]);return u})(e);return new li(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}li.EMPTY_BYTE_STRING=new li("");const Fk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Aa(n){if(Bt(!!n,39018),typeof n=="string"){let e=0;const t=Fk.exec(n);if(Bt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Cn(n.seconds),nanos:Cn(n.nanos)}}function Cn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xa(n){return typeof n=="string"?li.fromBase64String(n):li.fromUint8Array(n)}const WT="server_timestamp",KT="__type__",YT="__previous_value__",$T="__local_write_time__";function Tv(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[KT])===null||t===void 0?void 0:t.stringValue)===WT}function Zd(n){const e=n.mapValue.fields[YT];return Tv(e)?Zd(e):e}function ih(n){const e=Aa(n.mapValue.fields[$T].timestampValue);return new nn(e.seconds,e.nanos)}class Hk{constructor(e,t,r,a,u,f,g,v,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=_,this.isUsingEmulator=w}}const gd="(default)";class rh{constructor(e,t){this.projectId=e,this.database=t||gd}static empty(){return new rh("","")}get isDefaultDatabase(){return this.database===gd}isEqual(e){return e instanceof rh&&e.projectId===this.projectId&&e.database===this.database}}const QT="__type__",qk="__max__",Nf={mapValue:{}},XT="__vector__",vd="value";function La(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tv(n)?4:Gk(n)?9007199254740991:Zk(n)?10:11:Xe(28295,{value:n})}function Us(n,e){if(n===e)return!0;const t=La(n);if(t!==La(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ih(n).isEqual(ih(e));case 3:return(function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const f=Aa(a.timestampValue),g=Aa(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,u){return xa(a.bytesValue).isEqual(xa(u.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,u){return Cn(a.geoPointValue.latitude)===Cn(u.geoPointValue.latitude)&&Cn(a.geoPointValue.longitude)===Cn(u.geoPointValue.longitude)})(n,e);case 2:return(function(a,u){if("integerValue"in a&&"integerValue"in u)return Cn(a.integerValue)===Cn(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const f=Cn(a.doubleValue),g=Cn(u.doubleValue);return f===g?md(f)===md(g):isNaN(f)&&isNaN(g)}return!1})(n,e);case 9:return ku(n.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:case 11:return(function(a,u){const f=a.mapValue.fields||{},g=u.mapValue.fields||{};if(ab(f)!==ab(g))return!1;for(const v in f)if(f.hasOwnProperty(v)&&(g[v]===void 0||!Us(f[v],g[v])))return!1;return!0})(n,e);default:return Xe(52216,{left:n})}}function sh(n,e){return(n.values||[]).find((t=>Us(t,e)))!==void 0}function Ou(n,e){if(n===e)return 0;const t=La(n),r=La(e);if(t!==r)return mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return mt(n.booleanValue,e.booleanValue);case 2:return(function(u,f){const g=Cn(u.integerValue||u.doubleValue),v=Cn(f.integerValue||f.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1})(n,e);case 3:return ub(n.timestampValue,e.timestampValue);case 4:return ub(ih(n),ih(e));case 5:return Ig(n.stringValue,e.stringValue);case 6:return(function(u,f){const g=xa(u),v=xa(f);return g.compareTo(v)})(n.bytesValue,e.bytesValue);case 7:return(function(u,f){const g=u.split("/"),v=f.split("/");for(let _=0;_<g.length&&_<v.length;_++){const w=mt(g[_],v[_]);if(w!==0)return w}return mt(g.length,v.length)})(n.referenceValue,e.referenceValue);case 8:return(function(u,f){const g=mt(Cn(u.latitude),Cn(f.latitude));return g!==0?g:mt(Cn(u.longitude),Cn(f.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return cb(n.arrayValue,e.arrayValue);case 10:return(function(u,f){var g,v,_,w;const T=u.fields||{},I=f.fields||{},V=(g=T[vd])===null||g===void 0?void 0:g.arrayValue,N=(v=I[vd])===null||v===void 0?void 0:v.arrayValue,H=mt(((_=V?.values)===null||_===void 0?void 0:_.length)||0,((w=N?.values)===null||w===void 0?void 0:w.length)||0);return H!==0?H:cb(V,N)})(n.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Nf.mapValue&&f===Nf.mapValue)return 0;if(u===Nf.mapValue)return 1;if(f===Nf.mapValue)return-1;const g=u.fields||{},v=Object.keys(g),_=f.fields||{},w=Object.keys(_);v.sort(),w.sort();for(let T=0;T<v.length&&T<w.length;++T){const I=Ig(v[T],w[T]);if(I!==0)return I;const V=Ou(g[v[T]],_[w[T]]);if(V!==0)return V}return mt(v.length,w.length)})(n.mapValue,e.mapValue);default:throw Xe(23264,{le:t})}}function ub(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return mt(n,e);const t=Aa(n),r=Aa(e),a=mt(t.seconds,r.seconds);return a!==0?a:mt(t.nanos,r.nanos)}function cb(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const u=Ou(t[a],r[a]);if(u)return u}return mt(t.length,r.length)}function Pu(n){return Mg(n)}function Mg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Aa(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return xa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ge.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const u of t.values||[])a?a=!1:r+=",",r+=Mg(u);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",u=!0;for(const f of r)u?u=!1:a+=",",a+=`${f}:${Mg(t.fields[f])}`;return a+"}"})(n.mapValue):Xe(61005,{value:n})}function $f(n){switch(La(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zd(n);return e?16+$f(e):16;case 5:return 2*n.stringValue.length;case 6:return xa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,u)=>a+$f(u)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return Ma(r.fields,((u,f)=>{a+=u.length+$f(f)})),a})(n.mapValue);default:throw Xe(13486,{value:n})}}function hb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kg(n){return!!n&&"integerValue"in n}function Cv(n){return!!n&&"arrayValue"in n}function fb(n){return!!n&&"nullValue"in n}function db(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qf(n){return!!n&&"mapValue"in n}function Zk(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[QT])===null||t===void 0?void 0:t.stringValue)===XT}function Wc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ma(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Wc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Gk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===qk}class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wc(t)}setAll(e){let t=oi.emptyPath(),r={},a=[];e.forEach(((f,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,a),r={},a=[],t=g.popLast()}f?r[g.lastSegment()]=Wc(f):a.push(g.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,r,a)}delete(e){const t=this.field(e.popLast());Qf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Us(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Qf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ma(t,((a,u)=>e[a]=u));for(const a of r)delete e[a]}clone(){return new nr(Wc(this.value))}}function JT(n){const e=[];return Ma(n.fields,((t,r)=>{const a=new oi([t]);if(Qf(r)){const u=JT(r.mapValue).fields;if(u.length===0)e.push(a);else for(const f of u)e.push(a.child(f))}else e.push(a)})),new vr(e)}class Ei{constructor(e,t,r,a,u,f,g){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(e){return new Ei(e,0,it.min(),it.min(),it.min(),nr.empty(),0)}static newFoundDocument(e,t,r,a){return new Ei(e,1,t,it.min(),r,a,0)}static newNoDocument(e,t){return new Ei(e,2,t,it.min(),it.min(),nr.empty(),0)}static newUnknownDocument(e,t){return new Ei(e,3,t,it.min(),it.min(),nr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ei&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ei(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yd{constructor(e,t){this.position=e,this.inclusive=t}}function pb(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const u=e[a],f=n.position[a];if(u.field.isKeyField()?r=Ge.comparator(Ge.fromName(f.referenceValue),t.key):r=Ou(f,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function mb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Us(n.position[t],e.position[t]))return!1;return!0}class oh{constructor(e,t="asc"){this.field=e,this.dir=t}}function Wk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class eC{}class Dn extends eC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Yk(e,t,r):t==="array-contains"?new Xk(e,r):t==="in"?new Jk(e,r):t==="not-in"?new eO(e,r):t==="array-contains-any"?new tO(e,r):new Dn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $k(e,r):new Qk(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ou(t,this.value)):t!==null&&La(this.value)===La(t)&&this.matchesComparison(Ou(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class os extends eC{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new os(e,t)}matches(e){return tC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function tC(n){return n.op==="and"}function nC(n){return Kk(n)&&tC(n)}function Kk(n){for(const e of n.filters)if(e instanceof os)return!1;return!0}function Og(n){if(n instanceof Dn)return n.field.canonicalString()+n.op.toString()+Pu(n.value);if(nC(n))return n.filters.map((e=>Og(e))).join(",");{const e=n.filters.map((t=>Og(t))).join(",");return`${n.op}(${e})`}}function iC(n,e){return n instanceof Dn?(function(r,a){return a instanceof Dn&&r.op===a.op&&r.field.isEqual(a.field)&&Us(r.value,a.value)})(n,e):n instanceof os?(function(r,a){return a instanceof os&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((u,f,g)=>u&&iC(f,a.filters[g])),!0):!1})(n,e):void Xe(19439)}function rC(n){return n instanceof Dn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Pu(t.value)}`})(n):n instanceof os?(function(t){return t.op.toString()+" {"+t.getFilters().map(rC).join(" ,")+"}"})(n):"Filter"}class Yk extends Dn{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class $k extends Dn{constructor(e,t){super(e,"in",t),this.keys=sC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Qk extends Dn{constructor(e,t){super(e,"not-in",t),this.keys=sC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function sC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Ge.fromName(r.referenceValue)))}class Xk extends Dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cv(t)&&sh(t.arrayValue,this.value)}}class Jk extends Dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&sh(this.value.arrayValue,t)}}class eO extends Dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(sh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!sh(this.value.arrayValue,t)}}class tO extends Dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>sh(this.value.arrayValue,r)))}}class nO{constructor(e,t=null,r=[],a=[],u=null,f=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=u,this.startAt=f,this.endAt=g,this.Pe=null}}function gb(n,e=null,t=[],r=[],a=null,u=null,f=null){return new nO(n,e,t,r,a,u,f)}function Av(n){const e=st(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Og(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),qd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Pu(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Pu(r))).join(",")),e.Pe=t}return e.Pe}function xv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Wk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mb(n.startAt,e.startAt)&&mb(n.endAt,e.endAt)}function Pg(n){return Ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class qu{constructor(e,t=null,r=[],a=[],u=null,f="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=v,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function iO(n,e,t,r,a,u,f,g){return new qu(n,e,t,r,a,u,f,g)}function Gd(n){return new qu(n)}function vb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oC(n){return n.collectionGroup!==null}function Kc(n){const e=st(n);if(e.Te===null){e.Te=[];const t=new Set;for(const u of e.explicitOrderBy)e.Te.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new jn(oi.comparator);return f.filters.forEach((v=>{v.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Te.push(new oh(u,r))})),t.has(oi.keyField().canonicalString())||e.Te.push(new oh(oi.keyField(),r))}return e.Te}function Ns(n){const e=st(n);return e.Ie||(e.Ie=rO(e,Kc(n))),e.Ie}function rO(n,e){if(n.limitType==="F")return gb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const u=a.dir==="desc"?"asc":"desc";return new oh(a.field,u)}));const t=n.endAt?new yd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new yd(n.startAt.position,n.startAt.inclusive):null;return gb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Dg(n,e){const t=n.filters.concat([e]);return new qu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ng(n,e,t){return new qu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wd(n,e){return xv(Ns(n),Ns(e))&&n.limitType===e.limitType}function aC(n){return`${Av(Ns(n))}|lt:${n.limitType}`}function gu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>rC(a))).join(", ")}]`),qd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Pu(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Pu(a))).join(",")),`Target(${r})`})(Ns(n))}; limitType=${n.limitType})`}function Kd(n,e){return e.isFoundDocument()&&(function(r,a){const u=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Ge.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(n,e)&&(function(r,a){for(const u of Kc(r))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const u of r.filters)if(!u.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(f,g,v){const _=pb(f,g,v);return f.inclusive?_<=0:_<0})(r.startAt,Kc(r),a)||r.endAt&&!(function(f,g,v){const _=pb(f,g,v);return f.inclusive?_>=0:_>0})(r.endAt,Kc(r),a))})(n,e)}function sO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lC(n){return(e,t)=>{let r=!1;for(const a of Kc(n)){const u=oO(a,e,t);if(u!==0)return u;r=r||a.field.isKeyField()}return 0}}function oO(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):(function(u,f,g){const v=f.data.field(u),_=g.data.field(u);return v!==null&&_!==null?Ou(v,_):Xe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe(19790,{direction:n.dir})}}class Rl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,u]of r)if(this.equalsFn(a,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return void(a[u]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ma(this.inner,((t,r)=>{for(const[a,u]of r)e(a,u)}))}isEmpty(){return ZT(this.inner)}size(){return this.innerSize}}const aO=new mn(Ge.comparator);function wo(){return aO}const uC=new mn(Ge.comparator);function Bc(...n){let e=uC;for(const t of n)e=e.insert(t.key,t);return e}function cC(n){let e=uC;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function gl(){return Yc()}function hC(){return Yc()}function Yc(){return new Rl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const lO=new mn(Ge.comparator),uO=new jn(Ge.comparator);function Tt(...n){let e=uO;for(const t of n)e=e.add(t);return e}const cO=new jn(mt);function hO(){return cO}function Lv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:md(e)?"-0":e}}function fC(n){return{integerValue:""+n}}function fO(n,e){return Bk(e)?fC(e):Lv(n,e)}class Yd{constructor(){this._=void 0}}function dO(n,e,t){return n instanceof ah?(function(a,u){const f={fields:{[KT]:{stringValue:WT},[$T]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&Tv(u)&&(u=Zd(u)),u&&(f.fields[YT]=u),{mapValue:f}})(t,e):n instanceof lh?pC(n,e):n instanceof uh?mC(n,e):(function(a,u){const f=dC(a,u),g=yb(f)+yb(a.Ee);return kg(f)&&kg(a.Ee)?fC(g):Lv(a.serializer,g)})(n,e)}function pO(n,e,t){return n instanceof lh?pC(n,e):n instanceof uh?mC(n,e):t}function dC(n,e){return n instanceof _d?(function(r){return kg(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class ah extends Yd{}class lh extends Yd{constructor(e){super(),this.elements=e}}function pC(n,e){const t=gC(e);for(const r of n.elements)t.some((a=>Us(a,r)))||t.push(r);return{arrayValue:{values:t}}}class uh extends Yd{constructor(e){super(),this.elements=e}}function mC(n,e){let t=gC(e);for(const r of n.elements)t=t.filter((a=>!Us(a,r)));return{arrayValue:{values:t}}}class _d extends Yd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function yb(n){return Cn(n.integerValue||n.doubleValue)}function gC(n){return Cv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class mO{constructor(e,t){this.field=e,this.transform=t}}function gO(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof lh&&a instanceof lh||r instanceof uh&&a instanceof uh?ku(r.elements,a.elements,Us):r instanceof _d&&a instanceof _d?Us(r.Ee,a.Ee):r instanceof ah&&a instanceof ah})(n.transform,e.transform)}class vO{constructor(e,t){this.version=e,this.transformResults=t}}class ss{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ss}static exists(e){return new ss(void 0,e)}static updateTime(e){return new ss(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class $d{}function vC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _C(n.key,ss.none()):new wh(n.key,n.data,ss.none());{const t=n.data,r=nr.empty();let a=new jn(oi.comparator);for(let u of e.fields)if(!a.has(u)){let f=t.field(u);f===null&&u.length>1&&(u=u.popLast(),f=t.field(u)),f===null?r.delete(u):r.set(u,f),a=a.add(u)}return new ka(n.key,r,new vr(a.toArray()),ss.none())}}function yO(n,e,t){n instanceof wh?(function(a,u,f){const g=a.value.clone(),v=Eb(a.fieldTransforms,u,f.transformResults);g.setAll(v),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(n,e,t):n instanceof ka?(function(a,u,f){if(!Xf(a.precondition,u))return void u.convertToUnknownDocument(f.version);const g=Eb(a.fieldTransforms,u,f.transformResults),v=u.data;v.setAll(yC(a)),v.setAll(g),u.convertToFoundDocument(f.version,v).setHasCommittedMutations()})(n,e,t):(function(a,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,t)}function $c(n,e,t,r){return n instanceof wh?(function(u,f,g,v){if(!Xf(u.precondition,f))return g;const _=u.value.clone(),w=bb(u.fieldTransforms,v,f);return _.setAll(w),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(n,e,t,r):n instanceof ka?(function(u,f,g,v){if(!Xf(u.precondition,f))return g;const _=bb(u.fieldTransforms,v,f),w=f.data;return w.setAll(yC(u)),w.setAll(_),f.convertToFoundDocument(f.version,w).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(n,e,t,r):(function(u,f,g){return Xf(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(n,e,t)}function _O(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),u=dC(r.transform,a||null);u!=null&&(t===null&&(t=nr.empty()),t.set(r.field,u))}return t||null}function _b(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&ku(r,a,((u,f)=>gO(u,f)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class wh extends $d{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ka extends $d{constructor(e,t,r,a,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function yC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Eb(n,e,t){const r=new Map;Bt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let a=0;a<t.length;a++){const u=n[a],f=u.transform,g=e.data.field(u.field);r.set(u.field,pO(f,g,t[a]))}return r}function bb(n,e,t){const r=new Map;for(const a of n){const u=a.transform,f=t.data.field(a.field);r.set(a.field,dO(u,f,e))}return r}class _C extends $d{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EO extends $d{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bO{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(e.key)&&yO(u,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=$c(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=$c(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=hC();return this.mutations.forEach((a=>{const u=e.get(a.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=t.has(a.key)?null:g;const v=vC(f,g);v!==null&&r.set(a.key,v),f.isValidDocument()||f.convertToNoDocument(it.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Tt())}isEqual(e){return this.batchId===e.batchId&&ku(this.mutations,e.mutations,((t,r)=>_b(t,r)))&&ku(this.baseMutations,e.baseMutations,((t,r)=>_b(t,r)))}}class Rv{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Bt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let a=(function(){return lO})();const u=e.mutations;for(let f=0;f<u.length;f++)a=a.insert(u[f].key,r[f].version);return new Rv(e,t,r,a)}}class wO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class SO{constructor(e,t){this.count=e,this.unchangedNames=t}}var Pn,Lt;function TO(n){switch(n){case Se.OK:return Xe(64938);case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return Xe(15467,{code:n})}}function EC(n){if(n===void 0)return bo("GRPC error has no .code"),Se.UNKNOWN;switch(n){case Pn.OK:return Se.OK;case Pn.CANCELLED:return Se.CANCELLED;case Pn.UNKNOWN:return Se.UNKNOWN;case Pn.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case Pn.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case Pn.INTERNAL:return Se.INTERNAL;case Pn.UNAVAILABLE:return Se.UNAVAILABLE;case Pn.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case Pn.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case Pn.NOT_FOUND:return Se.NOT_FOUND;case Pn.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case Pn.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case Pn.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case Pn.ABORTED:return Se.ABORTED;case Pn.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case Pn.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case Pn.DATA_LOSS:return Se.DATA_LOSS;default:return Xe(39323,{code:n})}}(Lt=Pn||(Pn={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";const CO=new Ea([4294967295,4294967295],0);function wb(n){const e=jT().encode(n),t=new OT;return t.update(e),new Uint8Array(t.digest())}function Sb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ea([t,r],0),new Ea([a,u],0)]}class Iv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Uc(`Invalid padding: ${t}`);if(r<0)throw new Uc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Uc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Uc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ea.fromNumber(this.fe)}pe(e,t,r){let a=e.add(t.multiply(Ea.fromNumber(r)));return a.compare(CO)===1&&(a=new Ea([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=wb(e),[r,a]=Sb(t);for(let u=0;u<this.hashCount;u++){const f=this.pe(r,a,u);if(!this.ye(f))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Iv(u,a,t);return r.forEach((g=>f.insert(g))),f}insert(e){if(this.fe===0)return;const t=wb(e),[r,a]=Sb(t);for(let u=0;u<this.hashCount;u++){const f=this.pe(r,a,u);this.we(f)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Uc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qd{constructor(e,t,r,a,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Sh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qd(it.min(),a,new mn(mt),wo(),Tt())}}class Sh{constructor(e,t,r,a,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Sh(r,t,Tt(),Tt(),Tt())}}class Jf{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=a}}class bC{constructor(e,t){this.targetId=e,this.De=t}}class wC{constructor(e,t,r=li.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class Tb{constructor(){this.ve=0,this.Ce=Cb(),this.Fe=li.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Tt(),t=Tt(),r=Tt();return this.Ce.forEach(((a,u)=>{switch(u){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Xe(38017,{changeType:u})}})),new Sh(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Cb()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Bt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class AO{constructor(e){this.We=e,this.Ge=new Map,this.ze=wo(),this.je=Vf(),this.Je=Vf(),this.He=new mn(mt)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,a)=>{this.nt(a)&&t(a)}))}it(e){const t=e.targetId,r=e.De.count,a=this.st(t);if(a){const u=a.target;if(Pg(u))if(r===0){const f=new Ge(u.path);this.Xe(t,f,Ei.newNoDocument(f,it.min()))}else Bt(r===1,20013,{expectedCount:r});else{const f=this.ot(t);if(f!==r){const g=this._t(e),v=g?this.ut(g,e,f):1;if(v!==0){this.rt(t);const _=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,_)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:u=0}=t;let f,g;try{f=xa(r).toUint8Array()}catch(v){if(v instanceof GT)return Ta("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new Iv(f,a,u)}catch(v){return Ta(v instanceof Uc?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.fe===0?null:g}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let a=0;return r.forEach((u=>{const f=this.We.lt(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.Xe(t,u,null),a++)})),a}Pt(e){const t=new Map;this.Ge.forEach(((u,f)=>{const g=this.st(f);if(g){if(u.current&&Pg(g.target)){const v=new Ge(g.target.path);this.Tt(v).has(f)||this.It(f,v)||this.Xe(f,v,Ei.newNoDocument(v,e))}u.Ne&&(t.set(f,u.Le()),u.ke())}}));let r=Tt();this.Je.forEach(((u,f)=>{let g=!0;f.forEachWhile((v=>{const _=this.st(v);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(u))})),this.ze.forEach(((u,f)=>f.setReadTime(e)));const a=new Qd(e,t,this.He,this.ze,r);return this.ze=wo(),this.je=Vf(),this.Je=Vf(),this.He=new mn(mt),a}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Tb,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new jn(mt),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new jn(mt),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Tb),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Vf(){return new mn(Ge.comparator)}function Cb(){return new mn(Ge.comparator)}const xO={asc:"ASCENDING",desc:"DESCENDING"},LO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RO={and:"AND",or:"OR"};class IO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vg(n,e){return n.useProto3Json||qd(e)?e:{value:e}}function Ed(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function MO(n,e){return Ed(n,e.toTimestamp())}function Vs(n){return Bt(!!n,49232),it.fromTimestamp((function(t){const r=Aa(t);return new nn(r.seconds,r.nanos)})(n))}function Mv(n,e){return zg(n,e).canonicalString()}function zg(n,e){const t=(function(a){return new Qt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function TC(n){const e=Qt.fromString(n);return Bt(RC(e),10190,{key:e.toString()}),e}function Bg(n,e){return Mv(n.databaseId,e.path)}function sg(n,e){const t=TC(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(AC(t))}function CC(n,e){return Mv(n.databaseId,e)}function kO(n){const e=TC(n);return e.length===4?Qt.emptyPath():AC(e)}function Ug(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AC(n){return Bt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Ab(n,e,t){return{name:Bg(n,e),fields:t.value.mapValue.fields}}function OO(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Xe(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],u=(function(_,w){return _.useProto3Json?(Bt(w===void 0||typeof w=="string",58123),li.fromBase64String(w||"")):(Bt(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),li.fromUint8Array(w||new Uint8Array))})(n,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&(function(_){const w=_.code===void 0?Se.UNKNOWN:EC(_.code);return new Ne(w,_.message||"")})(f);t=new wC(r,a,u,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=sg(n,r.document.name),u=Vs(r.document.updateTime),f=r.document.createTime?Vs(r.document.createTime):it.min(),g=new nr({mapValue:{fields:r.document.fields}}),v=Ei.newFoundDocument(a,u,f,g),_=r.targetIds||[],w=r.removedTargetIds||[];t=new Jf(_,w,v.key,v)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=sg(n,r.document),u=r.readTime?Vs(r.readTime):it.min(),f=Ei.newNoDocument(a,u),g=r.removedTargetIds||[];t=new Jf([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=sg(n,r.document),u=r.removedTargetIds||[];t=new Jf([],u,a,null)}else{if(!("filter"in e))return Xe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:u}=r,f=new SO(a,u),g=r.targetId;t=new bC(g,f)}}return t}function PO(n,e){let t;if(e instanceof wh)t={update:Ab(n,e.key,e.value)};else if(e instanceof _C)t={delete:Bg(n,e.key)};else if(e instanceof ka)t={update:Ab(n,e.key,e.data),updateMask:HO(e.fieldMask)};else{if(!(e instanceof EO))return Xe(16599,{Rt:e.type});t={verify:Bg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const g=f.transform;if(g instanceof ah)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof lh)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof uh)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof _d)return{fieldPath:f.field.canonicalString(),increment:g.Ee};throw Xe(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,u){return u.updateTime!==void 0?{updateTime:MO(a,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Xe(27497)})(n,e.precondition)),t}function DO(n,e){return n&&n.length>0?(Bt(e!==void 0,14353),n.map((t=>(function(a,u){let f=a.updateTime?Vs(a.updateTime):Vs(u);return f.isEqual(it.min())&&(f=Vs(u)),new vO(f,a.transformResults||[])})(t,e)))):[]}function NO(n,e){return{documents:[CC(n,e.path)]}}function VO(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=CC(n,a);const u=(function(_){if(_.length!==0)return LC(os.create(_,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const f=(function(_){if(_.length!==0)return _.map((w=>(function(I){return{field:vu(I.field),direction:UO(I.dir)}})(w)))})(e.orderBy);f&&(t.structuredQuery.orderBy=f);const g=Vg(n,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{Vt:t,parent:a}}function zO(n){let e=kO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Bt(r===1,65062);const w=t.from[0];w.allDescendants?a=w.collectionId:e=e.child(w.collectionId)}let u=[];t.where&&(u=(function(T){const I=xC(T);return I instanceof os&&nC(I)?I.getFilters():[I]})(t.where));let f=[];t.orderBy&&(f=(function(T){return T.map((I=>(function(N){return new oh(yu(N.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(I)))})(t.orderBy));let g=null;t.limit&&(g=(function(T){let I;return I=typeof T=="object"?T.value:T,qd(I)?null:I})(t.limit));let v=null;t.startAt&&(v=(function(T){const I=!!T.before,V=T.values||[];return new yd(V,I)})(t.startAt));let _=null;return t.endAt&&(_=(function(T){const I=!T.before,V=T.values||[];return new yd(V,I)})(t.endAt)),iO(e,a,f,u,g,"F",v,_)}function BO(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=yu(t.unaryFilter.field);return Dn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=yu(t.unaryFilter.field);return Dn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=yu(t.unaryFilter.field);return Dn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=yu(t.unaryFilter.field);return Dn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xe(61313);default:return Xe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Dn.create(yu(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xe(58110);default:return Xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return os.create(t.compositeFilter.filters.map((r=>xC(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Xe(1026)}})(t.compositeFilter.op))})(n):Xe(30097,{filter:n})}function UO(n){return xO[n]}function jO(n){return LO[n]}function FO(n){return RO[n]}function vu(n){return{fieldPath:n.canonicalString()}}function yu(n){return oi.fromServerFormat(n.fieldPath)}function LC(n){return n instanceof Dn?(function(t){if(t.op==="=="){if(db(t.value))return{unaryFilter:{field:vu(t.field),op:"IS_NAN"}};if(fb(t.value))return{unaryFilter:{field:vu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(db(t.value))return{unaryFilter:{field:vu(t.field),op:"IS_NOT_NAN"}};if(fb(t.value))return{unaryFilter:{field:vu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vu(t.field),op:jO(t.op),value:t.value}}})(n):n instanceof os?(function(t){const r=t.getFilters().map((a=>LC(a)));return r.length===1?r[0]:{compositeFilter:{op:FO(t.op),filters:r}}})(n):Xe(54877,{filter:n})}function HO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function RC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class ma{constructor(e,t,r,a,u=it.min(),f=it.min(),g=li.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new ma(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qO{constructor(e){this.gt=e}}function ZO(n){const e=zO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ng(e,e.limit,"L"):e}class GO{constructor(){this.Dn=new WO}addToCollectionParentIndex(e,t){return this.Dn.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(Ca.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(Ca.min())}updateCollectionGroup(e,t,r){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}}class WO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new jn(Qt.comparator),u=!a.has(r);return this.index[t]=a.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new jn(Qt.comparator)).toArray()}}const xb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IC=41943040;class tr{static withCacheSize(e){return new tr(e,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}tr.DEFAULT_COLLECTION_PERCENTILE=10,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tr.DEFAULT=new tr(IC,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tr.DISABLED=new tr(-1,0,0);class Du{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Du(0)}static ur(){return new Du(-1)}}const Lb="LruGarbageCollector",KO=1048576;function Rb([n,e],[t,r]){const a=mt(n,t);return a===0?mt(e,r):a}class YO{constructor(e){this.Tr=e,this.buffer=new jn(Rb),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Rb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $O{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ve(Lb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hu(t)?Ve(Lb,"Ignoring IndexedDB error during garbage collection: ",t):await Fu(t)}await this.Rr(3e5)}))}}class QO{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return xe.resolve(Hd.ue);const r=new YO(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(xb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xb):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,a,u,f,g,v,_;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,f=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(r=T,g=Date.now(),this.removeTargets(e,r,t)))).next((T=>(u=T,v=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(_=Date.now(),mu()<=St.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-w}ms
	Determined least recently used ${a} in `+(g-f)+`ms
	Removed ${u} targets in `+(v-g)+`ms
	Removed ${T} documents in `+(_-v)+`ms
Total Duration: ${_-w}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:T}))))}}function XO(n,e){return new QO(n,e)}class JO{constructor(){this.changes=new Rl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ei.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?xe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class tP{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&$c(r.mutation,a,vr.empty(),nn.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Tt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Tt()){const a=gl();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((u=>{let f=Bc();return u.forEach(((g,v)=>{f=f.insert(g,v.overlayedDocument)})),f}))))}getOverlayedDocuments(e,t){const r=gl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Tt())))}populateOverlays(e,t,r){const a=[];return r.forEach((u=>{t.has(u)||a.push(u)})),this.documentOverlayCache.getOverlays(e,a).next((u=>{u.forEach(((f,g)=>{t.set(f,g)}))}))}computeViews(e,t,r,a){let u=wo();const f=Yc(),g=(function(){return Yc()})();return t.forEach(((v,_)=>{const w=r.get(_.key);a.has(_.key)&&(w===void 0||w.mutation instanceof ka)?u=u.insert(_.key,_):w!==void 0?(f.set(_.key,w.mutation.getFieldMask()),$c(w.mutation,_,w.mutation.getFieldMask(),nn.now())):f.set(_.key,vr.empty())})),this.recalculateAndSaveOverlays(e,u).next((v=>(v.forEach(((_,w)=>f.set(_,w))),t.forEach(((_,w)=>{var T;return g.set(_,new eP(w,(T=f.get(_))!==null&&T!==void 0?T:null))})),g)))}recalculateAndSaveOverlays(e,t){const r=Yc();let a=new mn(((f,g)=>f-g)),u=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((f=>{for(const g of f)g.keys().forEach((v=>{const _=t.get(v);if(_===null)return;let w=r.get(v)||vr.empty();w=g.applyToLocalView(_,w),r.set(v,w);const T=(a.get(g.batchId)||Tt()).add(v);a=a.insert(g.batchId,T)}))})).next((()=>{const f=[],g=a.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),_=v.key,w=v.value,T=hC();w.forEach((I=>{if(!u.has(I)){const V=vC(t.get(I),r.get(I));V!==null&&T.set(I,V),u=u.add(I)}})),f.push(this.documentOverlayCache.saveOverlays(e,_,T))}return xe.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(f){return Ge.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):oC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((u=>{const f=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-u.size):xe.resolve(gl());let g=nh,v=u;return f.next((_=>xe.forEach(_,((w,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),u.get(w)?xe.resolve():this.remoteDocumentCache.getEntry(e,w).next((I=>{v=v.insert(w,I)}))))).next((()=>this.populateOverlays(e,_,u))).next((()=>this.computeViews(e,v,_,Tt()))).next((w=>({batchId:g,changes:cC(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next((r=>{let a=Bc();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const u=t.collectionGroup;let f=Bc();return this.indexManager.getCollectionParents(e,u).next((g=>xe.forEach(g,(v=>{const _=(function(T,I){return new qu(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,v.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,r,a).next((w=>{w.forEach(((T,I)=>{f=f.insert(T,I)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,a)))).next((f=>{u.forEach(((v,_)=>{const w=_.getKey();f.get(w)===null&&(f=f.insert(w,Ei.newInvalidDocument(w)))}));let g=Bc();return f.forEach(((v,_)=>{const w=u.get(v);w!==void 0&&$c(w.mutation,_,vr.empty(),nn.now()),Kd(t,_)&&(g=g.insert(v,_))})),g}))}}class nP{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return xe.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Vs(a.createTime)}})(t)),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(a){return{name:a.name,query:ZO(a.bundledQuery),readTime:Vs(a.readTime)}})(t)),xe.resolve()}}class iP{constructor(){this.overlays=new mn(Ge.comparator),this.kr=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gl();return xe.forEach(t,(a=>this.getOverlay(e,a).next((u=>{u!==null&&r.set(a,u)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,u)=>{this.wt(e,t,u)})),xe.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.kr.get(r);return a!==void 0&&(a.forEach((u=>this.overlays=this.overlays.remove(u))),this.kr.delete(r)),xe.resolve()}getOverlaysForCollection(e,t,r){const a=gl(),u=t.length+1,f=new Ge(t.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const v=g.getNext().value,_=v.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===u&&v.largestBatchId>r&&a.set(v.getKey(),v)}return xe.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let u=new mn(((_,w)=>_-w));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let w=u.get(_.largestBatchId);w===null&&(w=gl(),u=u.insert(_.largestBatchId,w)),w.set(_.getKey(),_)}}const g=gl(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((_,w)=>g.set(_,w))),!(g.size()>=a)););return xe.resolve(g)}wt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const f=this.kr.get(a.largestBatchId).delete(r.key);this.kr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new wO(t,r));let u=this.kr.get(t);u===void 0&&(u=Tt(),this.kr.set(t,u)),this.kr.set(t,u.add(r.key))}}class rP{constructor(){this.sessionToken=li.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,xe.resolve()}}class kv{constructor(){this.qr=new jn(Qn.Qr),this.$r=new jn(Qn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Qn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Qn(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new Ge(new Qt([])),r=new Qn(t,e),a=new Qn(t,e+1),u=[];return this.$r.forEachInRange([r,a],(f=>{this.Wr(f),u.push(f.key)})),u}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ge(new Qt([])),r=new Qn(t,e),a=new Qn(t,e+1);let u=Tt();return this.$r.forEachInRange([r,a],(f=>{u=u.add(f.key)})),u}containsKey(e){const t=new Qn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Qn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ge.comparator(e.key,t.key)||mt(e.Hr,t.Hr)}static Ur(e,t){return mt(e.Hr,t.Hr)||Ge.comparator(e.key,t.key)}}class sP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new jn(Qn.Qr)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const u=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new bO(u,t,r,a);this.mutationQueue.push(f);for(const g of a)this.Yr=this.Yr.add(new Qn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return xe.resolve(f)}lookupMutationBatch(e,t){return xe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),u=a<0?0:a;return xe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?Sv:this.er-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Qn(t,0),a=new Qn(t,Number.POSITIVE_INFINITY),u=[];return this.Yr.forEachInRange([r,a],(f=>{const g=this.Zr(f.Hr);u.push(g)})),xe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(mt);return t.forEach((a=>{const u=new Qn(a,0),f=new Qn(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([u,f],(g=>{r=r.add(g.Hr)}))})),xe.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const f=new Qn(new Ge(u),0);let g=new jn(mt);return this.Yr.forEachWhile((v=>{const _=v.key.path;return!!r.isPrefixOf(_)&&(_.length===a&&(g=g.add(v.Hr)),!0)}),f),xe.resolve(this.ei(g))}ei(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Bt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return xe.forEach(t.mutations,(a=>{const u=new Qn(a.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new Qn(t,0),a=this.Yr.firstAfterOrEqual(r);return xe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class oP{constructor(e){this.ni=e,this.docs=(function(){return new mn(Ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),u=a?a.size:0,f=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return xe.resolve(r?r.document.mutableCopy():Ei.newInvalidDocument(t))}getEntries(e,t){let r=wo();return t.forEach((a=>{const u=this.docs.get(a);r=r.insert(a,u?u.document.mutableCopy():Ei.newInvalidDocument(a))})),xe.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let u=wo();const f=t.path,g=new Ge(f.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:_,value:{document:w}}=v.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||Dk(Pk(w),r)<=0||(a.has(w.key)||Kd(t,w))&&(u=u.insert(w.key,w.mutableCopy()))}return xe.resolve(u)}getAllFromCollectionGroup(e,t,r,a){Xe(9500)}ri(e,t){return xe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new aP(this)}getSize(e){return xe.resolve(this.size)}}class aP extends JO{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(r)})),xe.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class lP{constructor(e){this.persistence=e,this.ii=new Rl((t=>Av(t)),xv),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.si=0,this.oi=new kv,this.targetCount=0,this._i=Du.ar()}forEachTarget(e,t){return this.ii.forEach(((r,a)=>t(a))),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),xe.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Du(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.hr(t),xe.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,r){let a=0;const u=[];return this.ii.forEach(((f,g)=>{g.sequenceNumber<=t&&r.get(g.targetId)===null&&(this.ii.delete(f),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)})),xe.waitFor(u).next((()=>a))}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return xe.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),xe.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const a=this.persistence.referenceDelegate,u=[];return a&&t.forEach((f=>{u.push(a.markPotentiallyOrphaned(e,f))})),xe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return xe.resolve(r)}containsKey(e,t){return xe.resolve(this.oi.containsKey(t))}}class MC{constructor(e,t){this.ai={},this.overlays={},this.ui=new Hd(0),this.ci=!1,this.ci=!0,this.li=new rP,this.referenceDelegate=e(this),this.hi=new lP(this),this.indexManager=new GO,this.remoteDocumentCache=(function(a){return new oP(a)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new qO(t),this.Ti=new nP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new sP(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const a=new uP(this.ui.next());return this.referenceDelegate.Ii(),r(a).next((u=>this.referenceDelegate.di(a).next((()=>u)))).toPromise().then((u=>(a.raiseOnCommittedEvent(),u)))}Ei(e,t){return xe.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class uP extends Vk{constructor(e){super(),this.currentSequenceNumber=e}}class Ov{constructor(e){this.persistence=e,this.Ai=new kv,this.Ri=null}static Vi(e){return new Ov(e)}get mi(){if(this.Ri)return this.Ri;throw Xe(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),xe.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),xe.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((a=>this.mi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((u=>this.mi.add(u.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.mi,(r=>{const a=Ge.fromPath(r);return this.fi(e,a).next((u=>{u||t.removeEntry(a,it.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return xe.or([()=>xe.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class bd{constructor(e,t){this.persistence=e,this.gi=new Rl((r=>Uk(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=XO(this,t)}static Vi(e,t){return new bd(e,t)}Ii(){}di(e){return xe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return xe.forEach(this.gi,((r,a)=>this.Sr(e,r,a).next((u=>u?xe.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.ri(e,(f=>this.Sr(e,f,t).next((g=>{g||(r++,u.removeEntry(f,it.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),xe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),xe.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),xe.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$f(e.data.value)),t}Sr(e,t,r){return xe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return xe.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Pv{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=a}static Es(e,t){let r=Tt(),a=Tt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new Pv(e,t.fromCache,r,a)}}class cP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class hP{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return rR()?8:zk(bi())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,a){const u={result:null};return this.ps(e,t).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ys(e,t,a,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new cP;return this.ws(e,t,f).next((g=>{if(u.result=g,this.Rs)return this.Ss(e,t,f,g.size)}))})).next((()=>u.result))}Ss(e,t,r,a){return r.documentReadCount<this.Vs?(mu()<=St.DEBUG&&Ve("QueryEngine","SDK will not create cache indexes for query:",gu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),xe.resolve()):(mu()<=St.DEBUG&&Ve("QueryEngine","Query:",gu(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.fs*a?(mu()<=St.DEBUG&&Ve("QueryEngine","The SDK decides to create cache indexes for query:",gu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ns(t))):xe.resolve())}ps(e,t){if(vb(t))return xe.resolve(null);let r=Ns(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Ng(t,null,"F"),r=Ns(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=Tt(...u);return this.gs.getDocuments(e,f).next((g=>this.indexManager.getMinOffset(e,r).next((v=>{const _=this.bs(t,g);return this.Ds(t,_,f,v.readTime)?this.ps(e,Ng(t,null,"F")):this.vs(e,_,t,v)}))))})))))}ys(e,t,r,a){return vb(t)||a.isEqual(it.min())?xe.resolve(null):this.gs.getDocuments(e,r).next((u=>{const f=this.bs(t,u);return this.Ds(t,f,r,a)?xe.resolve(null):(mu()<=St.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),gu(t)),this.vs(e,f,t,Ok(a,nh)).next((g=>g)))}))}bs(e,t){let r=new jn(lC(e));return t.forEach(((a,u)=>{Kd(e,u)&&(r=r.add(u))})),r}Ds(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}ws(e,t,r){return mu()<=St.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",gu(t)),this.gs.getDocumentsMatchingQuery(e,t,Ca.min(),r)}vs(e,t,r,a){return this.gs.getDocumentsMatchingQuery(e,r,a).next((u=>(t.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const Dv="LocalStore",fP=3e8;class dP{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new mn(mt),this.Ms=new Rl((u=>Av(u)),xv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function pP(n,e,t,r){return new dP(n,e,t,r)}async function kC(n,e){const t=st(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((u=>(a=u,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],g=[];let v=Tt();for(const _ of a){f.push(_.batchId);for(const w of _.mutations)v=v.add(w.key)}for(const _ of u){g.push(_.batchId);for(const w of _.mutations)v=v.add(w.key)}return t.localDocuments.getDocuments(r,v).next((_=>({Bs:_,removedBatchIds:f,addedBatchIds:g})))}))}))}function mP(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),u=t.Os.newChangeBuffer({trackRemovals:!0});return(function(g,v,_,w){const T=_.batch,I=T.keys();let V=xe.resolve();return I.forEach((N=>{V=V.next((()=>w.getEntry(v,N))).next((H=>{const q=_.docVersions.get(N);Bt(q!==null,48541),H.version.compareTo(q)<0&&(T.applyToRemoteDocument(H,_),H.isValidDocument()&&(H.setReadTime(_.commitVersion),w.addEntry(H)))}))})),V.next((()=>g.mutationQueue.removeMutationBatch(v,T)))})(t,r,e,u).next((()=>u.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let v=Tt();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(v=v.add(g.batch.mutations[_].key));return v})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function OC(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function gP(n,e){const t=st(n),r=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const g=[];e.targetChanges.forEach(((w,T)=>{const I=a.get(T);if(!I)return;g.push(t.hi.removeMatchingKeys(u,w.removedDocuments,T).next((()=>t.hi.addMatchingKeys(u,w.addedDocuments,T))));let V=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?V=V.withResumeToken(li.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):w.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(w.resumeToken,r)),a=a.insert(T,V),(function(H,q,W){return H.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=fP?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(I,V,w)&&g.push(t.hi.updateTargetData(u,V))}));let v=wo(),_=Tt();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,w))})),g.push(vP(u,f,e.documentUpdates).next((w=>{v=w.Ls,_=w.ks}))),!r.isEqual(it.min())){const w=t.hi.getLastRemoteSnapshotVersion(u).next((T=>t.hi.setTargetsMetadata(u,u.currentSequenceNumber,r)));g.push(w)}return xe.waitFor(g).next((()=>f.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,v,_))).next((()=>v))})).then((u=>(t.Fs=a,u)))}function vP(n,e,t){let r=Tt(),a=Tt();return t.forEach((u=>r=r.add(u))),e.getEntries(n,r).next((u=>{let f=wo();return t.forEach(((g,v)=>{const _=u.get(g);v.isFoundDocument()!==_.isFoundDocument()&&(a=a.add(g)),v.isNoDocument()&&v.version.isEqual(it.min())?(e.removeEntry(g,v.readTime),f=f.insert(g,v)):!_.isValidDocument()||v.version.compareTo(_.version)>0||v.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(v),f=f.insert(g,v)):Ve(Dv,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",v.version)})),{Ls:f,ks:a}}))}function yP(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Sv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function _P(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.hi.getTargetData(r,e).next((u=>u?(a=u,xe.resolve(a)):t.hi.allocateTargetId(r).next((f=>(a=new ma(e,f,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Fs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function jg(n,e,t){const r=st(n),a=r.Fs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!Hu(f))throw f;Ve(Dv,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(a.target)}function Ib(n,e,t){const r=st(n);let a=it.min(),u=Tt();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(v,_,w){const T=st(v),I=T.Ms.get(w);return I!==void 0?xe.resolve(T.Fs.get(I)):T.hi.getTargetData(_,w)})(r,f,Ns(e)).next((g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(f,g.targetId).next((v=>{u=v}))})).next((()=>r.Cs.getDocumentsMatchingQuery(f,e,t?a:it.min(),t?u:Tt()))).next((g=>(EP(r,sO(e),g),{documents:g,qs:u})))))}function EP(n,e,t){let r=n.xs.get(e)||it.min();t.forEach(((a,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),n.xs.set(e,r)}class Mb{constructor(){this.activeTargetIds=hO()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bP{constructor(){this.Fo=new Mb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Mb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wP{xo(e){}shutdown(){}}const kb="ConnectivityMonitor";class Ob{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ve(kb,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ve(kb,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let zf=null;function Fg(){return zf===null?zf=(function(){return 268435456+Math.round(2147483648*Math.random())})():zf++,"0x"+zf.toString(16)}const og="RestConnection",SP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TP{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.Ko=this.databaseId.database===gd?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,u){const f=Fg(),g=this.Go(e,t.toUriEncodedString());Ve(og,`Sending RPC '${e}' ${f}:`,g,r);const v={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(v,a,u);const{host:_}=new URL(g),w=zu(_);return this.jo(e,g,v,r,w).then((T=>(Ve(og,`Received RPC '${e}' ${f}: `,T),T)),(T=>{throw Ta(og,`RPC '${e}' ${f} failed with error: `,T,"url: ",g,"request:",r),T}))}Jo(e,t,r,a,u,f){return this.Wo(e,t,r,a,u)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ju})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,u)=>e[u]=a)),r&&r.headers.forEach(((a,u)=>e[u]=a))}Go(e,t){const r=SP[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}class CP{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const yi="WebChannelConnection";class AP extends TP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,a,u){const f=Fg();return new Promise(((g,v)=>{const _=new PT;_.setWithCredentials(!0),_.listenOnce(DT.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Yf.NO_ERROR:const T=_.getResponseJson();Ve(yi,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(T)),g(T);break;case Yf.TIMEOUT:Ve(yi,`RPC '${e}' ${f} timed out`),v(new Ne(Se.DEADLINE_EXCEEDED,"Request time out"));break;case Yf.HTTP_ERROR:const I=_.getStatus();if(Ve(yi,`RPC '${e}' ${f} failed with status:`,I,"response text:",_.getResponseText()),I>0){let V=_.getResponseJson();Array.isArray(V)&&(V=V[0]);const N=V?.error;if(N&&N.status&&N.message){const H=(function(W){const $=W.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf($)>=0?$:Se.UNKNOWN})(N.status);v(new Ne(H,N.message))}else v(new Ne(Se.UNKNOWN,"Server responded with status "+_.getStatus()))}else v(new Ne(Se.UNAVAILABLE,"Connection failed."));break;default:Xe(9055,{c_:e,streamId:f,l_:_.getLastErrorCode(),h_:_.getLastError()})}}finally{Ve(yi,`RPC '${e}' ${f} completed.`)}}));const w=JSON.stringify(a);Ve(yi,`RPC '${e}' ${f} sending request:`,a),_.send(t,"POST",w,r,15)}))}P_(e,t,r){const a=Fg(),u=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=zT(),g=VT(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(v.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(v.useFetchStreams=!0),this.zo(v.initMessageHeaders,t,r),v.encodeInitMessageHeaders=!0;const w=u.join("");Ve(yi,`Creating RPC '${e}' stream ${a}: ${w}`,v);const T=f.createWebChannel(w,v);this.T_(T);let I=!1,V=!1;const N=new CP({Ho:q=>{V?Ve(yi,`Not sending because RPC '${e}' stream ${a} is closed:`,q):(I||(Ve(yi,`Opening RPC '${e}' stream ${a} transport.`),T.open(),I=!0),Ve(yi,`RPC '${e}' stream ${a} sending:`,q),T.send(q))},Yo:()=>T.close()}),H=(q,W,$)=>{q.listen(W,(re=>{try{$(re)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return H(T,zc.EventType.OPEN,(()=>{V||(Ve(yi,`RPC '${e}' stream ${a} transport opened.`),N.s_())})),H(T,zc.EventType.CLOSE,(()=>{V||(V=!0,Ve(yi,`RPC '${e}' stream ${a} transport closed`),N.__(),this.I_(T))})),H(T,zc.EventType.ERROR,(q=>{V||(V=!0,Ta(yi,`RPC '${e}' stream ${a} transport errored. Name:`,q.name,"Message:",q.message),N.__(new Ne(Se.UNAVAILABLE,"The operation could not be completed")))})),H(T,zc.EventType.MESSAGE,(q=>{var W;if(!V){const $=q.data[0];Bt(!!$,16349);const re=$,ie=re?.error||((W=re[0])===null||W===void 0?void 0:W.error);if(ie){Ve(yi,`RPC '${e}' stream ${a} received error:`,ie);const ee=ie.status;let X=(function(M){const j=Pn[M];if(j!==void 0)return EC(j)})(ee),O=ie.message;X===void 0&&(X=Se.INTERNAL,O="Unknown error status: "+ee+" with message "+ie.message),V=!0,N.__(new Ne(X,O)),T.close()}else Ve(yi,`RPC '${e}' stream ${a} received:`,$),N.a_($)}})),H(g,NT.STAT_EVENT,(q=>{q.stat===Rg.PROXY?Ve(yi,`RPC '${e}' stream ${a} detected buffering proxy`):q.stat===Rg.NOPROXY&&Ve(yi,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{N.o_()}),0),N}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function ag(){return typeof document<"u"?document:null}function Xd(n){return new IO(n,!0)}class PC{constructor(e,t,r=1e3,a=1.5,u=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=a,this.A_=u,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-r);a>0&&Ve("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const Pb="PersistentStream";class DC{constructor(e,t,r,a,u,f,g,v){this.Fi=e,this.w_=r,this.S_=a,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new PC(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Se.RESOURCE_EXHAUSTED?(bo(t.toString()),bo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.b_===t&&this.W_(r,a)}),(r=>{e((()=>{const a=new Ne(Se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(a)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{r((()=>this.G_(a)))})),this.stream.onMessage((a=>{r((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Ve(Pb,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(Ve(Pb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xP extends DC{constructor(e,t,r,a,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,f),this.serializer=u}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=OO(this.serializer,e),r=(function(u){if(!("targetChange"in u))return it.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?it.min():f.readTime?Vs(f.readTime):it.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Ug(this.serializer),t.addTarget=(function(u,f){let g;const v=f.target;if(g=Pg(v)?{documents:NO(u,v)}:{query:VO(u,v).Vt},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=SC(u,f.resumeToken);const _=Vg(u,f.expectedCount);_!==null&&(g.expectedCount=_)}else if(f.snapshotVersion.compareTo(it.min())>0){g.readTime=Ed(u,f.snapshotVersion.toTimestamp());const _=Vg(u,f.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,e);const r=BO(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Ug(this.serializer),t.removeTarget=e,this.k_(t)}}class LP extends DC{constructor(e,t,r,a,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,f),this.serializer=u}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=DO(e.writeResults,e.commitTime),r=Vs(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Ug(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>PO(this.serializer,r)))};this.k_(t)}}class RP{}class IP extends RP{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new Ne(Se.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Wo(e,zg(t,r),a,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ne(Se.UNKNOWN,u.toString())}))}Jo(e,t,r,a,u){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Jo(e,zg(t,r),a,f,g,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ne(Se.UNKNOWN,f.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class MP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(bo(t),this._a=!1):Ve("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}const Tl="RemoteStore";class kP{constructor(e,t,r,a,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=u,this.Ea.xo((f=>{r.enqueueAndForget((async()=>{Il(this)&&(Ve(Tl,"Restarting streams for network reachability change."),await(async function(v){const _=st(v);_.Ia.add(4),await Th(_),_.Aa.set("Unknown"),_.Ia.delete(4),await Jd(_)})(this))}))})),this.Aa=new MP(r,a)}}async function Jd(n){if(Il(n))for(const e of n.da)await e(!0)}async function Th(n){for(const e of n.da)await e(!1)}function NC(n,e){const t=st(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Bv(t)?zv(t):Zu(t).x_()&&Vv(t,e))}function Nv(n,e){const t=st(n),r=Zu(t);t.Ta.delete(e),r.x_()&&VC(t,e),t.Ta.size===0&&(r.x_()?r.B_():Il(t)&&t.Aa.set("Unknown"))}function Vv(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(it.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zu(n).H_(e)}function VC(n,e){n.Ra.$e(e),Zu(n).Y_(e)}function zv(n){n.Ra=new AO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Zu(n).start(),n.Aa.aa()}function Bv(n){return Il(n)&&!Zu(n).M_()&&n.Ta.size>0}function Il(n){return st(n).Ia.size===0}function zC(n){n.Ra=void 0}async function OP(n){n.Aa.set("Online")}async function PP(n){n.Ta.forEach(((e,t)=>{Vv(n,e)}))}async function DP(n,e){zC(n),Bv(n)?(n.Aa.la(e),zv(n)):n.Aa.set("Unknown")}async function NP(n,e,t){if(n.Aa.set("Online"),e instanceof wC&&e.state===2&&e.cause)try{await(async function(a,u){const f=u.cause;for(const g of u.targetIds)a.Ta.has(g)&&(await a.remoteSyncer.rejectListen(g,f),a.Ta.delete(g),a.Ra.removeTarget(g))})(n,e)}catch(r){Ve(Tl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wd(n,r)}else if(e instanceof Jf?n.Ra.Ye(e):e instanceof bC?n.Ra.it(e):n.Ra.et(e),!t.isEqual(it.min()))try{const r=await OC(n.localStore);t.compareTo(r)>=0&&await(function(u,f){const g=u.Ra.Pt(f);return g.targetChanges.forEach(((v,_)=>{if(v.resumeToken.approximateByteSize()>0){const w=u.Ta.get(_);w&&u.Ta.set(_,w.withResumeToken(v.resumeToken,f))}})),g.targetMismatches.forEach(((v,_)=>{const w=u.Ta.get(v);if(!w)return;u.Ta.set(v,w.withResumeToken(li.EMPTY_BYTE_STRING,w.snapshotVersion)),VC(u,v);const T=new ma(w.target,v,_,w.sequenceNumber);Vv(u,T)})),u.remoteSyncer.applyRemoteEvent(g)})(n,t)}catch(r){Ve(Tl,"Failed to raise snapshot:",r),await wd(n,r)}}async function wd(n,e,t){if(!Hu(e))throw e;n.Ia.add(1),await Th(n),n.Aa.set("Offline"),t||(t=()=>OC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ve(Tl,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Jd(n)}))}function BC(n,e){return e().catch((t=>wd(n,t,e)))}async function ep(n){const e=st(n),t=Ra(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Sv;for(;VP(e);)try{const a=await yP(e.localStore,r);if(a===null){e.Pa.length===0&&t.B_();break}r=a.batchId,zP(e,a)}catch(a){await wd(e,a)}UC(e)&&jC(e)}function VP(n){return Il(n)&&n.Pa.length<10}function zP(n,e){n.Pa.push(e);const t=Ra(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function UC(n){return Il(n)&&!Ra(n).M_()&&n.Pa.length>0}function jC(n){Ra(n).start()}async function BP(n){Ra(n).na()}async function UP(n){const e=Ra(n);for(const t of n.Pa)e.X_(t.mutations)}async function jP(n,e,t){const r=n.Pa.shift(),a=Rv.from(r,e,t);await BC(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await ep(n)}async function FP(n,e){e&&Ra(n).Z_&&await(async function(r,a){if((function(f){return TO(f)&&f!==Se.ABORTED})(a.code)){const u=r.Pa.shift();Ra(r).N_(),await BC(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,a))),await ep(r)}})(n,e),UC(n)&&jC(n)}async function Db(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),Ve(Tl,"RemoteStore received new credentials");const r=Il(t);t.Ia.add(3),await Th(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Jd(t)}async function HP(n,e){const t=st(n);e?(t.Ia.delete(2),await Jd(t)):e||(t.Ia.add(2),await Th(t),t.Aa.set("Unknown"))}function Zu(n){return n.Va||(n.Va=(function(t,r,a){const u=st(t);return u.ia(),new xP(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)})(n.datastore,n.asyncQueue,{Zo:OP.bind(null,n),e_:PP.bind(null,n),n_:DP.bind(null,n),J_:NP.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Bv(n)?zv(n):n.Aa.set("Unknown")):(await n.Va.stop(),zC(n))}))),n.Va}function Ra(n){return n.ma||(n.ma=(function(t,r,a){const u=st(t);return u.ia(),new LP(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:BP.bind(null,n),n_:FP.bind(null,n),ea:UP.bind(null,n),ta:jP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await ep(n)):(await n.ma.stop(),n.Pa.length>0&&(Ve(Tl,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}class Uv{constructor(e,t,r,a,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=u,this.deferred=new ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,u){const f=Date.now()+r,g=new Uv(e,t,f,a,u);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jv(n,e){if(bo("AsyncQueue",`${e}: ${n}`),Hu(n))return new Ne(Se.UNAVAILABLE,`${e}: ${n}`);throw n}class Au{static emptySet(e){return new Au(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Bc(),this.sortedSet=new mn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Au)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=r.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Au;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Nb{constructor(){this.fa=new mn(Ge.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Xe(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Nu{constructor(e,t,r,a,u,f,g,v,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,a,u){const f=[];return t.forEach((g=>{f.push({type:0,doc:g})})),new Nu(e,t,Au.emptySet(t),f,r,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class qP{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class ZP{constructor(){this.queries=Vb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const a=st(t),u=a.queries;a.queries=Vb(),u.forEach(((f,g)=>{for(const v of g.wa)v.onError(r)}))})(this,new Ne(Se.ABORTED,"Firestore shutting down"))}}function Vb(){return new Rl((n=>aC(n)),Wd)}async function FC(n,e){const t=st(n);let r=3;const a=e.query;let u=t.queries.get(a);u?!u.Sa()&&e.ba()&&(r=2):(u=new qP,r=e.ba()?0:1);try{switch(r){case 0:u.ya=await t.onListen(a,!0);break;case 1:u.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(f){const g=jv(f,`Initialization of query '${gu(e.query)}' failed`);return void e.onError(g)}t.queries.set(a,u),u.wa.push(e),e.va(t.onlineState),u.ya&&e.Ca(u.ya)&&Fv(t)}async function HC(n,e){const t=st(n),r=e.query;let a=3;const u=t.queries.get(r);if(u){const f=u.wa.indexOf(e);f>=0&&(u.wa.splice(f,1),u.wa.length===0?a=e.ba()?0:1:!u.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function GP(n,e){const t=st(n);let r=!1;for(const a of e){const u=a.query,f=t.queries.get(u);if(f){for(const g of f.wa)g.Ca(a)&&(r=!0);f.ya=a}}r&&Fv(t)}function WP(n,e,t){const r=st(n),a=r.queries.get(e);if(a)for(const u of a.wa)u.onError(t);r.queries.delete(e)}function Fv(n){n.Da.forEach((e=>{e.next()}))}var Hg,zb;(zb=Hg||(Hg={})).Fa="default",zb.Cache="cache";class qC{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Nu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Nu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Hg.Cache}}class ZC{constructor(e){this.key=e}}class GC{constructor(e){this.key=e}}class KP{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Tt(),this.mutatedKeys=Tt(),this.Xa=lC(e),this.eu=new Au(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Nb,a=t?t.eu:this.eu;let u=t?t.mutatedKeys:this.mutatedKeys,f=a,g=!1;const v=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,_=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((w,T)=>{const I=a.get(w),V=Kd(this.query,T)?T:null,N=!!I&&this.mutatedKeys.has(I.key),H=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let q=!1;I&&V?I.data.isEqual(V.data)?N!==H&&(r.track({type:3,doc:V}),q=!0):this.iu(I,V)||(r.track({type:2,doc:V}),q=!0,(v&&this.Xa(V,v)>0||_&&this.Xa(V,_)<0)&&(g=!0)):!I&&V?(r.track({type:0,doc:V}),q=!0):I&&!V&&(r.track({type:1,doc:I}),q=!0,(v||_)&&(g=!0)),q&&(V?(f=f.add(V),u=H?u.add(w):u.delete(w)):(f=f.delete(w),u=u.delete(w)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const w=this.query.limitType==="F"?f.last():f.first();f=f.delete(w.key),u=u.delete(w.key),r.track({type:1,doc:w})}return{eu:f,ru:r,Ds:g,mutatedKeys:u}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const u=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const f=e.ru.pa();f.sort(((w,T)=>(function(V,N){const H=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe(20277,{At:q})}};return H(V)-H(N)})(w.type,T.type)||this.Xa(w.doc,T.doc))),this.su(r),a=a!=null&&a;const g=t&&!a?this.ou():[],v=this.Za.size===0&&this.current&&!a?1:0,_=v!==this.Ya;return this.Ya=v,f.length!==0||_?{snapshot:new Nu(this.query,e.eu,u,f,e.mutatedKeys,v===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:g}:{_u:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Nb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Tt(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new GC(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new ZC(r))})),t}uu(e){this.Ha=e.qs,this.Za=Tt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Nu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Hv="SyncEngine";class YP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class $P{constructor(e){this.key=e,this.lu=!1}}class QP{constructor(e,t,r,a,u,f){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.hu={},this.Pu=new Rl((g=>aC(g)),Wd),this.Tu=new Map,this.Iu=new Set,this.du=new mn(Ge.comparator),this.Eu=new Map,this.Au=new kv,this.Ru={},this.Vu=new Map,this.mu=Du.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function XP(n,e,t=!0){const r=XC(n);let a;const u=r.Pu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.cu()):a=await WC(r,e,t,!0),a}async function JP(n,e){const t=XC(n);await WC(t,e,!0,!1)}async function WC(n,e,t,r){const a=await _P(n.localStore,Ns(e)),u=a.targetId,f=n.sharedClientState.addLocalQueryTarget(u,t);let g;return r&&(g=await eD(n,e,u,f==="current",a.resumeToken)),n.isPrimaryClient&&t&&NC(n.remoteStore,a),g}async function eD(n,e,t,r,a){n.gu=(T,I,V)=>(async function(H,q,W,$){let re=q.view.nu(W);re.Ds&&(re=await Ib(H.localStore,q.query,!1).then((({documents:O})=>q.view.nu(O,re))));const ie=$&&$.targetChanges.get(q.targetId),ee=$&&$.targetMismatches.get(q.targetId)!=null,X=q.view.applyChanges(re,H.isPrimaryClient,ie,ee);return Ub(H,q.targetId,X._u),X.snapshot})(n,T,I,V);const u=await Ib(n.localStore,e,!0),f=new KP(e,u.qs),g=f.nu(u.documents),v=Sh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),_=f.applyChanges(g,n.isPrimaryClient,v);Ub(n,t,_._u);const w=new YP(e,t,f);return n.Pu.set(e,w),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),_.snapshot}async function tD(n,e,t){const r=st(n),a=r.Pu.get(e),u=r.Tu.get(a.targetId);if(u.length>1)return r.Tu.set(a.targetId,u.filter((f=>!Wd(f,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await jg(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Nv(r.remoteStore,a.targetId),qg(r,a.targetId)})).catch(Fu)):(qg(r,a.targetId),await jg(r.localStore,a.targetId,!0))}async function nD(n,e){const t=st(n),r=t.Pu.get(e),a=t.Tu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Nv(t.remoteStore,r.targetId))}async function iD(n,e,t){const r=cD(n);try{const a=await(function(f,g){const v=st(f),_=nn.now(),w=g.reduce(((V,N)=>V.add(N.key)),Tt());let T,I;return v.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let N=wo(),H=Tt();return v.Os.getEntries(V,w).next((q=>{N=q,N.forEach(((W,$)=>{$.isValidDocument()||(H=H.add(W))}))})).next((()=>v.localDocuments.getOverlayedDocuments(V,N))).next((q=>{T=q;const W=[];for(const $ of g){const re=_O($,T.get($.key).overlayedDocument);re!=null&&W.push(new ka($.key,re,JT(re.value.mapValue),ss.exists(!0)))}return v.mutationQueue.addMutationBatch(V,_,W,g)})).next((q=>{I=q;const W=q.applyToLocalDocumentSet(T,H);return v.documentOverlayCache.saveOverlays(V,q.batchId,W)}))})).then((()=>({batchId:I.batchId,changes:cC(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(f,g,v){let _=f.Ru[f.currentUser.toKey()];_||(_=new mn(mt)),_=_.insert(g,v),f.Ru[f.currentUser.toKey()]=_})(r,a.batchId,t),await Ch(r,a.changes),await ep(r.remoteStore)}catch(a){const u=jv(a,"Failed to persist write");t.reject(u)}}async function KC(n,e){const t=st(n);try{const r=await gP(t.localStore,e);e.targetChanges.forEach(((a,u)=>{const f=t.Eu.get(u);f&&(Bt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.lu=!0:a.modifiedDocuments.size>0?Bt(f.lu,14607):a.removedDocuments.size>0&&(Bt(f.lu,42227),f.lu=!1))})),await Ch(t,r,e)}catch(r){await Fu(r)}}function Bb(n,e,t){const r=st(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Pu.forEach(((u,f)=>{const g=f.view.va(e);g.snapshot&&a.push(g.snapshot)})),(function(f,g){const v=st(f);v.onlineState=g;let _=!1;v.queries.forEach(((w,T)=>{for(const I of T.wa)I.va(g)&&(_=!0)})),_&&Fv(v)})(r.eventManager,e),a.length&&r.hu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rD(n,e,t){const r=st(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Eu.get(e),u=a&&a.key;if(u){let f=new mn(Ge.comparator);f=f.insert(u,Ei.newNoDocument(u,it.min()));const g=Tt().add(u),v=new Qd(it.min(),new Map,new mn(mt),f,g);await KC(r,v),r.du=r.du.remove(u),r.Eu.delete(e),qv(r)}else await jg(r.localStore,e,!1).then((()=>qg(r,e,t))).catch(Fu)}async function sD(n,e){const t=st(n),r=e.batch.batchId;try{const a=await mP(t.localStore,e);$C(t,r,null),YC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ch(t,a)}catch(a){await Fu(a)}}async function oD(n,e,t){const r=st(n);try{const a=await(function(f,g){const v=st(f);return v.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let w;return v.mutationQueue.lookupMutationBatch(_,g).next((T=>(Bt(T!==null,37113),w=T.keys(),v.mutationQueue.removeMutationBatch(_,T)))).next((()=>v.mutationQueue.performConsistencyCheck(_))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(_,w,g))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w))).next((()=>v.localDocuments.getDocuments(_,w)))}))})(r.localStore,e);$C(r,e,t),YC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ch(r,a)}catch(a){await Fu(a)}}function YC(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function $C(n,e,t){const r=st(n);let a=r.Ru[r.currentUser.toKey()];if(a){const u=a.get(e);u&&(t?u.reject(t):u.resolve(),a=a.remove(e)),r.Ru[r.currentUser.toKey()]=a}}function qg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||QC(n,r)}))}function QC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Nv(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),qv(n))}function Ub(n,e,t){for(const r of t)r instanceof ZC?(n.Au.addReference(r.key,e),aD(n,r)):r instanceof GC?(Ve(Hv,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||QC(n,r.key)):Xe(19791,{yu:r})}function aD(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(Ve(Hv,"New document in limbo: "+t),n.Iu.add(r),qv(n))}function qv(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ge(Qt.fromString(e)),r=n.mu.next();n.Eu.set(r,new $P(t)),n.du=n.du.insert(t,r),NC(n.remoteStore,new ma(Ns(Gd(t.path)),r,"TargetPurposeLimboResolution",Hd.ue))}}async function Ch(n,e,t){const r=st(n),a=[],u=[],f=[];r.Pu.isEmpty()||(r.Pu.forEach(((g,v)=>{f.push(r.gu(v,e,t).then((_=>{var w;if((_||t)&&r.isPrimaryClient){const T=_?!_.fromCache:(w=t?.targetChanges.get(v.targetId))===null||w===void 0?void 0:w.current;r.sharedClientState.updateQueryState(v.targetId,T?"current":"not-current")}if(_){a.push(_);const T=Pv.Es(v.targetId,_);u.push(T)}})))})),await Promise.all(f),r.hu.J_(a),await(async function(v,_){const w=st(v);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>xe.forEach(_,(I=>xe.forEach(I.Is,(V=>w.persistence.referenceDelegate.addReference(T,I.targetId,V))).next((()=>xe.forEach(I.ds,(V=>w.persistence.referenceDelegate.removeReference(T,I.targetId,V)))))))))}catch(T){if(!Hu(T))throw T;Ve(Dv,"Failed to update sequence numbers: "+T)}for(const T of _){const I=T.targetId;if(!T.fromCache){const V=w.Fs.get(I),N=V.snapshotVersion,H=V.withLastLimboFreeSnapshotVersion(N);w.Fs=w.Fs.insert(I,H)}}})(r.localStore,u))}async function lD(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){Ve(Hv,"User change. New user:",e.toKey());const r=await kC(t.localStore,e);t.currentUser=e,(function(u,f){u.Vu.forEach((g=>{g.forEach((v=>{v.reject(new Ne(Se.CANCELLED,f))}))})),u.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ch(t,r.Bs)}}function uD(n,e){const t=st(n),r=t.Eu.get(e);if(r&&r.lu)return Tt().add(r.key);{let a=Tt();const u=t.Tu.get(e);if(!u)return a;for(const f of u){const g=t.Pu.get(f);a=a.unionWith(g.view.tu)}return a}}function XC(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rD.bind(null,e),e.hu.J_=GP.bind(null,e.eventManager),e.hu.pu=WP.bind(null,e.eventManager),e}function cD(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oD.bind(null,e),e}class Sd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return pP(this.persistence,new hP,e.initialUser,this.serializer)}Du(e){return new MC(Ov.Vi,this.serializer)}bu(e){return new bP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sd.provider={build:()=>new Sd};class hD extends Sd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Bt(this.persistence.referenceDelegate instanceof bd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $O(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?tr.withCacheSize(this.cacheSizeBytes):tr.DEFAULT;return new MC((r=>bd.Vi(r,t)),this.serializer)}}class Zg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Bb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lD.bind(null,this.syncEngine),await HP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZP})()}createDatastore(e){const t=Xd(e.databaseInfo.databaseId),r=(function(u){return new AP(u)})(e.databaseInfo);return(function(u,f,g,v){return new IP(u,f,g,v)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,u,f,g){return new kP(r,a,u,f,g)})(this.localStore,this.datastore,e.asyncQueue,(t=>Bb(this.syncEngine,t,0)),(function(){return Ob.C()?new Ob:new wP})())}createSyncEngine(e,t){return(function(a,u,f,g,v,_,w){const T=new QP(a,u,f,g,v,_);return w&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const u=st(a);Ve(Tl,"RemoteStore shutting down."),u.Ia.add(5),await Th(u),u.Ea.shutdown(),u.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Zg.provider={build:()=>new Zg};class JC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):bo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ia="FirestoreClient";class fD{constructor(e,t,r,a,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=_i.UNAUTHENTICATED,this.clientId=wv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{Ve(Ia,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(Ve(Ia,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=jv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function lg(n,e){n.asyncQueue.verifyOperationInProgress(),Ve(Ia,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await kC(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>{Ta("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{Ve("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{Ta("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),n._offlineComponents=e}async function jb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await dD(n);Ve(Ia,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Db(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>Db(e.remoteStore,a))),n._onlineComponents=e}async function dD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ve(Ia,"Using user provided OfflineComponentProvider");try{await lg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Se.FAILED_PRECONDITION||a.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ta("Error using user provided cache. Falling back to memory cache: "+t),await lg(n,new Sd)}}else Ve(Ia,"Using default OfflineComponentProvider"),await lg(n,new hD(void 0));return n._offlineComponents}async function eA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ve(Ia,"Using user provided OnlineComponentProvider"),await jb(n,n._uninitializedComponentsProvider._online)):(Ve(Ia,"Using default OnlineComponentProvider"),await jb(n,new Zg))),n._onlineComponents}function pD(n){return eA(n).then((e=>e.syncEngine))}async function Gg(n){const e=await eA(n),t=e.eventManager;return t.onListen=XP.bind(null,e.syncEngine),t.onUnlisten=tD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nD.bind(null,e.syncEngine),t}function mD(n,e,t={}){const r=new ba;return n.asyncQueue.enqueueAndForget((async()=>(function(u,f,g,v,_){const w=new JC({next:I=>{w.Ou(),f.enqueueAndForget((()=>HC(u,T)));const V=I.docs.has(g);!V&&I.fromCache?_.reject(new Ne(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&I.fromCache&&v&&v.source==="server"?_.reject(new Ne(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(I)},error:I=>_.reject(I)}),T=new qC(Gd(g.path),w,{includeMetadataChanges:!0,ka:!0});return FC(u,T)})(await Gg(n),n.asyncQueue,e,t,r))),r.promise}function tA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Fb=new Map;const nA="firestore.googleapis.com",Hb=!0;class qb{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nA,this.ssl=Hb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Hb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KO)throw new Ne(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Ne(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Ne(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Ne(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tp{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Sk;switch(r.type){case"firstParty":return new xk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ne(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Fb.get(t);r&&(Ve("ComponentProvider","Removing Datastore"),Fb.delete(t),r.terminate())})(this),Promise.resolve()}}function gD(n,e,t,r={}){var a;n=rs(n,tp);const u=zu(e),f=n._getSettings(),g=Object.assign(Object.assign({},f),{emulatorOptions:n._getEmulatorOptions()}),v=`${e}:${t}`;u&&(KS(`https://${v}`),YS("Firestore",!0)),f.host!==nA&&f.host!==v&&Ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _=Object.assign(Object.assign({},f),{host:v,ssl:u,emulatorOptions:r});if(!El(_,g)&&(n._setSettings(_),r.mockUserToken)){let w,T;if(typeof r.mockUserToken=="string")w=r.mockUserToken,T=_i.MOCK_USER;else{w=Y1(r.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new Ne(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new _i(I)}n._authCredentials=new Tk(new UT(w,T))}}class Ml{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ml(this.firestore,e,this._query)}}class En{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}toJSON(){return{type:En._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(bh(t,En._jsonSchema))return new En(e,r||null,new Ge(Qt.fromString(t.referencePath)))}}En._jsonSchemaVersion="firestore/documentReference/1.0",En._jsonSchema={type:Nn("string",En._jsonSchemaVersion),referencePath:Nn("string")};class wa extends Ml{constructor(e,t,r){super(e,t,Gd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new Ge(e))}withConverter(e){return new wa(this.firestore,e,this._path)}}function bu(n,e,...t){if(n=ai(n),FT("collection","path",e),n instanceof tp){const r=Qt.fromString(e,...t);return ib(r),new wa(n,null,r)}{if(!(n instanceof En||n instanceof wa))throw new Ne(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return ib(r),new wa(n.firestore,null,r)}}function yl(n,e,...t){if(n=ai(n),arguments.length===1&&(e=wv.newId()),FT("doc","path",e),n instanceof tp){const r=Qt.fromString(e,...t);return nb(r),new En(n,null,new Ge(r))}{if(!(n instanceof En||n instanceof wa))throw new Ne(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return nb(r),new En(n.firestore,n instanceof wa?n.converter:null,new Ge(r))}}const Zb="AsyncQueue";class Gb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new PC(this,"async_queue_retry"),this.oc=()=>{const r=ag();r&&Ve(Zb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=ag();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=ag();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new ba;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Hu(e))throw e;Ve(Zb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,bo("INTERNAL UNHANDLED ERROR: ",Wb(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=Uv.createAndSchedule(this,e,t,r,(u=>this.lc(u)));return this.ec.push(a),a}ac(){this.tc&&Xe(47125,{hc:Wb(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Wb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Kb(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const u of r)if(u in a&&typeof a[u]=="function")return!0;return!1})(n,["next","error","complete"])}class Cl extends tp{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new Gb,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gb(e),this._firestoreClient=void 0,await e}}}function vD(n,e){const t=typeof n=="object"?n:JS(),r=typeof n=="string"?n:gd,a=cv(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const u=W1("firestore");u&&gD(a,...u)}return a}function Zv(n){if(n._terminated)throw new Ne(Se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yD(n),n._firestoreClient}function yD(n){var e,t,r;const a=n._freezeSettings(),u=(function(g,v,_,w){return new Hk(g,v,_,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,tA(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new fD(n._authCredentials,n._appCheckCredentials,n._queue,u,n._componentsProvider&&(function(g){const v=g?._online.build();return{_offline:g?._offline.build(v),_online:v}})(n._componentsProvider))}class Nr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nr(li.fromBase64String(e))}catch(t){throw new Ne(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nr(li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bh(e,Nr._jsonSchema))return Nr.fromBase64String(e.bytes)}}Nr._jsonSchemaVersion="firestore/bytes/1.0",Nr._jsonSchema={type:Nn("string",Nr._jsonSchemaVersion),bytes:Nn("string")};class np{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ne(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ip{constructor(e){this._methodName=e}}class zs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zs._jsonSchemaVersion}}static fromJSON(e){if(bh(e,zs._jsonSchema))return new zs(e.latitude,e.longitude)}}zs._jsonSchemaVersion="firestore/geoPoint/1.0",zs._jsonSchema={type:Nn("string",zs._jsonSchemaVersion),latitude:Nn("number"),longitude:Nn("number")};class Bs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==a[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Bs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bh(e,Bs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Bs(e.vectorValues);throw new Ne(Se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bs._jsonSchemaVersion="firestore/vectorValue/1.0",Bs._jsonSchema={type:Nn("string",Bs._jsonSchemaVersion),vectorValues:Nn("object")};const _D=/^__.*__$/;class ED{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ka(e,this.data,this.fieldMask,t,this.fieldTransforms):new wh(e,this.data,t,this.fieldTransforms)}}class iA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ka(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe(40011,{Ec:n})}}class Gv{constructor(e,t,r,a,u,f){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,u===void 0&&this.Ac(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Gv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:r,mc:!1});return a.fc(e),a}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:r,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Td(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(rA(this.Ec)&&_D.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class bD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Xd(e)}Dc(e,t,r,a=!1){return new Gv({Ec:e,methodName:t,bc:r,path:oi.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rp(n){const e=n._freezeSettings(),t=Xd(n._databaseId);return new bD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sA(n,e,t,r,a,u={}){const f=n.Dc(u.merge||u.mergeFields?2:0,e,t,a);Kv("Data must be an object, but it was:",f,r);const g=oA(r,f);let v,_;if(u.merge)v=new vr(f.fieldMask),_=f.fieldTransforms;else if(u.mergeFields){const w=[];for(const T of u.mergeFields){const I=Wg(e,T,t);if(!f.contains(I))throw new Ne(Se.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);lA(w,I)||w.push(I)}v=new vr(w),_=f.fieldTransforms.filter((T=>v.covers(T.field)))}else v=null,_=f.fieldTransforms;return new ED(new nr(g),v,_)}class sp extends ip{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sp}}class Wv extends ip{_toFieldTransform(e){return new mO(e.path,new ah)}isEqual(e){return e instanceof Wv}}function wD(n,e,t,r){const a=n.Dc(1,e,t);Kv("Data must be an object, but it was:",a,r);const u=[],f=nr.empty();Ma(r,((v,_)=>{const w=Yv(e,v,t);_=ai(_);const T=a.gc(w);if(_ instanceof sp)u.push(w);else{const I=Ah(_,T);I!=null&&(u.push(w),f.set(w,I))}}));const g=new vr(u);return new iA(f,g,a.fieldTransforms)}function SD(n,e,t,r,a,u){const f=n.Dc(1,e,t),g=[Wg(e,r,t)],v=[a];if(u.length%2!=0)throw new Ne(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)g.push(Wg(e,u[I])),v.push(u[I+1]);const _=[],w=nr.empty();for(let I=g.length-1;I>=0;--I)if(!lA(_,g[I])){const V=g[I];let N=v[I];N=ai(N);const H=f.gc(V);if(N instanceof sp)_.push(V);else{const q=Ah(N,H);q!=null&&(_.push(V),w.set(V,q))}}const T=new vr(_);return new iA(w,T,f.fieldTransforms)}function TD(n,e,t,r=!1){return Ah(t,n.Dc(r?4:3,e))}function Ah(n,e){if(aA(n=ai(n)))return Kv("Unsupported field value:",e,n),oA(n,e);if(n instanceof ip)return(function(r,a){if(!rA(a.Ec))throw a.wc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(a);u&&a.fieldTransforms.push(u)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,a){const u=[];let f=0;for(const g of r){let v=Ah(g,a.yc(f));v==null&&(v={nullValue:"NULL_VALUE"}),u.push(v),f++}return{arrayValue:{values:u}}})(n,e)}return(function(r,a){if((r=ai(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fO(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=nn.fromDate(r);return{timestampValue:Ed(a.serializer,u)}}if(r instanceof nn){const u=new nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ed(a.serializer,u)}}if(r instanceof zs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nr)return{bytesValue:SC(a.serializer,r._byteString)};if(r instanceof En){const u=a.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw a.wc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Mv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Bs)return(function(f,g){return{mapValue:{fields:{[QT]:{stringValue:XT},[vd]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw g.wc("VectorValues must only contain numeric values.");return Lv(g.serializer,_)}))}}}}}})(r,a);throw a.wc(`Unsupported field value: ${Fd(r)}`)})(n,e)}function oA(n,e){const t={};return ZT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ma(n,((r,a)=>{const u=Ah(a,e.Vc(r));u!=null&&(t[r]=u)})),{mapValue:{fields:t}}}function aA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nn||n instanceof zs||n instanceof Nr||n instanceof En||n instanceof ip||n instanceof Bs)}function Kv(n,e,t){if(!aA(t)||!HT(t)){const r=Fd(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Wg(n,e,t){if((e=ai(e))instanceof np)return e._internalPath;if(typeof e=="string")return Yv(n,e);throw Td("Field path arguments must be of type string or ",n,!1,void 0,t)}const CD=new RegExp("[~\\*/\\[\\]]");function Yv(n,e,t){if(e.search(CD)>=0)throw Td(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new np(...e.split("."))._internalPath}catch{throw Td(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Td(n,e,t,r,a){const u=r&&!r.isEmpty(),f=a!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||f)&&(v+=" (found",u&&(v+=` in field ${r}`),f&&(v+=` in document ${a}`),v+=")"),new Ne(Se.INVALID_ARGUMENT,g+n+v)}function lA(n,e){return n.some((t=>t.isEqual(e)))}class uA{constructor(e,t,r,a,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(op("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class AD extends uA{data(){return super.data()}}function op(n,e){return typeof e=="string"?Yv(n,e):e instanceof np?e._internalPath:e._delegate._internalPath}function xD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ne(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $v{}class cA extends $v{}function Cd(n,e,...t){let r=[];e instanceof $v&&r.push(e),r=r.concat(t),(function(u){const f=u.filter((v=>v instanceof Qv)).length,g=u.filter((v=>v instanceof ap)).length;if(f>1||f>0&&g>0)throw new Ne(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class ap extends cA{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ap(e,t,r)}_apply(e){const t=this._parse(e);return hA(e._query,t),new Ml(e.firestore,e.converter,Dg(e._query,t))}_parse(e){const t=rp(e.firestore);return(function(u,f,g,v,_,w,T){let I;if(_.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new Ne(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){$b(T,w);const N=[];for(const H of T)N.push(Yb(v,u,H));I={arrayValue:{values:N}}}else I=Yb(v,u,T)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||$b(T,w),I=TD(g,f,T,w==="in"||w==="not-in");return Dn.create(_,w,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function LD(n,e,t){const r=e,a=op("where",n);return ap._create(a,r,t)}class Qv extends $v{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:os.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,u){let f=a;const g=u.getFlattenedFilters();for(const v of g)hA(f,v),f=Dg(f,v)})(e._query,t),new Ml(e.firestore,e.converter,Dg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xv extends cA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Xv(e,t)}_apply(e){const t=(function(a,u,f){if(a.startAt!==null)throw new Ne(Se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ne(Se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oh(u,f)})(e._query,this._field,this._direction);return new Ml(e.firestore,e.converter,(function(a,u){const f=a.explicitOrderBy.concat([u]);return new qu(a.path,a.collectionGroup,f,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Jv(n,e="asc"){const t=e,r=op("orderBy",n);return Xv._create(r,t)}function Yb(n,e,t){if(typeof(t=ai(t))=="string"){if(t==="")throw new Ne(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oC(e)&&t.indexOf("/")!==-1)throw new Ne(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!Ge.isDocumentKey(r))throw new Ne(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hb(n,new Ge(r))}if(t instanceof En)return hb(n,t._key);throw new Ne(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fd(t)}.`)}function $b(n,e){if(!Array.isArray(n)||n.length===0)throw new Ne(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hA(n,e){const t=(function(a,u){for(const f of a)for(const g of f.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ne(Se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(Se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class RD{convertValue(e,t="none"){switch(La(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ma(e,((a,u)=>{r[a]=this.convertValue(u,t)})),r}convertVectorValue(e){var t,r,a;const u=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[vd].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map((f=>Cn(f.doubleValue)));return new Bs(u)}convertGeoPoint(e){return new zs(Cn(e.latitude),Cn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ih(e));default:return null}}convertTimestamp(e){const t=Aa(e);return new nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);Bt(RC(r),9688,{name:e});const a=new rh(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return a.isEqual(t)||bo(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function fA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class jc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _l extends uA{constructor(e,t,r,a,u,f){super(e,t,r,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(op("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(Se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_l._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_l._jsonSchemaVersion="firestore/documentSnapshot/1.0",_l._jsonSchema={type:Nn("string",_l._jsonSchemaVersion),bundleSource:Nn("string","DocumentSnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class ed extends _l{data(e={}){return super.data(e)}}class xu{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new jc(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ed(this._firestore,this._userDataWriter,r.key,r,new jc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,u){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map((g=>{const v=new ed(a._firestore,a._userDataWriter,g.doc.key,g.doc,new jc(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);return g.doc,{type:"added",doc:v,oldIndex:-1,newIndex:f++}}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const v=new ed(a._firestore,a._userDataWriter,g.doc.key,g.doc,new jc(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let _=-1,w=-1;return g.type!==0&&(_=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),w=f.indexOf(g.doc.key)),{type:ID(g.type),doc:v,oldIndex:_,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(Se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),a.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ID(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe(61501,{type:n})}}function ey(n){n=rs(n,En);const e=rs(n.firestore,Cl);return mD(Zv(e),n._key).then((t=>pA(e,n,t)))}xu._jsonSchemaVersion="firestore/querySnapshot/1.0",xu._jsonSchema={type:Nn("string",xu._jsonSchemaVersion),bundleSource:Nn("string","QuerySnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class dA extends RD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}function td(n,e,t){n=rs(n,En);const r=rs(n.firestore,Cl),a=fA(n.converter,e,t);return ty(r,[sA(rp(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ss.none())])}function Fc(n,e,t,...r){n=rs(n,En);const a=rs(n.firestore,Cl),u=rp(a);let f;return f=typeof(e=ai(e))=="string"||e instanceof np?SD(u,"updateDoc",n._key,e,t,r):wD(u,"updateDoc",n._key,e),ty(a,[f.toMutation(n._key,ss.exists(!0))])}function _u(n,e){const t=rs(n.firestore,Cl),r=yl(n),a=fA(n.converter,e);return ty(t,[sA(rp(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,ss.exists(!1))]).then((()=>r))}function Ad(n,...e){var t,r,a;n=ai(n);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||Kb(e[f])||(u=e[f++]);const g={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(Kb(e[f])){const T=e[f];e[f]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[f+1]=(r=T.error)===null||r===void 0?void 0:r.bind(T),e[f+2]=(a=T.complete)===null||a===void 0?void 0:a.bind(T)}let v,_,w;if(n instanceof En)_=rs(n.firestore,Cl),w=Gd(n._key.path),v={next:T=>{e[f]&&e[f](pA(_,n,T))},error:e[f+1],complete:e[f+2]};else{const T=rs(n,Ml);_=rs(T.firestore,Cl),w=T._query;const I=new dA(_);v={next:V=>{e[f]&&e[f](new xu(_,I,T,V))},error:e[f+1],complete:e[f+2]},xD(n._query)}return(function(I,V,N,H){const q=new JC(H),W=new qC(V,q,N);return I.asyncQueue.enqueueAndForget((async()=>FC(await Gg(I),W))),()=>{q.Ou(),I.asyncQueue.enqueueAndForget((async()=>HC(await Gg(I),W)))}})(Zv(_),w,g,v)}function ty(n,e){return(function(r,a){const u=new ba;return r.asyncQueue.enqueueAndForget((async()=>iD(await pD(r),a,u))),u.promise})(Zv(n),e)}function pA(n,e,t){const r=t.docs.get(e._key),a=new dA(n);return new _l(n,a,e._key,r,new jc(t.hasPendingWrites,t.fromCache),e.converter)}function Or(){return new Wv("serverTimestamp")}(function(e,t=!0){(function(a){ju=a})(Bu),Iu(new bl("firestore",((r,{instanceIdentifier:a,options:u})=>{const f=r.getProvider("app").getImmediate(),g=new Cl(new Ck(r.getProvider("auth-internal")),new Lk(f,r.getProvider("app-check-internal")),(function(_,w){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Ne(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rh(_.options.projectId,w)})(f,a),f);return u=Object.assign({useFetchStreams:t},u),g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),_a(Q0,X0,e),_a(Q0,X0,"esm2017")})();const MD={apiKey:"AIzaSyCV7cTC6DPWERCQcYDviWCVsDWFwTLW8bk",authDomain:"swift-delivery-38345.firebaseapp.com",projectId:"swift-delivery-38345",storageBucket:"swift-delivery-38345.firebasestorage.app",messagingSenderId:"959515973555",appId:"1:959515973555:web:3e2e38ae84e962589cddc6"},mA=XS(MD),ny=bk(mA),ns=vD(mA);function kD({onSendMessage:n,userId:e}){const[t,r]=b.useState(!1),[a,u]=b.useState(""),[f,g]=b.useState(!1),[v,_]=b.useState(""),[w,T]=b.useState(!1),[I,V]=b.useState(!1),N=b.useRef(null),H=b.useRef(window.speechSynthesis);b.useEffect(()=>{const ie=window.SpeechRecognition||window.webkitSpeechRecognition;if(!ie){console.warn("Speech Recognition not supported");return}const ee=new ie;return ee.continuous=!1,ee.interimResults=!0,ee.lang="en-US",ee.onstart=()=>{r(!0),_(""),u("")},ee.onresult=X=>{let O="",P="";for(let M=X.resultIndex;M<X.results.length;M++){const j=X.results[M][0].transcript;X.results[M].isFinal?P+=j+" ":O+=j}u((P||O).trim())},ee.onerror=X=>{_(`Error: ${X.error}`),console.error("Speech recognition error:",X.error)},ee.onend=()=>{r(!1)},N.current=ee,()=>{N.current&&N.current.abort()}},[]);const q=()=>{N.current&&!t&&(u(""),_(""),N.current.start())},W=()=>{N.current&&t&&N.current.stop()},$=ie=>{if(!H.current)return;H.current.cancel();const ee=H.current.getVoices(),X=ee.find(j=>j.name.toLowerCase().includes("female")||j.name.toLowerCase().includes("woman")||j.name.toLowerCase().includes("her"))||ee[1],O=ie.match(/[^.!?]+[.!?]+/g)||[ie];let P=0;const M=()=>{if(P>=O.length){g(!1);return}const j=O[P].trim();P++;const U=new SpeechSynthesisUtterance(j);U.rate=.85,U.pitch=1.1+Math.random()*.2,U.volume=.85,X&&(U.voice=X),U.onstart=()=>g(!0),U.onend=()=>{P<O.length?setTimeout(M,400):g(!1)},U.onerror=()=>g(!1),H.current.speak(U)};g(!0),M()},re=async()=>{if(!a.trim())return;const ie=a.trim();u(""),V(!0);try{const O=(await(await fetch("http://localhost:5000/api/bot/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:ie})})).json()).reply||"I couldn't understand that. Please try again.";n(ie),setTimeout(()=>{$(O)},500)}catch(ee){console.error("Voice message failed:",ee),$("Sorry, I couldn't process your request. Please try again.")}finally{V(!1)}};return x.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"12px",backgroundColor:"#e0f7ff",borderRadius:"6px",border:"2px solid #06b6d4"}},x.createElement("div",{style:{display:"flex",gap:"6px",alignItems:"center",flexWrap:"wrap"}},x.createElement("button",{onClick:()=>T(!w),title:w?"Voice ON":"Voice OFF",style:{padding:"8px 12px",background:w?"#10b981":"#9ca3af",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"600",whiteSpace:"nowrap"}},w?"üîä ON":"üîá OFF"),w&&x.createElement("button",{onClick:t?W:q,disabled:I,style:{padding:"8px 12px",background:t?"#ef4444":"#4f46e5",color:"#fff",border:"none",borderRadius:"4px",cursor:I?"not-allowed":"pointer",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",opacity:I?.6:1,whiteSpace:"nowrap"},title:t?"Stop listening":"Start speaking"},t?"üõë":"üé§"," ",t?"Stop":"Speak"),f&&x.createElement("button",{onClick:()=>H.current?.cancel(),style:{padding:"8px 12px",background:"#f97316",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"600",whiteSpace:"nowrap"},title:"Stop speaking"},"üîá Stop")),w&&a&&!I&&x.createElement("div",{style:{padding:"8px",background:"#dbeafe",borderRadius:"4px",fontSize:"11px",color:"#1e40af",borderLeft:"3px solid #3b82f6"}},x.createElement("strong",null,"You:")," ",a),w&&v&&x.createElement("div",{style:{padding:"8px",background:"#fee2e2",borderRadius:"4px",fontSize:"10px",color:"#991b1b",borderLeft:"3px solid #ef4444"}},v),w&&I&&x.createElement("div",{style:{padding:"8px",background:"#fef3c7",borderRadius:"4px",fontSize:"11px",color:"#92400e"}},"‚è≥ Processing..."),w&&a&&!v&&!I&&x.createElement("button",{onClick:re,style:{padding:"8px 12px",background:"#10b981",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"600",width:"100%"}},"‚úì Send Voice Message"))}function OD({status:n}){return!n||n==="sent"?x.createElement("span",{title:"Sent"},"‚úì"):n==="delivered"?x.createElement("span",{title:"Delivered"},"‚úì‚úì"):n==="read"?x.createElement("span",{title:"Read"},"‚úì‚úì"):null}function PD(){const n=ny.currentUser,e=n?.uid||"anonymous",[t,r]=b.useState([]),[a,u]=b.useState(""),[f,g]=b.useState(!1),[v,_]=b.useState(!0),[w,T]=b.useState(""),I=b.useRef(null);b.useEffect(()=>{console.log("‚úÖ ChatBox mounted, VoiceAssistant should be visible")},[]);const V=b.useMemo(()=>yl(ns,"threads",e),[ns,e]),N=b.useMemo(()=>bu(ns,"threads",e,"messages"),[ns,e]);b.useEffect(()=>{let W=()=>{},$=!0;return(async()=>{try{const re=await ey(V);if(!re.exists())await td(V,{userId:e,agentRequested:!1,updatedAt:Or()});else{const ee=re.data();$&&g(!!ee.agentRequested)}const ie=Cd(N,Jv("ts","asc"));W=Ad(ie,async ee=>{const X=ee.docs.map(P=>({id:P.id,...P.data()}));r(X),I.current&&(I.current.scrollTop=I.current.scrollHeight);const O=[];for(const P of ee.docs){const M=P.data();M.from!=="customer"&&(M.status==="sent"&&O.push(Fc(yl(N,P.id),{status:"delivered"})),M.status!=="read"&&O.push(Fc(yl(N,P.id),{status:"read"})))}if(O.length)for(const P of O)try{await P}catch(M){console.warn("message status update failed",M)}})}catch(re){console.error("Chat init failed",re)}finally{$&&_(!1)}})(),()=>{$=!1;try{W()}catch{}}},[V,N,e]);const H=async()=>{const W=a.trim();if(W){u("");try{await _u(N,{from:"customer",text:W,ts:Or(),status:"sent"}),await Fc(V,{updatedAt:Or()});const $=W.toLowerCase();if(["tracking","track my package","where is my package","package status","delivery status","is my package","when will my package"].some(O=>$.includes(O))){try{const O=await fetch(`http://localhost:5000/api/bot/tracking-suggestions?customerName=${encodeURIComponent(n?.displayName||"Customer")}`);if(O.ok){const P=await O.json();if(Array.isArray(P)&&P.length>0){const M=P[0],j=`üì¶ **Your Package Tracking**

üÜî Tracking ID: ${M.trackingId}
üìç Status: ${M.status}
üìß Recipient: ${M.user.fullName}
üïê Last Updated: ${new Date(M.updatedAt).toLocaleString()}

Location: ${M.location.lat.toFixed(4)}, ${M.location.lng.toFixed(4)}`;await _u(N,{from:"bot",text:j,ts:Or(),status:"sent"})}}}catch(O){console.warn("Tracking lookup failed:",O)}return}if(["speak with agent","speak with human","speak to agent","talk to agent","talk to human","talk with human","human agent","live agent"].some(O=>$.includes(O))){try{await td(V,{agentRequested:!0,updatedAt:Or()},{merge:!0}),g(!0),await _u(N,{from:"bot",text:"üöÄ I've connected you with our support team. An agent will be with you shortly!",ts:Or(),status:"sent"})}catch(O){console.warn("auto-escalation setDoc failed",O)}return}let X="I'm here to help! How can I assist you?";try{console.log("ü§ñ Calling AI endpoint with message:",W);const O=await fetch("http://localhost:5000/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:W})});if(console.log("ü§ñ AI response status:",O.status),O.ok){const P=await O.json();console.log("ü§ñ AI response data:",P),P.reply&&P.reply.trim()&&(X=P.reply)}else console.warn("‚ö†Ô∏è AI endpoint returned non-ok status:",O.status),X="I'm experiencing a temporary issue, but I'm here to help. What do you need?"}catch(O){console.error("‚ùå AI chat error:",O),X="I'm temporarily unavailable. Would you like to connect with a human agent?"}console.log("üì§ Sending bot response:",X),T(X),await _u(N,{from:"bot",text:X,ts:Or(),status:"sent"})}catch($){console.error("sendMessage failed",$)}}},q=async()=>{try{await td(V,{agentRequested:!0,updatedAt:Or()},{merge:!0}),g(!0)}catch(W){console.error("request agent failed",W)}};return x.createElement("div",{className:"chatbox-container",style:{border:"1px solid #ddd",borderRadius:8,maxWidth:480,display:"flex",flexDirection:"column"}},x.createElement("div",{style:{display:"flex",alignItems:"center",padding:8,borderBottom:"1px solid #eee"}},x.createElement("strong",{style:{flex:1}},"Support Chat"),x.createElement("button",{onClick:q,disabled:f},f?"Agent Requested":"Request Human Agent")),x.createElement("div",{ref:I,className:"chatbox-messages",style:{height:320,overflowY:"auto",padding:12,flex:1}},v&&x.createElement("p",null,"Loading chat‚Ä¶"),!v&&t.length===0&&x.createElement("p",{style:{color:"#666"}},"No messages yet. Start the conversation."),t.map(W=>{const $=W.meta&&W.meta.location&&typeof W.meta.location.lat=="number"&&typeof W.meta.location.lng=="number",re=W.meta&&W.meta.pkgStatus,ie=$?`https://www.google.com/maps?q=${W.meta.location.lat},${W.meta.location.lng}`:null;return x.createElement("div",{key:W.id,className:`chatbox-message ${W.from==="customer"?"chatbox-user":W.from==="admin"?"chatbox-admin":"chatbox-bot"}`,style:{display:"flex",flexDirection:"column",alignItems:W.from==="customer"?"flex-end":"flex-start",marginBottom:8}},x.createElement("div",{style:{background:W.from==="customer"?"#daf1ff":W.from==="admin"?"#f4f6ff":"#f9f9f9",padding:"6px 10px",borderRadius:8,maxWidth:"80%",whiteSpace:"pre-wrap"}},x.createElement("strong",null,W.from==="customer"?"You":W.from==="admin"?"Admin":"SwiftBot"),x.createElement("div",{style:{fontStyle:"italic"}},W.text),re&&x.createElement("div",{style:{marginTop:6}},x.createElement("span",{style:{fontSize:12,color:"#0c5460",background:"#d1ecf1",padding:"2px 6px",borderRadius:6}},"Status: ",String(W.meta.pkgStatus).replace("_"," "))),$&&x.createElement("div",{style:{marginTop:6}},x.createElement("a",{href:ie,target:"_blank",rel:"noreferrer",style:{fontSize:12}},"View package location on map"))),W.from==="customer"&&x.createElement("div",{style:{fontSize:12,color:"#888",marginTop:2}},x.createElement(OD,{status:W.status})))})),x.createElement("div",{style:{padding:12,borderTop:"2px solid #06b6d4",backgroundColor:"#fff"}},x.createElement("p",{style:{margin:"0 0 10px 0",fontSize:13,fontWeight:600,color:"#0369a1"}},"üé§ Voice Commands:"),x.createElement(kD,{onSendMessage:W=>{W.trim()&&_u(N,{from:"customer",text:W.trim(),ts:Or(),status:"sent"}).then(()=>{Fc(V,{updatedAt:Or()})})},userId:e})),x.createElement("div",{className:"chatbox-input",style:{display:"flex",gap:8,padding:8,borderTop:"1px solid #eee"}},x.createElement("input",{type:"text",value:a,onChange:W=>u(W.target.value),onKeyDown:W=>{W.key==="Enter"&&H()},placeholder:"Type your message‚Ä¶",style:{flex:1,padding:8}}),x.createElement("button",{onClick:H},"Send")))}const js=Object.create(null);js.open="0";js.close="1";js.ping="2";js.pong="3";js.message="4";js.upgrade="5";js.noop="6";const nd=Object.create(null);Object.keys(js).forEach(n=>{nd[js[n]]=n});const Kg={type:"error",data:"parser error"},gA=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",vA=typeof ArrayBuffer=="function",yA=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,iy=({type:n,data:e},t,r)=>gA&&e instanceof Blob?t?r(e):Qb(e,r):vA&&(e instanceof ArrayBuffer||yA(e))?t?r(e):Qb(new Blob([e]),r):r(js[n]+(e||"")),Qb=(n,e)=>{const t=new FileReader;return t.onload=function(){const r=t.result.split(",")[1];e("b"+(r||""))},t.readAsDataURL(n)};function Xb(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let ug;function DD(n,e){if(gA&&n.data instanceof Blob)return n.data.arrayBuffer().then(Xb).then(e);if(vA&&(n.data instanceof ArrayBuffer||yA(n.data)))return e(Xb(n.data));iy(n,!1,t=>{ug||(ug=new TextEncoder),e(ug.encode(t))})}const Jb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<Jb.length;n++)Hc[Jb.charCodeAt(n)]=n;const ND=n=>{let e=n.length*.75,t=n.length,r,a=0,u,f,g,v;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const _=new ArrayBuffer(e),w=new Uint8Array(_);for(r=0;r<t;r+=4)u=Hc[n.charCodeAt(r)],f=Hc[n.charCodeAt(r+1)],g=Hc[n.charCodeAt(r+2)],v=Hc[n.charCodeAt(r+3)],w[a++]=u<<2|f>>4,w[a++]=(f&15)<<4|g>>2,w[a++]=(g&3)<<6|v&63;return _},VD=typeof ArrayBuffer=="function",ry=(n,e)=>{if(typeof n!="string")return{type:"message",data:_A(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:zD(n.substring(1),e)}:nd[t]?n.length>1?{type:nd[t],data:n.substring(1)}:{type:nd[t]}:Kg},zD=(n,e)=>{if(VD){const t=ND(n);return _A(t,e)}else return{base64:!0,data:n}},_A=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},EA="",BD=(n,e)=>{const t=n.length,r=new Array(t);let a=0;n.forEach((u,f)=>{iy(u,!1,g=>{r[f]=g,++a===t&&e(r.join(EA))})})},UD=(n,e)=>{const t=n.split(EA),r=[];for(let a=0;a<t.length;a++){const u=ry(t[a],e);if(r.push(u),u.type==="error")break}return r};function jD(){return new TransformStream({transform(n,e){DD(n,t=>{const r=t.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const u=new DataView(a.buffer);u.setUint8(0,126),u.setUint16(1,r)}else{a=new Uint8Array(9);const u=new DataView(a.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(r))}n.data&&typeof n.data!="string"&&(a[0]|=128),e.enqueue(a),e.enqueue(t)})}})}let cg;function Bf(n){return n.reduce((e,t)=>e+t.length,0)}function Uf(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let r=0;for(let a=0;a<e;a++)t[a]=n[0][r++],r===n[0].length&&(n.shift(),r=0);return n.length&&r<n[0].length&&(n[0]=n[0].slice(r)),t}function FD(n,e){cg||(cg=new TextDecoder);const t=[];let r=0,a=-1,u=!1;return new TransformStream({transform(f,g){for(t.push(f);;){if(r===0){if(Bf(t)<1)break;const v=Uf(t,1);u=(v[0]&128)===128,a=v[0]&127,a<126?r=3:a===126?r=1:r=2}else if(r===1){if(Bf(t)<2)break;const v=Uf(t,2);a=new DataView(v.buffer,v.byteOffset,v.length).getUint16(0),r=3}else if(r===2){if(Bf(t)<8)break;const v=Uf(t,8),_=new DataView(v.buffer,v.byteOffset,v.length),w=_.getUint32(0);if(w>Math.pow(2,21)-1){g.enqueue(Kg);break}a=w*Math.pow(2,32)+_.getUint32(4),r=3}else{if(Bf(t)<a)break;const v=Uf(t,a);g.enqueue(ry(u?v:cg.decode(v),e)),r=0}if(a===0||a>n){g.enqueue(Kg);break}}}})}const bA=4;function Vn(n){if(n)return HD(n)}function HD(n){for(var e in Vn.prototype)n[e]=Vn.prototype[e];return n}Vn.prototype.on=Vn.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};Vn.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};Vn.prototype.off=Vn.prototype.removeListener=Vn.prototype.removeAllListeners=Vn.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var r,a=0;a<t.length;a++)if(r=t[a],r===e||r.fn===e){t.splice(a,1);break}return t.length===0&&delete this._callbacks["$"+n],this};Vn.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,a=t.length;r<a;++r)t[r].apply(this,e)}return this};Vn.prototype.emitReserved=Vn.prototype.emit;Vn.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};Vn.prototype.hasListeners=function(n){return!!this.listeners(n).length};const lp=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Dr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),qD="arraybuffer";function wA(n,...e){return e.reduce((t,r)=>(n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}const ZD=Dr.setTimeout,GD=Dr.clearTimeout;function up(n,e){e.useNativeTimers?(n.setTimeoutFn=ZD.bind(Dr),n.clearTimeoutFn=GD.bind(Dr)):(n.setTimeoutFn=Dr.setTimeout.bind(Dr),n.clearTimeoutFn=Dr.clearTimeout.bind(Dr))}const WD=1.33;function KD(n){return typeof n=="string"?YD(n):Math.ceil((n.byteLength||n.size)*WD)}function YD(n){let e=0,t=0;for(let r=0,a=n.length;r<a;r++)e=n.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}function SA(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function $D(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function QD(n){let e={},t=n.split("&");for(let r=0,a=t.length;r<a;r++){let u=t[r].split("=");e[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return e}class XD extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class sy extends Vn{constructor(e){super(),this.writable=!1,up(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new XD(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=ry(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=$D(e);return t.length?"?"+t:""}}class JD extends sy{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};UD(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,BD(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=SA()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let TA=!1;try{TA=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const e2=TA;function t2(){}class n2 extends JD{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let r=location.port;r||(r=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(a,u)=>{this.onError("xhr post error",a,u)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}}let Lu=class id extends Vn{constructor(e,t,r){super(),this.createRequest=e,up(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const t=wA(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var a;r.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=id.requestsCount++,id.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=t2,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete id.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Lu.requestsCount=0;Lu.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ew);else if(typeof addEventListener=="function"){const n="onpagehide"in Dr?"pagehide":"unload";addEventListener(n,ew,!1)}}function ew(){for(let n in Lu.requests)Lu.requests.hasOwnProperty(n)&&Lu.requests[n].abort()}const i2=(function(){const n=CA({xdomain:!1});return n&&n.responseType!==null})();class r2 extends n2{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=i2&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Lu(CA,this.uri(),e)}}function CA(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||e2))return new XMLHttpRequest}catch{}if(!e)try{return new Dr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const AA=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class s2 extends sy{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=AA?{}:wA(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],a=t===e.length-1;iy(r,this.supportsBinary,u=>{try{this.doWrite(r,u)}catch{}a&&lp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=SA()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const hg=Dr.WebSocket||Dr.MozWebSocket;class o2 extends s2{createSocket(e,t,r){return AA?new hg(e,t,r):t?new hg(e,t):new hg(e)}doWrite(e,t){this.ws.send(t)}}class a2 extends sy{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=FD(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),a=jD();a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();const u=()=>{r.read().then(({done:g,value:v})=>{g||(this.onPacket(v),u())}).catch(g=>{})};u();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this._writer.write(f).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],a=t===e.length-1;this._writer.write(r).then(()=>{a&&lp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const l2={websocket:o2,webtransport:a2,polling:r2},u2=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c2=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Yg(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),r=n.indexOf("]");t!=-1&&r!=-1&&(n=n.substring(0,t)+n.substring(t,r).replace(/:/g,";")+n.substring(r,n.length));let a=u2.exec(n||""),u={},f=14;for(;f--;)u[c2[f]]=a[f]||"";return t!=-1&&r!=-1&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=h2(u,u.path),u.queryKey=f2(u,u.query),u}function h2(n,e){const t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function f2(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,a,u){a&&(t[a]=u)}),t}const $g=typeof addEventListener=="function"&&typeof removeEventListener=="function",rd=[];$g&&addEventListener("offline",()=>{rd.forEach(n=>n())},!1);class Sa extends Vn{constructor(e,t){if(super(),this.binaryType=qD,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const r=Yg(e);t.hostname=r.host,t.secure=r.protocol==="https"||r.protocol==="wss",t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=Yg(t.host).host);up(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(r=>{const a=r.prototype.name;this.transports.push(a),this._transportsByName[a]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=QD(this.opts.query)),$g&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},rd.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=bA,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Sa.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Sa.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const a=this.writeBuffer[r].data;if(a&&(t+=KD(a)),r>0&&t>this._maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,lp(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,a){if(typeof t=="function"&&(a=t,t=void 0),typeof r=="function"&&(a=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const u={type:e,data:t,options:r};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Sa.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),$g&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=rd.indexOf(this._offlineEventListener);r!==-1&&rd.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Sa.protocol=bA;class d2 extends Sa{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;Sa.priorWebsocketSuccess=!1;const a=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",T=>{if(!r)if(T.type==="pong"&&T.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Sa.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(w(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const I=new Error("probe error");I.transport=t.name,this.emitReserved("upgradeError",I)}}))};function u(){r||(r=!0,w(),t.close(),t=null)}const f=T=>{const I=new Error("probe error: "+T);I.transport=t.name,u(),this.emitReserved("upgradeError",I)};function g(){f("transport closed")}function v(){f("socket closed")}function _(T){t&&T.name!==t.name&&u()}const w=()=>{t.removeListener("open",a),t.removeListener("error",f),t.removeListener("close",g),this.off("close",v),this.off("upgrading",_)};t.once("open",a),t.once("error",f),t.once("close",g),this.once("close",v),this.once("upgrading",_),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}let p2=class extends d2{constructor(e,t={}){const r=typeof e=="object"?e:t;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(a=>l2[a]).filter(a=>!!a)),super(e,r)}};function m2(n,e="",t){let r=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),r=Yg(n)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const u=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+u+":"+r.port+e,r.href=r.protocol+"://"+u+(t&&t.port===r.port?"":":"+r.port),r}const g2=typeof ArrayBuffer=="function",v2=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,xA=Object.prototype.toString,y2=typeof Blob=="function"||typeof Blob<"u"&&xA.call(Blob)==="[object BlobConstructor]",_2=typeof File=="function"||typeof File<"u"&&xA.call(File)==="[object FileConstructor]";function oy(n){return g2&&(n instanceof ArrayBuffer||v2(n))||y2&&n instanceof Blob||_2&&n instanceof File}function sd(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(sd(n[t]))return!0;return!1}if(oy(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return sd(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&sd(n[t]))return!0;return!1}function E2(n){const e=[],t=n.data,r=n;return r.data=Qg(t,e),r.attachments=e.length,{packet:r,buffers:e}}function Qg(n,e){if(!n)return n;if(oy(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<n.length;r++)t[r]=Qg(n[r],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=Qg(n[r],e));return t}return n}function b2(n,e){return n.data=Xg(n.data,e),delete n.attachments,n}function Xg(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=Xg(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=Xg(n[t],e));return n}const w2=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],S2=5;var xt;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(xt||(xt={}));class T2{constructor(e){this.replacer=e}encode(e){return(e.type===xt.EVENT||e.type===xt.ACK)&&sd(e)?this.encodeAsBinary({type:e.type===xt.EVENT?xt.BINARY_EVENT:xt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===xt.BINARY_EVENT||e.type===xt.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=E2(e),r=this.encodeAsString(t.packet),a=t.buffers;return a.unshift(r),a}}function tw(n){return Object.prototype.toString.call(n)==="[object Object]"}class ay extends Vn{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===xt.BINARY_EVENT;r||t.type===xt.BINARY_ACK?(t.type=r?xt.EVENT:xt.ACK,this.reconstructor=new C2(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(oy(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(xt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===xt.BINARY_EVENT||r.type===xt.BINARY_ACK){const u=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const f=e.substring(u,t);if(f!=Number(f)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(f)}if(e.charAt(t+1)==="/"){const u=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(u,t)}else r.nsp="/";const a=e.charAt(t+1);if(a!==""&&Number(a)==a){const u=t+1;for(;++t;){const f=e.charAt(t);if(f==null||Number(f)!=f){--t;break}if(t===e.length)break}r.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){const u=this.tryParse(e.substr(t));if(ay.isPayloadValid(r.type,u))r.data=u;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case xt.CONNECT:return tw(t);case xt.DISCONNECT:return t===void 0;case xt.CONNECT_ERROR:return typeof t=="string"||tw(t);case xt.EVENT:case xt.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&w2.indexOf(t[0])===-1);case xt.ACK:case xt.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class C2{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=b2(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const A2=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ay,Encoder:T2,get PacketType(){return xt},protocol:S2},Symbol.toStringTag,{value:"Module"}));function ts(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const x2=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class LA extends Vn{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ts(e,"open",this.onopen.bind(this)),ts(e,"packet",this.onpacket.bind(this)),ts(e,"error",this.onerror.bind(this)),ts(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,a,u;if(x2.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const f={type:xt.EVENT,data:t};if(f.options={},f.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const w=this.ids++,T=t.pop();this._registerAckCallback(w,T),f.id=w}const g=(a=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||a===void 0?void 0:a.writable,v=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!g||(v?(this.notifyOutgoingListeners(f),this.packet(f)):this.sendBuffer.push(f)),this.flags={},this}_registerAckCallback(e,t){var r;const a=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(a===void 0){this.acks[e]=t;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let g=0;g<this.sendBuffer.length;g++)this.sendBuffer[g].id===e&&this.sendBuffer.splice(g,1);t.call(this,new Error("operation has timed out"))},a),f=(...g)=>{this.io.clearTimeoutFn(u),t.apply(this,g)};f.withError=!0,this.acks[e]=f}emitWithAck(e,...t){return new Promise((r,a)=>{const u=(f,g)=>f?a(f):r(g);u.withError=!0,t.push(u),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((a,...u)=>r!==this._queue[0]?void 0:(a!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(a)):(this._queue.shift(),t&&t(null,...u)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:xt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case xt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case xt.EVENT:case xt.BINARY_EVENT:this.onevent(e);break;case xt.ACK:case xt.BINARY_ACK:this.onack(e);break;case xt.DISCONNECT:this.ondisconnect();break;case xt.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...a){r||(r=!0,t.packet({type:xt.ACK,id:e,data:a}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:xt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function Gu(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}Gu.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0};Gu.prototype.reset=function(){this.attempts=0};Gu.prototype.setMin=function(n){this.ms=n};Gu.prototype.setMax=function(n){this.max=n};Gu.prototype.setJitter=function(n){this.jitter=n};class Jg extends Vn{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,up(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Gu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const a=t.parser||A2;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new p2(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const a=ts(t,"open",function(){r.onopen(),e&&e()}),u=g=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",g),e?e(g):this.maybeReconnectOnOpen()},f=ts(t,"error",u);if(this._timeout!==!1){const g=this._timeout,v=this.setTimeoutFn(()=>{a(),u(new Error("timeout")),t.close()},g);this.opts.autoUnref&&v.unref(),this.subs.push(()=>{this.clearTimeoutFn(v)})}return this.subs.push(a),this.subs.push(f),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ts(e,"ping",this.onping.bind(this)),ts(e,"data",this.ondata.bind(this)),ts(e,"error",this.onerror.bind(this)),ts(e,"close",this.onclose.bind(this)),ts(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){lp(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new LA(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t)if(this.nsps[r].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(a=>{a?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",a)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Oc={};function Qc(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=m2(n,e.path||"/socket.io"),r=t.source,a=t.id,u=t.path,f=Oc[a]&&u in Oc[a].nsps,g=e.forceNew||e["force new connection"]||e.multiplex===!1||f;let v;return g?v=new Jg(r,e):(Oc[a]||(Oc[a]=new Jg(r,e)),v=Oc[a]),t.query&&!e.query&&(e.query=t.queryKey),v.socket(t.path,e)}Object.assign(Qc,{Manager:Jg,Socket:LA,io:Qc,connect:Qc});const L2=()=>{const n=localStorage.getItem("token");if(!n)return null;try{const e=n.split(".")[1],t=JSON.parse(atob(e));return{email:t.email||t.user?.email||"",role:t.role||t.user?.role||"",...t}}catch(e){return console.error("getCurrentUser error",e),null}},R2=async()=>{try{localStorage.removeItem("token"),await cM(ny),console.log("User successfully logged out from both Firebase and local storage")}catch(n){console.error("Logout error:",n),localStorage.removeItem("token")}};var qc={exports:{}};var I2=qc.exports,nw;function M2(){return nw||(nw=1,(function(n,e){(function(t,r){r(e)})(I2,(function(t){var r="1.9.4";function a(o){var c,p,E,C;for(p=1,E=arguments.length;p<E;p++){C=arguments[p];for(c in C)o[c]=C[c]}return o}var u=Object.create||(function(){function o(){}return function(c){return o.prototype=c,new o}})();function f(o,c){var p=Array.prototype.slice;if(o.bind)return o.bind.apply(o,p.call(arguments,1));var E=p.call(arguments,2);return function(){return o.apply(c,E.length?E.concat(p.call(arguments)):arguments)}}var g=0;function v(o){return"_leaflet_id"in o||(o._leaflet_id=++g),o._leaflet_id}function _(o,c,p){var E,C,k,Z;return Z=function(){E=!1,C&&(k.apply(p,C),C=!1)},k=function(){E?C=arguments:(o.apply(p,arguments),setTimeout(Z,c),E=!0)},k}function w(o,c,p){var E=c[1],C=c[0],k=E-C;return o===E&&p?o:((o-C)%k+k)%k+C}function T(){return!1}function I(o,c){if(c===!1)return o;var p=Math.pow(10,c===void 0?6:c);return Math.round(o*p)/p}function V(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function N(o){return V(o).split(/\s+/)}function H(o,c){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?u(o.options):{});for(var p in c)o.options[p]=c[p];return o.options}function q(o,c,p){var E=[];for(var C in o)E.push(encodeURIComponent(p?C.toUpperCase():C)+"="+encodeURIComponent(o[C]));return(!c||c.indexOf("?")===-1?"?":"&")+E.join("&")}var W=/\{ *([\w_ -]+) *\}/g;function $(o,c){return o.replace(W,function(p,E){var C=c[E];if(C===void 0)throw new Error("No value provided for variable "+p);return typeof C=="function"&&(C=C(c)),C})}var re=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function ie(o,c){for(var p=0;p<o.length;p++)if(o[p]===c)return p;return-1}var ee="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var O=0;function P(o){var c=+new Date,p=Math.max(0,16-(c-O));return O=c+p,window.setTimeout(o,p)}var M=window.requestAnimationFrame||X("RequestAnimationFrame")||P,j=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function U(o,c,p){if(p&&M===P)o.call(c);else return M.call(window,f(o,c))}function G(o){o&&j.call(window,o)}var F={__proto__:null,extend:a,create:u,bind:f,get lastId(){return g},stamp:v,throttle:_,wrapNum:w,falseFn:T,formatNum:I,trim:V,splitWords:N,setOptions:H,getParamString:q,template:$,isArray:re,indexOf:ie,emptyImageUrl:ee,requestFn:M,cancelFn:j,requestAnimFrame:U,cancelAnimFrame:G};function ke(){}ke.extend=function(o){var c=function(){H(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=c.__super__=this.prototype,E=u(p);E.constructor=c,c.prototype=E;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(c[C]=this[C]);return o.statics&&a(c,o.statics),o.includes&&(Le(o.includes),a.apply(null,[E].concat(o.includes))),a(E,o),delete E.statics,delete E.includes,E.options&&(E.options=p.options?u(p.options):{},a(E.options,o.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var k=0,Z=E._initHooks.length;k<Z;k++)E._initHooks[k].call(this)}},c},ke.include=function(o){var c=this.prototype.options;return a(this.prototype,o),o.options&&(this.prototype.options=c,this.mergeOptions(o.options)),this},ke.mergeOptions=function(o){return a(this.prototype.options,o),this},ke.addInitHook=function(o){var c=Array.prototype.slice.call(arguments,1),p=typeof o=="function"?o:function(){this[o].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function Le(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=re(o)?o:[o];for(var c=0;c<o.length;c++)o[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ne={on:function(o,c,p){if(typeof o=="object")for(var E in o)this._on(E,o[E],c);else{o=N(o);for(var C=0,k=o.length;C<k;C++)this._on(o[C],c,p)}return this},off:function(o,c,p){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var E in o)this._off(E,o[E],c);else{o=N(o);for(var C=arguments.length===1,k=0,Z=o.length;k<Z;k++)C?this._off(o[k]):this._off(o[k],c,p)}return this},_on:function(o,c,p,E){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(o,c,p)===!1){p===this&&(p=void 0);var C={fn:c,ctx:p};E&&(C.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(C)}},_off:function(o,c,p){var E,C,k;if(this._events&&(E=this._events[o],!!E)){if(arguments.length===1){if(this._firingCount)for(C=0,k=E.length;C<k;C++)E[C].fn=T;delete this._events[o];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var Z=this._listens(o,c,p);if(Z!==!1){var oe=E[Z];this._firingCount&&(oe.fn=T,this._events[o]=E=E.slice()),E.splice(Z,1)}}},fire:function(o,c,p){if(!this.listens(o,p))return this;var E=a({},c,{type:o,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var C=this._events[o];if(C){this._firingCount=this._firingCount+1||1;for(var k=0,Z=C.length;k<Z;k++){var oe=C[k],de=oe.fn;oe.once&&this.off(o,de,oe.ctx),de.call(oe.ctx||this,E)}this._firingCount--}}return p&&this._propagateEvent(E),this},listens:function(o,c,p,E){typeof o!="string"&&console.warn('"string" type argument expected');var C=c;typeof c!="function"&&(E=!!c,C=void 0,p=void 0);var k=this._events&&this._events[o];if(k&&k.length&&this._listens(o,C,p)!==!1)return!0;if(E){for(var Z in this._eventParents)if(this._eventParents[Z].listens(o,c,p,E))return!0}return!1},_listens:function(o,c,p){if(!this._events)return!1;var E=this._events[o]||[];if(!c)return!!E.length;p===this&&(p=void 0);for(var C=0,k=E.length;C<k;C++)if(E[C].fn===c&&E[C].ctx===p)return C;return!1},once:function(o,c,p){if(typeof o=="object")for(var E in o)this._on(E,o[E],c,!0);else{o=N(o);for(var C=0,k=o.length;C<k;C++)this._on(o[C],c,p,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[v(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[v(o)],this},_propagateEvent:function(o){for(var c in this._eventParents)this._eventParents[c].fire(o.type,a({layer:o.target,propagatedFrom:o.target},o),!0)}};ne.addEventListener=ne.on,ne.removeEventListener=ne.clearAllEventListeners=ne.off,ne.addOneTimeEventListener=ne.once,ne.fireEvent=ne.fire,ne.hasEventListeners=ne.listens;var me=ke.extend(ne);function ge(o,c,p){this.x=p?Math.round(o):o,this.y=p?Math.round(c):c}var _e=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};ge.prototype={clone:function(){return new ge(this.x,this.y)},add:function(o){return this.clone()._add(ue(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(ue(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new ge(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new ge(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(o){o=ue(o);var c=o.x-this.x,p=o.y-this.y;return Math.sqrt(c*c+p*p)},equals:function(o){return o=ue(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=ue(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+I(this.x)+", "+I(this.y)+")"}};function ue(o,c,p){return o instanceof ge?o:re(o)?new ge(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new ge(o.x,o.y):new ge(o,c,p)}function B(o,c){if(o)for(var p=c?[o,c]:o,E=0,C=p.length;E<C;E++)this.extend(p[E])}B.prototype={extend:function(o){var c,p;if(!o)return this;if(o instanceof ge||typeof o[0]=="number"||"x"in o)c=p=ue(o);else if(o=K(o),c=o.min,p=o.max,!c||!p)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=p.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(o){return ue((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return ue(this.min.x,this.max.y)},getTopRight:function(){return ue(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var c,p;return typeof o[0]=="number"||o instanceof ge?o=ue(o):o=K(o),o instanceof B?(c=o.min,p=o.max):c=p=o,c.x>=this.min.x&&p.x<=this.max.x&&c.y>=this.min.y&&p.y<=this.max.y},intersects:function(o){o=K(o);var c=this.min,p=this.max,E=o.min,C=o.max,k=C.x>=c.x&&E.x<=p.x,Z=C.y>=c.y&&E.y<=p.y;return k&&Z},overlaps:function(o){o=K(o);var c=this.min,p=this.max,E=o.min,C=o.max,k=C.x>c.x&&E.x<p.x,Z=C.y>c.y&&E.y<p.y;return k&&Z},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var c=this.min,p=this.max,E=Math.abs(c.x-p.x)*o,C=Math.abs(c.y-p.y)*o;return K(ue(c.x-E,c.y-C),ue(p.x+E,p.y+C))},equals:function(o){return o?(o=K(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function K(o,c){return!o||o instanceof B?o:new B(o,c)}function te(o,c){if(o)for(var p=c?[o,c]:o,E=0,C=p.length;E<C;E++)this.extend(p[E])}te.prototype={extend:function(o){var c=this._southWest,p=this._northEast,E,C;if(o instanceof Q)E=o,C=o;else if(o instanceof te){if(E=o._southWest,C=o._northEast,!E||!C)return this}else return o?this.extend(Ae(o)||fe(o)):this;return!c&&!p?(this._southWest=new Q(E.lat,E.lng),this._northEast=new Q(C.lat,C.lng)):(c.lat=Math.min(E.lat,c.lat),c.lng=Math.min(E.lng,c.lng),p.lat=Math.max(C.lat,p.lat),p.lng=Math.max(C.lng,p.lng)),this},pad:function(o){var c=this._southWest,p=this._northEast,E=Math.abs(c.lat-p.lat)*o,C=Math.abs(c.lng-p.lng)*o;return new te(new Q(c.lat-E,c.lng-C),new Q(p.lat+E,p.lng+C))},getCenter:function(){return new Q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Q(this.getNorth(),this.getWest())},getSouthEast:function(){return new Q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Q||"lat"in o?o=Ae(o):o=fe(o);var c=this._southWest,p=this._northEast,E,C;return o instanceof te?(E=o.getSouthWest(),C=o.getNorthEast()):E=C=o,E.lat>=c.lat&&C.lat<=p.lat&&E.lng>=c.lng&&C.lng<=p.lng},intersects:function(o){o=fe(o);var c=this._southWest,p=this._northEast,E=o.getSouthWest(),C=o.getNorthEast(),k=C.lat>=c.lat&&E.lat<=p.lat,Z=C.lng>=c.lng&&E.lng<=p.lng;return k&&Z},overlaps:function(o){o=fe(o);var c=this._southWest,p=this._northEast,E=o.getSouthWest(),C=o.getNorthEast(),k=C.lat>c.lat&&E.lat<p.lat,Z=C.lng>c.lng&&E.lng<p.lng;return k&&Z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,c){return o?(o=fe(o),this._southWest.equals(o.getSouthWest(),c)&&this._northEast.equals(o.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(o,c){return o instanceof te?o:new te(o,c)}function Q(o,c,p){if(isNaN(o)||isNaN(c))throw new Error("Invalid LatLng object: ("+o+", "+c+")");this.lat=+o,this.lng=+c,p!==void 0&&(this.alt=+p)}Q.prototype={equals:function(o,c){if(!o)return!1;o=Ae(o);var p=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return p<=(c===void 0?1e-9:c)},toString:function(o){return"LatLng("+I(this.lat,o)+", "+I(this.lng,o)+")"},distanceTo:function(o){return De.distance(this,Ae(o))},wrap:function(){return De.wrapLatLng(this)},toBounds:function(o){var c=180*o/40075017,p=c/Math.cos(Math.PI/180*this.lat);return fe([this.lat-c,this.lng-p],[this.lat+c,this.lng+p])},clone:function(){return new Q(this.lat,this.lng,this.alt)}};function Ae(o,c,p){return o instanceof Q?o:re(o)&&typeof o[0]!="object"?o.length===3?new Q(o[0],o[1],o[2]):o.length===2?new Q(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Q(o.lat,"lng"in o?o.lng:o.lon,o.alt):c===void 0?null:new Q(o,c,p)}var Ie={latLngToPoint:function(o,c){var p=this.projection.project(o),E=this.scale(c);return this.transformation._transform(p,E)},pointToLatLng:function(o,c){var p=this.scale(c),E=this.transformation.untransform(o,p);return this.projection.unproject(E)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var c=this.projection.bounds,p=this.scale(o),E=this.transformation.transform(c.min,p),C=this.transformation.transform(c.max,p);return new B(E,C)},infinite:!1,wrapLatLng:function(o){var c=this.wrapLng?w(o.lng,this.wrapLng,!0):o.lng,p=this.wrapLat?w(o.lat,this.wrapLat,!0):o.lat,E=o.alt;return new Q(p,c,E)},wrapLatLngBounds:function(o){var c=o.getCenter(),p=this.wrapLatLng(c),E=c.lat-p.lat,C=c.lng-p.lng;if(E===0&&C===0)return o;var k=o.getSouthWest(),Z=o.getNorthEast(),oe=new Q(k.lat-E,k.lng-C),de=new Q(Z.lat-E,Z.lng-C);return new te(oe,de)}},De=a({},Ie,{wrapLng:[-180,180],R:6371e3,distance:function(o,c){var p=Math.PI/180,E=o.lat*p,C=c.lat*p,k=Math.sin((c.lat-o.lat)*p/2),Z=Math.sin((c.lng-o.lng)*p/2),oe=k*k+Math.cos(E)*Math.cos(C)*Z*Z,de=2*Math.atan2(Math.sqrt(oe),Math.sqrt(1-oe));return this.R*de}}),Qe=6378137,ze={R:Qe,MAX_LATITUDE:85.0511287798,project:function(o){var c=Math.PI/180,p=this.MAX_LATITUDE,E=Math.max(Math.min(p,o.lat),-p),C=Math.sin(E*c);return new ge(this.R*o.lng*c,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(o){var c=180/Math.PI;return new Q((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*c,o.x*c/this.R)},bounds:(function(){var o=Qe*Math.PI;return new B([-o,-o],[o,o])})()};function Je(o,c,p,E){if(re(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=c,this._c=p,this._d=E}Je.prototype={transform:function(o,c){return this._transform(o.clone(),c)},_transform:function(o,c){return c=c||1,o.x=c*(this._a*o.x+this._b),o.y=c*(this._c*o.y+this._d),o},untransform:function(o,c){return c=c||1,new ge((o.x/c-this._b)/this._a,(o.y/c-this._d)/this._c)}};function Ut(o,c,p,E){return new Je(o,c,p,E)}var an=a({},De,{code:"EPSG:3857",projection:ze,transformation:(function(){var o=.5/(Math.PI*ze.R);return Ut(o,.5,-o,.5)})()}),ln=a({},an,{code:"EPSG:900913"});function ot(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Pi(o,c){var p="",E,C,k,Z,oe,de;for(E=0,k=o.length;E<k;E++){for(oe=o[E],C=0,Z=oe.length;C<Z;C++)de=oe[C],p+=(C?"L":"M")+de.x+" "+de.y;p+=c?Ue.svg?"z":"x":""}return p||"M0 0"}var Di=document.documentElement.style,Ni="ActiveXObject"in window,ui=Ni&&!document.addEventListener,ae="msLaunchUri"in navigator&&!("documentMode"in document),Pe=fi("webkit"),We=fi("android"),rn=fi("android 2")||fi("android 3"),Ct=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Wt=We&&fi("Google")&&Ct<537&&!("AudioNode"in window),nt=!!window.opera,dt=!ae&&fi("chrome"),An=fi("gecko")&&!Pe&&!nt&&!Ni,yr=!dt&&fi("safari"),ir=fi("phantom"),wi="OTransition"in Di,Si=navigator.platform.indexOf("Win")===0,ci=Ni&&"transition"in Di,un="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rn,xn="MozPerspective"in Di,Ln=!window.L_DISABLE_3D&&(ci||un||xn)&&!wi&&!ir,Vi=typeof orientation<"u"||fi("mobile"),as=Vi&&Pe,zr=Vi&&un,rr=!window.PointerEvent&&window.MSPointerEvent,hi=!!(window.PointerEvent||rr),zi="ontouchstart"in window||!!window.TouchEvent,Hn=!window.L_NO_TOUCH&&(zi||hi),Xn=Vi&&nt,Ti=Vi&&An,Br=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,_r=(function(){var o=!1;try{var c=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",T,c),window.removeEventListener("testPassiveEventSupport",T,c)}catch{}return o})(),Bi=(function(){return!!document.createElement("canvas").getContext})(),Ui=!!(document.createElementNS&&ot("svg").createSVGRect),Xt=!!Ui&&(function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),$e=!Ui&&(function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var c=o.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),ls=navigator.platform.indexOf("Mac")===0,us=navigator.platform.indexOf("Linux")===0;function fi(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ue={ie:Ni,ielt9:ui,edge:ae,webkit:Pe,android:We,android23:rn,androidStock:Wt,opera:nt,chrome:dt,gecko:An,safari:yr,phantom:ir,opera12:wi,win:Si,ie3d:ci,webkit3d:un,gecko3d:xn,any3d:Ln,mobile:Vi,mobileWebkit:as,mobileWebkit3d:zr,msPointer:rr,pointer:hi,touch:Hn,touchNative:zi,mobileOpera:Xn,mobileGecko:Ti,retina:Br,passiveEvents:_r,canvas:Bi,svg:Ui,vml:$e,inlineSvg:Xt,mac:ls,linux:us},Er=Ue.msPointer?"MSPointerDown":"pointerdown",Oa=Ue.msPointer?"MSPointerMove":"pointermove",sr=Ue.msPointer?"MSPointerUp":"pointerup",Jt=Ue.msPointer?"MSPointerCancel":"pointercancel",bn={touchstart:Er,touchmove:Oa,touchend:sr,touchcancel:Jt},or={touchstart:lr,touchmove:wr,touchend:wr,touchcancel:wr},Ci={},ar=!1;function kl(o,c,p){return c==="touchstart"&&jr(),or[c]?(p=or[c].bind(this,p),o.addEventListener(bn[c],p,!1),p):(console.warn("wrong event specified:",c),T)}function Pa(o,c,p){if(!bn[c]){console.warn("wrong event specified:",c);return}o.removeEventListener(bn[c],p,!1)}function Ur(o){Ci[o.pointerId]=o}function Hs(o){Ci[o.pointerId]&&(Ci[o.pointerId]=o)}function br(o){delete Ci[o.pointerId]}function jr(){ar||(document.addEventListener(Er,Ur,!0),document.addEventListener(Oa,Hs,!0),document.addEventListener(sr,br,!0),document.addEventListener(Jt,br,!0),ar=!0)}function wr(o,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var p in Ci)c.touches.push(Ci[p]);c.changedTouches=[c],o(c)}}function lr(o,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Ht(c),wr(o,c)}function cn(o){var c={},p,E;for(E in o)p=o[E],c[E]=p&&p.bind?p.bind(o):p;return o=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Co=200;function cs(o,c){o.addEventListener("dblclick",c);var p=0,E;function C(k){if(k.detail!==1){E=k.detail;return}if(!(k.pointerType==="mouse"||k.sourceCapabilities&&!k.sourceCapabilities.firesTouchEvents)){var Z=ms(k);if(!(Z.some(function(de){return de instanceof HTMLLabelElement&&de.attributes.for})&&!Z.some(function(de){return de instanceof HTMLInputElement||de instanceof HTMLSelectElement}))){var oe=Date.now();oe-p<=Co?(E++,E===2&&c(cn(k))):E=1,p=oe}}}return o.addEventListener("click",C),{dblclick:c,simDblclick:C}}function Jn(o,c){o.removeEventListener("dblclick",c.dblclick),o.removeEventListener("click",c.simDblclick)}var ji=Sr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),qs=Sr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ao=qs==="webkitTransition"||qs==="OTransition"?qs+"End":"transitionend";function xo(o){return typeof o=="string"?document.getElementById(o):o}function hs(o,c){var p=o.style[c]||o.currentStyle&&o.currentStyle[c];if((!p||p==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(o,null);p=E?E[c]:null}return p==="auto"?null:p}function lt(o,c,p){var E=document.createElement(o);return E.className=c||"",p&&p.appendChild(E),E}function Rt(o){var c=o.parentNode;c&&c.removeChild(o)}function ei(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function gn(o){var c=o.parentNode;c&&c.lastChild!==o&&c.appendChild(o)}function Fr(o){var c=o.parentNode;c&&c.firstChild!==o&&c.insertBefore(o,c.firstChild)}function Da(o,c){if(o.classList!==void 0)return o.classList.contains(c);var p=Fi(o);return p.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(p)}function et(o,c){if(o.classList!==void 0)for(var p=N(c),E=0,C=p.length;E<C;E++)o.classList.add(p[E]);else if(!Da(o,c)){var k=Fi(o);fs(o,(k?k+" ":"")+c)}}function Kt(o,c){o.classList!==void 0?o.classList.remove(c):fs(o,V((" "+Fi(o)+" ").replace(" "+c+" "," ")))}function fs(o,c){o.className.baseVal===void 0?o.className=c:o.className.baseVal=c}function Fi(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function At(o,c){"opacity"in o.style?o.style.opacity=c:"filter"in o.style&&ds(o,c)}function ds(o,c){var p=!1,E="DXImageTransform.Microsoft.Alpha";try{p=o.filters.item(E)}catch{if(c===1)return}c=Math.round(c*100),p?(p.Enabled=c!==100,p.Opacity=c):o.style.filter+=" progid:"+E+"(opacity="+c+")"}function Sr(o){for(var c=document.documentElement.style,p=0;p<o.length;p++)if(o[p]in c)return o[p];return!1}function Hi(o,c,p){var E=c||new ge(0,0);o.style[ji]=(Ue.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(p?" scale("+p+")":"")}function Ke(o,c){o._leaflet_pos=c,Ue.any3d?Hi(o,c):(o.style.left=c.x+"px",o.style.top=c.y+"px")}function Ai(o){return o._leaflet_pos||new ge(0,0)}var qi,qn,Na;if("onselectstart"in document)qi=function(){qe(window,"selectstart",Ht)},qn=function(){It(window,"selectstart",Ht)};else{var Hr=Sr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qi=function(){if(Hr){var o=document.documentElement.style;Na=o[Hr],o[Hr]="none"}},qn=function(){Hr&&(document.documentElement.style[Hr]=Na,Na=void 0)}}function Lo(){qe(window,"dragstart",Ht)}function Zs(){It(window,"dragstart",Ht)}var Ro,Va;function Zi(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(hn(),Ro=o,Va=o.style.outlineStyle,o.style.outlineStyle="none",qe(window,"keydown",hn))}function hn(){Ro&&(Ro.style.outlineStyle=Va,Ro=void 0,Va=void 0,It(window,"keydown",hn))}function Gs(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function ps(o){var c=o.getBoundingClientRect();return{x:c.width/o.offsetWidth||1,y:c.height/o.offsetHeight||1,boundingClientRect:c}}var qr={__proto__:null,TRANSFORM:ji,TRANSITION:qs,TRANSITION_END:Ao,get:xo,getStyle:hs,create:lt,remove:Rt,empty:ei,toFront:gn,toBack:Fr,hasClass:Da,addClass:et,removeClass:Kt,setClass:fs,getClass:Fi,setOpacity:At,testProp:Sr,setTransform:Hi,setPosition:Ke,getPosition:Ai,get disableTextSelection(){return qi},get enableTextSelection(){return qn},disableImageDrag:Lo,enableImageDrag:Zs,preventOutline:Zi,restoreOutline:hn,getSizedParentNode:Gs,getScale:ps};function qe(o,c,p,E){if(c&&typeof c=="object")for(var C in c)Li(o,C,c[C],p);else{c=N(c);for(var k=0,Z=c.length;k<Z;k++)Li(o,c[k],p,E)}return this}var xi="_leaflet_events";function It(o,c,p,E){if(arguments.length===1)za(o),delete o[xi];else if(c&&typeof c=="object")for(var C in c)Ws(o,C,c[C],p);else if(c=N(c),arguments.length===2)za(o,function(oe){return ie(c,oe)!==-1});else for(var k=0,Z=c.length;k<Z;k++)Ws(o,c[k],p,E);return this}function za(o,c){for(var p in o[xi]){var E=p.split(/\d/)[0];(!c||c(E))&&Ws(o,E,null,null,p)}}var Zn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Li(o,c,p,E){var C=c+v(p)+(E?"_"+v(E):"");if(o[xi]&&o[xi][C])return this;var k=function(oe){return p.call(E||o,oe||window.event)},Z=k;!Ue.touchNative&&Ue.pointer&&c.indexOf("touch")===0?k=kl(o,c,k):Ue.touch&&c==="dblclick"?k=cs(o,k):"addEventListener"in o?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?o.addEventListener(Zn[c]||c,k,Ue.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(k=function(oe){oe=oe||window.event,ur(o,oe)&&Z(oe)},o.addEventListener(Zn[c],k,!1)):o.addEventListener(c,Z,!1):o.attachEvent("on"+c,k),o[xi]=o[xi]||{},o[xi][C]=k}function Ws(o,c,p,E,C){C=C||c+v(p)+(E?"_"+v(E):"");var k=o[xi]&&o[xi][C];if(!k)return this;!Ue.touchNative&&Ue.pointer&&c.indexOf("touch")===0?Pa(o,c,k):Ue.touch&&c==="dblclick"?Jn(o,k):"removeEventListener"in o?o.removeEventListener(Zn[c]||c,k,!1):o.detachEvent("on"+c,k),o[xi][C]=null}function Gn(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function ti(o){return Li(o,"wheel",Gn),this}function Tr(o){return qe(o,"mousedown touchstart dblclick contextmenu",Gn),o._leaflet_disable_click=!0,this}function Ht(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function di(o){return Ht(o),Gn(o),this}function ms(o){if(o.composedPath)return o.composedPath();for(var c=[],p=o.target;p;)c.push(p),p=p.parentNode;return c}function Zr(o,c){if(!c)return new ge(o.clientX,o.clientY);var p=ps(c),E=p.boundingClientRect;return new ge((o.clientX-E.left)/p.x-c.clientLeft,(o.clientY-E.top)/p.y-c.clientTop)}var Yt=Ue.linux&&Ue.chrome?window.devicePixelRatio:Ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function zn(o){return Ue.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Yt:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function ur(o,c){var p=c.relatedTarget;if(!p)return!0;try{for(;p&&p!==o;)p=p.parentNode}catch{return!1}return p!==o}var Ks={__proto__:null,on:qe,off:It,stopPropagation:Gn,disableScrollPropagation:ti,disableClickPropagation:Tr,preventDefault:Ht,stop:di,getPropagationPath:ms,getMousePosition:Zr,getWheelDelta:zn,isExternalTarget:ur,addListener:qe,removeListener:It},Gr=me.extend({run:function(o,c,p,E){this.stop(),this._el=o,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=Ai(o),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(o){var c=+new Date-this._startTime,p=this._duration*1e3;c<p?this._runFrame(this._easeOut(c/p),o):(this._runFrame(1),this._complete())},_runFrame:function(o,c){var p=this._startPos.add(this._offset.multiplyBy(o));c&&p._round(),Ke(this._el,p),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),pt=me.extend({options:{crs:an,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,c){c=H(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Ae(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=qs&&Ue.any3d&&!Ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),qe(this._proxy,Ao,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,c,p){if(c=c===void 0?this._zoom:this._limitZoom(c),o=this._limitCenter(Ae(o),c,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=a({animate:p.animate},p.zoom),p.pan=a({animate:p.animate,duration:p.duration},p.pan));var E=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,c,p.zoom):this._tryAnimatedPan(o,p.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(o,c,p.pan&&p.pan.noMoveStart),this},setZoom:function(o,c){return this._loaded?this.setView(this.getCenter(),o,{zoom:c}):(this._zoom=o,this)},zoomIn:function(o,c){return o=o||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,c)},zoomOut:function(o,c){return o=o||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,c)},setZoomAround:function(o,c,p){var E=this.getZoomScale(c),C=this.getSize().divideBy(2),k=o instanceof ge?o:this.latLngToContainerPoint(o),Z=k.subtract(C).multiplyBy(1-1/E),oe=this.containerPointToLatLng(C.add(Z));return this.setView(oe,c,{zoom:p})},_getBoundsCenterZoom:function(o,c){c=c||{},o=o.getBounds?o.getBounds():fe(o);var p=ue(c.paddingTopLeft||c.padding||[0,0]),E=ue(c.paddingBottomRight||c.padding||[0,0]),C=this.getBoundsZoom(o,!1,p.add(E));if(C=typeof c.maxZoom=="number"?Math.min(c.maxZoom,C):C,C===1/0)return{center:o.getCenter(),zoom:C};var k=E.subtract(p).divideBy(2),Z=this.project(o.getSouthWest(),C),oe=this.project(o.getNorthEast(),C),de=this.unproject(Z.add(oe).divideBy(2).add(k),C);return{center:de,zoom:C}},fitBounds:function(o,c){if(o=fe(o),!o.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(o,c);return this.setView(p.center,p.zoom,c)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,c){return this.setView(o,this._zoom,{pan:c})},panBy:function(o,c){if(o=ue(o).round(),c=c||{},!o.x&&!o.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Gr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){et(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,p,c.duration||.25,c.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,c,p){if(p=p||{},p.animate===!1||!Ue.any3d)return this.setView(o,c,p);this._stop();var E=this.project(this.getCenter()),C=this.project(o),k=this.getSize(),Z=this._zoom;o=Ae(o),c=c===void 0?Z:c;var oe=Math.max(k.x,k.y),de=oe*this.getZoomScale(Z,c),Te=C.distanceTo(E)||1,Oe=1.42,Fe=Oe*Oe;function ct(dn){var Qr=dn?-1:1,eo=dn?de:oe,ec=de*de-oe*oe+Qr*Fe*Fe*Te*Te,nl=2*eo*Fe*Te,il=ec/nl,Rs=Math.sqrt(il*il+1)-il,Xr=Rs<1e-9?-18:Math.log(Rs);return Xr}function Bn(dn){return(Math.exp(dn)-Math.exp(-dn))/2}function vn(dn){return(Math.exp(dn)+Math.exp(-dn))/2}function Ii(dn){return Bn(dn)/vn(dn)}var kt=ct(0);function Ot(dn){return oe*(vn(kt)/vn(kt+Oe*dn))}function vt(dn){return oe*(vn(kt)*Ii(kt+Oe*dn)-Bn(kt))/Fe}function xs(dn){return 1-Math.pow(1-dn,1.5)}var Yi=Date.now(),Wl=(ct(1)-kt)/Oe,Ls=p.duration?1e3*p.duration:1e3*Wl*.8;function Ju(){var dn=(Date.now()-Yi)/Ls,Qr=xs(dn)*Wl;dn<=1?(this._flyToFrame=U(Ju,this),this._move(this.unproject(E.add(C.subtract(E).multiplyBy(vt(Qr)/Te)),Z),this.getScaleZoom(oe/Ot(Qr),Z),{flyTo:!0})):this._move(o,c)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),Ju.call(this),this},flyToBounds:function(o,c){var p=this._getBoundsCenterZoom(o,c);return this.flyTo(p.center,p.zoom,c)},setMaxBounds:function(o){return o=fe(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var c=this.options.minZoom;return this.options.minZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var c=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&c!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,c){this._enforcingBounds=!0;var p=this.getCenter(),E=this._limitCenter(p,this._zoom,fe(o));return p.equals(E)||this.panTo(E,c),this._enforcingBounds=!1,this},panInside:function(o,c){c=c||{};var p=ue(c.paddingTopLeft||c.padding||[0,0]),E=ue(c.paddingBottomRight||c.padding||[0,0]),C=this.project(this.getCenter()),k=this.project(o),Z=this.getPixelBounds(),oe=K([Z.min.add(p),Z.max.subtract(E)]),de=oe.getSize();if(!oe.contains(k)){this._enforcingBounds=!0;var Te=k.subtract(oe.getCenter()),Oe=oe.extend(k).getSize().subtract(de);C.x+=Te.x<0?-Oe.x:Oe.x,C.y+=Te.y<0?-Oe.y:Oe.y,this.panTo(this.unproject(C),c),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=a({animate:!1,pan:!0},o===!0?{animate:!0}:o);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),E=c.divideBy(2).round(),C=p.divideBy(2).round(),k=E.subtract(C);return!k.x&&!k.y?this:(o.animate&&o.pan?this.panBy(k):(o.pan&&this._rawPanBy(k),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=a({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=f(this._handleGeolocationResponse,this),p=f(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,p,o):navigator.geolocation.getCurrentPosition(c,p,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var c=o.code,p=o.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var c=o.coords.latitude,p=o.coords.longitude,E=new Q(c,p),C=E.toBounds(o.coords.accuracy*2),k=this._locateOptions;if(k.setView){var Z=this.getBoundsZoom(C);this.setView(E,k.maxZoom?Math.min(Z,k.maxZoom):Z)}var oe={latlng:E,bounds:C,timestamp:o.timestamp};for(var de in o.coords)typeof o.coords[de]=="number"&&(oe[de]=o.coords[de]);this.fire("locationfound",oe)}},addHandler:function(o,c){if(!c)return this;var p=this[o]=new c(this);return this._handlers.push(p),this.options[o]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Rt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Rt(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,c){var p="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),E=lt("div",p,c||this._mapPane);return o&&(this._panes[o]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),c=this.unproject(o.getBottomLeft()),p=this.unproject(o.getTopRight());return new te(c,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,c,p){o=fe(o),p=ue(p||[0,0]);var E=this.getZoom()||0,C=this.getMinZoom(),k=this.getMaxZoom(),Z=o.getNorthWest(),oe=o.getSouthEast(),de=this.getSize().subtract(p),Te=K(this.project(oe,E),this.project(Z,E)).getSize(),Oe=Ue.any3d?this.options.zoomSnap:1,Fe=de.x/Te.x,ct=de.y/Te.y,Bn=c?Math.max(Fe,ct):Math.min(Fe,ct);return E=this.getScaleZoom(Bn,E),Oe&&(E=Math.round(E/(Oe/100))*(Oe/100),E=c?Math.ceil(E/Oe)*Oe:Math.floor(E/Oe)*Oe),Math.max(C,Math.min(k,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ge(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,c){var p=this._getTopLeftPoint(o,c);return new B(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,c){var p=this.options.crs;return c=c===void 0?this._zoom:c,p.scale(o)/p.scale(c)},getScaleZoom:function(o,c){var p=this.options.crs;c=c===void 0?this._zoom:c;var E=p.zoom(o*p.scale(c));return isNaN(E)?1/0:E},project:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Ae(o),c)},unproject:function(o,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(ue(o),c)},layerPointToLatLng:function(o){var c=ue(o).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(o){var c=this.project(Ae(o))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(Ae(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(fe(o))},distance:function(o,c){return this.options.crs.distance(Ae(o),Ae(c))},containerPointToLayerPoint:function(o){return ue(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return ue(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var c=this.containerPointToLayerPoint(ue(o));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ae(o)))},mouseEventToContainerPoint:function(o){return Zr(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var c=this._container=xo(o);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");qe(c,"scroll",this._onScroll,this),this._containerId=v(c)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ue.any3d,et(o,"leaflet-container"+(Ue.touch?" leaflet-touch":"")+(Ue.retina?" leaflet-retina":"")+(Ue.ielt9?" leaflet-oldie":"")+(Ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=hs(o,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ke(this._mapPane,new ge(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(et(o.markerPane,"leaflet-zoom-hide"),et(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,c,p){Ke(this._mapPane,new ge(0,0));var E=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var C=this._zoom!==c;this._moveStart(C,p)._move(o,c)._moveEnd(C),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(o,c){return o&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(o,c,p,E){c===void 0&&(c=this._zoom);var C=this._zoom!==c;return this._zoom=c,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),E?p&&p.pinch&&this.fire("zoom",p):((C||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Ke(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[v(this._container)]=this;var c=o?It:qe;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Ue.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,c){for(var p=[],E,C=c==="mouseout"||c==="mouseover",k=o.target||o.srcElement,Z=!1;k;){if(E=this._targets[v(k)],E&&(c==="click"||c==="preclick")&&this._draggableMoved(E)){Z=!0;break}if(E&&E.listens(c,!0)&&(C&&!ur(k,o)||(p.push(E),C))||k===this._container)break;k=k.parentNode}return!p.length&&!Z&&!C&&this.listens(c,!0)&&(p=[this]),p},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var c=o.target||o.srcElement;if(!(!this._loaded||c._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(c))){var p=o.type;p==="mousedown"&&Zi(c),this._fireDOMEvent(o,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,c,p){if(o.type==="click"){var E=a({},o);E.type="preclick",this._fireDOMEvent(E,E.type,p)}var C=this._findEventTargets(o,c);if(p){for(var k=[],Z=0;Z<p.length;Z++)p[Z].listens(c,!0)&&k.push(p[Z]);C=k.concat(C)}if(C.length){c==="contextmenu"&&Ht(o);var oe=C[0],de={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Te=oe.getLatLng&&(!oe._radius||oe._radius<=10);de.containerPoint=Te?this.latLngToContainerPoint(oe.getLatLng()):this.mouseEventToContainerPoint(o),de.layerPoint=this.containerPointToLayerPoint(de.containerPoint),de.latlng=Te?oe.getLatLng():this.layerPointToLatLng(de.layerPoint)}for(Z=0;Z<C.length;Z++)if(C[Z].fire(c,de,!0),de.originalEvent._stopped||C[Z].options.bubblingMouseEvents===!1&&ie(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,c=this._handlers.length;o<c;o++)this._handlers[o].disable()},whenReady:function(o,c){return this._loaded?o.call(c||this,{target:this}):this.on("load",o,c),this},_getMapPanePos:function(){return Ai(this._mapPane)||new ge(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,c){var p=o&&c!==void 0?this._getNewPixelOrigin(o,c):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,c){var p=this.getSize()._divideBy(2);return this.project(o,c)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,c,p){var E=this._getNewPixelOrigin(p,c);return this.project(o,c)._subtract(E)},_latLngBoundsToNewLayerBounds:function(o,c,p){var E=this._getNewPixelOrigin(p,c);return K([this.project(o.getSouthWest(),c)._subtract(E),this.project(o.getNorthWest(),c)._subtract(E),this.project(o.getSouthEast(),c)._subtract(E),this.project(o.getNorthEast(),c)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,c,p){if(!p)return o;var E=this.project(o,c),C=this.getSize().divideBy(2),k=new B(E.subtract(C),E.add(C)),Z=this._getBoundsOffset(k,p,c);return Math.abs(Z.x)<=1&&Math.abs(Z.y)<=1?o:this.unproject(E.add(Z),c)},_limitOffset:function(o,c){if(!c)return o;var p=this.getPixelBounds(),E=new B(p.min.add(o),p.max.add(o));return o.add(this._getBoundsOffset(E,c))},_getBoundsOffset:function(o,c,p){var E=K(this.project(c.getNorthEast(),p),this.project(c.getSouthWest(),p)),C=E.min.subtract(o.min),k=E.max.subtract(o.max),Z=this._rebound(C.x,-k.x),oe=this._rebound(C.y,-k.y);return new ge(Z,oe)},_rebound:function(o,c){return o+c>0?Math.round(o-c)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(c))},_limitZoom:function(o){var c=this.getMinZoom(),p=this.getMaxZoom(),E=Ue.any3d?this.options.zoomSnap:1;return E&&(o=Math.round(o/E)*E),Math.max(c,Math.min(p,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Kt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,c){var p=this._getCenterOffset(o)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,c),!0)},_createAnimProxy:function(){var o=this._proxy=lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(c){var p=ji,E=this._proxy.style[p];Hi(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),E===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Rt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),c=this.getZoom();Hi(this._proxy,this.project(o,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,c,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(c),C=this._getCenterOffset(o)._divideBy(1-1/E);return p.animate!==!0&&!this.getSize().contains(C)?!1:(U(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(o,c,!0)},this),!0)},_animateZoom:function(o,c,p,E){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=c,et(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:c,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Kt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function gs(o,c){return new pt(o,c)}var Wn=ke.extend({options:{position:"topright"},initialize:function(o){H(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var c=this._map;return c&&c.removeControl(this),this.options.position=o,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var c=this._container=this.onAdd(o),p=this.getPosition(),E=o._controlCorners[p];return et(c,"leaflet-control"),p.indexOf("bottom")!==-1?E.insertBefore(c,E.firstChild):E.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Rt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),wn=function(o){return new Wn(o)};pt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},c="leaflet-",p=this._controlContainer=lt("div",c+"control-container",this._container);function E(C,k){var Z=c+C+" "+c+k;o[C+k]=lt("div",Z,p)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Rt(this._controlCorners[o]);Rt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var vs=Wn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,c,p,E){return p<E?-1:E<p?1:0}},initialize:function(o,c,p){H(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in o)this._addLayer(o[E],E);for(E in c)this._addLayer(c[E],E,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Wn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,c){return this._addLayer(o,c),this._map?this._update():this},addOverlay:function(o,c){return this._addLayer(o,c,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var c=this._getLayer(v(o));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){et(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(et(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Kt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Kt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",c=this._container=lt("div",o),p=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Tr(c),ti(c);var E=this._section=lt("section",o+"-list");p&&(this._map.on("click",this.collapse,this),qe(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=lt("a",o+"-toggle",c);C.href="#",C.title="Layers",C.setAttribute("role","button"),qe(C,{keydown:function(k){k.keyCode===13&&this._expandSafely()},click:function(k){Ht(k),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=lt("div",o+"-base",E),this._separator=lt("div",o+"-separator",E),this._overlaysList=lt("div",o+"-overlays",E),c.appendChild(E)},_getLayer:function(o){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&v(this._layers[c].layer)===o)return this._layers[c]},_addLayer:function(o,c,p){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:c,overlay:p}),this.options.sortLayers&&this._layers.sort(f(function(E,C){return this.options.sortFunction(E.layer,C.layer,E.name,C.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ei(this._baseLayersList),ei(this._overlaysList),this._layerControlInputs=[];var o,c,p,E,C=0;for(p=0;p<this._layers.length;p++)E=this._layers[p],this._addItem(E),c=c||E.overlay,o=o||!E.overlay,C+=E.overlay?0:1;return this.options.hideSingleBase&&(o=o&&C>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=c&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var c=this._getLayer(v(o.target)),p=c.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;p&&this._map.fire(p,c)},_createRadioElement:function(o,c){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(c?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=p,E.firstChild},_addItem:function(o){var c=document.createElement("label"),p=this._map.hasLayer(o.layer),E;o.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=p):E=this._createRadioElement("leaflet-base-layers_"+v(this),p),this._layerControlInputs.push(E),E.layerId=v(o.layer),qe(E,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+o.name;var k=document.createElement("span");c.appendChild(k),k.appendChild(E),k.appendChild(C);var Z=o.overlay?this._overlaysList:this._baseLayersList;return Z.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,c,p,E=[],C=[];this._handlingClick=!0;for(var k=o.length-1;k>=0;k--)c=o[k],p=this._getLayer(c.layerId).layer,c.checked?E.push(p):c.checked||C.push(p);for(k=0;k<C.length;k++)this._map.hasLayer(C[k])&&this._map.removeLayer(C[k]);for(k=0;k<E.length;k++)this._map.hasLayer(E[k])||this._map.addLayer(E[k]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,c,p,E=this._map.getZoom(),C=o.length-1;C>=0;C--)c=o[C],p=this._getLayer(c.layerId).layer,c.disabled=p.options.minZoom!==void 0&&E<p.options.minZoom||p.options.maxZoom!==void 0&&E>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,qe(o,"click",Ht),this.expand();var c=this;setTimeout(function(){It(o,"click",Ht),c._preventClick=!1})}}),Ol=function(o,c,p){return new vs(o,c,p)},Wr=Wn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var c="leaflet-control-zoom",p=lt("div",c+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,c+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,c+"-out",p,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,c,p,E,C){var k=lt("a",p,E);return k.innerHTML=o,k.href="#",k.title=c,k.setAttribute("role","button"),k.setAttribute("aria-label",c),Tr(k),qe(k,"click",di),qe(k,"click",C,this),qe(k,"click",this._refocusOnMap,this),k},_updateDisabled:function(){var o=this._map,c="leaflet-disabled";Kt(this._zoomInButton,c),Kt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(et(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(et(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});pt.mergeOptions({zoomControl:!0}),pt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Wr,this.addControl(this.zoomControl))});var Pl=function(o){return new Wr(o)},Io=Wn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var c="leaflet-control-scale",p=lt("div",c),E=this.options;return this._addScales(E,c+"-line",p),o.on(E.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),p},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,c,p){o.metric&&(this._mScale=lt("div",c,p)),o.imperial&&(this._iScale=lt("div",c,p))},_update:function(){var o=this._map,c=o.getSize().y/2,p=o.distance(o.containerPointToLatLng([0,c]),o.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(p)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var c=this._getRoundNum(o),p=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,p,c/o)},_updateImperial:function(o){var c=o*3.2808399,p,E,C;c>5280?(p=c/5280,E=this._getRoundNum(p),this._updateScale(this._iScale,E+" mi",E/p)):(C=this._getRoundNum(c),this._updateScale(this._iScale,C+" ft",C/c))},_updateScale:function(o,c,p){o.style.width=Math.round(this.options.maxWidth*p)+"px",o.innerHTML=c},_getRoundNum:function(o){var c=Math.pow(10,(Math.floor(o)+"").length-1),p=o/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}}),ys=function(o){return new Io(o)},Dl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',_s=Wn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ue.inlineSvg?Dl+" ":"")+"Leaflet</a>"},initialize:function(o){H(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=lt("div","leaflet-control-attribution"),Tr(this._container);for(var c in o._layers)o._layers[c].getAttribution&&this.addAttribution(o._layers[c].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var c in this._attributions)this._attributions[c]&&o.push(c);var p=[];this.options.prefix&&p.push(this.options.prefix),o.length&&p.push(o.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});pt.mergeOptions({attributionControl:!0}),pt.addInitHook(function(){this.options.attributionControl&&new _s().addTo(this)});var Ku=function(o){return new _s(o)};Wn.Layers=vs,Wn.Zoom=Wr,Wn.Scale=Io,Wn.Attribution=_s,wn.layers=Ol,wn.zoom=Pl,wn.scale=ys,wn.attribution=Ku;var Ri=ke.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ri.addTo=function(o,c){return o.addHandler(c,this),this};var Ys={Events:ne},Mo=Ue.touch?"touchstart mousedown":"mousedown",cr=me.extend({options:{clickTolerance:3},initialize:function(o,c,p,E){H(this,E),this._element=o,this._dragStartTarget=c||o,this._preventOutline=p},enable:function(){this._enabled||(qe(this._dragStartTarget,Mo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(cr._dragging===this&&this.finishDrag(!0),It(this._dragStartTarget,Mo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Da(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){cr._dragging===this&&this.finishDrag();return}if(!(cr._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(cr._dragging=this,this._preventOutline&&Zi(this._element),Lo(),qi(),!this._moving)){this.fire("down");var c=o.touches?o.touches[0]:o,p=Gs(this._element);this._startPoint=new ge(c.clientX,c.clientY),this._startPos=Ai(this._element),this._parentScale=ps(p);var E=o.type==="mousedown";qe(document,E?"mousemove":"touchmove",this._onMove,this),qe(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var c=o.touches&&o.touches.length===1?o.touches[0]:o,p=new ge(c.clientX,c.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,Ht(o),this._moved||(this.fire("dragstart"),this._moved=!0,et(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),et(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Ke(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Kt(document.body,"leaflet-dragging"),this._lastTarget&&(Kt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),It(document,"mousemove touchmove",this._onMove,this),It(document,"mouseup touchend touchcancel",this._onUp,this),Zs(),qn();var c=this._moved&&this._moving;this._moving=!1,cr._dragging=!1,c&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function ko(o,c,p){var E,C=[1,4,2,8],k,Z,oe,de,Te,Oe,Fe,ct;for(k=0,Oe=o.length;k<Oe;k++)o[k]._code=Cr(o[k],c);for(oe=0;oe<4;oe++){for(Fe=C[oe],E=[],k=0,Oe=o.length,Z=Oe-1;k<Oe;Z=k++)de=o[k],Te=o[Z],de._code&Fe?Te._code&Fe||(ct=Rn(Te,de,Fe,c,p),ct._code=Cr(ct,c),E.push(ct)):(Te._code&Fe&&(ct=Rn(Te,de,Fe,c,p),ct._code=Cr(ct,c),E.push(ct)),E.push(de));o=E}return o}function Oo(o,c){var p,E,C,k,Z,oe,de,Te,Oe;if(!o||o.length===0)throw new Error("latlngs not passed");d(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Fe=Ae([0,0]),ct=fe(o),Bn=ct.getNorthWest().distanceTo(ct.getSouthWest())*ct.getNorthEast().distanceTo(ct.getNorthWest());Bn<1700&&(Fe=Po(o));var vn=o.length,Ii=[];for(p=0;p<vn;p++){var kt=Ae(o[p]);Ii.push(c.project(Ae([kt.lat-Fe.lat,kt.lng-Fe.lng])))}for(oe=de=Te=0,p=0,E=vn-1;p<vn;E=p++)C=Ii[p],k=Ii[E],Z=C.y*k.x-k.y*C.x,de+=(C.x+k.x)*Z,Te+=(C.y+k.y)*Z,oe+=Z*3;oe===0?Oe=Ii[0]:Oe=[de/oe,Te/oe];var Ot=c.unproject(ue(Oe));return Ae([Ot.lat+Fe.lat,Ot.lng+Fe.lng])}function Po(o){for(var c=0,p=0,E=0,C=0;C<o.length;C++){var k=Ae(o[C]);c+=k.lat,p+=k.lng,E++}return Ae([c/E,p/E])}var Es={__proto__:null,clipPolygon:ko,polygonCenter:Oo,centroid:Po};function Ba(o,c){if(!c||!o.length)return o.slice();var p=c*c;return o=Nl(o,p),o=ja(o,p),o}function Ua(o,c,p){return Math.sqrt(Gi(o,c,p,!0))}function Kr(o,c,p){return Gi(o,c,p)}function ja(o,c){var p=o.length,E=typeof Uint8Array<"u"?Uint8Array:Array,C=new E(p);C[0]=C[p-1]=1,Do(o,C,c,0,p-1);var k,Z=[];for(k=0;k<p;k++)C[k]&&Z.push(o[k]);return Z}function Do(o,c,p,E,C){var k=0,Z,oe,de;for(oe=E+1;oe<=C-1;oe++)de=Gi(o[oe],o[E],o[C],!0),de>k&&(Z=oe,k=de);k>p&&(c[Z]=1,Do(o,c,p,E,Z),Do(o,c,p,Z,C))}function Nl(o,c){for(var p=[o[0]],E=1,C=0,k=o.length;E<k;E++)Vl(o[E],o[C])>c&&(p.push(o[E]),C=E);return C<k-1&&p.push(o[k-1]),p}var Fa;function $s(o,c,p,E,C){var k=E?Fa:Cr(o,p),Z=Cr(c,p),oe,de,Te;for(Fa=Z;;){if(!(k|Z))return[o,c];if(k&Z)return!1;oe=k||Z,de=Rn(o,c,oe,p,C),Te=Cr(de,p),oe===k?(o=de,k=Te):(c=de,Z=Te)}}function Rn(o,c,p,E,C){var k=c.x-o.x,Z=c.y-o.y,oe=E.min,de=E.max,Te,Oe;return p&8?(Te=o.x+k*(de.y-o.y)/Z,Oe=de.y):p&4?(Te=o.x+k*(oe.y-o.y)/Z,Oe=oe.y):p&2?(Te=de.x,Oe=o.y+Z*(de.x-o.x)/k):p&1&&(Te=oe.x,Oe=o.y+Z*(oe.x-o.x)/k),new ge(Te,Oe,C)}function Cr(o,c){var p=0;return o.x<c.min.x?p|=1:o.x>c.max.x&&(p|=2),o.y<c.min.y?p|=4:o.y>c.max.y&&(p|=8),p}function Vl(o,c){var p=c.x-o.x,E=c.y-o.y;return p*p+E*E}function Gi(o,c,p,E){var C=c.x,k=c.y,Z=p.x-C,oe=p.y-k,de=Z*Z+oe*oe,Te;return de>0&&(Te=((o.x-C)*Z+(o.y-k)*oe)/de,Te>1?(C=p.x,k=p.y):Te>0&&(C+=Z*Te,k+=oe*Te)),Z=o.x-C,oe=o.y-k,E?Z*Z+oe*oe:new ge(C,k)}function d(o){return!re(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function S(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),d(o)}function R(o,c){var p,E,C,k,Z,oe,de,Te;if(!o||o.length===0)throw new Error("latlngs not passed");d(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Oe=Ae([0,0]),Fe=fe(o),ct=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());ct<1700&&(Oe=Po(o));var Bn=o.length,vn=[];for(p=0;p<Bn;p++){var Ii=Ae(o[p]);vn.push(c.project(Ae([Ii.lat-Oe.lat,Ii.lng-Oe.lng])))}for(p=0,E=0;p<Bn-1;p++)E+=vn[p].distanceTo(vn[p+1])/2;if(E===0)Te=vn[0];else for(p=0,k=0;p<Bn-1;p++)if(Z=vn[p],oe=vn[p+1],C=Z.distanceTo(oe),k+=C,k>E){de=(k-E)/C,Te=[oe.x-de*(oe.x-Z.x),oe.y-de*(oe.y-Z.y)];break}var kt=c.unproject(ue(Te));return Ae([kt.lat+Oe.lat,kt.lng+Oe.lng])}var z={__proto__:null,simplify:Ba,pointToSegmentDistance:Ua,closestPointOnSegment:Kr,clipSegment:$s,_getEdgeIntersection:Rn,_getBitCode:Cr,_sqClosestPointOnSegment:Gi,isFlat:d,_flat:S,polylineCenter:R},le={project:function(o){return new ge(o.lng,o.lat)},unproject:function(o){return new Q(o.y,o.x)},bounds:new B([-180,-90],[180,90])},ve={R:6378137,R_MINOR:6356752314245179e-9,bounds:new B([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var c=Math.PI/180,p=this.R,E=o.lat*c,C=this.R_MINOR/p,k=Math.sqrt(1-C*C),Z=k*Math.sin(E),oe=Math.tan(Math.PI/4-E/2)/Math.pow((1-Z)/(1+Z),k/2);return E=-p*Math.log(Math.max(oe,1e-10)),new ge(o.lng*c*p,E)},unproject:function(o){for(var c=180/Math.PI,p=this.R,E=this.R_MINOR/p,C=Math.sqrt(1-E*E),k=Math.exp(-o.y/p),Z=Math.PI/2-2*Math.atan(k),oe=0,de=.1,Te;oe<15&&Math.abs(de)>1e-7;oe++)Te=C*Math.sin(Z),Te=Math.pow((1-Te)/(1+Te),C/2),de=Math.PI/2-2*Math.atan(k*Te)-Z,Z+=de;return new Q(Z*c,o.x*c/p)}},Me={__proto__:null,LonLat:le,Mercator:ve,SphericalMercator:ze},Mt=a({},De,{code:"EPSG:3395",projection:ve,transformation:(function(){var o=.5/(Math.PI*ve.R);return Ut(o,.5,-o,.5)})()}),fn=a({},De,{code:"EPSG:4326",projection:le,transformation:Ut(1/180,1,-1/180,.5)}),ut=a({},Ie,{projection:le,transformation:Ut(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,c){var p=c.lng-o.lng,E=c.lat-o.lat;return Math.sqrt(p*p+E*E)},infinite:!0});Ie.Earth=De,Ie.EPSG3395=Mt,Ie.EPSG3857=an,Ie.EPSG900913=ln,Ie.EPSG4326=fn,Ie.Simple=ut;var zt=me.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[v(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[v(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var c=o.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var p=this.getEvents();c.on(p,this),this.once("remove",function(){c.off(p,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});pt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var c=v(o);return this._layers[c]?this:(this._layers[c]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var c=v(o);return this._layers[c]?(this._loaded&&o.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return v(o)in this._layers},eachLayer:function(o,c){for(var p in this._layers)o.call(c,this._layers[p]);return this},_addLayers:function(o){o=o?re(o)?o:[o]:[];for(var c=0,p=o.length;c<p;c++)this.addLayer(o[c])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[v(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var c=v(o);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,c=-1/0,p=this._getZoomSpan();for(var E in this._zoomBoundLayers){var C=this._zoomBoundLayers[E].options;o=C.minZoom===void 0?o:Math.min(o,C.minZoom),c=C.maxZoom===void 0?c:Math.max(c,C.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=o===1/0?void 0:o,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var en=zt.extend({initialize:function(o,c){H(this,c),this._layers={};var p,E;if(o)for(p=0,E=o.length;p<E;p++)this.addLayer(o[p])},addLayer:function(o){var c=this.getLayerId(o);return this._layers[c]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var c=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(o){var c=typeof o=="number"?o:this.getLayerId(o);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var c=Array.prototype.slice.call(arguments,1),p,E;for(p in this._layers)E=this._layers[p],E[o]&&E[o].apply(E,c);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,c){for(var p in this._layers)o.call(c,this._layers[p]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return v(o)}}),bs=function(o,c){return new en(o,c)},sn=en.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),en.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),en.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new te;for(var c in this._layers){var p=this._layers[c];o.extend(p.getBounds?p.getBounds():p.getLatLng())}return o}}),Qs=function(o,c){return new sn(o,c)},pi=ke.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){H(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,c){var p=this._getIconUrl(o);if(!p){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(p,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(E,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(o,c){var p=this.options,E=p[c+"Size"];typeof E=="number"&&(E=[E,E]);var C=ue(E),k=ue(c==="shadow"&&p.shadowAnchor||p.iconAnchor||C&&C.divideBy(2,!0));o.className="leaflet-marker-"+c+" "+(p.className||""),k&&(o.style.marginLeft=-k.x+"px",o.style.marginTop=-k.y+"px"),C&&(o.style.width=C.x+"px",o.style.height=C.y+"px")},_createImg:function(o,c){return c=c||document.createElement("img"),c.src=o,c},_getIconUrl:function(o){return Ue.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function Ha(o){return new pi(o)}var qa=pi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof qa.imagePath!="string"&&(qa.imagePath=this._detectIconPath()),(this.options.imagePath||qa.imagePath)+pi.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var c=function(p,E,C){var k=E.exec(p);return k&&k[C]};return o=c(o,/^url\((['"])?(.+)\1\)$/,2),o&&c(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=lt("div","leaflet-default-icon-path",document.body),c=hs(o,"background-image")||hs(o,"backgroundImage");if(document.body.removeChild(o),c=this._stripUrl(c),c)return c;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),Za=Ri.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new cr(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),et(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Kt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var c=this._marker,p=c._map,E=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,k=Ai(c._icon),Z=p.getPixelBounds(),oe=p.getPixelOrigin(),de=K(Z.min._subtract(oe).add(C),Z.max._subtract(oe).subtract(C));if(!de.contains(k)){var Te=ue((Math.max(de.max.x,k.x)-de.max.x)/(Z.max.x-de.max.x)-(Math.min(de.min.x,k.x)-de.min.x)/(Z.min.x-de.min.x),(Math.max(de.max.y,k.y)-de.max.y)/(Z.max.y-de.max.y)-(Math.min(de.min.y,k.y)-de.min.y)/(Z.min.y-de.min.y)).multiplyBy(E);p.panBy(Te,{animate:!1}),this._draggable._newPos._add(Te),this._draggable._startPos._add(Te),Ke(c._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=U(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,o)))},_onDrag:function(o){var c=this._marker,p=c._shadow,E=Ai(c._icon),C=c._map.layerPointToLatLng(E);p&&Ke(p,E),c._latlng=C,o.latlng=C,o.oldLatLng=this._oldLatLng,c.fire("move",o).fire("drag",o)},_onDragEnd:function(o){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Ga=zt.extend({options:{icon:new qa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,c){H(this,c),this._latlng=Ae(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var c=this._latlng;return this._latlng=Ae(o),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=o.icon.createIcon(this._icon),E=!1;p!==this._icon&&(this._icon&&this._removeIcon(),E=!0,o.title&&(p.title=o.title),p.tagName==="IMG"&&(p.alt=o.alt||"")),et(p,c),o.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&qe(p,"focus",this._panOnFocus,this);var C=o.icon.createShadow(this._shadow),k=!1;C!==this._shadow&&(this._removeShadow(),k=!0),C&&(et(C,c),C.alt=""),this._shadow=C,o.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&k&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&It(this._icon,"focus",this._panOnFocus,this),Rt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Rt(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Ke(this._icon,o),this._shadow&&Ke(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(et(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Za)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Za(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&At(this._icon,o),this._shadow&&At(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var c=this.options.icon.options,p=c.iconSize?ue(c.iconSize):ue(0,0),E=c.iconAnchor?ue(c.iconAnchor):ue(0,0);o.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:p.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function xh(o,c){return new Ga(o,c)}var Ar=zt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return H(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),No=Ar.extend({options:{fill:!0,radius:10},initialize:function(o,c){H(this,c),this._latlng=Ae(o),this._radius=this.options.radius},setLatLng:function(o){var c=this._latlng;return this._latlng=Ae(o),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var c=o&&o.radius||this._radius;return Ar.prototype.setStyle.call(this,o),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,c=this._radiusY||o,p=this._clickTolerance(),E=[o+p,c+p];this._pxBounds=new B(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Lh(o,c){return new No(o,c)}var zl=No.extend({initialize:function(o,c,p){if(typeof c=="number"&&(c=a({},p,{radius:c})),H(this,c),this._latlng=Ae(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new te(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Ar.prototype.setStyle,_project:function(){var o=this._latlng.lng,c=this._latlng.lat,p=this._map,E=p.options.crs;if(E.distance===De.distance){var C=Math.PI/180,k=this._mRadius/De.R/C,Z=p.project([c+k,o]),oe=p.project([c-k,o]),de=Z.add(oe).divideBy(2),Te=p.unproject(de).lat,Oe=Math.acos((Math.cos(k*C)-Math.sin(c*C)*Math.sin(Te*C))/(Math.cos(c*C)*Math.cos(Te*C)))/C;(isNaN(Oe)||Oe===0)&&(Oe=k/Math.cos(Math.PI/180*c)),this._point=de.subtract(p.getPixelOrigin()),this._radius=isNaN(Oe)?0:de.x-p.project([Te,o-Oe]).x,this._radiusY=de.y-Z.y}else{var Fe=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Fe).x}this._updateBounds()}});function Rh(o,c,p){return new zl(o,c,p)}var Yr=Ar.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,c){H(this,c),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var c=1/0,p=null,E=Gi,C,k,Z=0,oe=this._parts.length;Z<oe;Z++)for(var de=this._parts[Z],Te=1,Oe=de.length;Te<Oe;Te++){C=de[Te-1],k=de[Te];var Fe=E(o,C,k,!0);Fe<c&&(c=Fe,p=E(o,C,k))}return p&&(p.distance=Math.sqrt(c)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return R(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,c){return c=c||this._defaultShape(),o=Ae(o),c.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new te,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return d(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var c=[],p=d(o),E=0,C=o.length;E<C;E++)p?(c[E]=Ae(o[E]),this._bounds.extend(c[E])):c[E]=this._convertLatLngs(o[E]);return c},_project:function(){var o=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),c=new ge(o,o);this._rawPxBounds&&(this._pxBounds=new B([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(o,c,p){var E=o[0]instanceof Q,C=o.length,k,Z;if(E){for(Z=[],k=0;k<C;k++)Z[k]=this._map.latLngToLayerPoint(o[k]),p.extend(Z[k]);c.push(Z)}else for(k=0;k<C;k++)this._projectLatlngs(o[k],c,p)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,p,E,C,k,Z,oe,de;for(p=0,C=0,k=this._rings.length;p<k;p++)for(de=this._rings[p],E=0,Z=de.length;E<Z-1;E++)oe=$s(de[E],de[E+1],o,E,!0),oe&&(c[C]=c[C]||[],c[C].push(oe[0]),(oe[1]!==de[E+1]||E===Z-2)&&(c[C].push(oe[1]),C++))}},_simplifyPoints:function(){for(var o=this._parts,c=this.options.smoothFactor,p=0,E=o.length;p<E;p++)o[p]=Ba(o[p],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,c){var p,E,C,k,Z,oe,de=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(p=0,k=this._parts.length;p<k;p++)for(oe=this._parts[p],E=0,Z=oe.length,C=Z-1;E<Z;C=E++)if(!(!c&&E===0)&&Ua(o,oe[C],oe[E])<=de)return!0;return!1}});function cp(o,c){return new Yr(o,c)}Yr._flat=S;var Vo=Yr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Oo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var c=Yr.prototype._convertLatLngs.call(this,o),p=c.length;return p>=2&&c[0]instanceof Q&&c[0].equals(c[p-1])&&c.pop(),c},_setLatLngs:function(o){Yr.prototype._setLatLngs.call(this,o),d(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return d(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,c=this.options.weight,p=new ge(c,c);if(o=new B(o.min.subtract(p),o.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,C=this._rings.length,k;E<C;E++)k=ko(this._rings[E],o,!0),k.length&&this._parts.push(k)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var c=!1,p,E,C,k,Z,oe,de,Te;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(k=0,de=this._parts.length;k<de;k++)for(p=this._parts[k],Z=0,Te=p.length,oe=Te-1;Z<Te;oe=Z++)E=p[Z],C=p[oe],E.y>o.y!=C.y>o.y&&o.x<(C.x-E.x)*(o.y-E.y)/(C.y-E.y)+E.x&&(c=!c);return c||Yr.prototype._containsPoint.call(this,o,!0)}});function hp(o,c){return new Vo(o,c)}var $r=sn.extend({initialize:function(o,c){H(this,c),this._layers={},o&&this.addData(o)},addData:function(o){var c=re(o)?o:o.features,p,E,C;if(c){for(p=0,E=c.length;p<E;p++)C=c[p],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var k=this.options;if(k.filter&&!k.filter(o))return this;var Z=Kn(o,k);return Z?(Z.feature=jl(o),Z.defaultOptions=Z.options,this.resetStyle(Z),k.onEachFeature&&k.onEachFeature(o,Z),this.addLayer(Z)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=a({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(c){this._setLayerStyle(c,o)},this)},_setLayerStyle:function(o,c){o.setStyle&&(typeof c=="function"&&(c=c(o.feature)),o.setStyle(c))}});function Kn(o,c){var p=o.type==="Feature"?o.geometry:o,E=p?p.coordinates:null,C=[],k=c&&c.pointToLayer,Z=c&&c.coordsToLatLng||Bl,oe,de,Te,Oe;if(!E&&!p)return null;switch(p.type){case"Point":return oe=Z(E),zo(k,o,oe,c);case"MultiPoint":for(Te=0,Oe=E.length;Te<Oe;Te++)oe=Z(E[Te]),C.push(zo(k,o,oe,c));return new sn(C);case"LineString":case"MultiLineString":return de=Wa(E,p.type==="LineString"?0:1,Z),new Yr(de,c);case"Polygon":case"MultiPolygon":return de=Wa(E,p.type==="Polygon"?1:2,Z),new Vo(de,c);case"GeometryCollection":for(Te=0,Oe=p.geometries.length;Te<Oe;Te++){var Fe=Kn({geometry:p.geometries[Te],type:"Feature",properties:o.properties},c);Fe&&C.push(Fe)}return new sn(C);case"FeatureCollection":for(Te=0,Oe=p.features.length;Te<Oe;Te++){var ct=Kn(p.features[Te],c);ct&&C.push(ct)}return new sn(C);default:throw new Error("Invalid GeoJSON object.")}}function zo(o,c,p,E){return o?o(c,p):new Ga(p,E&&E.markersInheritOptions&&E)}function Bl(o){return new Q(o[1],o[0],o[2])}function Wa(o,c,p){for(var E=[],C=0,k=o.length,Z;C<k;C++)Z=c?Wa(o[C],c-1,p):(p||Bl)(o[C]),E.push(Z);return E}function Ul(o,c){return o=Ae(o),o.alt!==void 0?[I(o.lng,c),I(o.lat,c),I(o.alt,c)]:[I(o.lng,c),I(o.lat,c)]}function Ka(o,c,p,E){for(var C=[],k=0,Z=o.length;k<Z;k++)C.push(c?Ka(o[k],d(o[k])?0:c-1,p,E):Ul(o[k],E));return!c&&p&&C.length>0&&C.push(C[0].slice()),C}function ws(o,c){return o.feature?a({},o.feature,{geometry:c}):jl(c)}function jl(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var Ss={toGeoJSON:function(o){return ws(this,{type:"Point",coordinates:Ul(this.getLatLng(),o)})}};Ga.include(Ss),zl.include(Ss),No.include(Ss),Yr.include({toGeoJSON:function(o){var c=!d(this._latlngs),p=Ka(this._latlngs,c?1:0,!1,o);return ws(this,{type:(c?"Multi":"")+"LineString",coordinates:p})}}),Vo.include({toGeoJSON:function(o){var c=!d(this._latlngs),p=c&&!d(this._latlngs[0]),E=Ka(this._latlngs,p?2:c?1:0,!0,o);return c||(E=[E]),ws(this,{type:(p?"Multi":"")+"Polygon",coordinates:E})}}),en.include({toMultiPoint:function(o){var c=[];return this.eachLayer(function(p){c.push(p.toGeoJSON(o).geometry.coordinates)}),ws(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(o){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(o);var p=c==="GeometryCollection",E=[];return this.eachLayer(function(C){if(C.toGeoJSON){var k=C.toGeoJSON(o);if(p)E.push(k.geometry);else{var Z=jl(k);Z.type==="FeatureCollection"?E.push.apply(E,Z.features):E.push(Z)}}}),p?ws(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function Fl(o,c){return new $r(o,c)}var Ya=Fl,Bo=zt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,c,p){this._url=o,this._bounds=fe(c),H(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(et(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Rt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&gn(this._image),this},bringToBack:function(){return this._map&&Fr(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=fe(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",c=this._image=o?this._url:lt("img");if(et(c,"leaflet-image-layer"),this._zoomAnimated&&et(c,"leaflet-zoom-animated"),this.options.className&&et(c,this.options.className),c.onselectstart=T,c.onmousemove=T,c.onload=f(this.fire,this,"load"),c.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(o){var c=this._map.getZoomScale(o.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Hi(this._image,p,c)},_reset:function(){var o=this._image,c=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=c.getSize();Ke(o,c.min),o.style.width=p.x+"px",o.style.height=p.y+"px"},_updateOpacity:function(){At(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),Ih=function(o,c,p){return new Bo(o,c,p)},Ts=Bo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",c=this._image=o?this._url:lt("video");if(et(c,"leaflet-image-layer"),this._zoomAnimated&&et(c,"leaflet-zoom-animated"),this.options.className&&et(c,this.options.className),c.onselectstart=T,c.onmousemove=T,c.onloadeddata=f(this.fire,this,"load"),o){for(var p=c.getElementsByTagName("source"),E=[],C=0;C<p.length;C++)E.push(p[C].src);this._url=p.length>0?E:[c.src];return}re(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var k=0;k<this._url.length;k++){var Z=lt("source");Z.src=this._url[k],c.appendChild(Z)}}});function Uo(o,c,p){return new Ts(o,c,p)}var Hl=Bo.extend({_initImage:function(){var o=this._image=this._url;et(o,"leaflet-image-layer"),this._zoomAnimated&&et(o,"leaflet-zoom-animated"),this.options.className&&et(o,this.options.className),o.onselectstart=T,o.onmousemove=T}});function Mh(o,c,p){return new Hl(o,c,p)}var Yn=zt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,c){o&&(o instanceof Q||re(o))?(this._latlng=Ae(o),H(this,c)):(H(this,o),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&At(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&At(this._container,1),this.bringToFront(),this.options.interactive&&(et(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(At(this._container,0),this._removeTimeout=setTimeout(f(Rt,void 0,this._container),200)):Rt(this._container),this.options.interactive&&(Kt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=Ae(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gn(this._container),this},bringToBack:function(){return this._map&&Fr(this._container),this},_prepareOpen:function(o){var c=this._source;if(!c._map)return!1;if(c instanceof sn){c=null;var p=this._source._layers;for(var E in p)if(p[E]._map){c=p[E];break}if(!c)return!1;this._source=c}if(!o)if(c.getCenter)o=c.getCenter();else if(c.getLatLng)o=c.getLatLng();else if(c.getBounds)o=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")o.innerHTML=c;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),c=ue(this.options.offset),p=this._getAnchor();this._zoomAnimated?Ke(this._container,o.add(p)):c=c.add(o).add(p);var E=this._containerBottom=-c.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=E+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});pt.include({_initOverlay:function(o,c,p,E){var C=c;return C instanceof o||(C=new o(E).setContent(c)),p&&C.setLatLng(p),C}}),zt.include({_initOverlay:function(o,c,p,E){var C=p;return C instanceof o?(H(C,E),C._source=this):(C=c&&!E?c:new o(E,this),C.setContent(p)),C}});var $a=Yn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Yn.prototype.openOn.call(this,o)},onAdd:function(o){Yn.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ar||this._source.on("preclick",Gn))},onRemove:function(o){Yn.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ar||this._source.off("preclick",Gn))},getEvents:function(){var o=Yn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",c=this._container=lt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=lt("div",o+"-content-wrapper",c);if(this._contentNode=lt("div",o+"-content",p),Tr(c),ti(this._contentNode),qe(c,"contextmenu",Gn),this._tipContainer=lt("div",o+"-tip-container",c),this._tip=lt("div",o+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=lt("a",o+"-close-button",c);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',qe(E,"click",function(C){Ht(C),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,c=o.style;c.width="",c.whiteSpace="nowrap";var p=o.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),c.width=p+1+"px",c.whiteSpace="",c.height="";var E=o.offsetHeight,C=this.options.maxHeight,k="leaflet-popup-scrolled";C&&E>C?(c.height=C+"px",et(o,k)):Kt(o,k),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),p=this._getAnchor();Ke(this._container,c.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,c=parseInt(hs(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+c,E=this._containerWidth,C=new ge(this._containerLeft,-p-this._containerBottom);C._add(Ai(this._container));var k=o.layerPointToContainerPoint(C),Z=ue(this.options.autoPanPadding),oe=ue(this.options.autoPanPaddingTopLeft||Z),de=ue(this.options.autoPanPaddingBottomRight||Z),Te=o.getSize(),Oe=0,Fe=0;k.x+E+de.x>Te.x&&(Oe=k.x+E-Te.x+de.x),k.x-Oe-oe.x<0&&(Oe=k.x-oe.x),k.y+p+de.y>Te.y&&(Fe=k.y+p-Te.y+de.y),k.y-Fe-oe.y<0&&(Fe=k.y-oe.y),(Oe||Fe)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Oe,Fe]))}},_getAnchor:function(){return ue(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),kh=function(o,c){return new $a(o,c)};pt.mergeOptions({closePopupOnClick:!0}),pt.include({openPopup:function(o,c,p){return this._initOverlay($a,o,c,p).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),zt.include({bindPopup:function(o,c){return this._popup=this._initOverlay($a,this._popup,o,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof sn||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){di(o);var c=o.layer||o.target;if(this._popup._source===c&&!(c instanceof Ar)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=c,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Qa=Yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Yn.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Yn.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Yn.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",c=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=lt("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var c,p,E=this._map,C=this._container,k=E.latLngToContainerPoint(E.getCenter()),Z=E.layerPointToContainerPoint(o),oe=this.options.direction,de=C.offsetWidth,Te=C.offsetHeight,Oe=ue(this.options.offset),Fe=this._getAnchor();oe==="top"?(c=de/2,p=Te):oe==="bottom"?(c=de/2,p=0):oe==="center"?(c=de/2,p=Te/2):oe==="right"?(c=0,p=Te/2):oe==="left"?(c=de,p=Te/2):Z.x<k.x?(oe="right",c=0,p=Te/2):(oe="left",c=de+(Oe.x+Fe.x)*2,p=Te/2),o=o.subtract(ue(c,p,!0)).add(Oe).add(Fe),Kt(C,"leaflet-tooltip-right"),Kt(C,"leaflet-tooltip-left"),Kt(C,"leaflet-tooltip-top"),Kt(C,"leaflet-tooltip-bottom"),et(C,"leaflet-tooltip-"+oe),Ke(C,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&At(this._container,o)},_animateZoom:function(o){var c=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(c)},_getAnchor:function(){return ue(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),fp=function(o,c){return new Qa(o,c)};pt.include({openTooltip:function(o,c,p){return this._initOverlay(Qa,o,c,p).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),zt.include({bindTooltip:function(o,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qa,this._tooltip,o,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var c=o?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[c](p),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof sn||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&(qe(c,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),qe(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var c=typeof o.getElement=="function"&&o.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var c=o.latlng,p,E;this._tooltip.options.sticky&&o.originalEvent&&(p=this._map.mouseEventToContainerPoint(o.originalEvent),E=this._map.containerPointToLayerPoint(p),c=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(c)}});var Oh=pi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var c=o&&o.tagName==="DIV"?o:document.createElement("div"),p=this.options;if(p.html instanceof Element?(ei(c),c.appendChild(p.html)):c.innerHTML=p.html!==!1?p.html:"",p.bgPos){var E=ue(p.bgPos);c.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function dp(o){return new Oh(o)}pi.Default=qa;var jo=zt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){H(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Rt(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Fr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof ge?o:new ge(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var c=this.getPane().children,p=-o(-1/0,1/0),E=0,C=c.length,k;E<C;E++)k=c[E].style.zIndex,c[E]!==this._container&&k&&(p=o(p,+k));isFinite(p)&&(this.options.zIndex=p+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ue.ielt9){At(this._container,this.options.opacity);var o=+new Date,c=!1,p=!1;for(var E in this._tiles){var C=this._tiles[E];if(!(!C.current||!C.loaded)){var k=Math.min(1,(o-C.loaded)/200);At(C.el,k),k<1?c=!0:(C.active?p=!0:this._onOpaqueTile(C),C.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),c&&(G(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:T,_initContainer:function(){this._container||(this._container=lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,c=this.options.maxZoom;if(o!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===o?(this._levels[p].el.style.zIndex=c-Math.abs(o-p),this._onUpdateLevel(p)):(Rt(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var E=this._levels[o],C=this._map;return E||(E=this._levels[o]={},E.el=lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=c,E.origin=C.project(C.unproject(C.getPixelOrigin()),o).round(),E.zoom=o,this._setZoomTransform(E,C.getCenter(),C.getZoom()),T(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:T,_onRemoveLevel:T,_onCreateLevel:T,_pruneTiles:function(){if(this._map){var o,c,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)c=this._tiles[o],c.retain=c.current;for(o in this._tiles)if(c=this._tiles[o],c.current&&!c.active){var E=c.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var c in this._tiles)this._tiles[c].coords.z===o&&this._removeTile(c)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Rt(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,c,p,E){var C=Math.floor(o/2),k=Math.floor(c/2),Z=p-1,oe=new ge(+C,+k);oe.z=+Z;var de=this._tileCoordsToKey(oe),Te=this._tiles[de];return Te&&Te.active?(Te.retain=!0,!0):(Te&&Te.loaded&&(Te.retain=!0),Z>E?this._retainParent(C,k,Z,E):!1)},_retainChildren:function(o,c,p,E){for(var C=2*o;C<2*o+2;C++)for(var k=2*c;k<2*c+2;k++){var Z=new ge(C,k);Z.z=p+1;var oe=this._tileCoordsToKey(Z),de=this._tiles[oe];if(de&&de.active){de.retain=!0;continue}else de&&de.loaded&&(de.retain=!0);p+1<E&&this._retainChildren(C,k,p+1,E)}},_resetView:function(o){var c=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var c=this.options;return c.minNativeZoom!==void 0&&o<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<o?c.maxNativeZoom:o},_setView:function(o,c,p,E){var C=Math.round(c);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var k=this.options.updateWhenZooming&&C!==this._tileZoom;(!E||k)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(o),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(o,c)},_setZoomTransforms:function(o,c){for(var p in this._levels)this._setZoomTransform(this._levels[p],o,c)},_setZoomTransform:function(o,c,p){var E=this._map.getZoomScale(p,o.zoom),C=o.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(c,p)).round();Ue.any3d?Hi(o.el,C,E):Ke(o.el,C)},_resetGrid:function(){var o=this._map,c=o.options.crs,p=this._tileSize=this.getTileSize(),E=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,c.wrapLng[0]],E).x/p.x),Math.ceil(o.project([0,c.wrapLng[1]],E).x/p.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([c.wrapLat[0],0],E).y/p.x),Math.ceil(o.project([c.wrapLat[1],0],E).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var c=this._map,p=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),E=c.getZoomScale(p,this._tileZoom),C=c.project(o,this._tileZoom).floor(),k=c.getSize().divideBy(E*2);return new B(C.subtract(k),C.add(k))},_update:function(o){var c=this._map;if(c){var p=this._clampZoom(c.getZoom());if(o===void 0&&(o=c.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(o),C=this._pxBoundsToTileRange(E),k=C.getCenter(),Z=[],oe=this.options.keepBuffer,de=new B(C.getBottomLeft().subtract([oe,-oe]),C.getTopRight().add([oe,-oe]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Te in this._tiles){var Oe=this._tiles[Te].coords;(Oe.z!==this._tileZoom||!de.contains(new ge(Oe.x,Oe.y)))&&(this._tiles[Te].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(o,p);return}for(var Fe=C.min.y;Fe<=C.max.y;Fe++)for(var ct=C.min.x;ct<=C.max.x;ct++){var Bn=new ge(ct,Fe);if(Bn.z=this._tileZoom,!!this._isValidTile(Bn)){var vn=this._tiles[this._tileCoordsToKey(Bn)];vn?vn.current=!0:Z.push(Bn)}}if(Z.sort(function(kt,Ot){return kt.distanceTo(k)-Ot.distanceTo(k)}),Z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ii=document.createDocumentFragment();for(ct=0;ct<Z.length;ct++)this._addTile(Z[ct],Ii);this._level.el.appendChild(Ii)}}}},_isValidTile:function(o){var c=this._map.options.crs;if(!c.infinite){var p=this._globalTileRange;if(!c.wrapLng&&(o.x<p.min.x||o.x>p.max.x)||!c.wrapLat&&(o.y<p.min.y||o.y>p.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(o);return fe(this.options.bounds).overlaps(E)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var c=this._map,p=this.getTileSize(),E=o.scaleBy(p),C=E.add(p),k=c.unproject(E,o.z),Z=c.unproject(C,o.z);return[k,Z]},_tileCoordsToBounds:function(o){var c=this._tileCoordsToNwSe(o),p=new te(c[0],c[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var c=o.split(":"),p=new ge(+c[0],+c[1]);return p.z=+c[2],p},_removeTile:function(o){var c=this._tiles[o];c&&(Rt(c.el),delete this._tiles[o],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){et(o,"leaflet-tile");var c=this.getTileSize();o.style.width=c.x+"px",o.style.height=c.y+"px",o.onselectstart=T,o.onmousemove=T,Ue.ielt9&&this.options.opacity<1&&At(o,this.options.opacity)},_addTile:function(o,c){var p=this._getTilePos(o),E=this._tileCoordsToKey(o),C=this.createTile(this._wrapCoords(o),f(this._tileReady,this,o));this._initTile(C),this.createTile.length<2&&U(f(this._tileReady,this,o,null,C)),Ke(C,p),this._tiles[E]={el:C,coords:o,current:!0},c.appendChild(C),this.fire("tileloadstart",{tile:C,coords:o})},_tileReady:function(o,c,p){c&&this.fire("tileerror",{error:c,tile:p,coords:o});var E=this._tileCoordsToKey(o);p=this._tiles[E],p&&(p.loaded=+new Date,this._map._fadeAnimated?(At(p.el,0),G(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),c||(et(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ue.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var c=new ge(this._wrapX?w(o.x,this._wrapX):o.x,this._wrapY?w(o.y,this._wrapY):o.y);return c.z=o.z,c},_pxBoundsToTileRange:function(o){var c=this.getTileSize();return new B(o.min.unscaleBy(c).floor(),o.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function Ph(o){return new jo(o)}var Cs=jo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,c){this._url=o,c=H(this,c),c.detectRetina&&Ue.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,c){return this._url===o&&c===void 0&&(c=!0),this._url=o,c||this.redraw(),this},createTile:function(o,c){var p=document.createElement("img");return qe(p,"load",f(this._tileOnLoad,this,c,p)),qe(p,"error",f(this._tileOnError,this,c,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(o),p},getTileUrl:function(o){var c={r:Ue.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-o.y;this.options.tms&&(c.y=p),c["-y"]=p}return $(this._url,a(c,this.options))},_tileOnLoad:function(o,c){Ue.ielt9?setTimeout(f(o,this,null,c),0):o(null,c)},_tileOnError:function(o,c,p){var E=this.options.errorTileUrl;E&&c.getAttribute("src")!==E&&(c.src=E),o(p,c)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,c=this.options.maxZoom,p=this.options.zoomReverse,E=this.options.zoomOffset;return p&&(o=c-o),o+E},_getSubdomain:function(o){var c=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var o,c;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(c=this._tiles[o].el,c.onload=T,c.onerror=T,!c.complete)){c.src=ee;var p=this._tiles[o].coords;Rt(c),delete this._tiles[o],this.fire("tileabort",{tile:c,coords:p})}},_removeTile:function(o){var c=this._tiles[o];if(c)return c.el.setAttribute("src",ee),jo.prototype._removeTile.call(this,o)},_tileReady:function(o,c,p){if(!(!this._map||p&&p.getAttribute("src")===ee))return jo.prototype._tileReady.call(this,o,c,p)}});function Wi(o,c){return new Cs(o,c)}var Xa=Cs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,c){this._url=o;var p=a({},this.defaultWmsParams);for(var E in c)E in this.options||(p[E]=c[E]);c=H(this,c);var C=c.detectRetina&&Ue.retina?2:1,k=this.getTileSize();p.width=k.x*C,p.height=k.y*C,this.wmsParams=p},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Cs.prototype.onAdd.call(this,o)},getTileUrl:function(o){var c=this._tileCoordsToNwSe(o),p=this._crs,E=K(p.project(c[0]),p.project(c[1])),C=E.min,k=E.max,Z=(this._wmsVersion>=1.3&&this._crs===fn?[C.y,C.x,k.y,k.x]:[C.x,C.y,k.x,k.y]).join(","),oe=Cs.prototype.getTileUrl.call(this,o);return oe+q(this.wmsParams,oe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Z},setParams:function(o,c){return a(this.wmsParams,o),c||this.redraw(),this}});function Ki(o,c){return new Xa(o,c)}Cs.WMS=Xa,Wi.wms=Ki;var mi=zt.extend({options:{padding:.1},initialize:function(o){H(this,o),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),et(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,c){var p=this._map.getZoomScale(c,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,c),k=E.multiplyBy(-p).add(C).subtract(this._map._getNewPixelOrigin(o,c));Ue.any3d?Hi(this._container,k,p):Ke(this._container,k)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,c=this._map.getSize(),p=this._map.containerPointToLayerPoint(c.multiplyBy(-o)).round();this._bounds=new B(p,p.add(c.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ql=mi.extend({options:{tolerance:0},getEvents:function(){var o=mi.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){mi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");qe(o,"mousemove",this._onMouseMove,this),qe(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),qe(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,Rt(this._container),It(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var c in this._layers)o=this._layers[c],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mi.prototype._update.call(this);var o=this._bounds,c=this._container,p=o.getSize(),E=Ue.retina?2:1;Ke(c,o.min),c.width=E*p.x,c.height=E*p.y,c.style.width=p.x+"px",c.style.height=p.y+"px",Ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){mi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[v(o)]=o;var c=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var c=o._order,p=c.next,E=c.prev;p?p.prev=E:this._drawLast=E,E?E.next=p:this._drawFirst=p,delete o._order,delete this._layers[v(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var c=o.options.dashArray.split(/[, ]+/),p=[],E,C;for(C=0;C<c.length;C++){if(E=Number(c[C]),isNaN(E))return;p.push(E)}o.options._dashArray=p}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var c=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(o._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(o._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var c=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,c=this._redrawBounds;if(this._ctx.save(),c){var p=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)o=E.layer,(!c||o._pxBounds&&o._pxBounds.intersects(c))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,c){if(this._drawing){var p,E,C,k,Z=o._parts,oe=Z.length,de=this._ctx;if(oe){for(de.beginPath(),p=0;p<oe;p++){for(E=0,C=Z[p].length;E<C;E++)k=Z[p][E],de[E?"lineTo":"moveTo"](k.x,k.y);c&&de.closePath()}this._fillStroke(de,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var c=o._point,p=this._ctx,E=Math.max(Math.round(o._radius),1),C=(Math.max(Math.round(o._radiusY),1)||E)/E;C!==1&&(p.save(),p.scale(1,C)),p.beginPath(),p.arc(c.x,c.y/C,E,0,Math.PI*2,!1),C!==1&&p.restore(),this._fillStroke(p,o)}},_fillStroke:function(o,c){var p=c.options;p.fill&&(o.globalAlpha=p.fillOpacity,o.fillStyle=p.fillColor||p.color,o.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(o.setLineDash&&o.setLineDash(c.options&&c.options._dashArray||[]),o.globalAlpha=p.opacity,o.lineWidth=p.weight,o.strokeStyle=p.color,o.lineCap=p.lineCap,o.lineJoin=p.lineJoin,o.stroke())},_onClick:function(o){for(var c=this._map.mouseEventToLayerPoint(o),p,E,C=this._drawFirst;C;C=C.next)p=C.layer,p.options.interactive&&p._containsPoint(c)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(p))&&(E=p);this._fireEvent(E?[E]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,c)}},_handleMouseOut:function(o){var c=this._hoveredLayer;c&&(Kt(this._container,"leaflet-interactive"),this._fireEvent([c],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,c){if(!this._mouseHoverThrottled){for(var p,E,C=this._drawFirst;C;C=C.next)p=C.layer,p.options.interactive&&p._containsPoint(c)&&(E=p);E!==this._hoveredLayer&&(this._handleMouseOut(o),E&&(et(this._container,"leaflet-interactive"),this._fireEvent([E],o,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,c,p){this._map._fireDOMEvent(c,p||c.type,o)},_bringToFront:function(o){var c=o._order;if(c){var p=c.next,E=c.prev;if(p)p.prev=E;else return;E?E.next=p:p&&(this._drawFirst=p),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(o)}},_bringToBack:function(o){var c=o._order;if(c){var p=c.next,E=c.prev;if(E)E.next=p;else return;p?p.prev=E:E&&(this._drawLast=E),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(o)}}});function Ja(o){return Ue.canvas?new ql(o):null}var As=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Yu={_initContainer:function(){this._container=lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(mi.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var c=o._container=As("shape");et(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",o._path=As("path"),c.appendChild(o._path),this._updateStyle(o),this._layers[v(o)]=o},_addPath:function(o){var c=o._container;this._container.appendChild(c),o.options.interactive&&o.addInteractiveTarget(c)},_removePath:function(o){var c=o._container;Rt(c),o.removeInteractiveTarget(c),delete this._layers[v(o)]},_updateStyle:function(o){var c=o._stroke,p=o._fill,E=o.options,C=o._container;C.stroked=!!E.stroke,C.filled=!!E.fill,E.stroke?(c||(c=o._stroke=As("stroke")),C.appendChild(c),c.weight=E.weight+"px",c.color=E.color,c.opacity=E.opacity,E.dashArray?c.dashStyle=re(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=E.lineCap.replace("butt","flat"),c.joinstyle=E.lineJoin):c&&(C.removeChild(c),o._stroke=null),E.fill?(p||(p=o._fill=As("fill")),C.appendChild(p),p.color=E.fillColor||E.color,p.opacity=E.fillOpacity):p&&(C.removeChild(p),o._fill=null)},_updateCircle:function(o){var c=o._point.round(),p=Math.round(o._radius),E=Math.round(o._radiusY||p);this._setPath(o,o._empty()?"M0 0":"AL "+c.x+","+c.y+" "+p+","+E+" 0,"+65535*360)},_setPath:function(o,c){o._path.v=c},_bringToFront:function(o){gn(o._container)},_bringToBack:function(o){Fr(o._container)}},xr=Ue.vml?As:ot,Fo=mi.extend({_initContainer:function(){this._container=xr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=xr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Rt(this._container),It(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mi.prototype._update.call(this);var o=this._bounds,c=o.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,p.setAttribute("width",c.x),p.setAttribute("height",c.y)),Ke(p,o.min),p.setAttribute("viewBox",[o.min.x,o.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(o){var c=o._path=xr("path");o.options.className&&et(c,o.options.className),o.options.interactive&&et(c,"leaflet-interactive"),this._updateStyle(o),this._layers[v(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Rt(o._path),o.removeInteractiveTarget(o._path),delete this._layers[v(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var c=o._path,p=o.options;c&&(p.stroke?(c.setAttribute("stroke",p.color),c.setAttribute("stroke-opacity",p.opacity),c.setAttribute("stroke-width",p.weight),c.setAttribute("stroke-linecap",p.lineCap),c.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?c.setAttribute("stroke-dasharray",p.dashArray):c.removeAttribute("stroke-dasharray"),p.dashOffset?c.setAttribute("stroke-dashoffset",p.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),p.fill?(c.setAttribute("fill",p.fillColor||p.color),c.setAttribute("fill-opacity",p.fillOpacity),c.setAttribute("fill-rule",p.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(o,c){this._setPath(o,Pi(o._parts,c))},_updateCircle:function(o){var c=o._point,p=Math.max(Math.round(o._radius),1),E=Math.max(Math.round(o._radiusY),1)||p,C="a"+p+","+E+" 0 1,0 ",k=o._empty()?"M0 0":"M"+(c.x-p)+","+c.y+C+p*2+",0 "+C+-p*2+",0 ";this._setPath(o,k)},_setPath:function(o,c){o._path.setAttribute("d",c)},_bringToFront:function(o){gn(o._path)},_bringToBack:function(o){Fr(o._path)}});Ue.vml&&Fo.include(Yu);function el(o){return Ue.svg||Ue.vml?new Fo(o):null}pt.include({getRenderer:function(o){var c=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var c=this._paneRenderers[o];return c===void 0&&(c=this._createRenderer({pane:o}),this._paneRenderers[o]=c),c},_createRenderer:function(o){return this.options.preferCanvas&&Ja(o)||el(o)}});var Xs=Vo.extend({initialize:function(o,c){Vo.prototype.initialize.call(this,this._boundsToLatLngs(o),c)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=fe(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function pp(o,c){return new Xs(o,c)}Fo.create=xr,Fo.pointsToPath=Pi,$r.geometryToLayer=Kn,$r.coordsToLatLng=Bl,$r.coordsToLatLngs=Wa,$r.latLngToCoords=Ul,$r.latLngsToCoords=Ka,$r.getFeature=ws,$r.asFeature=jl,pt.mergeOptions({boxZoom:!0});var gi=Ri.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){qe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){It(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Rt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qi(),Lo(),this._startPoint=this._map.mouseEventToContainerPoint(o),qe(document,{contextmenu:di,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=lt("div","leaflet-zoom-box",this._container),et(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var c=new B(this._point,this._startPoint),p=c.getSize();Ke(this._box,c.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(Rt(this._box),Kt(this._container,"leaflet-crosshair")),qn(),Zs(),It(document,{contextmenu:di,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var c=new te(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});pt.addInitHook("addHandler","boxZoom",gi),pt.mergeOptions({doubleClickZoom:!0});var Zl=Ri.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var c=this._map,p=c.getZoom(),E=c.options.zoomDelta,C=o.originalEvent.shiftKey?p-E:p+E;c.options.doubleClickZoom==="center"?c.setZoom(C):c.setZoomAround(o.containerPoint,C)}});pt.addInitHook("addHandler","doubleClickZoom",Zl),pt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Lr=Ri.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new cr(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}et(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Kt(this._map._container,"leaflet-grab"),Kt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=fe(this._map.options.maxBounds);this._offsetLimit=K(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var c=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(c),this._prunePositions(c)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,c){return o-(o-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;o.x<c.min.x&&(o.x=this._viscousLimit(o.x,c.min.x)),o.y<c.min.y&&(o.y=this._viscousLimit(o.y,c.min.y)),o.x>c.max.x&&(o.x=this._viscousLimit(o.x,c.max.x)),o.y>c.max.y&&(o.y=this._viscousLimit(o.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,c=Math.round(o/2),p=this._initialWorldOffset,E=this._draggable._newPos.x,C=(E-c+p)%o+c-p,k=(E+c+p)%o-c-p,Z=Math.abs(C+p)<Math.abs(k+p)?C:k;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Z},_onDragEnd:function(o){var c=this._map,p=c.options,E=!p.inertia||o.noInertia||this._times.length<2;if(c.fire("dragend",o),E)c.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),k=(this._lastTime-this._times[0])/1e3,Z=p.easeLinearity,oe=C.multiplyBy(Z/k),de=oe.distanceTo([0,0]),Te=Math.min(p.inertiaMaxSpeed,de),Oe=oe.multiplyBy(Te/de),Fe=Te/(p.inertiaDeceleration*Z),ct=Oe.multiplyBy(-Fe/2).round();!ct.x&&!ct.y?c.fire("moveend"):(ct=c._limitOffset(ct,c.options.maxBounds),U(function(){c.panBy(ct,{duration:Fe,easeLinearity:Z,noMoveStart:!0,animate:!0})}))}}});pt.addInitHook("addHandler","dragging",Lr),pt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $u=Ri.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),qe(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),It(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,c=document.documentElement,p=o.scrollTop||c.scrollTop,E=o.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(E,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var c=this._panKeys={},p=this.keyCodes,E,C;for(E=0,C=p.left.length;E<C;E++)c[p.left[E]]=[-1*o,0];for(E=0,C=p.right.length;E<C;E++)c[p.right[E]]=[o,0];for(E=0,C=p.down.length;E<C;E++)c[p.down[E]]=[0,o];for(E=0,C=p.up.length;E<C;E++)c[p.up[E]]=[0,-1*o]},_setZoomDelta:function(o){var c=this._zoomKeys={},p=this.keyCodes,E,C;for(E=0,C=p.zoomIn.length;E<C;E++)c[p.zoomIn[E]]=o;for(E=0,C=p.zoomOut.length;E<C;E++)c[p.zoomOut[E]]=-o},_addHooks:function(){qe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){It(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var c=o.keyCode,p=this._map,E;if(c in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(E=this._panKeys[c],o.shiftKey&&(E=ue(E).multiplyBy(3)),p.options.maxBounds&&(E=p._limitOffset(ue(E),p.options.maxBounds)),p.options.worldCopyJump){var C=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(E)));p.panTo(C)}else p.panBy(E)}else if(c in this._zoomKeys)p.setZoom(p.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;di(o)}}});pt.addInitHook("addHandler","keyboard",$u),pt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var tl=Ri.extend({addHooks:function(){qe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){It(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var c=zn(o),p=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var E=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),E),di(o)},_performZoom:function(){var o=this._map,c=o.getZoom(),p=this._map.options.zoomSnap||0;o._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,k=p?Math.ceil(C/p)*p:C,Z=o._limitZoom(c+(this._delta>0?k:-k))-c;this._delta=0,this._startTime=null,Z&&(o.options.scrollWheelZoom==="center"?o.setZoom(c+Z):o.setZoomAround(this._lastMousePos,c+Z))}});pt.addInitHook("addHandler","scrollWheelZoom",tl);var Js=600;pt.mergeOptions({tapHold:Ue.touchNative&&Ue.safari&&Ue.mobile,tapTolerance:15});var Gl=Ri.extend({addHooks:function(){qe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){It(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var c=o.touches[0];this._startPos=this._newPos=new ge(c.clientX,c.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(qe(document,"touchend",Ht),qe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),Js),qe(document,"touchend touchcancel contextmenu",this._cancel,this),qe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){It(document,"touchend",Ht),It(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),It(document,"touchend touchcancel contextmenu",this._cancel,this),It(document,"touchmove",this._onMove,this)},_onMove:function(o){var c=o.touches[0];this._newPos=new ge(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,c){var p=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});p._simulated=!0,c.target.dispatchEvent(p)}});pt.addInitHook("addHandler","tapHold",Gl),pt.mergeOptions({touchZoom:Ue.touch,bounceAtZoomLimits:!0});var Qu=Ri.extend({addHooks:function(){et(this._map._container,"leaflet-touch-zoom"),qe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Kt(this._map._container,"leaflet-touch-zoom"),It(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var c=this._map;if(!(!o.touches||o.touches.length!==2||c._animatingZoom||this._zooming)){var p=c.mouseEventToContainerPoint(o.touches[0]),E=c.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(p.add(E)._divideBy(2))),this._startDist=p.distanceTo(E),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),qe(document,"touchmove",this._onTouchMove,this),qe(document,"touchend touchcancel",this._onTouchEnd,this),Ht(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var c=this._map,p=c.mouseEventToContainerPoint(o.touches[0]),E=c.mouseEventToContainerPoint(o.touches[1]),C=p.distanceTo(E)/this._startDist;if(this._zoom=c.getScaleZoom(C,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&C<1||this._zoom>c.getMaxZoom()&&C>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var k=p._add(E)._divideBy(2)._subtract(this._centerPoint);if(C===1&&k.x===0&&k.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(k),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var Z=f(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(Z,this,!0),Ht(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),It(document,"touchmove",this._onTouchMove,this),It(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});pt.addInitHook("addHandler","touchZoom",Qu),pt.BoxZoom=gi,pt.DoubleClickZoom=Zl,pt.Drag=Lr,pt.Keyboard=$u,pt.ScrollWheelZoom=tl,pt.TapHold=Gl,pt.TouchZoom=Qu,t.Bounds=B,t.Browser=Ue,t.CRS=Ie,t.Canvas=ql,t.Circle=zl,t.CircleMarker=No,t.Class=ke,t.Control=Wn,t.DivIcon=Oh,t.DivOverlay=Yn,t.DomEvent=Ks,t.DomUtil=qr,t.Draggable=cr,t.Evented=me,t.FeatureGroup=sn,t.GeoJSON=$r,t.GridLayer=jo,t.Handler=Ri,t.Icon=pi,t.ImageOverlay=Bo,t.LatLng=Q,t.LatLngBounds=te,t.Layer=zt,t.LayerGroup=en,t.LineUtil=z,t.Map=pt,t.Marker=Ga,t.Mixin=Ys,t.Path=Ar,t.Point=ge,t.PolyUtil=Es,t.Polygon=Vo,t.Polyline=Yr,t.Popup=$a,t.PosAnimation=Gr,t.Projection=Me,t.Rectangle=Xs,t.Renderer=mi,t.SVG=Fo,t.SVGOverlay=Hl,t.TileLayer=Cs,t.Tooltip=Qa,t.Transformation=Je,t.Util=F,t.VideoOverlay=Ts,t.bind=f,t.bounds=K,t.canvas=Ja,t.circle=Rh,t.circleMarker=Lh,t.control=wn,t.divIcon=dp,t.extend=a,t.featureGroup=Qs,t.geoJSON=Fl,t.geoJson=Ya,t.gridLayer=Ph,t.icon=Ha,t.imageOverlay=Ih,t.latLng=Ae,t.latLngBounds=fe,t.layerGroup=bs,t.map=gs,t.marker=xh,t.point=ue,t.polygon=hp,t.polyline=cp,t.popup=kh,t.rectangle=pp,t.setOptions=H,t.stamp=v,t.svg=el,t.svgOverlay=Mh,t.tileLayer=Wi,t.tooltip=fp,t.transformation=Ut,t.version=r,t.videoOverlay=Uo;var Xu=window.L;t.noConflict=function(){return window.L=Xu,this},window.L=t}))})(qc,qc.exports)),qc.exports}var k2=M2();const ki=Nd(k2),iw=["Pending Pickup","Pickup Assigned","Pickup Accepted","Enroute to Facility","Arrived at Hub or Facility","In Transit","Out for Delivery","Delivered","Awaiting Receipt","Delivery Failed","Returned to Sender"],fg="http://localhost:5000",O2=()=>{const n=b.useRef(null),[e,t]=b.useState(null),[r,a]=b.useState([]),[u,f]=b.useState(null),[g,v]=b.useState(iw[0]),[_,w]=b.useState(!1),[T,I]=b.useState(null),[V,N]=b.useState([]),[H,q]=b.useState(null),[W,$]=b.useState([]),[re,ie]=b.useState(!1),[ee,X]=b.useState(null),[O,P]=b.useState(null),M=()=>localStorage.getItem("token");b.useEffect(()=>{try{if(!n.current){console.warn("Map ref not available");return}const _e=ki.map(n.current).setView([6.5244,3.3792],11),ue=ki.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"¬© OpenStreetMap contributors",maxZoom:19,name:"Street Map"}),B=ki.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"¬© Esri",maxZoom:18,name:"Satellite"});return ue.addTo(_e),ki.control.layers({"Street Map":ue,Satellite:B}).addTo(_e),t(_e),()=>{_e.remove()}}catch(_e){console.error("Error initializing Leaflet map:",_e),X("Failed to initialize map: "+_e.message)}},[]),b.useEffect(()=>{if(!e)return;const _e=ue=>{_&&u&&Le(ue)};return e.on("click",_e),()=>{e.off("click",_e)}},[e,_,u,g]),b.useEffect(()=>{G(),F()},[]),b.useEffect(()=>{if(!e||!W.length)return;V.forEach(ue=>e.removeLayer(ue));const _e=W.map(ue=>{const B=j(ue.status),K=ki.marker([ue.location.lat,ue.location.lng],{icon:B}).addTo(e),te=`
        <div style="font-size: 13px;">
          <strong style="color: #4f46e5;">${ue.user.fullName}</strong><br/>
          <div style="margin-top: 6px;">
            <strong>üìß Email:</strong> ${ue.user.email}<br/>
            <strong>üì¶ Status:</strong> <span style="color: ${U(ue.status)}; font-weight: 600;">${ue.status}</span><br/>
            <strong>üÜî Tracking:</strong> <span style="font-family: monospace; color: #4f46e5;">${ue.trackingId}</span><br/>
            <strong>üïê Updated:</strong> ${new Date(ue.updatedAt).toLocaleString()}
          </div>
        </div>
      `;return K.bindPopup(te),K});N(_e)},[e,W]);const j=_e=>{const B={"Pending Pickup":"#f59e0b","Pickup Assigned":"#3b82f6","Pickup Accepted":"#10b981","Enroute to Facility":"#8b5cf6","Arrived at Hub or Facility":"#6366f1","In Transit":"#06b6d4","Out for Delivery":"#f97316",Delivered:"#22c55e","Awaiting Receipt":"#14b8a6","Delivery Failed":"#ef4444","Returned to Sender":"#64748b"}[_e]||"#9ca3af";return ki.divIcon({html:`<div style="
        background-color: ${B};
        width: 30px;
        height: 30px;
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
      ">üì¶</div>`,iconSize:[36,36],className:"custom-icon"})},U=_e=>({"Pending Pickup":"#f59e0b","Pickup Assigned":"#3b82f6","Pickup Accepted":"#10b981","Enroute to Facility":"#8b5cf6","Arrived at Hub or Facility":"#6366f1","In Transit":"#06b6d4","Out for Delivery":"#f97316",Delivered:"#22c55e","Awaiting Receipt":"#14b8a6","Delivery Failed":"#ef4444","Returned to Sender":"#64748b"})[_e]||"#9ca3af",G=async()=>{try{X(null);const _e=M(),ue=await fetch(`${fg}/api/admin/verified-users`,{headers:{Authorization:`Bearer ${_e}`}});if(!ue.ok)throw new Error("Failed to fetch verified users");const B=await ue.json();a(Array.isArray(B)?B:[])}catch(_e){console.error("Error fetching verified users:",_e),X("Failed to load verified users. Make sure you are logged in as admin.")}},F=async()=>{try{const _e=M();if(!_e){console.warn("No token available for fetching tracking records"),$([]);return}const ue=await fetch(`${fg}/api/admin/tracking`,{headers:{Authorization:`Bearer ${_e}`}});if(!ue.ok)throw new Error(`Failed to fetch tracking records (${ue.status})`);const B=await ue.json();$(Array.isArray(B)?B:[])}catch(_e){console.error("Error fetching tracking records:",_e),$([])}},ke=_e=>{f(_e),q(null),P(null),X(null)},Le=b.useCallback(async _e=>{try{if(console.log("Map clicked. isPinMode:",_,"selectedUser:",u?u.name:null),!_||!u||!e){console.log("Skipping click - isPinMode:",_,"selectedUser:",!!u,"map:",!!e);return}const ue={lat:_e.latlng.lat,lng:_e.latlng.lng};console.log("Creating marker at:",ue),T&&e.removeLayer(T);const B=j(g),K=ki.marker([ue.lat,ue.lng],{icon:B}).addTo(e),te=`
        <div style="font-size: 13px;">
          <strong style="color: #4f46e5;">${u.name}</strong><br/>
          <strong>üìß Email:</strong> ${u.email}<br/>
          <strong>üì¶ Status:</strong> <span style="color: ${U(g)}; font-weight: 600;">${g}</span><br/>
          <strong>üìç Location:</strong> ${ue.lat.toFixed(4)}, ${ue.lng.toFixed(4)}
        </div>
      `;K.bindPopup(te).openPopup(),I(K),console.log("Saving tracking record..."),await ne(ue),w(!1)}catch(ue){console.error("Error in handleMapClick:",ue),X("Failed to process map click. Please try again."),w(!1)}},[_,u,e,g,T]),ne=async _e=>{ie(!0),X(null);try{const ue=M();if(!ue)throw new Error("No authentication token found. Please log in again.");if(!u||!u._id)throw new Error("No user selected. Please select a verified user.");console.log("Sending tracking request:",{userId:u._id,status:g,location:_e});const B=await fetch(`${fg}/api/admin/tracking`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ue}`},body:JSON.stringify({userId:u._id,status:g,location:_e})});if(console.log("Response status:",B.status),!B.ok){let te=`Failed to save tracking record (${B.status})`;try{te=(await B.json()).message||te}catch{const Q=await B.text();console.error("Error response text:",Q)}throw new Error(te)}const K=await B.json();if(console.log("Response data:",K),!K.trackingId)throw new Error("No tracking ID returned from server");console.log("Tracking ID generated:",K.trackingId),q(K.trackingId),P("‚úÖ Tracking record created successfully!"),X(null),await F()}catch(ue){const B=ue.message||"Failed to save tracking record";console.error("Error saving tracking record:",ue),X(B),q(null)}finally{ie(!1)}},me=()=>{if(!u){X("Please select a verified user first.");return}w(!_),X(null)},ge=async()=>{if(H)try{await navigator.clipboard.writeText(H),P("Tracking ID copied to clipboard!"),setTimeout(()=>P(null),3e3)}catch{const ue=document.createElement("textarea");ue.value=H,document.body.appendChild(ue),ue.select(),document.execCommand("copy"),document.body.removeChild(ue),P("Tracking ID copied to clipboard!"),setTimeout(()=>P(null),3e3)}};return x.createElement("section",{className:"live-tracking-section"},x.createElement("h2",{className:"section-title"},"üìç Live Package Tracking Map"),ee&&x.createElement("div",{className:"error-message"},"‚ö†Ô∏è ",ee),O&&x.createElement("div",{className:"success-message"},"‚úÖ ",O),x.createElement("div",{className:"tracking-layout"},x.createElement("div",{className:"tracking-sidebar"},x.createElement("h3",{className:"sidebar-title"},"üë• Verified Users (",r.length,")"),x.createElement("p",{className:"sidebar-hint"},"Select a user to assign package tracking"),x.createElement("div",{className:"users-list"},r.length===0?x.createElement("div",{className:"no-users"},x.createElement("span",{className:"no-users-icon"},"üì≠"),x.createElement("p",null,"No verified users available"),x.createElement("small",null,"Verify users in the Users tab first")):r.map(_e=>x.createElement("button",{key:_e._id,className:`user-item ${u?._id===_e._id?"active":""}`,onClick:()=>ke(_e),title:`${_e.name} - ${_e.email}`},x.createElement("div",{className:"user-avatar"},_e.name?.charAt(0)?.toUpperCase()||"?"),x.createElement("div",{className:"user-info"},x.createElement("strong",null,_e.name),x.createElement("span",{className:"user-email"},_e.email)),u?._id===_e._id&&x.createElement("span",{className:"selected-badge"},"‚úì"))))),x.createElement("div",{className:"tracking-map-wrapper"},x.createElement("div",{ref:n,className:"tracking-map",id:"adminMap"},!e&&x.createElement("div",{className:"map-loading"},x.createElement("div",{className:"loading-spinner"}),x.createElement("p",null,"Loading map..."))),x.createElement("div",{className:"tracking-controls"},x.createElement("div",{className:"selected-user-display"},u?x.createElement("div",{className:"selected-user-info"},x.createElement("span",{className:"label"},"Selected:"),x.createElement("span",{className:"user-name"},u.name)):x.createElement("span",{className:"no-selection"},"No user selected")),x.createElement("div",{className:"status-control"},x.createElement("label",{htmlFor:"statusSelect"},"üì¶ Package Status:"),x.createElement("select",{id:"statusSelect",className:"status-select",value:g,onChange:_e=>v(_e.target.value),disabled:!u},iw.map(_e=>x.createElement("option",{key:_e,value:_e},_e)))),x.createElement("button",{className:`pin-button ${_?"active":""}`,onClick:me,disabled:!u||re},re?x.createElement(x.Fragment,null,"‚è≥ Saving..."):_?x.createElement(x.Fragment,null,"üìç Click on Map to Pin Location"):x.createElement(x.Fragment,null,"üìå Pin Package Location"))),x.createElement("div",{className:"tracking-id-box"},x.createElement("div",{className:"id-header"},x.createElement("div",{className:"id-label"},"üÜî Generated Tracking ID"),W.length>0&&x.createElement("span",{className:"records-count"},W.length," active packages")),H?x.createElement("div",{className:"id-display"},x.createElement("span",{className:"tracking-id"},H),x.createElement("button",{className:"copy-button",onClick:ge,title:"Copy to clipboard"},"üìã Copy")):x.createElement("div",{className:"id-placeholder"},x.createElement("span",{className:"placeholder-icon"},"üì¶"),x.createElement("span",null,"Select a user, set status, and click on the map to generate a tracking ID"))),x.createElement("div",{className:"instructions-box"},x.createElement("h4",null,"üìã How to Create a Tracking Record:"),x.createElement("ol",null,x.createElement("li",null,"Select a verified user from the left sidebar"),x.createElement("li",null,"Choose the package status from the dropdown"),x.createElement("li",null,'Click "Pin Package Location" button'),x.createElement("li",null,"Click on the map to pin the exact package location"),x.createElement("li",null,"Copy the generated tracking ID and share with the customer"))))))};class P2 extends x.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("TrackingModal Error:",e,t)}render(){return this.state.hasError?x.createElement("div",{style:{padding:"20px",textAlign:"center"}},x.createElement("p",{style:{color:"#c53030",fontSize:"14px"}},"‚ö†Ô∏è Error loading tracking map: ",this.state.error?.message),x.createElement("p",{style:{color:"#718096",fontSize:"12px"}},"Please close this dialog and try again")):this.props.children}}const D2=({isOpen:n,onClose:e})=>{const[t,r]=b.useState(!1);if(b.useEffect(()=>{if(n){r(!0);const f=g=>{g.key==="Escape"&&e()};return document.addEventListener("keydown",f),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",f),document.body.style.overflow="unset"}}else r(!1)},[n,e]),!n)return null;const a=f=>{f.target===f.currentTarget&&e()},u=x.createElement("div",{className:"tracking-modal-overlay",onClick:a,style:{display:"flex"}},x.createElement("div",{className:"tracking-modal-content",onClick:f=>f.stopPropagation()},x.createElement("div",{className:"tracking-modal-header"},x.createElement("h2",{className:"tracking-modal-title"},"üìç Live Package Tracking"),x.createElement("button",{className:"tracking-modal-close",onClick:e,title:"Close (ESC)",type:"button"},"‚úï")),x.createElement("div",{className:"tracking-modal-body"},t&&x.createElement(P2,null,x.createElement(O2,null)))));return z1.createPortal(u,document.body)},N2=({isOpen:n,onClose:e})=>{if(b.useEffect(()=>{if(n){const r=a=>{a.key==="Escape"&&e()};return document.addEventListener("keydown",r),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",r),document.body.style.overflow="unset"}}},[n,e]),!n)return null;const t=r=>{r.target===r.currentTarget&&e()};return x.createElement("div",{className:"tracking-modal-overlay",onClick:t},x.createElement("div",{className:"tracking-modal-content",onClick:r=>r.stopPropagation()},x.createElement("div",{className:"tracking-modal-header"},x.createElement("h2",{className:"tracking-modal-title"},"‚úÖ Test Modal"),x.createElement("button",{className:"tracking-modal-close",onClick:e,title:"Close (ESC)",type:"button"},"‚úï")),x.createElement("div",{className:"tracking-modal-body",style:{textAlign:"center",padding:"40px 20px"}},x.createElement("p",{style:{fontSize:"16px",color:"#2d3748"}},"‚úÖ Modal is working!"),x.createElement("p",{style:{fontSize:"14px",color:"#718096",marginBottom:"20px"}},"The modal overlay and popup infrastructure is functioning correctly."),x.createElement("p",{style:{fontSize:"13px",color:"#a0aec0",marginBottom:"20px"}},"If you can see this message, the modal system itself is working."),x.createElement("div",{style:{backgroundColor:"#f0f4ff",border:"1px solid #c7d2fe",padding:"16px",borderRadius:"8px",marginBottom:"20px"}},x.createElement("p",{style:{margin:"0",fontSize:"12px",color:"#4f46e5",fontFamily:"monospace"}},"If the main tracking map disappears when you try to open it,",x.createElement("br",null),"the issue is likely with the Google Maps API configuration.")),x.createElement("button",{onClick:e,style:{backgroundColor:"#4f46e5",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontWeight:"600"}},"Close Test Modal"))))},rw=({onLogout:n})=>{const[e,t]=b.useState(null),[r,a]=b.useState(!0),[u,f]=b.useState("overview"),[g,v]=b.useState(!1),[_,w]=b.useState(!1),[T,I]=b.useState([]),[V,N]=b.useState([]),[H,q]=b.useState([]),[W,$]=b.useState([]),[re,ie]=b.useState(null),[ee,X]=b.useState([]),[O,P]=b.useState(""),[M,j]=b.useState({}),[U,G]=b.useState([]),[F,ke]=b.useState([]),[Le,ne]=b.useState(null),[me,ge]=b.useState([]),[_e,ue]=b.useState(""),[B,K]=b.useState(null),[te,fe]=b.useState(!1);b.useEffect(()=>{(async()=>{try{const Pe=await L2();t(Pe?{name:Pe.email,...Pe}:null)}catch(Pe){console.error("Error fetching user:",Pe),t(null)}finally{a(!1)}})()},[]);const Q=async()=>{try{if(console.log("Logout clicked"),n){await n();return}await R2(),t(null),window.location.hash="#/",window.location.reload()}catch(ae){console.error("Logout failed:",ae),localStorage.removeItem("token"),t(null),window.location.hash="#/",window.location.reload()}};b.useEffect(()=>{if(!e||!e.id)return;const ae=Qc("http://localhost:5000",{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:5});return ae.on("connect",()=>{console.log("‚úÖ Admin connected to messaging server"),fe(!0),ae.emit("user-login",{userId:e.id})}),ae.on("disconnect",()=>{console.log("‚ùå Admin disconnected from messaging server"),fe(!1)}),ae.on("message-error",Pe=>{console.error("‚ùå Message error:",Pe)}),ae.on(`notification-${e.id}`,Pe=>{console.log("üîî Notification received:",Pe),alert(`üìß New message from ${Pe.senderName}: ${Pe.message}`)}),K(ae),()=>{ae.disconnect()}},[e]),b.useEffect(()=>{let ae;return e&&(u==="users"&&Ae(),u==="couriers"&&Ie(),u==="shipments"&&De(),u==="chat"&&(ae=Qe()),u==="agent-requests"&&Ut(),u==="verified-users"&&an(),u==="direct-messages"&&an()),()=>{ae&&typeof ae=="function"&&ae()}},[u,e]);const Ae=async()=>{try{const ae=localStorage.getItem("token"),Pe=await fetch("http://localhost:5000/api/admin/users",{headers:{Authorization:`Bearer ${ae}`}});if(Pe.ok){const We=await Pe.json();return I(We),We}}catch(ae){console.error("Failed to fetch users:",ae)}return[]},Ie=async()=>{try{const ae=localStorage.getItem("token"),Pe=await fetch("http://localhost:5000/api/admin/couriers",{headers:{Authorization:`Bearer ${ae}`}});if(Pe.ok){const We=await Pe.json();N(We)}}catch(ae){console.error("Failed to fetch couriers:",ae),N([{_id:"c1",name:"John Courier",email:"john@courier.com",status:"active",verified:!0},{_id:"c2",name:"Jane Driver",email:"jane@driver.com",status:"inactive",verified:!1}])}},De=async()=>{try{const ae=localStorage.getItem("token"),Pe=await fetch("http://localhost:5000/api/admin/shipments",{headers:{Authorization:`Bearer ${ae}`}});if(Pe.ok){const We=await Pe.json();q(We)}}catch(ae){console.error("Failed to fetch shipments:",ae),q([{_id:"s1",sender:"Alice Customer",receiver:"Bob Receiver",pickupAddress:"123 Main St",deliveryAddress:"456 Elm St",courier:"John Courier",status:"in_transit"},{_id:"s2",sender:"Charlie Sender",receiver:"Diana Dest",pickupAddress:"789 Oak Ave",deliveryAddress:"321 Pine Rd",courier:"Not Assigned",status:"pending"}])}},Qe=()=>{try{const ae=bu(ns,"threads"),Pe=Cd(LD("agentRequested","==",!0));return Ad(Pe,async rn=>{const Ct=[];for(const Wt of rn.docs){const nt=Wt.data(),dt=Wt.id;try{const An=bu(ns,"threads",dt,"messages"),yr=await ey(yl(ns,"threads",dt)),ir=await Promise.resolve().then(()=>{const wi=T.find(Si=>Si._id===dt||Si.id===dt);return wi&&(wi.name||wi.email)||"Customer"});Ct.push({_id:dt,customerName:ir,agentRequested:!0,lastMessage:nt.lastMessage||"",unread:nt.unread||0})}catch(An){console.error("Error processing thread:",An)}}$(Ct)})}catch(ae){console.error("Failed to fetch conversations from Firestore:",ae),$([])}},ze=async ae=>{console.log("Verify clicked for",ae),j(Pe=>({...Pe,[ae]:!0}));try{const Pe=localStorage.getItem("token"),We=await fetch(`http://localhost:5000/api/admin/verify-user/${ae}`,{method:"PUT",headers:{Authorization:`Bearer ${Pe}`}});if(!We.ok){let Ct=`Failed to verify user (${We.status})`;try{Ct=(await We.json()).message||Ct}catch{const nt=await We.text();console.error("Verify response text:",nt)}console.error("Verify error:",We.status,Ct),alert(`Verification failed: ${Ct}`);return}const rn=await We.json();console.log("User verification successful:",rn),alert("User verified successfully!"),await Ae()}catch(Pe){console.error("Failed to verify user:",Pe),alert(`Network error verifying user: ${Pe.message}`)}finally{j(Pe=>({...Pe,[ae]:!1}))}},Je=async(ae,Pe)=>{try{const We=localStorage.getItem("token");(await fetch(`http://localhost:5000/api/admin/shipments/${ae}/status`,{method:"PUT",headers:{Authorization:`Bearer ${We}`,"Content-Type":"application/json"},body:JSON.stringify({status:Pe})})).ok&&(alert("Status updated!"),De())}catch(We){console.error("Failed to update status:",We)}},Ut=async()=>{try{const ae=localStorage.getItem("token"),Pe=await fetch("http://localhost:5000/api/agent-requests",{headers:{Authorization:`Bearer ${ae}`}});if(Pe.ok){const We=await Pe.json();G(We)}}catch(ae){console.error("Failed to fetch agent requests:",ae)}},an=async()=>{try{const ae=localStorage.getItem("token"),Pe=await fetch("http://localhost:5000/api/verified-users-list",{headers:{Authorization:`Bearer ${ae}`}});if(Pe.ok){const We=await Pe.json();ke(We)}}catch(ae){console.error("Failed to fetch verified users:",ae)}},ln=async ae=>{try{const Pe=localStorage.getItem("token"),We=`customer-${ae}`,rn=await fetch(`http://localhost:5000/api/messaging/conversation/${We}`,{headers:{Authorization:`Bearer ${Pe}`}});if(rn.ok){const Ct=await rn.json();ge(Ct.messages||[]),console.log(`‚úÖ Loaded ${Ct.messages?.length||0} messages for conversation ${We}`),await fetch(`http://localhost:5000/api/messaging/mark-read/${We}`,{method:"PUT",headers:{Authorization:`Bearer ${Pe}`}}).catch(Wt=>console.warn("Failed to mark as read:",Wt)),B&&te&&(B.off(`message-${We}`),B.off(`message-status-${We}`),B.on(`message-${We}`,Wt=>{console.log("üì© New message received:",Wt),ge(nt=>nt.some(An=>An._id===Wt._id)?nt:[...nt,Wt])}),B.on(`message-status-${We}`,Wt=>{console.log("üìä Message status updated:",Wt),ge(nt=>nt.map(dt=>dt._id===Wt.messageId?{...dt,status:Wt.status}:dt))}),B.on(`message-status-updated-${We}`,Wt=>{console.log("üìä Messages marked as read"),ge(nt=>nt.map(dt=>({...dt,status:"read"})))}))}}catch(Pe){console.error("Failed to fetch conversation:",Pe)}},ot=async()=>{if(!Le||!_e.trim()){alert("Please select a user and type a message");return}try{const ae=localStorage.getItem("token"),Pe=`customer-${Le._id}`,We=await fetch("http://localhost:5000/api/messaging/send",{method:"POST",headers:{Authorization:`Bearer ${ae}`,"Content-Type":"application/json"},body:JSON.stringify({conversationId:Pe,recipientId:Le._id,message:_e,isFromAdmin:!0})});if(We.ok){const rn=await We.json();ue(""),B&&te&&B.emit("send-message",{conversationId:Pe,senderId:e.id,recipientId:Le._id,message:_e,isFromAdmin:!0}),await ln(Le._id)}else alert("Failed to send message")}catch(ae){console.error("Failed to send message:",ae),alert("Error sending message")}},Pi=async ae=>{try{const Pe=localStorage.getItem("token");(await fetch(`http://localhost:5000/api/agent-request/${ae}/accept`,{method:"POST",headers:{Authorization:`Bearer ${Pe}`}})).ok&&(alert("Agent request accepted!"),Ut())}catch(Pe){console.error("Failed to accept agent request:",Pe)}},Di=async ae=>{try{const Pe=localStorage.getItem("token");(await fetch(`http://localhost:5000/api/agent-request/${ae}/resolve`,{method:"POST",headers:{Authorization:`Bearer ${Pe}`}})).ok&&(alert("Agent request resolved!"),Ut())}catch(Pe){console.error("Failed to resolve agent request:",Pe)}},Ni=async ae=>{ie(ae),X([]);try{const Pe=bu(ns,"threads",ae._id,"messages"),We=Cd(Pe,Jv("ts","asc")),rn=Ad(We,Ct=>{const Wt=Ct.docs.map(nt=>({_id:nt.id,sender:nt.data().from==="admin"?"admin":nt.data().from==="bot"?"bot":"customer",text:nt.data().text,timestamp:nt.data().ts?.toDate?.()||new Date}));X(Wt)});ae._unsubscribe=rn}catch(Pe){console.error("Failed to open Firestore conversation:",Pe),X([])}},ui=async()=>{if(!(!O.trim()||!re))try{const ae=bu(ns,"threads",re._id,"messages");await _u(ae,{from:"admin",text:O,ts:Or(),status:"sent"}),P("")}catch(ae){console.error("Failed to send admin message:",ae),alert("Failed to send message: "+ae.message)}};return r?x.createElement("div",{style:Re.loading},"Loading admin data..."):e?x.createElement("div",{style:Re.container},x.createElement("header",{style:Re.header},x.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},x.createElement("div",null,x.createElement("h1",null,"SwiftDelivery Admin Dashboard"),x.createElement("p",null,"Welcome, ",e.name||"Admin","!")),x.createElement("button",{onClick:Q,style:Re.logoutButton,title:"Log out"},"‚úï"))),x.createElement("nav",{style:Re.nav},x.createElement("button",{style:u==="overview"?Re.tabActive:Re.tab,onClick:()=>f("overview")},"Overview"),x.createElement("button",{style:u==="users"?Re.tabActive:Re.tab,onClick:()=>f("users")},"Users"),x.createElement("button",{style:u==="couriers"?Re.tabActive:Re.tab,onClick:()=>f("couriers")},"Couriers"),x.createElement("button",{style:u==="shipments"?Re.tabActive:Re.tab,onClick:()=>f("shipments")},"Shipments"),x.createElement("button",{style:u==="tracking"?Re.tabActive:Re.tab,onClick:()=>f("tracking")},"Tracking"),x.createElement("button",{style:u==="chat"?Re.tabActive:Re.tab,onClick:()=>f("chat")},"Chat/Support"),x.createElement("button",{style:u==="agent-requests"?Re.tabActive:Re.tab,onClick:()=>f("agent-requests")},"Agent Requests ",U.length>0&&`(${U.length})`),x.createElement("button",{style:u==="verified-users"?Re.tabActive:Re.tab,onClick:()=>f("verified-users")},"All Verified Users"),x.createElement("button",{style:u==="direct-messages"?Re.tabActive:Re.tab,onClick:()=>f("direct-messages")},"Direct Messages"),x.createElement("button",{style:u==="analytics"?Re.tabActive:Re.tab,onClick:()=>f("analytics")},"Analytics")),x.createElement("main",{style:Re.main},u==="overview"&&x.createElement("div",null,x.createElement("h2",null,"Dashboard Overview"),x.createElement("div",{style:Re.statsGrid},x.createElement("div",{style:Re.statCard},x.createElement("h3",null,"Total Users"),x.createElement("p",{style:Re.statNumber},T.length||0)),x.createElement("div",{style:Re.statCard},x.createElement("h3",null,"Active Shipments"),x.createElement("p",{style:Re.statNumber},H.filter(ae=>ae.status==="in_transit").length||0)),x.createElement("div",{style:Re.statCard},x.createElement("h3",null,"Total Shipments"),x.createElement("p",{style:Re.statNumber},H.length||0)),x.createElement("div",{style:Re.statCard},x.createElement("h3",null,"Delivered Today"),x.createElement("p",{style:Re.statNumber},"0")))),u==="users"&&x.createElement("div",null,x.createElement("h2",null,"User Management"),x.createElement("div",{style:{position:"relative",zIndex:5}},x.createElement("table",{style:Re.table},x.createElement("thead",null,x.createElement("tr",null,x.createElement("th",null,"Name"),x.createElement("th",null,"Email"),x.createElement("th",null,"Admin"),x.createElement("th",null,"Verified"),x.createElement("th",null,"Actions"))),x.createElement("tbody",null,T.map(ae=>x.createElement("tr",{key:ae._id},x.createElement("td",null,ae.name),x.createElement("td",null,ae.email),x.createElement("td",null,ae.isAdmin?"Yes":"No"),x.createElement("td",null,ae.isVerified?"‚úÖ":"‚è≥"),x.createElement("td",null,!ae.isVerified&&x.createElement("button",{style:{...Re.btnSmall,opacity:M[ae._id]?.6:1,cursor:M[ae._id]?"not-allowed":"pointer"},disabled:M[ae._id],onClick:()=>{console.log("Button onClick fired for",ae._id),ze(ae._id)}},M[ae._id]?"Verifying...":"Verify")))))))),u==="couriers"&&x.createElement("div",null,x.createElement("h2",null,"Courier Management"),x.createElement("button",{style:Re.btnPrimary},"Add New Courier"),x.createElement("table",{style:Re.table},x.createElement("thead",null,x.createElement("tr",null,x.createElement("th",null,"Name"),x.createElement("th",null,"Email"),x.createElement("th",null,"Status"),x.createElement("th",null,"Verified"),x.createElement("th",null,"Actions"))),x.createElement("tbody",null,V.map(ae=>x.createElement("tr",{key:ae._id},x.createElement("td",null,ae.name),x.createElement("td",null,ae.email),x.createElement("td",null,ae.status),x.createElement("td",null,ae.verified?"‚úÖ":"‚è≥"),x.createElement("td",null,x.createElement("button",{style:Re.btnSmall},"Edit"))))))),u==="shipments"&&x.createElement("div",null,x.createElement("h2",null,"Shipment Overview"),x.createElement("table",{style:Re.table},x.createElement("thead",null,x.createElement("tr",null,x.createElement("th",null,"ID"),x.createElement("th",null,"Sender"),x.createElement("th",null,"Receiver"),x.createElement("th",null,"Pickup"),x.createElement("th",null,"Delivery"),x.createElement("th",null,"Courier"),x.createElement("th",null,"Status"),x.createElement("th",null,"Actions"))),x.createElement("tbody",null,H.map(ae=>x.createElement("tr",{key:ae._id},x.createElement("td",null,ae._id),x.createElement("td",null,ae.sender),x.createElement("td",null,ae.receiver),x.createElement("td",null,ae.pickupAddress),x.createElement("td",null,ae.deliveryAddress),x.createElement("td",null,ae.courier),x.createElement("td",null,ae.status),x.createElement("td",null,x.createElement("select",{style:Re.select,value:ae.status,onChange:Pe=>Je(ae._id,Pe.target.value)},x.createElement("option",{value:"pending"},"Pending"),x.createElement("option",{value:"picked_up"},"Picked Up"),x.createElement("option",{value:"in_transit"},"In Transit"),x.createElement("option",{value:"out_for_delivery"},"Out for Delivery"),x.createElement("option",{value:"delivered"},"Delivered"),x.createElement("option",{value:"failed"},"Failed")))))))),u==="tracking"&&x.createElement("div",{style:{textAlign:"center",padding:"40px 20px"}},x.createElement("div",{style:{marginBottom:"20px"}},x.createElement("h2",null,"üìç Live Package Tracking"),x.createElement("p",{style:{color:"#718096",marginBottom:"20px"}},"Manage package tracking, pinpoint locations, and generate tracking IDs for customers")),x.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"}},x.createElement("button",{onClick:()=>v(!0),style:{...Re.btnPrimary,padding:"12px 32px",fontSize:"16px",fontWeight:"600"}},"üó∫Ô∏è Open Live Tracking Map"),x.createElement("button",{onClick:()=>w(!0),style:{...Re.tab,padding:"12px 32px",fontSize:"14px",fontWeight:"500",backgroundColor:"#f0f4ff",border:"1px solid #c7d2fe",color:"#4f46e5",cursor:"pointer"},title:"Click to test if modal system works"},"üß™ Test Modal"))),u==="chat"&&x.createElement("div",{style:Re.chatContainer},x.createElement("div",{style:Re.chatSidebar},x.createElement("h3",null,"Agent Requests üî¥"),W.length===0?x.createElement("p",{style:{padding:"15px",color:"#6c757d",fontSize:"12px"}},"No agent requests pending"):W.map(ae=>x.createElement("div",{key:ae._id,style:{...Re.conversationItem,backgroundColor:re?._id===ae._id?"#e3f2fd":"transparent",borderLeft:ae.agentRequested?"4px solid #dc3545":"4px solid transparent",transition:"background-color 0.2s"},onClick:()=>Ni(ae)},x.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},x.createElement("span",{style:{color:"#dc3545",fontSize:"16px"}},"üî¥"),x.createElement("strong",null,ae.customerName)),x.createElement("p",{style:Re.lastMessage},ae.lastMessage||"New agent request"),ae.unread>0&&x.createElement("span",{style:Re.unreadBadge},ae.unread)))),x.createElement("div",{style:Re.chatMain},re?x.createElement(x.Fragment,null,x.createElement("div",{style:Re.chatHeader},x.createElement("h3",null,"Chat with ",re.customerName)),x.createElement("div",{style:Re.chatMessages},ee.map(ae=>x.createElement("div",{key:ae._id,style:{display:"flex",justifyContent:ae.sender==="admin"?"flex-end":"flex-start",marginBottom:"10px"}},x.createElement("div",{style:ae.sender==="admin"?{...Re.adminMessage,maxWidth:"70%"}:ae.sender==="bot"?{...Re.botMessage,maxWidth:"70%"}:{...Re.customerMessage,maxWidth:"70%"}},x.createElement("p",{style:{margin:"0 0 4px 0",wordWrap:"break-word"}},ae.text),x.createElement("small",{style:{opacity:.7,fontSize:"11px"}},ae.timestamp?.toLocaleTimeString?.()||""))))),x.createElement("div",{style:Re.chatInput},x.createElement("input",{type:"text",placeholder:"Type your message...",value:O,onChange:ae=>P(ae.target.value),onKeyPress:ae=>ae.key==="Enter"&&ui(),style:Re.input}),x.createElement("button",{style:Re.btnPrimary,onClick:ui},"Send"))):x.createElement("div",{style:Re.chatPlaceholder},x.createElement("p",null,"Select a conversation to start chatting with a customer.")))),u==="agent-requests"&&x.createElement("div",null,x.createElement("h2",null,"üö® Agent Requests"),U.length===0?x.createElement("p",{style:{padding:"20px",color:"#6c757d",fontSize:"14px"}},"No pending agent requests"):x.createElement("div",{style:{...Re.statsGrid,gap:"15px"}},U.map(ae=>x.createElement("div",{key:ae._id,style:{...Re.statCard,backgroundColor:"#fff3cd",borderLeft:"4px solid #ffc107",padding:"15px"}},x.createElement("h4",{style:{marginTop:0}},ae.userId?.name||"Unknown"," (",ae.userId?.email,")"),x.createElement("p",{style:{color:"#555",marginBottom:"10px"}},x.createElement("strong",null,"Message:")," ",ae.message),x.createElement("p",{style:{fontSize:"12px",color:"#666",marginBottom:"10px"}},x.createElement("strong",null,"Status:")," ",ae.status),x.createElement("p",{style:{fontSize:"12px",color:"#666",marginBottom:"15px"}},x.createElement("strong",null,"Requested:")," ",new Date(ae.createdAt).toLocaleString()),x.createElement("div",{style:{display:"flex",gap:"10px"}},ae.status==="pending"&&x.createElement(x.Fragment,null,x.createElement("button",{style:{...Re.btnSmall,backgroundColor:"#28a745",color:"#fff"},onClick:()=>Pi(ae._id)},"Accept"),x.createElement("button",{style:{...Re.btnSmall,backgroundColor:"#6c757d",color:"#fff"},onClick:()=>{ne({_id:ae.userId?._id,name:ae.userId?.name}),f("direct-messages")}},"Message Customer")),ae.status==="accepted"&&x.createElement("button",{style:{...Re.btnSmall,backgroundColor:"#6c757d",color:"#fff"},onClick:()=>Di(ae._id)},"Resolve")))))),u==="verified-users"&&x.createElement("div",null,x.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"}},x.createElement("h2",{style:{margin:0}},"‚úÖ All Verified Users"),x.createElement("div",{style:{backgroundColor:"#28a745",color:"white",padding:"8px 16px",borderRadius:"20px",fontWeight:"600",fontSize:"14px"}},"Total: ",F.length)),F.length===0?x.createElement("p",{style:{padding:"20px",color:"#6c757d",fontSize:"14px"}},"No verified users"):x.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"15px",maxHeight:"calc(100vh - 250px)",overflowY:"auto",overflowX:"hidden",padding:"15px",paddingRight:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px"}},F.map((ae,Pe)=>x.createElement("div",{key:ae._id,style:{...Re.statCard,backgroundColor:"#d4edda",borderLeft:"4px solid #28a745",borderRadius:"8px",padding:"16px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},onMouseEnter:We=>{We.currentTarget.style.transform="translateY(-4px)",We.currentTarget.style.boxShadow="0 6px 12px rgba(40, 167, 69, 0.2)"},onMouseLeave:We=>{We.currentTarget.style.transform="translateY(0)",We.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},onClick:()=>{ne(ae),ln(ae._id),f("direct-messages")}},x.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"}},x.createElement("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#28a745",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",marginRight:"10px",fontSize:"14px"}},ae.name?.[0]?.toUpperCase()||"U"),x.createElement("h4",{style:{margin:0,flex:1,fontSize:"15px"}},ae.name)),x.createElement("p",{style:{color:"#555",marginBottom:"8px",fontSize:"13px"}},"üìß ",ae.email),x.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"12px",color:"#28a745",fontWeight:"600"}},"üí¨ Send Message ‚Üí"))))),u==="direct-messages"&&x.createElement("div",null,x.createElement("h2",null,"üí¨ Direct Messages"),x.createElement("div",{style:Re.chatContainer},x.createElement("div",{style:{...Re.chatSidebar,flex:"0 0 320px"}},x.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"}},x.createElement("h3",{style:{margin:0}},"Verified Users"),x.createElement("span",{style:{backgroundColor:"#e9ecef",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"}},F.length)),x.createElement("div",{style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto",overflowX:"hidden",paddingRight:"8px"}},F.length===0?x.createElement("p",{style:{padding:"15px",color:"#6c757d",fontSize:"12px"}},"No verified users"):F.map(ae=>x.createElement("div",{key:ae._id,style:{...Re.conversationItem,backgroundColor:Le?._id===ae._id?"#e3f2fd":"transparent",cursor:"pointer"},onClick:()=>{ne(ae),ln(ae._id)}},x.createElement("strong",null,ae.name),x.createElement("p",{style:{...Re.lastMessage,margin:"5px 0 0 0"}},ae.email))))),x.createElement("div",{style:Re.chatMain},Le?x.createElement(x.Fragment,null,x.createElement("div",{style:Re.chatHeader},x.createElement("h3",{style:{margin:0}},"üí¨ ",Le.name),x.createElement("p",{style:{margin:"5px 0 0 0",color:"#6c757d",fontSize:"12px"}},Le.email)),x.createElement("div",{style:Re.chatMessages},me.length===0?x.createElement("p",{style:{color:"#6c757d",textAlign:"center"}},"No messages yet. Start the conversation!"):me.map((ae,Pe)=>x.createElement("div",{key:Pe,style:{display:"flex",justifyContent:ae.isFromAdmin?"flex-end":"flex-start",marginBottom:"8px",gap:"4px",alignItems:"flex-end"}},x.createElement("div",{style:ae.isFromAdmin?Re.adminMessage:Re.customerMessage},ae.message),ae.isFromAdmin&&x.createElement("span",{style:{fontSize:"11px",color:"#9ca3af",minWidth:"20px"}},ae.status==="read"&&"‚úì‚úì",ae.status==="delivered"&&"‚úì",ae.status==="sent"&&"‚Ä¢")))),x.createElement("div",{style:Re.chatInput},x.createElement("input",{type:"text",style:Re.input,placeholder:"Type your message...",value:_e,onChange:ae=>ue(ae.target.value),onKeyPress:ae=>{ae.key==="Enter"&&ot()}}),x.createElement("button",{style:Re.btnSmall,onClick:ot},"Send"))):x.createElement("div",{style:Re.chatPlaceholder},x.createElement("p",null,"Select a user to start messaging"))))),u==="analytics"&&x.createElement("div",null,x.createElement("h2",null,"System Analytics"),x.createElement("div",{style:Re.statsGrid},x.createElement("div",{style:Re.statCard},x.createElement("h3",null,"Revenue (This Month)"),x.createElement("p",{style:Re.statNumber},"$0")),x.createElement("div",{style:Re.statCard},x.createElement("h3",null,"Total Deliveries"),x.createElement("p",{style:Re.statNumber},H.filter(ae=>ae.status==="delivered").length)),x.createElement("div",{style:Re.statCard},x.createElement("h3",null,"Failed Deliveries"),x.createElement("p",{style:Re.statNumber},H.filter(ae=>ae.status==="failed").length)),x.createElement("div",{style:Re.statCard},x.createElement("h3",null,"Active Couriers"),x.createElement("p",{style:Re.statNumber},V.filter(ae=>ae.status==="active").length))),x.createElement("p",{style:{marginTop:"20px"}},"Charts and detailed performance metrics will be displayed here."))),x.createElement(D2,{isOpen:g,onClose:()=>v(!1)}),x.createElement(N2,{isOpen:_,onClose:()=>w(!1)})):x.createElement("div",{style:Re.loading},"You must be logged in as an admin to view this page.")},Re={container:{fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",backgroundColor:"#f5f7fa",minHeight:"100vh",padding:"20px"},loading:{textAlign:"center",marginTop:"50px",fontSize:"18px"},header:{backgroundColor:"#fff",padding:"20px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginBottom:"20px"},logoutButton:{backgroundColor:"#f56565",color:"#fff",border:"none",borderRadius:"999px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"18px",fontWeight:"bold",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},nav:{display:"flex",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},tab:{padding:"12px 24px",border:"none",backgroundColor:"#fff",cursor:"pointer",borderRadius:"6px",fontSize:"14px",fontWeight:"500",transition:"all 0.3s"},tabActive:{padding:"12px 24px",border:"none",backgroundColor:"#007bff",color:"#fff",cursor:"pointer",borderRadius:"6px",fontSize:"14px",fontWeight:"600"},main:{backgroundColor:"#fff",padding:"30px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",minHeight:"500px",position:"relative",zIndex:1},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginTop:"20px"},statCard:{backgroundColor:"#f9fafb",padding:"20px",borderRadius:"8px",textAlign:"center",border:"1px solid #e5e7eb"},statNumber:{fontSize:"32px",fontWeight:"bold",color:"#007bff",margin:"10px 0 0 0"},table:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},btnSmall:{padding:"6px 12px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",transition:"transform 0.1s ease, box-shadow 0.1s ease, background-color 0.1s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.15)"},btnPrimary:{padding:"10px 20px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",marginBottom:"15px",pointerEvents:"auto",zIndex:10},select:{padding:"6px",borderRadius:"4px",border:"1px solid #ccc"},chatContainer:{display:"flex",height:"500px",gap:"20px",marginTop:"20px"},chatSidebar:{flex:"0 0 300px",backgroundColor:"#f9fafb",borderRadius:"8px",padding:"15px",overflowY:"auto",border:"1px solid #e5e7eb"},conversationItem:{padding:"12px",borderBottom:"1px solid #e5e7eb",cursor:"pointer",position:"relative"},lastMessage:{fontSize:"12px",color:"#6c757d",margin:"5px 0 0 0"},unreadBadge:{position:"absolute",top:"10px",right:"10px",backgroundColor:"#dc3545",color:"#fff",borderRadius:"50%",padding:"2px 6px",fontSize:"10px",fontWeight:"bold"},chatMain:{flex:"1",display:"flex",flexDirection:"column",backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},chatHeader:{padding:"15px",borderBottom:"1px solid #e5e7eb",backgroundColor:"#f9fafb"},chatMessages:{flex:"1",padding:"15px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"10px"},adminMessage:{alignSelf:"flex-end",backgroundColor:"#007bff",color:"#fff",padding:"10px 15px",borderRadius:"12px",maxWidth:"70%"},customerMessage:{alignSelf:"flex-start",backgroundColor:"#e9ecef",color:"#000",padding:"10px 15px",borderRadius:"12px",maxWidth:"70%"},botMessage:{alignSelf:"flex-start",backgroundColor:"#f0f7ff",color:"#1f2937",padding:"10px 15px",borderRadius:"12px",maxWidth:"70%",border:"1px solid #bfdbfe"},chatInput:{display:"flex",padding:"15px",borderTop:"1px solid #e5e7eb",gap:"10px"},input:{flex:"1",padding:"10px",border:"1px solid #ccc",borderRadius:"6px",fontSize:"14px"},chatPlaceholder:{flex:"1",display:"flex",alignItems:"center",justifyContent:"center",color:"#6c757d"}};var dg={exports:{}},Pc={};var sw;function V2(){if(sw)return Pc;sw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,u){var f=null;if(u!==void 0&&(f=""+u),a.key!==void 0&&(f=""+a.key),"key"in a){u={};for(var g in a)g!=="key"&&(u[g]=a[g])}else u=a;return a=u.ref,{$$typeof:n,type:r,key:f,ref:a!==void 0?a:null,props:u}}return Pc.Fragment=e,Pc.jsx=t,Pc.jsxs=t,Pc}var ow;function z2(){return ow||(ow=1,dg.exports=V2()),dg.exports}var Oi=z2();function ch(n){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ch(n)}function B2(n,e){if(ch(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ch(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function U2(n){var e=B2(n,"string");return ch(e)=="symbol"?e:e+""}function Ee(n,e,t){return(e=U2(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pg,aw;function j2(){if(aw)return pg;aw=1;var n=function(t,r,a,u,f,g,v,_){if(!t){var w;if(r===void 0)w=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var T=[a,u,f,g,v,_],I=0;w=new Error(r.replace(/%s/g,function(){return T[I++]})),w.name="Invariant Violation"}throw w.framesToPop=1,w}};return pg=n,pg}var F2=j2(),Fn=RA(F2),ft=b.createContext(null);function H2(){Fn(!!b.useContext,"useGoogleMap is React hook and requires React version 16.8+");var n=b.useContext(ft);return Fn(!!n,"useGoogleMap needs a GoogleMap available up in the tree"),n}function q2(n,e,t){return Object.keys(n).reduce(function(a,u){return e(a,n[u],u)},t)}function Z2(n,e){Object.keys(n).forEach(t=>e(n[t],t))}function G2(n,e,t,r){var a={},u=(f,g)=>{var v=t[g];v!==e[g]&&(a[g]=v,f(r,v))};return Z2(n,u),a}function W2(n,e,t){var r=q2(t,function(u,f,g){return typeof n[g]=="function"&&u.push(google.maps.event.addListener(e,f,n[g])),u},[]);return r}function K2(n){google.maps.event.removeListener(n)}function Et(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];n.forEach(K2)}function gt(n){var{updaterMap:e,eventMap:t,prevProps:r,nextProps:a,instance:u}=n,f=W2(a,u,t);return G2(e,r,a,u),f}var lw={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},uw={extraMapTypes(n,e){e.forEach(function(r,a){n.mapTypes.set(String(a),r)})},center(n,e){n.setCenter(e)},clickableIcons(n,e){n.setClickableIcons(e)},heading(n,e){n.setHeading(e)},mapTypeId(n,e){n.setMapTypeId(e)},options(n,e){n.setOptions(e)},streetView(n,e){n.setStreetView(e)},tilt(n,e){n.setTilt(e)},zoom(n,e){n.setZoom(e)}};function Y2(n){var{children:e,options:t,id:r,mapContainerStyle:a,mapContainerClassName:u,center:f,onClick:g,onDblClick:v,onDrag:_,onDragEnd:w,onDragStart:T,onMouseMove:I,onMouseOut:V,onMouseOver:N,onMouseDown:H,onMouseUp:q,onRightClick:W,onCenterChanged:$,onLoad:re,onUnmount:ie}=n,[ee,X]=b.useState(null),O=b.useRef(null),[P,M]=b.useState(null),[j,U]=b.useState(null),[G,F]=b.useState(null),[ke,Le]=b.useState(null),[ne,me]=b.useState(null),[ge,_e]=b.useState(null),[ue,B]=b.useState(null),[K,te]=b.useState(null),[fe,Q]=b.useState(null),[Ae,Ie]=b.useState(null),[De,Qe]=b.useState(null),[ze,Je]=b.useState(null);return b.useEffect(()=>{t&&ee!==null&&ee.setOptions(t)},[ee,t]),b.useEffect(()=>{ee!==null&&typeof f<"u"&&ee.setCenter(f)},[ee,f]),b.useEffect(()=>{ee&&v&&(j!==null&&google.maps.event.removeListener(j),U(google.maps.event.addListener(ee,"dblclick",v)))},[v]),b.useEffect(()=>{ee&&w&&(G!==null&&google.maps.event.removeListener(G),F(google.maps.event.addListener(ee,"dragend",w)))},[w]),b.useEffect(()=>{ee&&T&&(ke!==null&&google.maps.event.removeListener(ke),Le(google.maps.event.addListener(ee,"dragstart",T)))},[T]),b.useEffect(()=>{ee&&H&&(ne!==null&&google.maps.event.removeListener(ne),me(google.maps.event.addListener(ee,"mousedown",H)))},[H]),b.useEffect(()=>{ee&&I&&(ge!==null&&google.maps.event.removeListener(ge),_e(google.maps.event.addListener(ee,"mousemove",I)))},[I]),b.useEffect(()=>{ee&&V&&(ue!==null&&google.maps.event.removeListener(ue),B(google.maps.event.addListener(ee,"mouseout",V)))},[V]),b.useEffect(()=>{ee&&N&&(K!==null&&google.maps.event.removeListener(K),te(google.maps.event.addListener(ee,"mouseover",N)))},[N]),b.useEffect(()=>{ee&&q&&(fe!==null&&google.maps.event.removeListener(fe),Q(google.maps.event.addListener(ee,"mouseup",q)))},[q]),b.useEffect(()=>{ee&&W&&(Ae!==null&&google.maps.event.removeListener(Ae),Ie(google.maps.event.addListener(ee,"rightclick",W)))},[W]),b.useEffect(()=>{ee&&g&&(De!==null&&google.maps.event.removeListener(De),Qe(google.maps.event.addListener(ee,"click",g)))},[g]),b.useEffect(()=>{ee&&_&&(ze!==null&&google.maps.event.removeListener(ze),Je(google.maps.event.addListener(ee,"drag",_)))},[_]),b.useEffect(()=>{ee&&$&&(P!==null&&google.maps.event.removeListener(P),M(google.maps.event.addListener(ee,"center_changed",$)))},[g]),b.useEffect(()=>{var Ut=O.current===null?null:new google.maps.Map(O.current,t);return X(Ut),Ut!==null&&re&&re(Ut),()=>{Ut!==null&&ie&&ie(Ut)}},[]),Oi.jsx("div",{id:r,ref:O,style:a,className:u,children:Oi.jsx(ft.Provider,{value:ee,children:ee!==null?e:null})})}b.memo(Y2);class IA extends b.PureComponent{constructor(){super(...arguments),Ee(this,"state",{map:null}),Ee(this,"registeredEvents",[]),Ee(this,"mapRef",null),Ee(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),Ee(this,"panTo",e=>{var t=this.getInstance();t&&t.panTo(e)}),Ee(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),Ee(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=gt({updaterMap:uw,eventMap:lw,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:uw,eventMap:lw,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),Et(this.registeredEvents))}render(){return Oi.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:Oi.jsx(ft.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function cw(n,e,t,r,a,u,f){try{var g=n[u](f),v=g.value}catch(_){return void t(_)}g.done?e(v):Promise.resolve(v).then(r,a)}function MA(n){return function(){var e=this,t=arguments;return new Promise(function(r,a){var u=n.apply(e,t);function f(v){cw(u,r,a,f,g,"next",v)}function g(v){cw(u,r,a,f,g,"throw",v)}f(void 0)})}}function kA(n){var{googleMapsApiKey:e,googleMapsClientId:t,version:r="weekly",language:a,region:u,libraries:f,channel:g,mapIds:v,authReferrerPolicy:_,apiUrl:w="https://maps.googleapis.com"}=n,T=[];return Fn(e&&t||!(e&&t),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?T.push("key=".concat(e)):t&&T.push("client=".concat(t)),r&&T.push("v=".concat(r)),a&&T.push("language=".concat(a)),u&&T.push("region=".concat(u)),f&&f.length&&T.push("libraries=".concat(f.sort().join(","))),g&&T.push("channel=".concat(g)),v&&v.length&&T.push("map_ids=".concat(v.join(","))),_&&T.push("auth_referrer_policy=".concat(_)),T.push("loading=async"),T.push("callback=initMap"),"".concat(w,"/maps/api/js?").concat(T.join("&"))}var ga=typeof document<"u";function OA(n){var{url:e,id:t,nonce:r}=n;return ga?new Promise(function(u,f){var g=document.getElementById(t),v=window;if(g){var _=g.getAttribute("data-state");if(g.src===e&&_!=="error"){if(_==="ready")return u(t);var w=v.initMap,T=g.onerror;v.initMap=function(){w&&w(),u(t)},g.onerror=function(V){T&&T(V),f(V)};return}else g.remove()}var I=document.createElement("script");I.type="text/javascript",I.src=e,I.id=t,I.async=!0,I.nonce=r||"",I.onerror=function(N){I.setAttribute("data-state","error"),f(N)},v.initMap=function(){I.setAttribute("data-state","ready"),u(t)},document.head.appendChild(I)}).catch(a=>{throw console.error("injectScript error: ",a),a}):Promise.reject(new Error("document is undefined"))}function hw(n){var e=n.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:n.tagName.toLowerCase()==="style"&&n.styleSheet&&n.styleSheet.cssText&&n.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(n.styleSheet.cssText="",!0):n.tagName.toLowerCase()==="style"&&n.innerHTML&&n.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(n.innerHTML="",!0):n.tagName.toLowerCase()==="style"&&!n.styleSheet&&!n.innerHTML}function ly(){var n=document.getElementsByTagName("head")[0];if(n){var e=n.insertBefore.bind(n);n.insertBefore=function(a,u){return hw(a)||Reflect.apply(e,n,[a,u]),a};var t=n.appendChild.bind(n);n.appendChild=function(a){return hw(a)||Reflect.apply(t,n,[a]),a}}}var Dc=!1;function PA(){return Oi.jsx("div",{children:"Loading..."})}var hh={id:"script-loader",version:"weekly"};class $2 extends b.PureComponent{constructor(){super(...arguments),Ee(this,"check",null),Ee(this,"state",{loaded:!1}),Ee(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),Ee(this,"isCleaningUp",MA(function*(){function e(t){if(!Dc)t();else if(ga)var r=window.setInterval(function(){Dc||(window.clearInterval(r),t())},1)}return new Promise(e)})),Ee(this,"cleanup",()=>{Dc=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(r){return typeof r.src=="string"&&r.src.includes("maps.googleapis")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(r){return r.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(r){return r.innerText!==void 0&&r.innerText.length>0&&r.innerText.includes(".gm-")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)})}),Ee(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&ly(),Fn(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:kA(this.props)};OA(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(t=>{this.props.onError&&this.props.onError(t),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),Ee(this,"getRef",e=>{this.check=e})}componentDidMount(){if(ga){if(window.google&&window.google.maps&&!Dc){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(t){console.error("Error at injecting script after cleaning up: ",t)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),ga&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(ga){this.cleanup();var e=()=>{this.check||(delete window.google,Dc=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return Oi.jsxs(Oi.Fragment,{children:[Oi.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||Oi.jsx(PA,{})]})}}Ee($2,"defaultProps",hh);function Q2(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}function uy(n,e){if(n==null)return{};var t,r,a=Q2(n,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);for(r=0;r<u.length;r++)t=u[r],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var fw;function X2(n){var{id:e=hh.id,version:t=hh.version,nonce:r,googleMapsApiKey:a,googleMapsClientId:u,language:f,region:g,libraries:v,preventGoogleFontsLoading:_,channel:w,mapIds:T,authReferrerPolicy:I,apiUrl:V="https://maps.googleapis.com"}=n,N=b.useRef(!1),[H,q]=b.useState(!1),[W,$]=b.useState(void 0);b.useEffect(function(){return N.current=!0,()=>{N.current=!1}},[]),b.useEffect(function(){ga&&_&&ly()},[_]),b.useEffect(function(){H&&Fn(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[H]);var re=kA({version:t,googleMapsApiKey:a,googleMapsClientId:u,language:f,region:g,libraries:v,channel:w,mapIds:T,authReferrerPolicy:I,apiUrl:V});b.useEffect(function(){if(!ga)return;function X(){N.current&&(q(!0),fw=re)}if(window.google&&window.google.maps&&fw===re){X();return}OA({id:e,url:re,nonce:r}).then(X).catch(function(P){N.current&&$(P),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(a||"-",") or Client ID (").concat(u||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(P)})},[e,re,r]);var ie=b.useRef(void 0);return b.useEffect(function(){ie.current&&v!==ie.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),ie.current=v},[v]),{isLoaded:H,loadError:W,url:re}}var J2=["loadingElement","onLoad","onError","onUnmount","children"],eN=Oi.jsx(PA,{});function tN(n){var{loadingElement:e,onLoad:t,onError:r,onUnmount:a,children:u}=n,f=uy(n,J2),{isLoaded:g,loadError:v}=X2(f);return b.useEffect(function(){g&&typeof t=="function"&&t()},[g,t]),b.useEffect(function(){v&&typeof r=="function"&&r(v)},[v,r]),b.useEffect(function(){return()=>{a&&a()}},[a]),g?u:e||eN}b.memo(tN);function nN(n,e,t,r){function a(u){return u instanceof t?u:new t(function(f){f(u)})}return new(t||(t=Promise))(function(u,f){function g(w){try{_(r.next(w))}catch(T){f(T)}}function v(w){try{_(r.throw(w))}catch(T){f(T)}}function _(w){w.done?u(w.value):a(w.value).then(g,v)}_((r=r.apply(n,[])).next())})}function iN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rN=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,a,u;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(a=r;a--!==0;)if(!n(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(u=Object.keys(e),r=u.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,u[a]))return!1;for(a=r;a--!==0;){var f=u[a];if(!n(e[f],t[f]))return!1}return!0}return e!==e&&t!==t},sN=iN(rN),dw="__googleMapsScriptId",wu;(function(n){n[n.INITIALIZED=0]="INITIALIZED",n[n.LOADING=1]="LOADING",n[n.SUCCESS=2]="SUCCESS",n[n.FAILURE=3]="FAILURE"})(wu||(wu={}));class ml{constructor(e){var{apiKey:t,authReferrerPolicy:r,channel:a,client:u,id:f=dw,language:g,libraries:v=[],mapIds:_,nonce:w,region:T,retries:I=3,url:V="https://maps.googleapis.com/maps/api/js",version:N}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=a,this.client=u,this.id=f||dw,this.language=g,this.libraries=v,this.mapIds=_,this.nonce=w,this.region=T,this.retries=I,this.url=V,this.version=N,ml.instance){if(!sN(this.options,ml.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(ml.instance.options)));return ml.instance}ml.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?wu.FAILURE:this.done?wu.SUCCESS:this.loading?wu.LOADING:wu.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(r=>{r?t(r.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}var r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach(u=>!r[u]&&delete r[u]),!((t=(e=window?.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(u=>{var f,g,v,_="The Google Maps JavaScript API",w="google",T="importLibrary",I="__ib__",V=document,N=window;N=N[w]||(N[w]={});var H=N.maps||(N.maps={}),q=new Set,W=new URLSearchParams,$=()=>f||(f=new Promise((re,ie)=>nN(this,void 0,void 0,function*(){var ee;yield g=V.createElement("script"),g.id=this.id,W.set("libraries",[...q]+"");for(v in u)W.set(v.replace(/[A-Z]/g,X=>"_"+X[0].toLowerCase()),u[v]);W.set("callback",w+".maps."+I),g.src=this.url+"?"+W,H[I]=re,g.onerror=()=>f=ie(Error(_+" could not load.")),g.nonce=this.nonce||((ee=V.querySelector("script[nonce]"))===null||ee===void 0?void 0:ee.nonce)||"",V.head.append(g)})));H[T]?console.warn(_+" only loads once. Ignoring:",u):H[T]=function(re){for(var ie=arguments.length,ee=new Array(ie>1?ie-1:0),X=1;X<ie;X++)ee[X-1]=arguments[X];return q.add(re)&&$().then(()=>H[T](re,...ee))}})(r);var a=this.libraries.map(u=>this.importLibrary(u));a.length||a.push(this.importLibrary("core")),Promise.all(a).then(()=>this.callback(),u=>{var f=new ErrorEvent("error",{error:u});this.loadErrorCallback(f)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var t=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(t," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var oN=["maps"];function DA(n){var{id:e=hh.id,version:t=hh.version,nonce:r,googleMapsApiKey:a,language:u,region:f,libraries:g=oN,preventGoogleFontsLoading:v,mapIds:_,authReferrerPolicy:w}=n,T=b.useRef(!1),[I,V]=b.useState(!1),[N,H]=b.useState(void 0);b.useEffect(function(){return T.current=!0,()=>{T.current=!1}},[]);var q=b.useMemo(()=>new ml({id:e,apiKey:a,version:t,libraries:g,language:u||"en",region:f||"US",mapIds:_||[],nonce:r||"",authReferrerPolicy:w||"origin"}),[e,a,t,g,u,f,_,r,w]);b.useEffect(function(){I||q.load().then(()=>{T.current&&V(!0)}).catch(re=>{H(re)})},[]),b.useEffect(()=>{ga&&v&&ly()},[v]);var W=b.useRef();return b.useEffect(()=>{W.current&&g!==W.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),W.current=g},[g]),{isLoaded:I,loadError:N}}function pw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function xd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pw(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var mw={},gw={options(n,e){n.setOptions(e)}};function aN(n){var{options:e,onLoad:t,onUnmount:r}=n,a=b.useContext(ft),[u,f]=b.useState(null);return b.useEffect(()=>{u!==null&&u.setMap(a)},[a]),b.useEffect(()=>{e&&u!==null&&u.setOptions(e)},[u,e]),b.useEffect(()=>{var g=new google.maps.TrafficLayer(xd(xd({},e),{},{map:a}));return f(g),t&&t(g),()=>{u!==null&&(r&&r(u),u.setMap(null))}},[]),null}b.memo(aN);class lN extends b.PureComponent{constructor(){super(...arguments),Ee(this,"state",{trafficLayer:null}),Ee(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),Ee(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(xd(xd({},this.props.options),{},{map:this.context}));this.registeredEvents=gt({updaterMap:gw,eventMap:mw,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:gw,eventMap:mw,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),Et(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}Ee(lN,"contextType",ft);function uN(n){var{onLoad:e,onUnmount:t}=n,r=b.useContext(ft),[a,u]=b.useState(null);return b.useEffect(()=>{a!==null&&a.setMap(r)},[r]),b.useEffect(()=>{var f=new google.maps.BicyclingLayer;return u(f),f.setMap(r),e&&e(f),()=>{f!==null&&(t&&t(f),f.setMap(null))}},[]),null}b.memo(uN);class cN extends b.PureComponent{constructor(){super(...arguments),Ee(this,"state",{bicyclingLayer:null}),Ee(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}Ee(cN,"contextType",ft);function hN(n){var{onLoad:e,onUnmount:t}=n,r=b.useContext(ft),[a,u]=b.useState(null);return b.useEffect(()=>{a!==null&&a.setMap(r)},[r]),b.useEffect(()=>{var f=new google.maps.TransitLayer;return u(f),f.setMap(r),e&&e(f),()=>{a!==null&&(t&&t(a),a.setMap(null))}},[]),null}b.memo(hN);class fN extends b.PureComponent{constructor(){super(...arguments),Ee(this,"state",{transitLayer:null}),Ee(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}Ee(fN,"contextType",ft);function vw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Ld(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vw(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var yw={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},_w={drawingMode(n,e){n.setDrawingMode(e)},options(n,e){n.setOptions(e)}};function dN(n){var{options:e,drawingMode:t,onCircleComplete:r,onMarkerComplete:a,onOverlayComplete:u,onPolygonComplete:f,onPolylineComplete:g,onRectangleComplete:v,onLoad:_,onUnmount:w}=n,T=b.useContext(ft),[I,V]=b.useState(null),[N,H]=b.useState(null),[q,W]=b.useState(null),[$,re]=b.useState(null),[ie,ee]=b.useState(null),[X,O]=b.useState(null),[P,M]=b.useState(null);return b.useEffect(()=>{I!==null&&I.setMap(T)},[T]),b.useEffect(()=>{e&&I!==null&&I.setOptions(e)},[I,e]),b.useEffect(()=>{I!==null&&I.setDrawingMode(t??null)},[I,t]),b.useEffect(()=>{I&&r&&(N!==null&&google.maps.event.removeListener(N),H(google.maps.event.addListener(I,"circlecomplete",r)))},[I,r]),b.useEffect(()=>{I&&a&&(q!==null&&google.maps.event.removeListener(q),W(google.maps.event.addListener(I,"markercomplete",a)))},[I,a]),b.useEffect(()=>{I&&u&&($!==null&&google.maps.event.removeListener($),re(google.maps.event.addListener(I,"overlaycomplete",u)))},[I,u]),b.useEffect(()=>{I&&f&&(ie!==null&&google.maps.event.removeListener(ie),ee(google.maps.event.addListener(I,"polygoncomplete",f)))},[I,f]),b.useEffect(()=>{I&&g&&(X!==null&&google.maps.event.removeListener(X),O(google.maps.event.addListener(I,"polylinecomplete",g)))},[I,g]),b.useEffect(()=>{I&&v&&(P!==null&&google.maps.event.removeListener(P),M(google.maps.event.addListener(I,"rectanglecomplete",v)))},[I,v]),b.useEffect(()=>{Fn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var j=new google.maps.drawing.DrawingManager(Ld(Ld({},e),{},{map:T}));return t&&j.setDrawingMode(t),r&&H(google.maps.event.addListener(j,"circlecomplete",r)),a&&W(google.maps.event.addListener(j,"markercomplete",a)),u&&re(google.maps.event.addListener(j,"overlaycomplete",u)),f&&ee(google.maps.event.addListener(j,"polygoncomplete",f)),g&&O(google.maps.event.addListener(j,"polylinecomplete",g)),v&&M(google.maps.event.addListener(j,"rectanglecomplete",v)),V(j),_&&_(j),()=>{I!==null&&(N&&google.maps.event.removeListener(N),q&&google.maps.event.removeListener(q),$&&google.maps.event.removeListener($),ie&&google.maps.event.removeListener(ie),X&&google.maps.event.removeListener(X),P&&google.maps.event.removeListener(P),w&&w(I),I.setMap(null))}},[]),null}b.memo(dN);class pN extends b.PureComponent{constructor(e){super(e),Ee(this,"registeredEvents",[]),Ee(this,"state",{drawingManager:null}),Ee(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),Fn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(Ld(Ld({},this.props.options),{},{map:this.context}));this.registeredEvents=gt({updaterMap:_w,eventMap:yw,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:_w,eventMap:yw,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),Et(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}Ee(pN,"contextType",ft);function Ew(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Ru(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ew(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ew(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var bw={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},ww={animation(n,e){n.setAnimation(e)},clickable(n,e){n.setClickable(e)},cursor(n,e){n.setCursor(e)},draggable(n,e){n.setDraggable(e)},icon(n,e){n.setIcon(e)},label(n,e){n.setLabel(e)},map(n,e){n.setMap(e)},opacity(n,e){n.setOpacity(e)},options(n,e){n.setOptions(e)},position(n,e){n.setPosition(e)},shape(n,e){n.setShape(e)},title(n,e){n.setTitle(e)},visible(n,e){n.setVisible(e)},zIndex(n,e){n.setZIndex(e)}},Rd={};function mN(n){var{position:e,options:t,clusterer:r,noClustererRedraw:a,children:u,draggable:f,visible:g,animation:v,clickable:_,cursor:w,icon:T,label:I,opacity:V,shape:N,title:H,zIndex:q,onClick:W,onDblClick:$,onDrag:re,onDragEnd:ie,onDragStart:ee,onMouseOut:X,onMouseOver:O,onMouseUp:P,onMouseDown:M,onRightClick:j,onClickableChanged:U,onCursorChanged:G,onAnimationChanged:F,onDraggableChanged:ke,onFlatChanged:Le,onIconChanged:ne,onPositionChanged:me,onShapeChanged:ge,onTitleChanged:_e,onVisibleChanged:ue,onZindexChanged:B,onLoad:K,onUnmount:te}=n,fe=b.useContext(ft),[Q,Ae]=b.useState(null),[Ie,De]=b.useState(null),[Qe,ze]=b.useState(null),[Je,Ut]=b.useState(null),[an,ln]=b.useState(null),[ot,Pi]=b.useState(null),[Di,Ni]=b.useState(null),[ui,ae]=b.useState(null),[Pe,We]=b.useState(null),[rn,Ct]=b.useState(null),[Wt,nt]=b.useState(null),[dt,An]=b.useState(null),[yr,ir]=b.useState(null),[wi,Si]=b.useState(null),[ci,un]=b.useState(null),[xn,Ln]=b.useState(null),[Vi,as]=b.useState(null),[zr,rr]=b.useState(null),[hi,zi]=b.useState(null),[Hn,Xn]=b.useState(null),[Ti,Br]=b.useState(null),[_r,Bi]=b.useState(null);b.useEffect(()=>{Q!==null&&Q.setMap(fe)},[fe]),b.useEffect(()=>{typeof t<"u"&&Q!==null&&Q.setOptions(t)},[Q,t]),b.useEffect(()=>{typeof f<"u"&&Q!==null&&Q.setDraggable(f)},[Q,f]),b.useEffect(()=>{e&&Q!==null&&Q.setPosition(e)},[Q,e]),b.useEffect(()=>{typeof g<"u"&&Q!==null&&Q.setVisible(g)},[Q,g]),b.useEffect(()=>{Q?.setAnimation(v)},[Q,v]),b.useEffect(()=>{Q&&_!==void 0&&Q.setClickable(_)},[Q,_]),b.useEffect(()=>{Q&&w!==void 0&&Q.setCursor(w)},[Q,w]),b.useEffect(()=>{Q&&T!==void 0&&Q.setIcon(T)},[Q,T]),b.useEffect(()=>{Q&&I!==void 0&&Q.setLabel(I)},[Q,I]),b.useEffect(()=>{Q&&V!==void 0&&Q.setOpacity(V)},[Q,V]),b.useEffect(()=>{Q&&N!==void 0&&Q.setShape(N)},[Q,N]),b.useEffect(()=>{Q&&H!==void 0&&Q.setTitle(H)},[Q,H]),b.useEffect(()=>{Q&&q!==void 0&&Q.setZIndex(q)},[Q,q]),b.useEffect(()=>{Q&&$&&(Ie!==null&&google.maps.event.removeListener(Ie),De(google.maps.event.addListener(Q,"dblclick",$)))},[$]),b.useEffect(()=>{Q&&ie&&(Qe!==null&&google.maps.event.removeListener(Qe),ze(google.maps.event.addListener(Q,"dragend",ie)))},[ie]),b.useEffect(()=>{Q&&ee&&(Je!==null&&google.maps.event.removeListener(Je),Ut(google.maps.event.addListener(Q,"dragstart",ee)))},[ee]),b.useEffect(()=>{Q&&M&&(an!==null&&google.maps.event.removeListener(an),ln(google.maps.event.addListener(Q,"mousedown",M)))},[M]),b.useEffect(()=>{Q&&X&&(ot!==null&&google.maps.event.removeListener(ot),Pi(google.maps.event.addListener(Q,"mouseout",X)))},[X]),b.useEffect(()=>{Q&&O&&(Di!==null&&google.maps.event.removeListener(Di),Ni(google.maps.event.addListener(Q,"mouseover",O)))},[O]),b.useEffect(()=>{Q&&P&&(ui!==null&&google.maps.event.removeListener(ui),ae(google.maps.event.addListener(Q,"mouseup",P)))},[P]),b.useEffect(()=>{Q&&j&&(Pe!==null&&google.maps.event.removeListener(Pe),We(google.maps.event.addListener(Q,"rightclick",j)))},[j]),b.useEffect(()=>{Q&&W&&(rn!==null&&google.maps.event.removeListener(rn),Ct(google.maps.event.addListener(Q,"click",W)))},[W]),b.useEffect(()=>{Q&&re&&(Wt!==null&&google.maps.event.removeListener(Wt),nt(google.maps.event.addListener(Q,"drag",re)))},[re]),b.useEffect(()=>{Q&&U&&(dt!==null&&google.maps.event.removeListener(dt),An(google.maps.event.addListener(Q,"clickable_changed",U)))},[U]),b.useEffect(()=>{Q&&G&&(yr!==null&&google.maps.event.removeListener(yr),ir(google.maps.event.addListener(Q,"cursor_changed",G)))},[G]),b.useEffect(()=>{Q&&F&&(wi!==null&&google.maps.event.removeListener(wi),Si(google.maps.event.addListener(Q,"animation_changed",F)))},[F]),b.useEffect(()=>{Q&&ke&&(ci!==null&&google.maps.event.removeListener(ci),un(google.maps.event.addListener(Q,"draggable_changed",ke)))},[ke]),b.useEffect(()=>{Q&&Le&&(xn!==null&&google.maps.event.removeListener(xn),Ln(google.maps.event.addListener(Q,"flat_changed",Le)))},[Le]),b.useEffect(()=>{Q&&ne&&(Vi!==null&&google.maps.event.removeListener(Vi),as(google.maps.event.addListener(Q,"icon_changed",ne)))},[ne]),b.useEffect(()=>{Q&&me&&(zr!==null&&google.maps.event.removeListener(zr),rr(google.maps.event.addListener(Q,"position_changed",me)))},[me]),b.useEffect(()=>{Q&&ge&&(hi!==null&&google.maps.event.removeListener(hi),zi(google.maps.event.addListener(Q,"shape_changed",ge)))},[ge]),b.useEffect(()=>{Q&&_e&&(Hn!==null&&google.maps.event.removeListener(Hn),Xn(google.maps.event.addListener(Q,"title_changed",_e)))},[_e]),b.useEffect(()=>{Q&&ue&&(Ti!==null&&google.maps.event.removeListener(Ti),Br(google.maps.event.addListener(Q,"visible_changed",ue)))},[ue]),b.useEffect(()=>{Q&&B&&(_r!==null&&google.maps.event.removeListener(_r),Bi(google.maps.event.addListener(Q,"zindex_changed",B)))},[B]),b.useEffect(()=>{var Xt=Ru(Ru(Ru({},t||Rd),r?Rd:{map:fe}),{},{position:e}),$e=new google.maps.Marker(Xt);return r?r.addMarker($e,!!a):$e.setMap(fe),e&&$e.setPosition(e),typeof g<"u"&&$e.setVisible(g),typeof f<"u"&&$e.setDraggable(f),typeof _<"u"&&$e.setClickable(_),typeof w=="string"&&$e.setCursor(w),T&&$e.setIcon(T),typeof I<"u"&&$e.setLabel(I),typeof V<"u"&&$e.setOpacity(V),N&&$e.setShape(N),typeof H=="string"&&$e.setTitle(H),typeof q=="number"&&$e.setZIndex(q),$&&De(google.maps.event.addListener($e,"dblclick",$)),ie&&ze(google.maps.event.addListener($e,"dragend",ie)),ee&&Ut(google.maps.event.addListener($e,"dragstart",ee)),M&&ln(google.maps.event.addListener($e,"mousedown",M)),X&&Pi(google.maps.event.addListener($e,"mouseout",X)),O&&Ni(google.maps.event.addListener($e,"mouseover",O)),P&&ae(google.maps.event.addListener($e,"mouseup",P)),j&&We(google.maps.event.addListener($e,"rightclick",j)),W&&Ct(google.maps.event.addListener($e,"click",W)),re&&nt(google.maps.event.addListener($e,"drag",re)),U&&An(google.maps.event.addListener($e,"clickable_changed",U)),G&&ir(google.maps.event.addListener($e,"cursor_changed",G)),F&&Si(google.maps.event.addListener($e,"animation_changed",F)),ke&&un(google.maps.event.addListener($e,"draggable_changed",ke)),Le&&Ln(google.maps.event.addListener($e,"flat_changed",Le)),ne&&as(google.maps.event.addListener($e,"icon_changed",ne)),me&&rr(google.maps.event.addListener($e,"position_changed",me)),ge&&zi(google.maps.event.addListener($e,"shape_changed",ge)),_e&&Xn(google.maps.event.addListener($e,"title_changed",_e)),ue&&Br(google.maps.event.addListener($e,"visible_changed",ue)),B&&Bi(google.maps.event.addListener($e,"zindex_changed",B)),Ae($e),K&&K($e),()=>{Ie!==null&&google.maps.event.removeListener(Ie),Qe!==null&&google.maps.event.removeListener(Qe),Je!==null&&google.maps.event.removeListener(Je),an!==null&&google.maps.event.removeListener(an),ot!==null&&google.maps.event.removeListener(ot),Di!==null&&google.maps.event.removeListener(Di),ui!==null&&google.maps.event.removeListener(ui),Pe!==null&&google.maps.event.removeListener(Pe),rn!==null&&google.maps.event.removeListener(rn),dt!==null&&google.maps.event.removeListener(dt),yr!==null&&google.maps.event.removeListener(yr),wi!==null&&google.maps.event.removeListener(wi),ci!==null&&google.maps.event.removeListener(ci),xn!==null&&google.maps.event.removeListener(xn),Vi!==null&&google.maps.event.removeListener(Vi),zr!==null&&google.maps.event.removeListener(zr),Hn!==null&&google.maps.event.removeListener(Hn),Ti!==null&&google.maps.event.removeListener(Ti),_r!==null&&google.maps.event.removeListener(_r),te&&te($e),r?r.removeMarker($e,!!a):$e&&$e.setMap(null)}},[]);var Ui=b.useMemo(()=>u?b.Children.map(u,Xt=>{if(!b.isValidElement(Xt))return Xt;var $e=Xt;return b.cloneElement($e,{anchor:Q})}):null,[u,Q]);return Oi.jsx(Oi.Fragment,{children:Ui})||null}b.memo(mN);class cy extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[])}componentDidMount(){var e=this;return MA(function*(){var t=Ru(Ru(Ru({},e.props.options||Rd),e.props.clusterer?Rd:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(t),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=gt({updaterMap:ww,eventMap:bw,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:ww,eventMap:bw,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),Et(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?b.Children.map(this.props.children,t=>{if(!b.isValidElement(t))return t;var r=t;return b.cloneElement(r,{anchor:this.marker})}):null;return e||null}}Ee(cy,"contextType",ft);var gN=(function(){function n(e,t){e.getClusterer().extend(n,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=t,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return n.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},n.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},n.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var r=t.getMaxZoom(),a=this.cluster.getBounds(),u=t.getMap();u!==null&&"fitBounds"in u&&u.fitBounds(a),this.timeOut=window.setTimeout(function(){var f=t.getMap();if(f!==null){"fitBounds"in f&&f.fitBounds(a);var g=f.getZoom()||0;r!==null&&g>r&&f.setZoom(r+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},n.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},n.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},n.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();t!==null&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},n.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},n.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},n.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},n.prototype.show=function(){var e,t,r,a,u,f;if(this.div&&this.center){var g=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,v=this.backgroundPosition.split(" "),_=parseInt(((e=v[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),w=parseInt(((t=v[1])===null||t===void 0?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),T=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(T!==null?"".concat(T.y,"px"):"0","; left: ").concat(T!==null?"".concat(T.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var I=document.createElement("img");I.alt=g,I.src=this.url,I.width=this.width,I.height=this.height,I.setAttribute("style","position: absolute; top: ".concat(w,"px; left: ").concat(_,"px")),this.cluster.getClusterer().enableRetinaIcons||(I.style.clip="rect(-".concat(w,"px, -").concat(_+this.width,"px, -").concat(w+this.height,", -").concat(_,")"));var V=document.createElement("div");V.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((r=this.sums)===null||r===void 0)&&r.text&&(V.innerText="".concat((a=this.sums)===null||a===void 0?void 0:a.text)),!((u=this.sums)===null||u===void 0)&&u.html&&(V.innerHTML="".concat((f=this.sums)===null||f===void 0?void 0:f.html)),this.div.innerHTML="",this.div.appendChild(I),this.div.appendChild(V),this.div.title=g,this.div.style.display=""}this.visible=!0},n.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),r=t[Math.min(t.length-1,Math.max(0,e.index-1))];r&&(this.url=r.url,this.height=r.height,this.width=r.width,r.className&&(this.className="".concat(this.clusterClassName," ").concat(r.className)),this.anchorText=r.anchorText||[0,0],this.anchorIcon=r.anchorIcon||[this.height/2,this.width/2],this.textColor=r.textColor||"black",this.textSize=r.textSize||11,this.textDecoration=r.textDecoration||"none",this.fontWeight=r.fontWeight||"bold",this.fontStyle=r.fontStyle||"normal",this.fontFamily=r.fontFamily||"Arial,sans-serif",this.backgroundPosition=r.backgroundPosition||"0 0")},n.prototype.setCenter=function(e){this.center=e},n.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return t!==null&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},n})(),vN=(function(){function n(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new gN(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return n.prototype.getSize=function(){return this.markers.length},n.prototype.getMarkers=function(){return this.markers},n.prototype.getCenter=function(){return this.center},n.prototype.getMap=function(){return this.map},n.prototype.getClusterer=function(){return this.markerClusterer},n.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=this.getMarkers(),r=0,a=t;r<a.length;r++){var u=a[r],f=u.getPosition();f&&e.extend(f)}return e},n.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},n.prototype.addMarker=function(e){var t;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var r=e.getPosition();if(r){var a=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(a-1)+r.lat())/a,(this.center.lng()*(a-1)+r.lng())/a),this.calculateBounds()}}}else{var r=e.getPosition();r&&(this.center=r,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var u=this.markers.length,f=this.markerClusterer.getMaxZoom(),g=(t=this.map)===null||t===void 0?void 0:t.getZoom();if(f!==null&&typeof g<"u"&&g>f)e.getMap()!==this.map&&e.setMap(this.map);else if(u<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(u===this.minClusterSize)for(var v=0,_=this.markers;v<_.length;v++){var w=_[v];w.setMap(null)}else e.setMap(null);return!0},n.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},n.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},n.prototype.updateIcon=function(){var e,t=this.markers.length,r=this.markerClusterer.getMaxZoom(),a=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(r!==null&&typeof a<"u"&&a>r){this.clusterIcon.hide();return}if(t<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},n.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},n})();function yN(n,e){var t=n.length,r=t.toString().length,a=Math.min(r,e);return{text:t.toString(),index:a,title:""}}var _N=2e3,EN=500,bN="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",wN="png",SN=[53,56,66,78,90],TN="cluster",NA=(function(){function n(e,t,r){t===void 0&&(t=[]),r===void 0&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(n,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,r.zoomOnClick!==void 0&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,r.averageCenter!==void 0&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,r.ignoreHidden!==void 0&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,r.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||bN,this.imageExtension=r.imageExtension||wN,this.imageSizes=r.imageSizes||SN,this.calculator=r.calculator||yN,this.batchSize=r.batchSize||_N,this.batchSizeIE=r.batchSizeIE||EN,this.clusterClass=r.clusterClass||TN,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(t,!0),this.setMap(e)}return n.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((t=this.getMap())===null||t===void 0?void 0:t.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},n.prototype.onIdle=function(){this.redraw()},n.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},n.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var r=t[e];r.getMap()!==this.activeMap&&r.setMap(this.activeMap)}for(var a=0,u=this.clusters;a<u.length;a++){var f=u[a];f.remove()}this.clusters=[];for(var g=0,v=this.listeners;g<v.length;g++){var _=v[g];google.maps.event.removeListener(_)}this.listeners=[],this.activeMap=null,this.ready=!1},n.prototype.draw=function(){},n.prototype.getMap=function(){return null},n.prototype.getPanes=function(){return null},n.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},n.prototype.setMap=function(){},n.prototype.addListener=function(){return{remove:function(){}}},n.prototype.bindTo=function(){},n.prototype.get=function(){},n.prototype.notify=function(){},n.prototype.set=function(){},n.prototype.setValues=function(){},n.prototype.unbind=function(){},n.prototype.unbindAll=function(){},n.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},n.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,r=0,a=e;r<a.length;r++){var u=a[r],f=u.getPosition();f&&t.extend(f)}var g=this.getMap();g!==null&&"fitBounds"in g&&g.fitBounds(t)},n.prototype.getGridSize=function(){return this.gridSize},n.prototype.setGridSize=function(e){this.gridSize=e},n.prototype.getMinimumClusterSize=function(){return this.minClusterSize},n.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},n.prototype.getMaxZoom=function(){return this.maxZoom},n.prototype.setMaxZoom=function(e){this.maxZoom=e},n.prototype.getStyles=function(){return this.styles},n.prototype.setStyles=function(e){this.styles=e},n.prototype.getTitle=function(){return this.title},n.prototype.setTitle=function(e){this.title=e},n.prototype.getZoomOnClick=function(){return this.zoomOnClick},n.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},n.prototype.getAverageCenter=function(){return this.averageCenter},n.prototype.setAverageCenter=function(e){this.averageCenter=e},n.prototype.getIgnoreHidden=function(){return this.ignoreHidden},n.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},n.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},n.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},n.prototype.getImageExtension=function(){return this.imageExtension},n.prototype.setImageExtension=function(e){this.imageExtension=e},n.prototype.getImagePath=function(){return this.imagePath},n.prototype.setImagePath=function(e){this.imagePath=e},n.prototype.getImageSizes=function(){return this.imageSizes},n.prototype.setImageSizes=function(e){this.imageSizes=e},n.prototype.getCalculator=function(){return this.calculator},n.prototype.setCalculator=function(e){this.calculator=e},n.prototype.getBatchSizeIE=function(){return this.batchSizeIE},n.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},n.prototype.getClusterClass=function(){return this.clusterClass},n.prototype.setClusterClass=function(e){this.clusterClass=e},n.prototype.getMarkers=function(){return this.markers},n.prototype.getTotalMarkers=function(){return this.markers.length},n.prototype.getClusters=function(){return this.clusters},n.prototype.getTotalClusters=function(){return this.clusters.length},n.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},n.prototype.addMarkers=function(e,t){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=e[r];a&&this.pushMarkerTo(a)}t||this.redraw()},n.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){t.ready&&(e.isAdded=!1,t.repaint())}),e.isAdded=!1,this.markers.push(e)},n.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var r=0;r<this.markers.length;r++)if(e===this.markers[r]){t=r;break}return t===-1?!1:(e.setMap(null),this.markers.splice(t,1),!0)},n.prototype.removeMarker=function(e,t){var r=this.removeMarker_(e);return!t&&r&&this.repaint(),r},n.prototype.removeMarkers=function(e,t){for(var r=!1,a=0,u=e;a<u.length;a++){var f=u[a];r=r||this.removeMarker_(f)}return!t&&r&&this.repaint(),r},n.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},n.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var r=0,a=e;r<a.length;r++){var u=a[r];u.remove()}},0)},n.prototype.getExtendedBounds=function(e){var t=this.getProjection(),r=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));r!==null&&(r.x+=this.gridSize,r.y-=this.gridSize);var a=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(a!==null&&(a.x-=this.gridSize,a.y+=this.gridSize),r!==null){var u=t.fromDivPixelToLatLng(r);u!==null&&e.extend(u)}if(a!==null){var f=t.fromDivPixelToLatLng(a);f!==null&&e.extend(f)}return e},n.prototype.redraw=function(){this.createClusters(0)},n.prototype.resetViewport=function(e){for(var t=0,r=this.clusters;t<r.length;t++){var a=r[t];a.remove()}this.clusters=[];for(var u=0,f=this.markers;u<f.length;u++){var g=f[u];g.isAdded=!1,e&&g.setMap(null)}},n.prototype.distanceBetweenPoints=function(e,t){var r=6371,a=(t.lat()-e.lat())*Math.PI/180,u=(t.lng()-e.lng())*Math.PI/180,f=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(u/2)*Math.sin(u/2);return r*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)))},n.prototype.isMarkerInBounds=function(e,t){var r=e.getPosition();return r?t.contains(r):!1},n.prototype.addToClosestCluster=function(e){for(var t,r=4e4,a=null,u=0,f=this.clusters;u<f.length;u++){var g=f[u];t=g;var v=t.getCenter(),_=e.getPosition();if(v&&_){var w=this.distanceBetweenPoints(v,_);w<r&&(r=w,a=t)}}a&&a.isMarkerInClusterBounds(e)?a.addMarker(e):(t=new vN(this),t.addMarker(e),this.clusters.push(t))},n.prototype.createClusters=function(e){var t=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var r=this.getMap(),a=r!==null&&("getBounds"in r)?r.getBounds():null,u=r?.getZoom()||0,f=u>3?new google.maps.LatLngBounds(a?.getSouthWest(),a?.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),g=this.getExtendedBounds(f),v=Math.min(e+this.batchSize,this.markers.length),_=e;_<v;_++){var w=this.markers[_];w&&!w.isAdded&&this.isMarkerInBounds(w,g)&&(!this.ignoreHidden||this.ignoreHidden&&w.getVisible())&&this.addToClosestCluster(w)}if(v<this.markers.length)this.timerRefStatic=window.setTimeout(function(){t.createClusters(v)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var T=0,I=this.clusters;T<I.length;T++){var V=I[T];V.updateIcon()}}}},n.prototype.extend=function(e,t){return(function(a){for(var u in a.prototype){var f=u;this.prototype[f]=a.prototype[f]}return this}).apply(e,[t])},n})();function Sw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function CN(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Sw(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Sw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Pr={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Nt={averageCenter(n,e){n.setAverageCenter(e)},batchSizeIE(n,e){n.setBatchSizeIE(e)},calculator(n,e){n.setCalculator(e)},clusterClass(n,e){n.setClusterClass(e)},enableRetinaIcons(n,e){n.setEnableRetinaIcons(e)},gridSize(n,e){n.setGridSize(e)},ignoreHidden(n,e){n.setIgnoreHidden(e)},imageExtension(n,e){n.setImageExtension(e)},imagePath(n,e){n.setImagePath(e)},imageSizes(n,e){n.setImageSizes(e)},maxZoom(n,e){n.setMaxZoom(e)},minimumClusterSize(n,e){n.setMinimumClusterSize(e)},styles(n,e){n.setStyles(e)},title(n,e){n.setTitle(e)},zoomOnClick(n,e){n.setZoomOnClick(e)}},AN={};function xN(n){var{children:e,options:t,averageCenter:r,batchSizeIE:a,calculator:u,clusterClass:f,enableRetinaIcons:g,gridSize:v,ignoreHidden:_,imageExtension:w,imagePath:T,imageSizes:I,maxZoom:V,minimumClusterSize:N,styles:H,title:q,zoomOnClick:W,onClick:$,onClusteringBegin:re,onClusteringEnd:ie,onMouseOver:ee,onMouseOut:X,onLoad:O,onUnmount:P}=n,[M,j]=b.useState(null),U=b.useContext(ft),[G,F]=b.useState(null),[ke,Le]=b.useState(null),[ne,me]=b.useState(null),[ge,_e]=b.useState(null),[ue,B]=b.useState(null);return b.useEffect(()=>{M&&X&&(ge!==null&&google.maps.event.removeListener(ge),_e(google.maps.event.addListener(M,Pr.onMouseOut,X)))},[X]),b.useEffect(()=>{M&&ee&&(ue!==null&&google.maps.event.removeListener(ue),B(google.maps.event.addListener(M,Pr.onMouseOver,ee)))},[ee]),b.useEffect(()=>{M&&$&&(G!==null&&google.maps.event.removeListener(G),F(google.maps.event.addListener(M,Pr.onClick,$)))},[$]),b.useEffect(()=>{M&&re&&(ke!==null&&google.maps.event.removeListener(ke),Le(google.maps.event.addListener(M,Pr.onClusteringBegin,re)))},[re]),b.useEffect(()=>{M&&ie&&(ne!==null&&google.maps.event.removeListener(ne),Le(google.maps.event.addListener(M,Pr.onClusteringEnd,ie)))},[ie]),b.useEffect(()=>{typeof r<"u"&&M!==null&&Nt.averageCenter(M,r)},[M,r]),b.useEffect(()=>{typeof a<"u"&&M!==null&&Nt.batchSizeIE(M,a)},[M,a]),b.useEffect(()=>{typeof u<"u"&&M!==null&&Nt.calculator(M,u)},[M,u]),b.useEffect(()=>{typeof f<"u"&&M!==null&&Nt.clusterClass(M,f)},[M,f]),b.useEffect(()=>{typeof g<"u"&&M!==null&&Nt.enableRetinaIcons(M,g)},[M,g]),b.useEffect(()=>{typeof v<"u"&&M!==null&&Nt.gridSize(M,v)},[M,v]),b.useEffect(()=>{typeof _<"u"&&M!==null&&Nt.ignoreHidden(M,_)},[M,_]),b.useEffect(()=>{typeof w<"u"&&M!==null&&Nt.imageExtension(M,w)},[M,w]),b.useEffect(()=>{typeof T<"u"&&M!==null&&Nt.imagePath(M,T)},[M,T]),b.useEffect(()=>{typeof I<"u"&&M!==null&&Nt.imageSizes(M,I)},[M,I]),b.useEffect(()=>{typeof V<"u"&&M!==null&&Nt.maxZoom(M,V)},[M,V]),b.useEffect(()=>{typeof N<"u"&&M!==null&&Nt.minimumClusterSize(M,N)},[M,N]),b.useEffect(()=>{typeof H<"u"&&M!==null&&Nt.styles(M,H)},[M,H]),b.useEffect(()=>{typeof q<"u"&&M!==null&&Nt.title(M,q)},[M,q]),b.useEffect(()=>{typeof W<"u"&&M!==null&&Nt.zoomOnClick(M,W)},[M,W]),b.useEffect(()=>{if(U){var K=CN({},t||AN),te=new NA(U,[],K);return r&&Nt.averageCenter(te,r),a&&Nt.batchSizeIE(te,a),u&&Nt.calculator(te,u),f&&Nt.clusterClass(te,f),g&&Nt.enableRetinaIcons(te,g),v&&Nt.gridSize(te,v),_&&Nt.ignoreHidden(te,_),w&&Nt.imageExtension(te,w),T&&Nt.imagePath(te,T),I&&Nt.imageSizes(te,I),V&&Nt.maxZoom(te,V),N&&Nt.minimumClusterSize(te,N),H&&Nt.styles(te,H),q&&Nt.title(te,q),W&&Nt.zoomOnClick(te,W),X&&_e(google.maps.event.addListener(te,Pr.onMouseOut,X)),ee&&B(google.maps.event.addListener(te,Pr.onMouseOver,ee)),$&&F(google.maps.event.addListener(te,Pr.onClick,$)),re&&Le(google.maps.event.addListener(te,Pr.onClusteringBegin,re)),ie&&me(google.maps.event.addListener(te,Pr.onClusteringEnd,ie)),j(te),O&&O(te),()=>{ge!==null&&google.maps.event.removeListener(ge),ue!==null&&google.maps.event.removeListener(ue),G!==null&&google.maps.event.removeListener(G),ke!==null&&google.maps.event.removeListener(ke),ne!==null&&google.maps.event.removeListener(ne),P&&P(te)}}},[]),M!==null&&e(M)||null}b.memo(xN);class LN extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{markerClusterer:null}),Ee(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new NA(this.context,[],this.props.options);this.registeredEvents=gt({updaterMap:Nt,eventMap:Pr,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:Nt,eventMap:Pr,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),Et(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}Ee(LN,"contextType",ft);function Tw(n){n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()}var VA=(function(){function n(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(n,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return n.prototype.createInfoBoxDiv=function(){var e=this,t=function(w){w.returnValue=!1,w.preventDefault&&w.preventDefault(),e.enableEventPropagation||Tw(w)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var r=this.getPanes();if(r!==null&&r[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var a=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-a.left-a.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var u=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],f=0,g=u;f<g.length;f++){var v=g[f];this.eventListeners.push(google.maps.event.addListener(this.div,v,Tw))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",t),google.maps.event.trigger(this,"domready")}},n.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},n.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},n.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},n.prototype.getCloseClickHandler=function(){return this.closeClickHandler},n.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var r=0,a=0,u=t.getBounds();u&&!u.contains(this.position)&&t.setCenter(this.position);var f=t.getDiv(),g=f.offsetWidth,v=f.offsetHeight,_=this.pixelOffset.width,w=this.pixelOffset.height,T=this.div.offsetWidth,I=this.div.offsetHeight,V=this.infoBoxClearance.width,N=this.infoBoxClearance.height,H=this.getProjection(),q=H.fromLatLngToContainerPixel(this.position);q!==null&&(q.x<-_+V?r=q.x+_-V:q.x+T+_+V>g&&(r=q.x+T+_+V-g),this.alignBottom?q.y<-w+N+I?a=q.y+w-N-I:q.y+w+N>v&&(a=q.y+w+N-v):q.y<-w+N?a=q.y+w-N:q.y+I+w+N>v&&(a=q.y+I+w+N-v)),r===0&&a===0||t.panBy(r,a)}}},n.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var r=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+r*100+')"',this.div.style.filter="alpha(opacity="+r*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},n.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,r=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var a=this.div.currentStyle;a&&(e.top=parseInt(a.borderTopWidth||"",10)||0,e.bottom=parseInt(a.borderBottomWidth||"",10)||0,e.left=parseInt(a.borderLeftWidth||"",10)||0,e.right=parseInt(a.borderRightWidth||"",10)||0)}return e},n.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},n.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.position);t!==null&&(this.div.style.left=t.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(t.y+this.pixelOffset.height)+"px":this.div.style.top=t.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},n.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},n.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},n.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},n.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},n.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},n.prototype.getContent=function(){return this.content},n.prototype.getPosition=function(){return this.position},n.prototype.getZIndex=function(){return this.zIndex},n.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},n.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},n.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},n.prototype.open=function(e,t){var r=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",function(){var a=t.getPosition();r.setPosition(a)}),this.mapListener=google.maps.event.addListener(t,"map_changed",function(){r.setMap(t.map)})),this.setMap(e),this.div&&this.panBox()},n.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var r=t[e];google.maps.event.removeListener(r)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},n.prototype.extend=function(e,t){return(function(a){for(var u in a.prototype)Object.prototype.hasOwnProperty.call(this,u)||(this.prototype[u]=a.prototype[u]);return this}).apply(e,[t])},n})(),RN=["position"],IN=["position"];function Cw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Id(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Cw(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Cw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Aw={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},xw={options(n,e){n.setOptions(e)},position(n,e){e instanceof google.maps.LatLng?n.setPosition(e):n.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(n,e){n.setVisible(e)},zIndex(n,e){n.setZIndex(e)}},MN={};function kN(n){var{children:e,anchor:t,options:r,position:a,zIndex:u,onCloseClick:f,onDomReady:g,onContentChanged:v,onPositionChanged:_,onZindexChanged:w,onLoad:T,onUnmount:I}=n,V=b.useContext(ft),[N,H]=b.useState(null),[q,W]=b.useState(null),[$,re]=b.useState(null),[ie,ee]=b.useState(null),[X,O]=b.useState(null),[P,M]=b.useState(null),j=b.useRef(null);return b.useEffect(()=>{V&&N!==null&&(N.close(),t?N.open(V,t):N.getPosition()&&N.open(V))},[V,N,t]),b.useEffect(()=>{r&&N!==null&&N.setOptions(r)},[N,r]),b.useEffect(()=>{if(a&&N!==null){var U=a instanceof google.maps.LatLng?a:new google.maps.LatLng(a.lat,a.lng);N.setPosition(U)}},[a]),b.useEffect(()=>{typeof u=="number"&&N!==null&&N.setZIndex(u)},[u]),b.useEffect(()=>{N&&f&&(q!==null&&google.maps.event.removeListener(q),W(google.maps.event.addListener(N,"closeclick",f)))},[f]),b.useEffect(()=>{N&&g&&($!==null&&google.maps.event.removeListener($),re(google.maps.event.addListener(N,"domready",g)))},[g]),b.useEffect(()=>{N&&v&&(ie!==null&&google.maps.event.removeListener(ie),ee(google.maps.event.addListener(N,"content_changed",v)))},[v]),b.useEffect(()=>{N&&_&&(X!==null&&google.maps.event.removeListener(X),O(google.maps.event.addListener(N,"position_changed",_)))},[_]),b.useEffect(()=>{N&&w&&(P!==null&&google.maps.event.removeListener(P),M(google.maps.event.addListener(N,"zindex_changed",w)))},[w]),b.useEffect(()=>{if(V){var U=r||MN,{position:G}=U,F=uy(U,RN),ke;G&&!(G instanceof google.maps.LatLng)&&(ke=new google.maps.LatLng(G.lat,G.lng));var Le=new VA(Id(Id({},F),ke?{position:ke}:{}));j.current=document.createElement("div"),H(Le),f&&W(google.maps.event.addListener(Le,"closeclick",f)),g&&re(google.maps.event.addListener(Le,"domready",g)),v&&ee(google.maps.event.addListener(Le,"content_changed",v)),_&&O(google.maps.event.addListener(Le,"position_changed",_)),w&&M(google.maps.event.addListener(Le,"zindex_changed",w)),Le.setContent(j.current),t?Le.open(V,t):Le.getPosition()?Le.open(V):Fn(!1,"You must provide either an anchor or a position prop for <InfoBox>."),T&&T(Le)}return()=>{N!==null&&(q&&google.maps.event.removeListener(q),ie&&google.maps.event.removeListener(ie),$&&google.maps.event.removeListener($),X&&google.maps.event.removeListener(X),P&&google.maps.event.removeListener(P),I&&I(N),N.close())}},[]),j.current?Ll.createPortal(b.Children.only(e),j.current):null}b.memo(kN);class ON extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"containerElement",null),Ee(this,"state",{infoBox:null}),Ee(this,"open",(e,t)=>{t?this.context!==null&&e.open(this.context,t):e.getPosition()?this.context!==null&&e.open(this.context):Fn(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),Ee(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:t}=e,r=uy(e,IN),a;t&&!(t instanceof google.maps.LatLng)&&(a=new google.maps.LatLng(t.lat,t.lng));var u=new VA(Id(Id({},r),a?{position:a}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=gt({updaterMap:xw,eventMap:Aw,prevProps:{},nextProps:this.props,instance:u}),this.setState({infoBox:u},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:t}=this.state;t!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:xw,eventMap:Aw,prevProps:e,nextProps:this.props,instance:t}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:t}=this.state;t!==null&&(e&&e(t),Et(this.registeredEvents),t.close())}render(){return this.containerElement?Ll.createPortal(b.Children.only(this.props.children),this.containerElement):null}}Ee(ON,"contextType",ft);var mg,Lw;function PN(){return Lw||(Lw=1,mg=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,a,u;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(a=r;a--!==0;)if(!n(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(u=Object.keys(e),r=u.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,u[a]))return!1;for(a=r;a--!==0;){var f=u[a];if(!n(e[f],t[f]))return!1}return!0}return e!==e&&t!==t}),mg}var DN=PN(),Rw=RA(DN),Iw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],gg=1,Nc=8;class hy{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[t,r]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");var a=r>>4;if(a!==gg)throw new Error("Got v".concat(a," data when expected v").concat(gg,"."));var u=Iw[r&15];if(!u)throw new Error("Unrecognized array type.");var[f]=new Uint16Array(e,2,1),[g]=new Uint32Array(e,4,1);return new hy(g,f,u,e)}constructor(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,a=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var u=Iw.indexOf(this.ArrayType),f=e*2*this.ArrayType.BYTES_PER_ELEMENT,g=e*this.IndexArrayType.BYTES_PER_ELEMENT,v=(8-g%8)%8;if(u<0)throw new Error("Unexpected typed array class: ".concat(r,"."));a&&a instanceof ArrayBuffer?(this.data=a,this.ids=new this.IndexArrayType(this.data,Nc,e),this.coords=new this.ArrayType(this.data,Nc+g+v,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(Nc+f+g+v),this.ids=new this.IndexArrayType(this.data,Nc,e),this.coords=new this.ArrayType(this.data,Nc+g+v,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(gg<<4)+u]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){var r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return ev(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,a){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:u,coords:f,nodeSize:g}=this,v=[0,u.length-1,0],_=[];v.length;){var w=v.pop()||0,T=v.pop()||0,I=v.pop()||0;if(T-I<=g){for(var V=I;V<=T;V++){var N=f[2*V],H=f[2*V+1];N>=e&&N<=r&&H>=t&&H<=a&&_.push(u[V])}continue}var q=I+T>>1,W=f[2*q],$=f[2*q+1];W>=e&&W<=r&&$>=t&&$<=a&&_.push(u[q]),(w===0?e<=W:t<=$)&&(v.push(I),v.push(q-1),v.push(1-w)),(w===0?r>=W:a>=$)&&(v.push(q+1),v.push(T),v.push(1-w))}return _}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:a,coords:u,nodeSize:f}=this,g=[0,a.length-1,0],v=[],_=r*r;g.length;){var w=g.pop()||0,T=g.pop()||0,I=g.pop()||0;if(T-I<=f){for(var V=I;V<=T;V++)Mw(u[2*V],u[2*V+1],e,t)<=_&&v.push(a[V]);continue}var N=I+T>>1,H=u[2*N],q=u[2*N+1];Mw(H,q,e,t)<=_&&v.push(a[N]),(w===0?e-r<=H:t-r<=q)&&(g.push(I),g.push(N-1),g.push(1-w)),(w===0?e+r>=H:t+r>=q)&&(g.push(N+1),g.push(T),g.push(1-w))}return v}}function ev(n,e,t,r,a,u){if(!(a-r<=t)){var f=r+a>>1;zA(n,e,f,r,a,u),ev(n,e,t,r,f-1,1-u),ev(n,e,t,f+1,a,1-u)}}function zA(n,e,t,r,a,u){for(;a>r;){if(a-r>600){var f=a-r+1,g=t-r+1,v=Math.log(f),_=.5*Math.exp(2*v/3),w=.5*Math.sqrt(v*_*(f-_)/f)*(g-f/2<0?-1:1),T=Math.max(r,Math.floor(t-g*_/f+w)),I=Math.min(a,Math.floor(t+(f-g)*_/f+w));zA(n,e,t,T,I,u)}var V=e[2*t+u],N=r,H=a;for(Vc(n,e,r,t),e[2*a+u]>V&&Vc(n,e,r,a);N<H;){for(Vc(n,e,N,H),N++,H--;e[2*N+u]<V;)N++;for(;e[2*H+u]>V;)H--}e[2*r+u]===V?Vc(n,e,r,H):(H++,Vc(n,e,H,a)),H<=t&&(r=H+1),t<=H&&(a=H-1)}}function Vc(n,e,t,r){vg(n,t,r),vg(e,2*t,2*r),vg(e,2*t+1,2*r+1)}function vg(n,e,t){var r=n[e];n[e]=n[t],n[t]=r}function Mw(n,e,t,r){var a=n-t,u=e-r;return a*a+u*u}var NN={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:n=>n},kw=Math.fround||(n=>e=>(n[0]=+e,n[0]))(new Float32Array(1)),dl=2,ca=3,yg=4,ua=5,BA=6;class VN{constructor(e){this.options=Object.assign(Object.create(NN),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:t,minZoom:r,maxZoom:a}=this.options;t&&console.time("total time");var u="prepare ".concat(e.length," points");t&&console.time(u),this.points=e;for(var f=[],g=0;g<e.length;g++){var v=e[g];if(v.geometry){var[_,w]=v.geometry.coordinates,T=kw(jf(_)),I=kw(Ff(w));f.push(T,I,1/0,g,-1,1),this.options.reduce&&f.push(0)}}var V=this.trees[a+1]=this._createTree(f);t&&console.timeEnd(u);for(var N=a;N>=r;N--){var H=+Date.now();V=this.trees[N]=this._createTree(this._cluster(V,N)),t&&console.log("z%d: %d clusters in %dms",N,V.numItems,+Date.now()-H)}return t&&console.timeEnd("total time"),this}getClusters(e,t){var r=((e[0]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[1])),u=e[2]===180?180:((e[2]+180)%360+360)%360-180,f=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,u=180;else if(r>u){var g=this.getClusters([r,a,180,f],t),v=this.getClusters([-180,a,u,f],t);return g.concat(v)}var _=this.trees[this._limitZoom(t)],w=_.range(jf(r),Ff(f),jf(u),Ff(a)),T=_.data,I=[];for(var V of w){var N=this.stride*V;I.push(T[N+ua]>1?Ow(T,N,this.clusterProps):this.points[T[N+ca]])}return I}getChildren(e){var t=this._getOriginId(e),r=this._getOriginZoom(e),a="No cluster with the specified id.",u=this.trees[r];if(!u)throw new Error(a);var f=u.data;if(t*this.stride>=f.length)throw new Error(a);var g=this.options.radius/(this.options.extent*Math.pow(2,r-1)),v=f[t*this.stride],_=f[t*this.stride+1],w=u.within(v,_,g),T=[];for(var I of w){var V=I*this.stride;f[V+yg]===e&&T.push(f[V+ua]>1?Ow(f,V,this.clusterProps):this.points[f[V+ca]])}if(T.length===0)throw new Error(a);return T}getLeaves(e,t,r){t=t||10,r=r||0;var a=[];return this._appendLeaves(a,e,t,r,0),a}getTile(e,t,r){var a=this.trees[this._limitZoom(e)],u=Math.pow(2,e),{extent:f,radius:g}=this.options,v=g/f,_=(r-v)/u,w=(r+1+v)/u,T={features:[]};return this._addTileFeatures(a.range((t-v)/u,_,(t+1+v)/u,w),a.data,t,r,u,T),t===0&&this._addTileFeatures(a.range(1-v/u,_,1,w),a.data,u,r,u,T),t===u-1&&this._addTileFeatures(a.range(0,_,v/u,w),a.data,-1,r,u,T),T.features.length?T:null}getClusterExpansionZoom(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var r=this.getChildren(e);if(t++,r.length!==1)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,a,u){var f=this.getChildren(t);for(var g of f){var v=g.properties;if(v&&v.cluster?u+v.point_count<=a?u+=v.point_count:u=this._appendLeaves(e,v.cluster_id,r,a,u):u<a?u++:e.push(g),e.length===r)break}return u}_createTree(e){for(var t=new hy(e.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<e.length;r+=this.stride)t.add(e[r],e[r+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,r,a,u,f){for(var g of e){var v=g*this.stride,_=t[v+ua]>1,w=void 0,T=void 0,I=void 0;if(_)w=UA(t,v,this.clusterProps),T=t[v],I=t[v+1];else{var V=this.points[t[v+ca]];w=V.properties;var[N,H]=V.geometry.coordinates;T=jf(N),I=Ff(H)}var q={type:1,geometry:[[Math.round(this.options.extent*(T*u-r)),Math.round(this.options.extent*(I*u-a))]],tags:w},W=void 0;_||this.options.generateId?W=t[v+ca]:W=this.points[t[v+ca]].id,W!==void 0&&(q.id=W),f.features.push(q)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){for(var{radius:r,extent:a,reduce:u,minPoints:f}=this.options,g=r/(a*Math.pow(2,t)),v=e.data,_=[],w=this.stride,T=0;T<v.length;T+=w)if(!(v[T+dl]<=t)){v[T+dl]=t;var I=v[T],V=v[T+1],N=e.within(v[T],v[T+1],g),H=v[T+ua],q=H;for(var W of N){var $=W*w;v[$+dl]>t&&(q+=v[$+ua])}if(q>H&&q>=f){var re=I*H,ie=V*H,ee=void 0,X=-1,O=((T/w|0)<<5)+(t+1)+this.points.length;for(var P of N){var M=P*w;if(!(v[M+dl]<=t)){v[M+dl]=t;var j=v[M+ua];re+=v[M]*j,ie+=v[M+1]*j,v[M+yg]=O,u&&(ee||(ee=this._map(v,T,!0),X=this.clusterProps.length,this.clusterProps.push(ee)),u(ee,this._map(v,M)))}}v[T+yg]=O,_.push(re/q,ie/q,1/0,O,-1,q),u&&_.push(X)}else{for(var U=0;U<w;U++)_.push(v[T+U]);if(q>1)for(var G of N){var F=G*w;if(!(v[F+dl]<=t)){v[F+dl]=t;for(var ke=0;ke<w;ke++)_.push(v[F+ke])}}}}return _}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,r){if(e[t+ua]>1){var a=this.clusterProps[e[t+BA]];return r?Object.assign({},a):a}var u=this.points[e[t+ca]].properties,f=this.options.map(u);return r&&f===u?Object.assign({},f):f}}function Ow(n,e,t){return{type:"Feature",id:n[e+ca],properties:UA(n,e,t),geometry:{type:"Point",coordinates:[zN(n[e]),BN(n[e+1])]}}}function UA(n,e,t){var r=n[e+ua],a=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,u=n[e+BA],f=u===-1?{}:Object.assign({},t[u]);return Object.assign(f,{cluster:!0,cluster_id:n[e+ca],point_count:r,point_count_abbreviated:a})}function jf(n){return n/360+.5}function Ff(n){var e=Math.sin(n*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function zN(n){return(n-.5)*360}function BN(n){var e=(180-n*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function UN(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}class gr{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class tv{constructor(e){var{markers:t,position:r}=e;this.markers=t,r&&(r instanceof google.maps.LatLng?this._position=r:this._position=new google.maps.LatLng(r))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var t of this.markers)e.extend(gr.getPosition(t));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>gr.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(gr.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class jN{constructor(e){var{maxZoom:t=16}=e;this.maxZoom=t}noop(e){var{markers:t}=e;return FN(t)}}var FN=n=>{var e=n.map(t=>new tv({position:gr.getPosition(t),markers:[t]}));return e};class HN extends jN{constructor(e){var{maxZoom:t,radius:r=60}=e,a=UN(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new VN(Object.assign({maxZoom:this.maxZoom,radius:r},a))}calculate(e){var t=!1,r={zoom:e.map.getZoom()};if(!Rw(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var a=this.markers.map(u=>{var f=gr.getPosition(u),g=[f.lng(),f.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:g},properties:{marker:u}}});this.superCluster.load(a)}return t||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(t=!Rw(this.state,r)),this.state=r,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){var{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(r=>this.transformCluster(r))}transformCluster(e){var{geometry:{coordinates:[t,r]},properties:a}=e;if(a.cluster)return new tv({markers:this.superCluster.getLeaves(a.cluster_id,1/0).map(f=>f.properties.marker),position:{lat:r,lng:t}});var u=a.marker;return new tv({markers:[u],position:gr.getPosition(u)})}}class qN{constructor(e,t){this.markers={sum:e.length};var r=t.map(u=>u.count),a=r.reduce((u,f)=>u+f,0);this.clusters={count:t.length,markers:{mean:a/t.length,sum:a,min:Math.min(...r),max:Math.max(...r)}}}}class ZN{render(e,t,r){var{count:a,position:u}=e,f=a>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",g='<svg fill="'.concat(f,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(a,`</text>
</svg>`),v="Cluster of ".concat(a," markers"),_=Number(google.maps.Marker.MAX_ZINDEX)+a;if(gr.isAdvancedMarkerAvailable(r)){var w=new DOMParser,T=w.parseFromString(g,"image/svg+xml").documentElement;T.setAttribute("transform","translate(0 25)");var I={map:r,position:u,zIndex:_,title:v,content:T};return new google.maps.marker.AdvancedMarkerElement(I)}var V={position:u,zIndex:_,title:v,icon:{url:"data:image/svg+xml;base64,".concat(btoa(g)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(V)}}function GN(n,e){for(var t in e.prototype)n.prototype[t]=e.prototype[t]}class fy{constructor(){GN(fy,google.maps.OverlayView)}}var Xc;(function(n){n.CLUSTERING_BEGIN="clusteringbegin",n.CLUSTERING_END="clusteringend",n.CLUSTER_CLICK="click"})(Xc||(Xc={}));var WN=(n,e,t)=>{t.fitBounds(e.bounds)};class KN extends fy{constructor(e){var{map:t,markers:r=[],algorithmOptions:a={},algorithm:u=new HN(a),renderer:f=new ZN,onClusterClick:g=WN}=e;super(),this.markers=[...r],this.clusters=[],this.algorithm=u,this.renderer=f,this.onClusterClick=g,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(r=>{this.addMarker(r,!0)}),t||this.render()}removeMarker(e,t){var r=this.markers.indexOf(e);return r===-1?!1:(gr.setMap(e,null),this.markers.splice(r,1),t||this.render(),!0)}removeMarkers(e,t){var r=!1;return e.forEach(a=>{r=this.removeMarker(a,!0)||r}),r&&!t&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,Xc.CLUSTERING_BEGIN,this);var{clusters:t,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||r==null){var a=new Set;for(var u of t)u.markers.length==1&&a.add(u.markers[0]);var f=[];for(var g of this.clusters)g.marker!=null&&(g.markers.length==1?a.has(g.marker)||gr.setMap(g.marker,null):f.push(g.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame(()=>f.forEach(v=>gr.setMap(v,null)))}google.maps.event.trigger(this,Xc.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>gr.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new qN(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e,t),r.markers.forEach(a=>gr.setMap(a,null)),this.onClusterClick&&r.marker.addListener("click",a=>{google.maps.event.trigger(this,Xc.CLUSTER_CLICK,r),this.onClusterClick(a,r,t)})),gr.setMap(r.marker,t)})}}function Pw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Dw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pw(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Pw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function YN(n){var e=H2(),[t,r]=b.useState(null);return b.useEffect(()=>{if(e&&t===null){var a=new KN(Dw(Dw({},n),{},{map:e}));r(a)}},[e]),t}function $N(n){var{children:e,options:t}=n,r=YN(t);return r!==null?e(r):null}b.memo($N);var Nw={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},Vw={options(n,e){n.setOptions(e)},position(n,e){n.setPosition(e)},zIndex(n,e){n.setZIndex(e)}};function QN(n){var{children:e,anchor:t,options:r,position:a,zIndex:u,onCloseClick:f,onDomReady:g,onContentChanged:v,onPositionChanged:_,onZindexChanged:w,onLoad:T,onUnmount:I}=n,V=b.useContext(ft),[N,H]=b.useState(null),[q,W]=b.useState(null),[$,re]=b.useState(null),[ie,ee]=b.useState(null),[X,O]=b.useState(null),[P,M]=b.useState(null),j=b.useRef(null);return b.useEffect(()=>{N!==null&&(N.close(),t?N.open(V,t):N.getPosition()&&N.open(V))},[V,N,t]),b.useEffect(()=>{r&&N!==null&&N.setOptions(r)},[N,r]),b.useEffect(()=>{a&&N!==null&&N.setPosition(a)},[a]),b.useEffect(()=>{typeof u=="number"&&N!==null&&N.setZIndex(u)},[u]),b.useEffect(()=>{N&&f&&(q!==null&&google.maps.event.removeListener(q),W(google.maps.event.addListener(N,"closeclick",f)))},[f]),b.useEffect(()=>{N&&g&&($!==null&&google.maps.event.removeListener($),re(google.maps.event.addListener(N,"domready",g)))},[g]),b.useEffect(()=>{N&&v&&(ie!==null&&google.maps.event.removeListener(ie),ee(google.maps.event.addListener(N,"content_changed",v)))},[v]),b.useEffect(()=>{N&&_&&(X!==null&&google.maps.event.removeListener(X),O(google.maps.event.addListener(N,"position_changed",_)))},[_]),b.useEffect(()=>{N&&w&&(P!==null&&google.maps.event.removeListener(P),M(google.maps.event.addListener(N,"zindex_changed",w)))},[w]),b.useEffect(()=>{var U=new google.maps.InfoWindow(r);return H(U),j.current=document.createElement("div"),f&&W(google.maps.event.addListener(U,"closeclick",f)),g&&re(google.maps.event.addListener(U,"domready",g)),v&&ee(google.maps.event.addListener(U,"content_changed",v)),_&&O(google.maps.event.addListener(U,"position_changed",_)),w&&M(google.maps.event.addListener(U,"zindex_changed",w)),U.setContent(j.current),a&&U.setPosition(a),u&&U.setZIndex(u),t?U.open(V,t):U.getPosition()?U.open(V):Fn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),T&&T(U),()=>{q&&google.maps.event.removeListener(q),ie&&google.maps.event.removeListener(ie),$&&google.maps.event.removeListener($),X&&google.maps.event.removeListener(X),P&&google.maps.event.removeListener(P),I&&I(U),U.close()}},[]),j.current?Ll.createPortal(b.Children.only(e),j.current):null}b.memo(QN);class XN extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"containerElement",null),Ee(this,"state",{infoWindow:null}),Ee(this,"open",(e,t)=>{t?e.open(this.context,t):e.getPosition()?e.open(this.context):Fn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),Ee(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=gt({updaterMap:Vw,eventMap:Nw,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:Vw,eventMap:Nw,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(Et(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?Ll.createPortal(b.Children.only(this.props.children),this.containerElement):null}}Ee(XN,"contextType",ft);function zw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Md(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zw(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):zw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Bw={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Uw={draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},path(n,e){n.setPath(e)},visible(n,e){n.setVisible(e)}},JN={};function eV(n){var{options:e,draggable:t,editable:r,visible:a,path:u,onDblClick:f,onDragEnd:g,onDragStart:v,onMouseDown:_,onMouseMove:w,onMouseOut:T,onMouseOver:I,onMouseUp:V,onRightClick:N,onClick:H,onDrag:q,onLoad:W,onUnmount:$}=n,re=b.useContext(ft),[ie,ee]=b.useState(null),[X,O]=b.useState(null),[P,M]=b.useState(null),[j,U]=b.useState(null),[G,F]=b.useState(null),[ke,Le]=b.useState(null),[ne,me]=b.useState(null),[ge,_e]=b.useState(null),[ue,B]=b.useState(null),[K,te]=b.useState(null),[fe,Q]=b.useState(null),[Ae,Ie]=b.useState(null);return b.useEffect(()=>{ie!==null&&ie.setMap(re)},[re]),b.useEffect(()=>{typeof e<"u"&&ie!==null&&ie.setOptions(e)},[ie,e]),b.useEffect(()=>{typeof t<"u"&&ie!==null&&ie.setDraggable(t)},[ie,t]),b.useEffect(()=>{typeof r<"u"&&ie!==null&&ie.setEditable(r)},[ie,r]),b.useEffect(()=>{typeof a<"u"&&ie!==null&&ie.setVisible(a)},[ie,a]),b.useEffect(()=>{typeof u<"u"&&ie!==null&&ie.setPath(u)},[ie,u]),b.useEffect(()=>{ie&&f&&(X!==null&&google.maps.event.removeListener(X),O(google.maps.event.addListener(ie,"dblclick",f)))},[f]),b.useEffect(()=>{ie&&g&&(P!==null&&google.maps.event.removeListener(P),M(google.maps.event.addListener(ie,"dragend",g)))},[g]),b.useEffect(()=>{ie&&v&&(j!==null&&google.maps.event.removeListener(j),U(google.maps.event.addListener(ie,"dragstart",v)))},[v]),b.useEffect(()=>{ie&&_&&(G!==null&&google.maps.event.removeListener(G),F(google.maps.event.addListener(ie,"mousedown",_)))},[_]),b.useEffect(()=>{ie&&w&&(ke!==null&&google.maps.event.removeListener(ke),Le(google.maps.event.addListener(ie,"mousemove",w)))},[w]),b.useEffect(()=>{ie&&T&&(ne!==null&&google.maps.event.removeListener(ne),me(google.maps.event.addListener(ie,"mouseout",T)))},[T]),b.useEffect(()=>{ie&&I&&(ge!==null&&google.maps.event.removeListener(ge),_e(google.maps.event.addListener(ie,"mouseover",I)))},[I]),b.useEffect(()=>{ie&&V&&(ue!==null&&google.maps.event.removeListener(ue),B(google.maps.event.addListener(ie,"mouseup",V)))},[V]),b.useEffect(()=>{ie&&N&&(K!==null&&google.maps.event.removeListener(K),te(google.maps.event.addListener(ie,"rightclick",N)))},[N]),b.useEffect(()=>{ie&&H&&(fe!==null&&google.maps.event.removeListener(fe),Q(google.maps.event.addListener(ie,"click",H)))},[H]),b.useEffect(()=>{ie&&q&&(Ae!==null&&google.maps.event.removeListener(Ae),Ie(google.maps.event.addListener(ie,"drag",q)))},[q]),b.useEffect(()=>{var De=new google.maps.Polyline(Md(Md({},e||JN),{},{map:re}));return u&&De.setPath(u),typeof a<"u"&&De.setVisible(a),typeof r<"u"&&De.setEditable(r),typeof t<"u"&&De.setDraggable(t),f&&O(google.maps.event.addListener(De,"dblclick",f)),g&&M(google.maps.event.addListener(De,"dragend",g)),v&&U(google.maps.event.addListener(De,"dragstart",v)),_&&F(google.maps.event.addListener(De,"mousedown",_)),w&&Le(google.maps.event.addListener(De,"mousemove",w)),T&&me(google.maps.event.addListener(De,"mouseout",T)),I&&_e(google.maps.event.addListener(De,"mouseover",I)),V&&B(google.maps.event.addListener(De,"mouseup",V)),N&&te(google.maps.event.addListener(De,"rightclick",N)),H&&Q(google.maps.event.addListener(De,"click",H)),q&&Ie(google.maps.event.addListener(De,"drag",q)),ee(De),W&&W(De),()=>{X!==null&&google.maps.event.removeListener(X),P!==null&&google.maps.event.removeListener(P),j!==null&&google.maps.event.removeListener(j),G!==null&&google.maps.event.removeListener(G),ke!==null&&google.maps.event.removeListener(ke),ne!==null&&google.maps.event.removeListener(ne),ge!==null&&google.maps.event.removeListener(ge),ue!==null&&google.maps.event.removeListener(ue),K!==null&&google.maps.event.removeListener(K),fe!==null&&google.maps.event.removeListener(fe),$&&$(De),De.setMap(null)}},[]),null}b.memo(eV);class tV extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{polyline:null}),Ee(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(Md(Md({},this.props.options),{},{map:this.context}));this.registeredEvents=gt({updaterMap:Uw,eventMap:Bw,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:Uw,eventMap:Bw,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),Et(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}Ee(tV,"contextType",ft);function jw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Fw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jw(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):jw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Hw={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},qw={draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},path(n,e){n.setPath(e)},paths(n,e){n.setPaths(e)},visible(n,e){n.setVisible(e)}};function nV(n){var{options:e,draggable:t,editable:r,visible:a,path:u,paths:f,onDblClick:g,onDragEnd:v,onDragStart:_,onMouseDown:w,onMouseMove:T,onMouseOut:I,onMouseOver:V,onMouseUp:N,onRightClick:H,onClick:q,onDrag:W,onLoad:$,onUnmount:re,onEdit:ie}=n,ee=b.useContext(ft),[X,O]=b.useState(null),[P,M]=b.useState(null),[j,U]=b.useState(null),[G,F]=b.useState(null),[ke,Le]=b.useState(null),[ne,me]=b.useState(null),[ge,_e]=b.useState(null),[ue,B]=b.useState(null),[K,te]=b.useState(null),[fe,Q]=b.useState(null),[Ae,Ie]=b.useState(null),[De,Qe]=b.useState(null);return b.useEffect(()=>{X!==null&&X.setMap(ee)},[ee]),b.useEffect(()=>{typeof e<"u"&&X!==null&&X.setOptions(e)},[X,e]),b.useEffect(()=>{typeof t<"u"&&X!==null&&X.setDraggable(t)},[X,t]),b.useEffect(()=>{typeof r<"u"&&X!==null&&X.setEditable(r)},[X,r]),b.useEffect(()=>{typeof a<"u"&&X!==null&&X.setVisible(a)},[X,a]),b.useEffect(()=>{typeof u<"u"&&X!==null&&X.setPath(u)},[X,u]),b.useEffect(()=>{typeof f<"u"&&X!==null&&X.setPaths(f)},[X,f]),b.useEffect(()=>{X&&typeof g=="function"&&(P!==null&&google.maps.event.removeListener(P),M(google.maps.event.addListener(X,"dblclick",g)))},[g]),b.useEffect(()=>{X&&(google.maps.event.addListener(X.getPath(),"insert_at",()=>{ie?.(X)}),google.maps.event.addListener(X.getPath(),"set_at",()=>{ie?.(X)}),google.maps.event.addListener(X.getPath(),"remove_at",()=>{ie?.(X)}))},[X,ie]),b.useEffect(()=>{X&&typeof v=="function"&&(j!==null&&google.maps.event.removeListener(j),U(google.maps.event.addListener(X,"dragend",v)))},[v]),b.useEffect(()=>{X&&typeof _=="function"&&(G!==null&&google.maps.event.removeListener(G),F(google.maps.event.addListener(X,"dragstart",_)))},[_]),b.useEffect(()=>{X&&typeof w=="function"&&(ke!==null&&google.maps.event.removeListener(ke),Le(google.maps.event.addListener(X,"mousedown",w)))},[w]),b.useEffect(()=>{X&&typeof T=="function"&&(ne!==null&&google.maps.event.removeListener(ne),me(google.maps.event.addListener(X,"mousemove",T)))},[T]),b.useEffect(()=>{X&&typeof I=="function"&&(ge!==null&&google.maps.event.removeListener(ge),_e(google.maps.event.addListener(X,"mouseout",I)))},[I]),b.useEffect(()=>{X&&typeof V=="function"&&(ue!==null&&google.maps.event.removeListener(ue),B(google.maps.event.addListener(X,"mouseover",V)))},[V]),b.useEffect(()=>{X&&typeof N=="function"&&(K!==null&&google.maps.event.removeListener(K),te(google.maps.event.addListener(X,"mouseup",N)))},[N]),b.useEffect(()=>{X&&typeof H=="function"&&(fe!==null&&google.maps.event.removeListener(fe),Q(google.maps.event.addListener(X,"rightclick",H)))},[H]),b.useEffect(()=>{X&&typeof q=="function"&&(Ae!==null&&google.maps.event.removeListener(Ae),Ie(google.maps.event.addListener(X,"click",q)))},[q]),b.useEffect(()=>{X&&typeof W=="function"&&(De!==null&&google.maps.event.removeListener(De),Qe(google.maps.event.addListener(X,"drag",W)))},[W]),b.useEffect(()=>{var ze=new google.maps.Polygon(Fw(Fw({},e),{},{map:ee}));return u&&ze.setPath(u),f&&ze.setPaths(f),typeof a<"u"&&ze.setVisible(a),typeof r<"u"&&ze.setEditable(r),typeof t<"u"&&ze.setDraggable(t),g&&M(google.maps.event.addListener(ze,"dblclick",g)),v&&U(google.maps.event.addListener(ze,"dragend",v)),_&&F(google.maps.event.addListener(ze,"dragstart",_)),w&&Le(google.maps.event.addListener(ze,"mousedown",w)),T&&me(google.maps.event.addListener(ze,"mousemove",T)),I&&_e(google.maps.event.addListener(ze,"mouseout",I)),V&&B(google.maps.event.addListener(ze,"mouseover",V)),N&&te(google.maps.event.addListener(ze,"mouseup",N)),H&&Q(google.maps.event.addListener(ze,"rightclick",H)),q&&Ie(google.maps.event.addListener(ze,"click",q)),W&&Qe(google.maps.event.addListener(ze,"drag",W)),O(ze),$&&$(ze),()=>{P!==null&&google.maps.event.removeListener(P),j!==null&&google.maps.event.removeListener(j),G!==null&&google.maps.event.removeListener(G),ke!==null&&google.maps.event.removeListener(ke),ne!==null&&google.maps.event.removeListener(ne),ge!==null&&google.maps.event.removeListener(ge),ue!==null&&google.maps.event.removeListener(ue),K!==null&&google.maps.event.removeListener(K),fe!==null&&google.maps.event.removeListener(fe),Ae!==null&&google.maps.event.removeListener(Ae),re&&re(ze),ze.setMap(null)}},[]),null}b.memo(nV);class iV extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=gt({updaterMap:qw,eventMap:Hw,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:qw,eventMap:Hw,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),Et(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}Ee(iV,"contextType",ft);function Zw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function kd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zw(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Zw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Gw={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Ww={bounds(n,e){n.setBounds(e)},draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},visible(n,e){n.setVisible(e)}};function rV(n){var{options:e,bounds:t,draggable:r,editable:a,visible:u,onDblClick:f,onDragEnd:g,onDragStart:v,onMouseDown:_,onMouseMove:w,onMouseOut:T,onMouseOver:I,onMouseUp:V,onRightClick:N,onClick:H,onDrag:q,onBoundsChanged:W,onLoad:$,onUnmount:re}=n,ie=b.useContext(ft),[ee,X]=b.useState(null),[O,P]=b.useState(null),[M,j]=b.useState(null),[U,G]=b.useState(null),[F,ke]=b.useState(null),[Le,ne]=b.useState(null),[me,ge]=b.useState(null),[_e,ue]=b.useState(null),[B,K]=b.useState(null),[te,fe]=b.useState(null),[Q,Ae]=b.useState(null),[Ie,De]=b.useState(null),[Qe,ze]=b.useState(null);return b.useEffect(()=>{ee!==null&&ee.setMap(ie)},[ie]),b.useEffect(()=>{typeof e<"u"&&ee!==null&&ee.setOptions(e)},[ee,e]),b.useEffect(()=>{typeof r<"u"&&ee!==null&&ee.setDraggable(r)},[ee,r]),b.useEffect(()=>{typeof a<"u"&&ee!==null&&ee.setEditable(a)},[ee,a]),b.useEffect(()=>{typeof u<"u"&&ee!==null&&ee.setVisible(u)},[ee,u]),b.useEffect(()=>{typeof t<"u"&&ee!==null&&ee.setBounds(t)},[ee,t]),b.useEffect(()=>{ee&&f&&(O!==null&&google.maps.event.removeListener(O),P(google.maps.event.addListener(ee,"dblclick",f)))},[f]),b.useEffect(()=>{ee&&g&&(M!==null&&google.maps.event.removeListener(M),j(google.maps.event.addListener(ee,"dragend",g)))},[g]),b.useEffect(()=>{ee&&v&&(U!==null&&google.maps.event.removeListener(U),G(google.maps.event.addListener(ee,"dragstart",v)))},[v]),b.useEffect(()=>{ee&&_&&(F!==null&&google.maps.event.removeListener(F),ke(google.maps.event.addListener(ee,"mousedown",_)))},[_]),b.useEffect(()=>{ee&&w&&(Le!==null&&google.maps.event.removeListener(Le),ne(google.maps.event.addListener(ee,"mousemove",w)))},[w]),b.useEffect(()=>{ee&&T&&(me!==null&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(ee,"mouseout",T)))},[T]),b.useEffect(()=>{ee&&I&&(_e!==null&&google.maps.event.removeListener(_e),ue(google.maps.event.addListener(ee,"mouseover",I)))},[I]),b.useEffect(()=>{ee&&V&&(B!==null&&google.maps.event.removeListener(B),K(google.maps.event.addListener(ee,"mouseup",V)))},[V]),b.useEffect(()=>{ee&&N&&(te!==null&&google.maps.event.removeListener(te),fe(google.maps.event.addListener(ee,"rightclick",N)))},[N]),b.useEffect(()=>{ee&&H&&(Q!==null&&google.maps.event.removeListener(Q),Ae(google.maps.event.addListener(ee,"click",H)))},[H]),b.useEffect(()=>{ee&&q&&(Ie!==null&&google.maps.event.removeListener(Ie),De(google.maps.event.addListener(ee,"drag",q)))},[q]),b.useEffect(()=>{ee&&W&&(Qe!==null&&google.maps.event.removeListener(Qe),ze(google.maps.event.addListener(ee,"bounds_changed",W)))},[W]),b.useEffect(()=>{var Je=new google.maps.Rectangle(kd(kd({},e),{},{map:ie}));return typeof u<"u"&&Je.setVisible(u),typeof a<"u"&&Je.setEditable(a),typeof r<"u"&&Je.setDraggable(r),typeof t<"u"&&Je.setBounds(t),f&&P(google.maps.event.addListener(Je,"dblclick",f)),g&&j(google.maps.event.addListener(Je,"dragend",g)),v&&G(google.maps.event.addListener(Je,"dragstart",v)),_&&ke(google.maps.event.addListener(Je,"mousedown",_)),w&&ne(google.maps.event.addListener(Je,"mousemove",w)),T&&ge(google.maps.event.addListener(Je,"mouseout",T)),I&&ue(google.maps.event.addListener(Je,"mouseover",I)),V&&K(google.maps.event.addListener(Je,"mouseup",V)),N&&fe(google.maps.event.addListener(Je,"rightclick",N)),H&&Ae(google.maps.event.addListener(Je,"click",H)),q&&De(google.maps.event.addListener(Je,"drag",q)),W&&ze(google.maps.event.addListener(Je,"bounds_changed",W)),X(Je),$&&$(Je),()=>{O!==null&&google.maps.event.removeListener(O),M!==null&&google.maps.event.removeListener(M),U!==null&&google.maps.event.removeListener(U),F!==null&&google.maps.event.removeListener(F),Le!==null&&google.maps.event.removeListener(Le),me!==null&&google.maps.event.removeListener(me),_e!==null&&google.maps.event.removeListener(_e),B!==null&&google.maps.event.removeListener(B),te!==null&&google.maps.event.removeListener(te),Q!==null&&google.maps.event.removeListener(Q),Ie!==null&&google.maps.event.removeListener(Ie),Qe!==null&&google.maps.event.removeListener(Qe),re&&re(Je),Je.setMap(null)}},[]),null}b.memo(rV);class sV extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{rectangle:null}),Ee(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(kd(kd({},this.props.options),{},{map:this.context}));this.registeredEvents=gt({updaterMap:Ww,eventMap:Gw,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:Ww,eventMap:Gw,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),Et(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}Ee(sV,"contextType",ft);function Kw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Od(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kw(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Kw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Yw={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},$w={center(n,e){n.setCenter(e)},draggable(n,e){n.setDraggable(e)},editable(n,e){n.setEditable(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},radius(n,e){n.setRadius(e)},visible(n,e){n.setVisible(e)}},oV={};function aV(n){var{options:e,center:t,radius:r,draggable:a,editable:u,visible:f,onDblClick:g,onDragEnd:v,onDragStart:_,onMouseDown:w,onMouseMove:T,onMouseOut:I,onMouseOver:V,onMouseUp:N,onRightClick:H,onClick:q,onDrag:W,onCenterChanged:$,onRadiusChanged:re,onLoad:ie,onUnmount:ee}=n,X=b.useContext(ft),[O,P]=b.useState(null),[M,j]=b.useState(null),[U,G]=b.useState(null),[F,ke]=b.useState(null),[Le,ne]=b.useState(null),[me,ge]=b.useState(null),[_e,ue]=b.useState(null),[B,K]=b.useState(null),[te,fe]=b.useState(null),[Q,Ae]=b.useState(null),[Ie,De]=b.useState(null),[Qe,ze]=b.useState(null),[Je,Ut]=b.useState(null),[an,ln]=b.useState(null);return b.useEffect(()=>{O!==null&&O.setMap(X)},[X]),b.useEffect(()=>{typeof e<"u"&&O!==null&&O.setOptions(e)},[O,e]),b.useEffect(()=>{typeof a<"u"&&O!==null&&O.setDraggable(a)},[O,a]),b.useEffect(()=>{typeof u<"u"&&O!==null&&O.setEditable(u)},[O,u]),b.useEffect(()=>{typeof f<"u"&&O!==null&&O.setVisible(f)},[O,f]),b.useEffect(()=>{typeof r=="number"&&O!==null&&O.setRadius(r)},[O,r]),b.useEffect(()=>{typeof t<"u"&&O!==null&&O.setCenter(t)},[O,t]),b.useEffect(()=>{O&&g&&(M!==null&&google.maps.event.removeListener(M),j(google.maps.event.addListener(O,"dblclick",g)))},[g]),b.useEffect(()=>{O&&v&&(U!==null&&google.maps.event.removeListener(U),G(google.maps.event.addListener(O,"dragend",v)))},[v]),b.useEffect(()=>{O&&_&&(F!==null&&google.maps.event.removeListener(F),ke(google.maps.event.addListener(O,"dragstart",_)))},[_]),b.useEffect(()=>{O&&w&&(Le!==null&&google.maps.event.removeListener(Le),ne(google.maps.event.addListener(O,"mousedown",w)))},[w]),b.useEffect(()=>{O&&T&&(me!==null&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(O,"mousemove",T)))},[T]),b.useEffect(()=>{O&&I&&(_e!==null&&google.maps.event.removeListener(_e),ue(google.maps.event.addListener(O,"mouseout",I)))},[I]),b.useEffect(()=>{O&&V&&(B!==null&&google.maps.event.removeListener(B),K(google.maps.event.addListener(O,"mouseover",V)))},[V]),b.useEffect(()=>{O&&N&&(te!==null&&google.maps.event.removeListener(te),fe(google.maps.event.addListener(O,"mouseup",N)))},[N]),b.useEffect(()=>{O&&H&&(Q!==null&&google.maps.event.removeListener(Q),Ae(google.maps.event.addListener(O,"rightclick",H)))},[H]),b.useEffect(()=>{O&&q&&(Ie!==null&&google.maps.event.removeListener(Ie),De(google.maps.event.addListener(O,"click",q)))},[q]),b.useEffect(()=>{O&&W&&(Qe!==null&&google.maps.event.removeListener(Qe),ze(google.maps.event.addListener(O,"drag",W)))},[W]),b.useEffect(()=>{O&&$&&(Je!==null&&google.maps.event.removeListener(Je),Ut(google.maps.event.addListener(O,"center_changed",$)))},[q]),b.useEffect(()=>{O&&re&&(an!==null&&google.maps.event.removeListener(an),ln(google.maps.event.addListener(O,"radius_changed",re)))},[re]),b.useEffect(()=>{var ot=new google.maps.Circle(Od(Od({},e||oV),{},{map:X}));return typeof r=="number"&&ot.setRadius(r),typeof t<"u"&&ot.setCenter(t),typeof r=="number"&&ot.setRadius(r),typeof f<"u"&&ot.setVisible(f),typeof u<"u"&&ot.setEditable(u),typeof a<"u"&&ot.setDraggable(a),g&&j(google.maps.event.addListener(ot,"dblclick",g)),v&&G(google.maps.event.addListener(ot,"dragend",v)),_&&ke(google.maps.event.addListener(ot,"dragstart",_)),w&&ne(google.maps.event.addListener(ot,"mousedown",w)),T&&ge(google.maps.event.addListener(ot,"mousemove",T)),I&&ue(google.maps.event.addListener(ot,"mouseout",I)),V&&K(google.maps.event.addListener(ot,"mouseover",V)),N&&fe(google.maps.event.addListener(ot,"mouseup",N)),H&&Ae(google.maps.event.addListener(ot,"rightclick",H)),q&&De(google.maps.event.addListener(ot,"click",q)),W&&ze(google.maps.event.addListener(ot,"drag",W)),$&&Ut(google.maps.event.addListener(ot,"center_changed",$)),re&&ln(google.maps.event.addListener(ot,"radius_changed",re)),P(ot),ie&&ie(ot),()=>{M!==null&&google.maps.event.removeListener(M),U!==null&&google.maps.event.removeListener(U),F!==null&&google.maps.event.removeListener(F),Le!==null&&google.maps.event.removeListener(Le),me!==null&&google.maps.event.removeListener(me),_e!==null&&google.maps.event.removeListener(_e),B!==null&&google.maps.event.removeListener(B),te!==null&&google.maps.event.removeListener(te),Q!==null&&google.maps.event.removeListener(Q),Ie!==null&&google.maps.event.removeListener(Ie),Je!==null&&google.maps.event.removeListener(Je),an!==null&&google.maps.event.removeListener(an),ee&&ee(ot),ot.setMap(null)}},[]),null}b.memo(aV);class lV extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{circle:null}),Ee(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(Od(Od({},this.props.options),{},{map:this.context}));this.registeredEvents=gt({updaterMap:$w,eventMap:Yw,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:$w,eventMap:Yw,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),Et(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}Ee(lV,"contextType",ft);function Qw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Pd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qw(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Qw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Xw={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},Jw={add(n,e){n.add(e)},addgeojson(n,e,t){n.addGeoJson(e,t)},contains(n,e){n.contains(e)},foreach(n,e){n.forEach(e)},loadgeojson(n,e,t,r){n.loadGeoJson(e,t,r)},overridestyle(n,e,t){n.overrideStyle(e,t)},remove(n,e){n.remove(e)},revertstyle(n,e){n.revertStyle(e)},controlposition(n,e){n.setControlPosition(e)},controls(n,e){n.setControls(e)},drawingmode(n,e){n.setDrawingMode(e)},map(n,e){n.setMap(e)},style(n,e){n.setStyle(e)},togeojson(n,e){n.toGeoJson(e)}};function uV(n){var{options:e,onClick:t,onDblClick:r,onMouseDown:a,onMouseMove:u,onMouseOut:f,onMouseOver:g,onMouseUp:v,onRightClick:_,onAddFeature:w,onRemoveFeature:T,onRemoveProperty:I,onSetGeometry:V,onSetProperty:N,onLoad:H,onUnmount:q}=n,W=b.useContext(ft),[$,re]=b.useState(null),[ie,ee]=b.useState(null),[X,O]=b.useState(null),[P,M]=b.useState(null),[j,U]=b.useState(null),[G,F]=b.useState(null),[ke,Le]=b.useState(null),[ne,me]=b.useState(null),[ge,_e]=b.useState(null),[ue,B]=b.useState(null),[K,te]=b.useState(null),[fe,Q]=b.useState(null),[Ae,Ie]=b.useState(null),[De,Qe]=b.useState(null);return b.useEffect(()=>{$!==null&&$.setMap(W)},[W]),b.useEffect(()=>{$&&r&&(ie!==null&&google.maps.event.removeListener(ie),ee(google.maps.event.addListener($,"dblclick",r)))},[r]),b.useEffect(()=>{$&&a&&(X!==null&&google.maps.event.removeListener(X),O(google.maps.event.addListener($,"mousedown",a)))},[a]),b.useEffect(()=>{$&&u&&(P!==null&&google.maps.event.removeListener(P),M(google.maps.event.addListener($,"mousemove",u)))},[u]),b.useEffect(()=>{$&&f&&(j!==null&&google.maps.event.removeListener(j),U(google.maps.event.addListener($,"mouseout",f)))},[f]),b.useEffect(()=>{$&&g&&(G!==null&&google.maps.event.removeListener(G),F(google.maps.event.addListener($,"mouseover",g)))},[g]),b.useEffect(()=>{$&&v&&(ke!==null&&google.maps.event.removeListener(ke),Le(google.maps.event.addListener($,"mouseup",v)))},[v]),b.useEffect(()=>{$&&_&&(ne!==null&&google.maps.event.removeListener(ne),me(google.maps.event.addListener($,"rightclick",_)))},[_]),b.useEffect(()=>{$&&t&&(ge!==null&&google.maps.event.removeListener(ge),_e(google.maps.event.addListener($,"click",t)))},[t]),b.useEffect(()=>{$&&w&&(ue!==null&&google.maps.event.removeListener(ue),B(google.maps.event.addListener($,"addfeature",w)))},[w]),b.useEffect(()=>{$&&T&&(K!==null&&google.maps.event.removeListener(K),te(google.maps.event.addListener($,"removefeature",T)))},[T]),b.useEffect(()=>{$&&I&&(fe!==null&&google.maps.event.removeListener(fe),Q(google.maps.event.addListener($,"removeproperty",I)))},[I]),b.useEffect(()=>{$&&V&&(Ae!==null&&google.maps.event.removeListener(Ae),Ie(google.maps.event.addListener($,"setgeometry",V)))},[V]),b.useEffect(()=>{$&&N&&(De!==null&&google.maps.event.removeListener(De),Qe(google.maps.event.addListener($,"setproperty",N)))},[N]),b.useEffect(()=>{if(W!==null){var ze=new google.maps.Data(Pd(Pd({},e),{},{map:W}));r&&ee(google.maps.event.addListener(ze,"dblclick",r)),a&&O(google.maps.event.addListener(ze,"mousedown",a)),u&&M(google.maps.event.addListener(ze,"mousemove",u)),f&&U(google.maps.event.addListener(ze,"mouseout",f)),g&&F(google.maps.event.addListener(ze,"mouseover",g)),v&&Le(google.maps.event.addListener(ze,"mouseup",v)),_&&me(google.maps.event.addListener(ze,"rightclick",_)),t&&_e(google.maps.event.addListener(ze,"click",t)),w&&B(google.maps.event.addListener(ze,"addfeature",w)),T&&te(google.maps.event.addListener(ze,"removefeature",T)),I&&Q(google.maps.event.addListener(ze,"removeproperty",I)),V&&Ie(google.maps.event.addListener(ze,"setgeometry",V)),N&&Qe(google.maps.event.addListener(ze,"setproperty",N)),re(ze),H&&H(ze)}return()=>{$&&(ie!==null&&google.maps.event.removeListener(ie),X!==null&&google.maps.event.removeListener(X),P!==null&&google.maps.event.removeListener(P),j!==null&&google.maps.event.removeListener(j),G!==null&&google.maps.event.removeListener(G),ke!==null&&google.maps.event.removeListener(ke),ne!==null&&google.maps.event.removeListener(ne),ge!==null&&google.maps.event.removeListener(ge),ue!==null&&google.maps.event.removeListener(ue),K!==null&&google.maps.event.removeListener(K),fe!==null&&google.maps.event.removeListener(fe),Ae!==null&&google.maps.event.removeListener(Ae),De!==null&&google.maps.event.removeListener(De),q&&q($),$.setMap(null))}},[]),null}b.memo(uV);class cV extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{data:null}),Ee(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(Pd(Pd({},this.props.options),{},{map:this.context}));this.registeredEvents=gt({updaterMap:Jw,eventMap:Xw,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:Jw,eventMap:Xw,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),Et(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}Ee(cV,"contextType",ft);function eS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function tS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eS(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):eS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var nS={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},iS={options(n,e){n.setOptions(e)},url(n,e){n.setUrl(e)},zIndex(n,e){n.setZIndex(e)}};class hV extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{kmlLayer:null}),Ee(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(tS(tS({},this.props.options),{},{map:this.context}));this.registeredEvents=gt({updaterMap:iS,eventMap:nS,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:iS,eventMap:nS,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),Et(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}Ee(hV,"contextType",ft);function jA(n,e){return typeof e=="function"?e(n.offsetWidth,n.offsetHeight):{x:0,y:0}}function fV(n,e){return new e(n.lat,n.lng)}function dV(n,e){return new e(new google.maps.LatLng(n.ne.lat,n.ne.lng),new google.maps.LatLng(n.sw.lat,n.sw.lng))}function pV(n,e,t){return n instanceof e?n:t(n,e)}function mV(n,e,t){return n instanceof e?n:t(n,e)}function gV(n,e,t){var r=n&&n.fromLatLngToDivPixel(t.getNorthEast()),a=n&&n.fromLatLngToDivPixel(t.getSouthWest());return r&&a?{left:"".concat(a.x+e.x,"px"),top:"".concat(r.y+e.y,"px"),width:"".concat(r.x-a.x-e.x,"px"),height:"".concat(a.y-r.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function vV(n,e,t){var r=n&&n.fromLatLngToDivPixel(t);if(r){var{x:a,y:u}=r;return{left:"".concat(a+e.x,"px"),top:"".concat(u+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function FA(n,e,t,r){return t!==void 0?gV(n,e,mV(t,google.maps.LatLngBounds,dV)):vV(n,e,pV(r,google.maps.LatLng,fV))}function yV(n,e){return n.left===e.left&&n.top===e.top&&n.width===e.height&&n.height===e.height}function rS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function _V(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rS(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function EV(n,e,t,r,a){class u extends google.maps.OverlayView{constructor(g,v,_,w){super(),this.container=g,this.pane=v,this.position=_,this.bounds=w}onAdd(){var g,v=(g=this.getPanes())===null||g===void 0?void 0:g[this.pane];v?.appendChild(this.container)}draw(){var g=this.getProjection(),v=_V({},this.container?jA(this.container,a):{x:0,y:0}),_=FA(g,v,this.bounds,this.position);for(var[w,T]of Object.entries(_))this.container.style[w]=T}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new u(n,e,t,r)}function sS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function bV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sS(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):sS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function oS(n){if(!n)return"";var e=n instanceof google.maps.LatLng?n:new google.maps.LatLng(n.lat,n.lng);return e+""}function aS(n){if(!n)return"";var e=n instanceof google.maps.LatLngBounds?n:new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.east),new google.maps.LatLng(n.north,n.west));return e+""}function wV(n){var{position:e,bounds:t,mapPaneName:r,zIndex:a,onLoad:u,onUnmount:f,getPixelPositionOffset:g,children:v}=n,_=b.useContext(ft),w=b.useMemo(()=>{var I=document.createElement("div");return I.style.position="absolute",I},[]),T=b.useMemo(()=>EV(w,r,e,t,g),[w,r,e,t]);return b.useEffect(()=>(u?.(T),T?.setMap(_),()=>{f?.(T),T?.setMap(null)}),[_,T]),b.useEffect(()=>{w.style.zIndex="".concat(a)},[a,w]),Ll.createPortal(v,w)}b.memo(wV);class Wu extends b.PureComponent{constructor(e){super(e),Ee(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),Ee(this,"updatePane",()=>{var r=this.props.mapPaneName,a=this.overlayView.getPanes();Fn(!!r,"OverlayView requires props.mapPaneName but got %s",r),a?this.setState({paneEl:a[r]}):this.setState({paneEl:null})}),Ee(this,"onAdd",()=>{var r,a;this.updatePane(),(r=(a=this.props).onLoad)===null||r===void 0||r.call(a,this.overlayView)}),Ee(this,"onPositionElement",()=>{var r=this.overlayView.getProjection(),a=bV({x:0,y:0},this.containerRef.current?jA(this.containerRef.current,this.props.getPixelPositionOffset):{}),u=FA(r,a,this.props.bounds,this.props.position);if(!yV(u,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var f,g,v,_;this.setState({containerStyle:{top:(f=u.top)!==null&&f!==void 0?f:0,left:(g=u.left)!==null&&g!==void 0?g:0,width:(v=u.width)!==null&&v!==void 0?v:0,height:(_=u.height)!==null&&_!==void 0?_:0,position:"absolute"}})}}),Ee(this,"draw",()=>{this.onPositionElement()}),Ee(this,"onRemove",()=>{var r,a;this.setState(()=>({paneEl:null})),(r=(a=this.props).onUnmount)===null||r===void 0||r.call(a,this.overlayView)}),this.containerRef=b.createRef();var t=new google.maps.OverlayView;t.onAdd=this.onAdd,t.draw=this.draw,t.onRemove=this.onRemove,this.overlayView=t}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var t=oS(e.position),r=oS(this.props.position),a=aS(e.bounds),u=aS(this.props.bounds);(t!==r||a!==u)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?Ll.createPortal(Oi.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:b.Children.only(this.props.children)}),e):null}}Ee(Wu,"FLOAT_PANE","floatPane");Ee(Wu,"MAP_PANE","mapPane");Ee(Wu,"MARKER_LAYER","markerLayer");Ee(Wu,"OVERLAY_LAYER","overlayLayer");Ee(Wu,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");Ee(Wu,"contextType",ft);function SV(){}function lS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function uS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lS(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var cS={onDblClick:"dblclick",onClick:"click"},hS={opacity(n,e){n.setOpacity(e)}};function TV(n){var{url:e,bounds:t,options:r,visible:a}=n,u=b.useContext(ft),f=new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.west),new google.maps.LatLng(t.north,t.east)),g=b.useMemo(()=>new google.maps.GroundOverlay(e,f,r),[]);return b.useEffect(()=>{g!==null&&g.setMap(u)},[u]),b.useEffect(()=>{typeof e<"u"&&g!==null&&(g.set("url",e),g.setMap(u))},[g,e]),b.useEffect(()=>{typeof a<"u"&&g!==null&&g.setOpacity(a?1:0)},[g,a]),b.useEffect(()=>{var v=new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.west),new google.maps.LatLng(t.north,t.east));typeof t<"u"&&g!==null&&(g.set("bounds",v),g.setMap(u))},[g,t]),null}b.memo(TV);class HA extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{groundOverlay:null}),Ee(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){Fn(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,uS(uS({},this.props.options),{},{map:this.context}));this.registeredEvents=gt({updaterMap:hS,eventMap:cS,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:hS,eventMap:cS,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}Ee(HA,"defaultProps",{onLoad:SV});Ee(HA,"contextType",ft);function fS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Dd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fS(Object(t),!0).forEach(function(r){Ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var dS={},pS={data(n,e){n.setData(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)}};function CV(n){var{data:e,onLoad:t,onUnmount:r,options:a}=n,u=b.useContext(ft),[f,g]=b.useState(null);return b.useEffect(()=>{google.maps.visualization||Fn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),b.useEffect(()=>{Fn(!!e,"data property is required in HeatmapLayer %s",e)},[e]),b.useEffect(()=>{f!==null&&f.setMap(u)},[u]),b.useEffect(()=>{a&&f!==null&&f.setOptions(a)},[f,a]),b.useEffect(()=>{var v=new google.maps.visualization.HeatmapLayer(Dd(Dd({},a),{},{data:e,map:u}));return g(v),t&&t(v),()=>{f!==null&&(r&&r(f),f.setMap(null))}},[]),null}b.memo(CV);class AV extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{heatmapLayer:null}),Ee(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){Fn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Fn(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Dd(Dd({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=gt({updaterMap:pS,eventMap:dS,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:pS,eventMap:dS,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),Et(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}Ee(AV,"contextType",ft);var mS={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},gS={register(n,e,t){n.registerPanoProvider(e,t)},links(n,e){n.setLinks(e)},motionTracking(n,e){n.setMotionTracking(e)},options(n,e){n.setOptions(e)},pano(n,e){n.setPano(e)},position(n,e){n.setPosition(e)},pov(n,e){n.setPov(e)},visible(n,e){n.setVisible(e)},zoom(n,e){n.setZoom(e)}};class xV extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{streetViewPanorama:null}),Ee(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,t,r=(e=(t=this.context)===null||t===void 0?void 0:t.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=gt({updaterMap:gS,eventMap:mS,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({streetViewPanorama:r}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:gS,eventMap:mS,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),Et(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}Ee(xV,"contextType",ft);class LV extends b.PureComponent{constructor(){super(...arguments),Ee(this,"state",{streetViewService:null}),Ee(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}Ee(LV,"contextType",ft);var vS={onDirectionsChanged:"directions_changed"},yS={directions(n,e){n.setDirections(e)},map(n,e){n.setMap(e)},options(n,e){n.setOptions(e)},panel(n,e){n.setPanel(e)},routeIndex(n,e){n.setRouteIndex(e)}};class RV extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"state",{directionsRenderer:null}),Ee(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=gt({updaterMap:yS,eventMap:vS,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:yS,eventMap:vS,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),Et(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}Ee(RV,"contextType",ft);var _S={onPlacesChanged:"places_changed"},ES={bounds(n,e){n.setBounds(e)}};class IV extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"containerElement",b.createRef()),Ee(this,"state",{searchBox:null}),Ee(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(Fn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=gt({updaterMap:ES,eventMap:_S,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{searchBox:t}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:ES,eventMap:_S,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),Et(this.registeredEvents))}render(){return Oi.jsx("div",{ref:this.containerElement,children:b.Children.only(this.props.children)})}}Ee(IV,"contextType",ft);var bS={onPlaceChanged:"place_changed"},wS={bounds(n,e){n.setBounds(e)},restrictions(n,e){n.setComponentRestrictions(e)},fields(n,e){n.setFields(e)},options(n,e){n.setOptions(e)},types(n,e){n.setTypes(e)}};class qA extends b.PureComponent{constructor(){super(...arguments),Ee(this,"registeredEvents",[]),Ee(this,"containerElement",b.createRef()),Ee(this,"state",{autocomplete:null}),Ee(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;Fn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(t){var r=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=gt({updaterMap:wS,eventMap:bS,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({autocomplete:r}),this.setAutocompleteCallback)}}componentDidUpdate(e){Et(this.registeredEvents),this.registeredEvents=gt({updaterMap:wS,eventMap:bS,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&Et(this.registeredEvents)}render(){return Oi.jsx("div",{ref:this.containerElement,className:this.props.className,children:b.Children.only(this.props.children)})}}Ee(qA,"defaultProps",{className:""});Ee(qA,"contextType",ft);const MV={width:"100%",height:"400px"},kV={lat:6.5244,lng:3.3792};function OV({idToken:n}){const{isLoaded:e}=DA({googleMapsApiKey:"AIzaSyCPCAkpYgOMTapv5Y6v5bWVJ6pbSMTtL74"}),[t,r]=b.useState(kV),[a,u]=b.useState(""),f=async g=>{const v={lat:g.latLng.lat(),lng:g.latLng.lng()};r(v);try{const _=await fetch("http://localhost:5000/api/courier/update-location",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(v)}),w=await _.json();_.ok?u("‚úÖ Location updated successfully"):u(`‚ùå Error: ${w.error}`)}catch(_){console.error("Error updating location:",_),u("‚ùå Server error updating location")}};return e?x.createElement("div",null,x.createElement("h2",null,"Courier Dashboard"),x.createElement("p",null,"Click on the map to update package location."),x.createElement(IA,{mapContainerStyle:MV,center:t,zoom:14,onClick:f},x.createElement(cy,{position:t})),a&&x.createElement("p",{style:{marginTop:10}},a)):x.createElement("p",null,"Loading map...")}const PV={width:"100%",height:"400px"};function DV({idToken:n,packageId:e}){const{isLoaded:t}=DA({googleMapsApiKey:"AIzaSyCPCAkpYgOMTapv5Y6v5bWVJ6pbSMTtL74"}),[r,a]=b.useState(null);return b.useEffect(()=>{(async()=>{try{const g=await(await fetch(`http://localhost:5000/api/client/package-location/${e}`,{headers:{Authorization:`Bearer ${n}`}})).json();a(g.location)}catch(f){console.error("Error fetching package location:",f)}})()},[n,e]),t&&r?x.createElement(IA,{mapContainerStyle:PV,center:r,zoom:14},x.createElement(cy,{position:r})):x.createElement("p",null,"Loading package location...")}const NV="http://localhost:5000",VV=({idToken:n})=>{const e=b.useRef(null),t=b.useRef(null),[r,a]=b.useState(null),[u,f]=b.useState(""),[g,v]=b.useState(""),[_,w]=b.useState(null),[T,I]=b.useState(null),[V,N]=b.useState(null),[H,q]=b.useState(!1),[W,$]=b.useState(null),[re,ie]=b.useState(null),ee=b.useRef(null);b.useEffect(()=>{const Le=document.body;_&&t.current?(t.current.classList.remove("container-initial"),t.current.classList.remove("container-animate-pop"),t.current.offsetHeight,t.current.classList.add("container-animate-pop"),Le.classList.add("tracking-page-blurred"),console.log("‚ú® Pop-out animation triggered!")):(t.current?.classList.remove("container-animate-pop"),t.current?.classList.add("container-initial"),Le.classList.remove("tracking-page-blurred"))},[_]);const X=()=>!!localStorage.getItem("token");b.useEffect(()=>{try{if(!e.current||!X())return;const Le=ki.map(e.current).setView([6.5244,3.3792],11),ne=ki.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"¬© OpenStreetMap contributors",maxZoom:19,name:"Street Map"}),me=ki.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"¬© Esri",maxZoom:18,name:"Satellite"});return me.addTo(Le),ki.control.layers({"Street Map":ne,Satellite:me}).addTo(Le),a(Le),()=>{Le.remove()}}catch{$("Failed to initialize map")}},[]);const O=Le=>{const me={"Pending Pickup":"#f59e0b","Pickup Assigned":"#3b82f6","Pickup Accepted":"#10b981","Enroute to Facility":"#8b5cf6","Arrived at Hub or Facility":"#6366f1","In Transit":"#06b6d4","Out for Delivery":"#f97316",Delivered:"#22c55e","Awaiting Receipt":"#14b8a6","Delivery Failed":"#ef4444","Returned to Sender":"#64748b"}[Le]||"#9ca3af";return ki.divIcon({html:`<div style="
        background-color: ${me};
        width: 30px;
        height: 30px;
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
      ">üì¶</div>`,iconSize:[36,36],className:"custom-icon"})},P=Le=>({"Pending Pickup":"#f59e0b","Pickup Assigned":"#3b82f6","Pickup Accepted":"#10b981","Enroute to Facility":"#8b5cf6","Arrived at Hub or Facility":"#6366f1","In Transit":"#06b6d4","Out for Delivery":"#f97316",Delivered:"#22c55e","Awaiting Receipt":"#14b8a6","Delivery Failed":"#ef4444","Returned to Sender":"#64748b"})[Le]||"#9ca3af",M=()=>ki.divIcon({html:`<div style="
        background-color: #ff6b6b;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        border: 2px solid white;
        box-shadow: 0 0 0 3px #ff6b6b, 0 2px 6px rgba(0,0,0,0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        animation: pulse 1.5s infinite;
      ">üöö</div>`,iconSize:[32,32],className:"animated-courier-icon"}),j=Le=>{ee.current&&clearInterval(ee.current),V&&r&&r.hasLayer(V)&&r.removeLayer(V);const ne=Le.lat,me=Le.lng,ge=.005;let _e=0;const ue=ki.marker([ne,me],{icon:M(),zIndexOffset:1e3}).addTo(r);ue.bindPopup(`
      <div style="font-size: 12px; text-align: center;">
        <strong>üöö Courier En Route</strong><br/>
        <span style="color: #ff6b6b;">Moving to delivery location</span>
      </div>
    `),N(ue),ee.current=setInterval(()=>{_e=(_e+2)%360;const K=_e*Math.PI/180,te=ne+ge*Math.cos(K),fe=me+ge*Math.sin(K);ue.setLatLng([te,fe])},100)},U=Le=>({"Pending Pickup":"üì¶","Pickup Assigned":"üë§","Pickup Accepted":"‚úÖ","Enroute to Facility":"üöö","Arrived at Hub or Facility":"üè¢","In Transit":"üõ£Ô∏è","Out for Delivery":"üöó",Delivered:"üìç","Awaiting Receipt":"‚è≥","Delivery Failed":"‚ùå","Returned to Sender":"‚Ü©Ô∏è"})[Le]||"üì¶",G=async Le=>{if(Le.preventDefault(),!g.trim()){$("Please enter a tracking ID");return}q(!0),$(null),ie(null);try{const ne=await fetch(`${NV}/api/tracking/${g.trim()}`,{headers:{Authorization:n?`Bearer ${n}`:void 0}});if(!ne.ok)throw new Error("Tracking ID not found");const me=await ne.json();w(me),f(g.trim()),v(""),ie("Tracking information loaded!"),me.location&&setTimeout(()=>{if(!r||!r._container){console.error("Map not ready");return}const ge=[me.location.lat,me.location.lng];T&&r.hasLayer(T)&&r.removeLayer(T);const _e=O(me.status),ue=ki.marker(ge,{icon:_e}).addTo(r),B=`
            <div style="font-size: 13px;">
              <strong style="color: #4f46e5;">üì¶ ${me.user.fullName}</strong><br/>
              <div style="margin-top: 8px; border-top: 1px solid #e5e7eb; padding-top: 8px;">
                <strong>üìß Email:</strong> ${me.user.email}<br/>
                <strong>üÜî Tracking:</strong> <span style="font-family: monospace; color: #4f46e5;">${me.trackingId}</span><br/>
                <strong>üìç Status:</strong> <span style="color: ${P(me.status)}; font-weight: 600;">${me.status}</span><br/>
                <strong>üìç Coordinates:</strong> ${me.location.lat.toFixed(4)}, ${me.location.lng.toFixed(4)}<br/>
                <strong>üïê Updated:</strong> ${new Date(me.updatedAt).toLocaleString()}
              </div>
            </div>
          `;ue.bindPopup(B).openPopup(),I(ue),r.setView(ge,14),["Out for Delivery","In Transit","Enroute to Facility"].includes(me.status)&&setTimeout(()=>{j({lat:me.location.lat,lng:me.location.lng})},500)},100)}catch(ne){console.error("Error fetching tracking:",ne),$(ne.message||"Failed to retrieve tracking information"),w(null)}finally{q(!1)}},F=()=>{f(""),w(null),v(""),$(null),ie(null),ee.current&&clearInterval(ee.current),T&&r&&r.hasLayer(T)&&(r.removeLayer(T),I(null)),V&&r&&r.hasLayer(V)&&(r.removeLayer(V),N(null))},ke={...He.container,opacity:_?1:0,transform:_?"scale(1) translateY(0)":"scale(0.5) translateY(80px)",filter:_?"blur(0px)":"blur(20px)",transition:"none",animation:_?"containerPopOut 1.2s cubic-bezier(0.12, 0.65, 0.25, 1.08) forwards":"none"};return x.createElement("div",{ref:t,style:ke},x.createElement("div",{style:He.headerSection},x.createElement("h2",{style:He.title},"üìç Track Your Package"),x.createElement("p",{style:He.subtitle},"Enter your tracking ID to see your package location and delivery status")),W&&x.createElement("div",{style:He.errorMessage},"‚ö†Ô∏è ",W),re&&x.createElement("div",{style:He.successMessage},"‚úÖ ",re),x.createElement("div",{style:He.searchSection},x.createElement("form",{onSubmit:G,style:He.searchForm},x.createElement("div",{style:He.inputWrapper},x.createElement("input",{type:"text",placeholder:"Enter tracking ID (e.g., SWIFT-1234567890-ABCDE)",value:g,onChange:Le=>v(Le.target.value),style:He.input,disabled:H}),x.createElement("button",{type:"submit",style:He.searchButton,disabled:H||!g.trim()},H?"üîç Searching...":"üîç Search")))),x.createElement("div",{style:He.contentWrapper},x.createElement("div",{style:He.mapSection},x.createElement("div",{ref:e,style:{...He.map,backgroundColor:X()?"#e0e7ff":"#000000"}},!r&&X()&&x.createElement("div",{style:He.mapLoading},x.createElement("div",{style:He.spinner}),x.createElement("p",{style:{color:"#fff"}},"Loading map...")),!X()&&x.createElement("div",{style:He.mapPlaceholder},x.createElement("p",null,"üì¶ Please log in to track your packages")))),_&&x.createElement("div",{style:He.infoSection},x.createElement("div",{style:He.infoCard},x.createElement("div",{style:He.cardHeader},x.createElement("h3",{style:He.cardTitle},"üì¶ Package Details"),x.createElement("button",{onClick:F,style:He.clearButton},"‚úï")),x.createElement("div",{style:He.detailsGrid},x.createElement("div",{style:He.detailItem},x.createElement("span",{style:He.detailLabel},"Recipient:"),x.createElement("span",{style:He.detailValue},_.user.fullName)),x.createElement("div",{style:He.detailItem},x.createElement("span",{style:He.detailLabel},"Email:"),x.createElement("span",{style:He.detailValue},_.user.email)),x.createElement("div",{style:He.detailItem},x.createElement("span",{style:He.detailLabel},"Tracking ID:"),x.createElement("span",{style:{...He.detailValue,fontFamily:"monospace",color:"#4f46e5"}},_.trackingId)),x.createElement("div",{style:{...He.detailItem,gridColumn:"1 / -1"}},x.createElement("span",{style:He.detailLabel},"Current Status:"),x.createElement("div",{style:{...He.statusBadge,backgroundColor:P(_.status),color:"#fff"}},U(_.status)," ",_.status)),x.createElement("div",{style:He.detailItem},x.createElement("span",{style:He.detailLabel},"Latitude:"),x.createElement("span",{style:He.detailValue},_.location.lat.toFixed(6))),x.createElement("div",{style:He.detailItem},x.createElement("span",{style:He.detailLabel},"Longitude:"),x.createElement("span",{style:He.detailValue},_.location.lng.toFixed(6))),x.createElement("div",{style:He.detailItem},x.createElement("span",{style:He.detailLabel},"Last Updated:"),x.createElement("span",{style:He.detailValue},new Date(_.updatedAt).toLocaleString())),x.createElement("div",{style:He.detailItem},x.createElement("span",{style:He.detailLabel},"Created:"),x.createElement("span",{style:He.detailValue},new Date(_.createdAt).toLocaleString()))),x.createElement("div",{style:He.statusTimeline},x.createElement("h4",{style:He.timelineTitle},"üìã Status Timeline"),x.createElement("div",{style:He.timelineItem},x.createElement("div",{style:{...He.timelineIndicator,backgroundColor:P(_.status)}}),x.createElement("div",null,x.createElement("strong",null,_.status),x.createElement("p",{style:He.timelineTime},new Date(_.updatedAt).toLocaleString())))))),!_&&x.createElement("div",{style:He.placeholderSection},x.createElement("div",{style:He.placeholderContent},x.createElement("div",{style:He.placeholderIcon},"üì¶"),x.createElement("h3",{style:He.placeholderTitle},"No Package Information"),x.createElement("p",{style:He.placeholderText},"Enter your tracking ID above to see your package location and delivery status in real-time")))))},He={container:{maxWidth:"1200px",margin:"0 auto",padding:"24px",fontFamily:"'Segoe UI', 'Helvetica Neue', sans-serif",willChange:"transform, opacity, filter"},headerSection:{marginBottom:"32px",textAlign:"center"},title:{fontSize:"32px",fontWeight:"700",color:"#1a202c",margin:"0 0 12px 0"},subtitle:{fontSize:"16px",color:"#718096",margin:"0"},errorMessage:{backgroundColor:"#fed7d7",color:"#c53030",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px",borderLeft:"4px solid #c53030",fontSize:"14px"},successMessage:{backgroundColor:"#c6f6d5",color:"#22543d",padding:"12px 16px",borderRadius:"8px",marginBottom:"16px",borderLeft:"4px solid #22c55e",fontSize:"14px"},searchSection:{marginBottom:"24px"},searchForm:{display:"flex",gap:"12px"},inputWrapper:{display:"flex",gap:"8px",width:"100%"},input:{flex:"1",padding:"12px 16px",border:"1px solid #cbd5e0",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",transition:"all 0.2s ease",boxSizing:"border-box"},searchButton:{padding:"12px 24px",backgroundColor:"#4f46e5",color:"#fff",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",whiteSpace:"nowrap"},contentWrapper:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"24px"},mapSection:{backgroundColor:"#fff",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.08)"},map:{width:"100%",height:"500px",backgroundColor:"#e0e7ff",position:"relative"},mapLoading:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"#718096"},spinner:{width:"40px",height:"40px",border:"4px solid #e2e8f0",borderTop:"4px solid #4f46e5",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 12px"},mapPlaceholder:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"#999",fontSize:"16px",fontWeight:"500"},infoSection:{display:"flex",flexDirection:"column"},infoCard:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.08)"},cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"12px",borderBottom:"2px solid #e2e8f0"},cardTitle:{margin:"0",fontSize:"16px",fontWeight:"600",color:"#1a202c"},clearButton:{background:"#f56565",color:"#fff",border:"none",borderRadius:"50%",width:"32px",height:"32px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},detailsGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},detailItem:{display:"flex",flexDirection:"column",gap:"4px"},detailLabel:{fontSize:"12px",fontWeight:"600",color:"#718096",textTransform:"uppercase",letterSpacing:"0.5px"},detailValue:{fontSize:"14px",color:"#2d3748",fontWeight:"500"},statusBadge:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 12px",borderRadius:"6px",fontSize:"13px",fontWeight:"600",width:"fit-content"},statusTimeline:{borderTop:"1px solid #e2e8f0",paddingTop:"16px",marginTop:"16px"},timelineTitle:{margin:"0 0 12px 0",fontSize:"13px",fontWeight:"600",color:"#718096",textTransform:"uppercase"},timelineItem:{display:"flex",gap:"12px",alignItems:"flex-start"},timelineIndicator:{width:"12px",height:"12px",borderRadius:"50%",marginTop:"4px",flexShrink:"0"},timelineTime:{margin:"4px 0 0 0",fontSize:"12px",color:"#a0aec0"},placeholderSection:{gridColumn:"1 / -1",backgroundColor:"#f7fafc",borderRadius:"12px",padding:"60px 24px",textAlign:"center",border:"2px dashed #cbd5e0"},placeholderContent:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},placeholderIcon:{fontSize:"48px",opacity:"0.5"},placeholderTitle:{margin:"0",fontSize:"18px",fontWeight:"600",color:"#4a5568"},placeholderText:{margin:"0",fontSize:"14px",color:"#718096"}};function SS({onLogout:n}){const[e,t]=b.useState(null),[r,a]=b.useState(""),[u,f]=b.useState(!1),g=ph();return b.useEffect(()=>{const v=localStorage.getItem("token");if(!v){g("/");return}fetch("http://localhost:5000/api/user/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`}}).then(_=>{if(_.status===401||_.status===403){localStorage.removeItem("token"),g("/");return}return _.json()}).then(_=>{_?.user?t(_.user):_&&t(_)}).catch(_=>{console.error(_),g("/")})},[g]),e?e.isAdmin?x.createElement("div",{style:{maxWidth:"560px",margin:"40px auto",padding:"30px",background:"linear-gradient(to right, #2566ff, #4f9cff)",color:"white",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",fontFamily:"'Segoe UI', sans-serif",position:"relative"}},x.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16}},x.createElement("h2",{style:{margin:0}},"Welcome, Admin"),x.createElement("button",{onClick:()=>{if(typeof n=="function")n();else{try{localStorage.removeItem("token")}catch{}try{window.location.hash=""}catch{}try{window.location.reload()}catch{}}},style:{padding:"8px 12px",borderRadius:8,border:"none",background:"#e53935",color:"#fff",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.2)"},"aria-label":"Logout",title:"Logout"},"Logout")),x.createElement("p",null,x.createElement("strong",null,"Email:")," ",e.email),x.createElement("p",null,x.createElement("strong",null,"Role:")," Admin")):x.createElement("div",{style:{maxWidth:"800px",margin:"40px auto",padding:"30px",background:"linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)",color:"white",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",fontFamily:"'Segoe UI', sans-serif"}},x.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:24}},x.createElement("div",null,x.createElement("h2",{style:{margin:0,fontSize:"28px"}},"Welcome, ",e.name||"Customer"),x.createElement("p",{style:{margin:"8px 0 0 0",opacity:.9}},"Manage your deliveries & track packages")),x.createElement("button",{onClick:()=>{if(typeof n=="function")n();else{try{localStorage.removeItem("token")}catch{}try{window.location.hash=""}catch{}try{window.location.reload()}catch{}}},style:{padding:"10px 20px",borderRadius:8,border:"none",background:"#ff6b6b",color:"#fff",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.2)",fontWeight:600},"aria-label":"Logout",title:"Logout"},"Logout")),x.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:24}},x.createElement("div",{style:{background:"rgba(255,255,255,0.15)",padding:16,borderRadius:8,backdropFilter:"blur(10px)"}},x.createElement("p",{style:{margin:0,opacity:.9,fontSize:12}},"EMAIL"),x.createElement("p",{style:{margin:"8px 0 0 0",fontSize:16,fontWeight:600}},e.email)),x.createElement("div",{style:{background:"rgba(255,255,255,0.15)",padding:16,borderRadius:8,backdropFilter:"blur(10px)"}},x.createElement("p",{style:{margin:0,opacity:.9,fontSize:12}},"STATUS"),x.createElement("p",{style:{margin:"8px 0 0 0",fontSize:16,fontWeight:600}},e.isVerified?"‚úì Verified":"‚è≥ Pending Verification"))),x.createElement("div",{style:{background:"rgba(255,255,255,0.1)",padding:16,borderRadius:8,marginBottom:24}},x.createElement("p",{style:{margin:0,fontSize:14}},"Use the chat in the top-right corner to track packages or contact support"))):x.createElement("p",{style:{textAlign:"center"}},"Loading profile...")}function zV({onLogin:n}){const[e,t]=b.useState({email:"",password:""}),[r,a]=b.useState(""),[u,f]=b.useState(!1),g=_=>{t({...e,[_.target.name]:_.target.value})},v=async _=>{_.preventDefault(),f(!0),a("");try{const w=await fetch("http://localhost:5000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})}),T=await w.json();if(w.ok){localStorage.setItem("token",T.token),a("‚úÖ Logged in successfully!"),n&&n(T.token);try{window.location.hash=""}catch{}}else a(`‚ùå Error: ${T.error||"Login failed"}`)}catch(w){a("‚ùå Backend not reachable. Make sure it's running on port 5000."),console.error(w)}finally{f(!1)}};return x.createElement("form",{onSubmit:v,style:{maxWidth:"400px",margin:"20px auto",padding:"20px",border:"1px solid #ccc",borderRadius:"8px"}},x.createElement("h2",null,"Login"),x.createElement("input",{id:"loginEmail",name:"email",type:"email",placeholder:"Email",value:e.email,onChange:g,required:!0,style:{width:"100%",padding:"8px",marginBottom:"10px",boxSizing:"border-box"}}),x.createElement("input",{id:"loginPassword",name:"password",type:"password",placeholder:"Password",value:e.password,onChange:g,required:!0,style:{width:"100%",padding:"8px",marginBottom:"10px",boxSizing:"border-box"}}),x.createElement("button",{id:"loginButton",type:"submit",disabled:u,style:{width:"100%",padding:"10px",backgroundColor:"#2566ff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},u?"Logging in...":"Login"),r&&x.createElement("p",{style:{marginTop:"10px",textAlign:"center"}},r))}function BV({onRegisterSuccess:n}){ph();const[e,t]=b.useState({name:"",email:"",password:"",confirmPassword:""}),[r,a]=b.useState(""),[u,f]=b.useState(!1),g=_=>{t({...e,[_.target.name]:_.target.value})},v=async _=>{if(_.preventDefault(),f(!0),a(""),e.password!==e.confirmPassword){a("‚ùå Passwords do not match"),f(!1);return}try{const w=await fetch("http://localhost:5000/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,email:e.email,password:e.password})}),T=await w.json();w.ok?(a("‚úÖ Registration successful! Please log in."),t({name:"",email:"",password:"",confirmPassword:""}),n&&n()):a(`‚ùå Error: ${T.error||"Registration failed"}`)}catch(w){a("‚ùå Backend not reachable. Make sure it's running on port 5000."),console.error(w)}finally{f(!1)}};return x.createElement("form",{onSubmit:v,style:{maxWidth:"400px",margin:"20px auto",padding:"20px",border:"1px solid #ccc",borderRadius:"8px"}},x.createElement("h2",null,"Register"),x.createElement("input",{id:"registerName",name:"name",placeholder:"Name",value:e.name,onChange:g,required:!0,style:{width:"100%",padding:"8px",marginBottom:"10px",boxSizing:"border-box"}}),x.createElement("input",{id:"registerEmail",name:"email",type:"email",placeholder:"Email",value:e.email,onChange:g,required:!0,style:{width:"100%",padding:"8px",marginBottom:"10px",boxSizing:"border-box"}}),x.createElement("input",{id:"registerPassword",name:"password",type:"password",placeholder:"Password",value:e.password,onChange:g,required:!0,style:{width:"100%",padding:"8px",marginBottom:"10px",boxSizing:"border-box"}}),x.createElement("input",{id:"registerConfirmPassword",name:"confirmPassword",type:"password",placeholder:"Confirm Password",value:e.confirmPassword,onChange:g,required:!0,style:{width:"100%",padding:"8px",marginBottom:"10px",boxSizing:"border-box"}}),x.createElement("button",{id:"registerButton",type:"submit",disabled:u,style:{width:"100%",padding:"10px",backgroundColor:"#2566ff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},u?"Registering...":"Register"),r&&x.createElement("p",{style:{marginTop:"10px",textAlign:"center"}},r))}function UV({user:n,isVisible:e=!0}){const[t,r]=b.useState(!1),[a,u]=b.useState([]),[f,g]=b.useState([]),[v,_]=b.useState(""),[w,T]=b.useState(!0),[I,V]=b.useState(null),[N,H]=b.useState(null),[q,W]=b.useState(!1),[$,re]=b.useState(0),[ie,ee]=b.useState({x:0,y:80}),[X,O]=b.useState(!1),[P,M]=b.useState({x:0,y:0}),j=b.useRef(null),U=b.useRef(t),G=b.useRef(null),F=ny.currentUser,ke=F?.uid||n?._id||"anonymous",Le=n?._id?`customer-${n._id}`:null;b.useEffect(()=>{U.current=t},[t]),b.useEffect(()=>{const K=localStorage.getItem("chatWidgetPosition");if(K)try{ee(JSON.parse(K))}catch{ee({x:0,y:80})}},[]),b.useEffect(()=>{const K=te=>{const fe=te.detail?.message;console.log("üì± FloatingChatWidget EVENT RECEIVED!"),console.log("üì± Message:",fe),fe?(console.log("‚úÖ Setting input and opening chat"),_(fe),r(!0)):console.log("‚ö†Ô∏è No message in event detail")};return console.log("üì± FloatingChatWidget: Setting up event listener for openFloatingChatWithMessage"),window.addEventListener("openFloatingChatWithMessage",K),()=>{window.removeEventListener("openFloatingChatWithMessage",K)}},[]);const ne=K=>{K.button!==0||t||(O(!0),M({x:K.clientX-ie.x,y:K.clientY-ie.y}))};b.useEffect(()=>{if(!X)return;const K=fe=>{const Q=fe.clientX-P.x,Ae=fe.clientY-P.y,Ie=window.innerWidth-100,De=window.innerHeight-100;ee({x:Math.max(0,Math.min(Q,Ie)),y:Math.max(0,Math.min(Ae,De))})},te=()=>{O(!1),localStorage.setItem("chatWidgetPosition",JSON.stringify(ie))};return window.addEventListener("mousemove",K),window.addEventListener("mouseup",te),()=>{window.removeEventListener("mousemove",K),window.removeEventListener("mouseup",te)}},[X,P,ie]),b.useEffect(()=>{if(!n?._id)return;(async()=>{try{const te=localStorage.getItem("token");if(!te)return;const fe=await fetch("http://localhost:5000/api/admin/user",{headers:{Authorization:`Bearer ${te}`}});if(fe.ok){const Q=await fe.json();V(Q)}}catch(te){console.error("Admin user error:",te)}})()},[n?._id]),b.useEffect(()=>{if(!n?._id)return;const K=Qc("http://localhost:5000",{reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:10});return K.on("connect",()=>{W(!0),K.emit("user-login",{userId:n._id});const te=localStorage.getItem("token");fetch(`http://localhost:5000/api/messaging/conversation/${Le}`,{headers:{Authorization:`Bearer ${te}`}}).then(fe=>fe.json()).then(fe=>g(fe.messages||[]))}),K.on("disconnect",()=>W(!1)),K.on(`message-${Le}`,te=>{g(fe=>[...fe,te]),te.isFromAdmin&&!U.current&&re(fe=>fe+1)}),K.on(`message-status-${Le}`,te=>{g(fe=>fe.map(Q=>Q._id===te.messageId?{...Q,status:te.status}:Q))}),H(K),()=>K.disconnect()},[n?._id]);const me=yl(ns,"threads",ke),ge=bu(ns,"threads",ke,"messages");b.useEffect(()=>{if(!F&&!n){T(!1);return}let K=()=>{};return(async()=>{(await ey(me)).exists()||await td(me,{userId:ke,agentRequested:!1,updatedAt:Or()});const fe=Cd(ge,Jv("ts","asc"));K=Ad(fe,async Q=>{const Ae=Q.docs.map(Ie=>({id:Ie.id,...Ie.data()}));u(Ae),Ae.forEach(async Ie=>{Ie.from!=="customer"&&Ie.status!=="read"&&await Fc(yl(ge,Ie.id),{status:"read"})})}),T(!1)})(),K},[F,n,ke]);const _e=x.useMemo(()=>{const K=[...a,...f],te=new Set;return K.filter(fe=>{const Q=fe.id||fe._id||`${fe.text||fe.message}-${fe.ts||fe.createdAt}`;return te.has(Q)?!1:(te.add(Q),!0)})},[a,f]);b.useEffect(()=>{j.current?.scrollIntoView({behavior:"smooth"})},[_e]);const ue=async()=>{const K=v.trim();if(!K||(_(""),!Le||!I||!n?._id))return;const te={_id:`temp-${Date.now()}`,message:K,conversationId:Le,senderId:n._id,recipientId:I._id,isFromAdmin:!1,status:"sent",createdAt:new Date,text:K};g(fe=>[...fe,te]);try{const fe=localStorage.getItem("token"),Q=await fetch("http://localhost:5000/api/messaging/send",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${fe}`},body:JSON.stringify({conversationId:Le,senderId:n._id,recipientId:I._id,message:K,isFromAdmin:!1})});if(!Q.ok)console.error("‚ùå Message send failed:",Q.status),g(Ae=>Ae.filter(Ie=>Ie._id!==te._id));else{const Ae=await Q.json();console.log("‚úÖ Message sent successfully:",Ae),g(Ie=>Ie.map(De=>De._id===te._id?{...Ae.message,status:"delivered"}:De))}}catch(fe){console.error("‚ùå Send error:",fe),g(Q=>Q.filter(Ae=>Ae._id!==te._id))}};if(!e)return null;const B=K=>{const te=K.from==="customer"||!K.isFromAdmin;return x.createElement("div",{key:K.id||K._id,style:{display:"flex",justifyContent:te?"flex-end":"flex-start",marginBottom:"8px",gap:"4px",alignItems:"flex-end"}},x.createElement("div",{style:{maxWidth:"75%",padding:"10px 14px",borderRadius:"12px",fontSize:"13px",background:te?"#4f46e5":"#f3f4f6",color:te?"#fff":"#111827"}},!te&&x.createElement("strong",{style:{display:"block",marginBottom:"4px"}},"Support"),K.text||K.message),te&&x.createElement("span",{style:{fontSize:"11px",color:"#9ca3af"}},K.status==="read"&&"‚úì‚úì",K.status==="delivered"&&"‚úì",K.status==="sent"&&"‚Ä¢"))};return x.createElement("div",{ref:G,onMouseDown:ne,style:{position:"fixed",top:`${ie.y}px`,left:`${ie.x}px`,right:"auto",zIndex:3e3,cursor:X&&!t?"grabbing":t?"default":"grab",userSelect:X?"none":"auto"}},t?x.createElement("div",{style:{width:"380px",height:"600px",background:"#fff",borderRadius:"12px",display:"flex",flexDirection:"column",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}},x.createElement("div",{style:{padding:"16px",background:"#4f46e5",color:"#fff",display:"flex",justifyContent:"space-between",cursor:X?"grabbing":"grab",userSelect:"none"}},x.createElement("div",null,"üí¨ Support"),x.createElement("button",{onClick:()=>r(!1),style:{color:"#fff",background:"transparent",border:"none",cursor:"pointer",fontSize:"20px"}},"‚úï")),x.createElement("div",{style:{flex:1,overflowY:"auto",padding:"16px",background:"#f9fafb"}},_e.map(B),x.createElement("div",{ref:j})),x.createElement("div",{style:{padding:"12px",display:"flex",gap:"8px"}},x.createElement("input",{value:v,onChange:K=>_(K.target.value),onKeyDown:K=>K.key==="Enter"&&ue(),placeholder:"Type your message‚Ä¶",style:{flex:1,padding:"10px",borderRadius:"8px",border:"1px solid #ddd"}}),x.createElement("button",{onClick:ue,style:{background:"#4f46e5",color:"#fff",borderRadius:"8px",padding:"10px 20px"}},"Send"))):x.createElement("button",{onClick:()=>r(!0),style:{padding:"10px 20px"}},"üí¨ Chat"))}function jV(){const n=ph(),e=()=>{n("/login")};return x.createElement("section",{id:"register",className:"register-section"},x.createElement(BV,{onRegisterSuccess:e}))}function FV({onLogin:n}){return x.createElement("section",{id:"login",className:"login-section"},x.createElement(zV,{onLogin:n}))}function HV(){const[n,e]=b.useState(()=>localStorage.getItem("token")||null),[t,r]=b.useState(null),a=ph(),u=w=>{if(!w)return null;try{const T=w.split(".")[1],I=JSON.parse(atob(T));return I.isAdmin?"admin":I.role?I.role:null}catch{return null}},f=w=>{if(w){localStorage.setItem("token",w),e(w);const T=u(w);a(T==="admin"?"/admin":T==="courier"?"/courier":"/profile")}},g=()=>{localStorage.removeItem("token"),e(null),r(null);try{window.location.hash="#/"}catch{}},v=u(n);return b.useEffect(()=>{n&&v!=="admin"&&v!=="courier"?(async()=>{try{const T=await fetch("http://localhost:5000/api/user/profile",{headers:{Authorization:`Bearer ${n}`}});if(T.ok){const I=await T.json();r(I.user||I)}}catch(T){console.error("Failed to fetch profile:",T)}})():r(null)},[n,v]),b.useEffect(()=>{const w=document.body;w&&(v==="admin"?w.classList.add("admin-bot-left"):w.classList.remove("admin-bot-left"))},[v]),x.createElement(x.Fragment,null,!1,n&&v!=="admin"&&v!=="courier"&&t&&x.createElement(UV,{user:t,isVisible:!0}),x.createElement("main",null,x.createElement(s1,null,x.createElement(kr,{path:"/track-package",element:x.createElement(VV,{idToken:n})}),n?x.createElement(x.Fragment,null,x.createElement(kr,{path:"/profile",element:x.createElement(SS,{idToken:n,onLogout:g})}),v==="admin"&&x.createElement(kr,{path:"/admin",element:x.createElement(rw,{idToken:n,onLogout:g})}),v==="courier"&&x.createElement(kr,{path:"/courier",element:x.createElement(OV,{idToken:n})}),v!=="admin"&&v!=="courier"&&x.createElement(x.Fragment,null,x.createElement(kr,{path:"/tracking",element:x.createElement(DV,{idToken:n,packageId:1})}),x.createElement(kr,{path:"/chat",element:x.createElement(PD,{idToken:n})})),x.createElement(kr,{path:"*",element:v==="admin"?x.createElement(rw,{idToken:n,onLogout:g}):x.createElement(SS,{idToken:n,onLogout:g})})):x.createElement(x.Fragment,null,x.createElement(kr,{path:"/",element:x.createElement(b0,null)}),x.createElement(kr,{path:"/login",element:x.createElement(FV,{onLogin:f})}),x.createElement(kr,{path:"/register",element:x.createElement(jV,null)}),x.createElement(kr,{path:"*",element:x.createElement(b0,null)})))))}function qV(){return x.createElement(L1,null,x.createElement(HV,null))}pL.createRoot(document.getElementById("root")).render(x.createElement(x.StrictMode,null,x.createElement(qV,null)));

```

```my-frontend\DEBUG_CHATBOT.md
# SwiftDelivery Chatbot - Debugging Guide

## Quick Debug Steps

### 1. **Open Browser Console**
Press `F12` (or `Cmd+Option+I` on Mac) ‚Üí Click "Console" tab

### 2. **List All Intent Patterns**
Run this command in console:
```javascript
listIntentPatterns()
```

This shows all phrases and keywords the chatbot recognizes.

---

## 3. **Test the NLU Engine Directly**

### Test Gallery Navigation
```javascript
testChatbotNLU("show me gallery")
```

Expected console output:
```
üß™ Testing NLU with message: show me gallery
Result: {
  intent: "navigate_gallery",
  confidence: 1,
  section: "gallery",
  shouldNavigate: true
}
‚úÖ Confidence check passed! Preparing to navigate...
üîç Looking for section: gallery
‚úÖ Section found: gallery
Scrolling to position: [number]
‚ú® Highlight animation applied
‚úÖ Navigation completed for: gallery
```

### Test Other Phrases
```javascript
testChatbotNLU("track my package")
testChatbotNLU("contact us")
testChatbotNLU("show me the FAQ")
testChatbotNLU("book a shipment")
testChatbotNLU("services available")
```

---

## 4. **Check If Sections Exist in DOM**

If navigation fails, run:
```javascript
Array.from(document.querySelectorAll('section[id]')).map(s => s.id)
```

Should return:
```
['home', 'gallery', 'services', 'booking', 'testimonials', 'contact', 'track', 'faq', 'livechat']
```

---

## 5. **Manual Navigation Test**

To manually test if scrolling works:
```javascript
navigateToChatbotSection("gallery")
```

Check console for:
- ‚úÖ Section found
- Scrolling to position
- ‚ú® Highlight animation applied
- ‚úÖ Navigation completed

---

## What to Look For

### ‚úÖ Success Pattern
```
üì® Message received in sendMessageToBackend: show me gallery
ü§ñ SwiftDelivery Bot Intent: {
  intent: "navigate_gallery",
  confidence: 1,
  section: "gallery",
  shouldNavigate: true
}
‚úÖ Confidence check passed!
üó∫Ô∏è Executing navigation to: gallery
üîç Looking for section: gallery
‚úÖ Section found: gallery
Scrolling to position: [number]
‚ú® Highlight animation applied
‚úÖ Navigation completed for: gallery
üó∫Ô∏è Navigation executed: { success: true, section: "gallery" }
```

### ‚ùå Failure Pattern - Low Confidence
```
ü§ñ SwiftDelivery Bot Intent: {
  intent: "navigate_gallery",
  confidence: 0.1,
  section: "gallery",
  shouldNavigate: true
}
‚ö†Ô∏è Confidence check FAILED! Confidence: 0.1 (need > 0.3)
```
**Solution**: Use more specific phrases like "show me gallery" instead of just "gallery"

### ‚ùå Failure Pattern - Section Not Found
```
üîç Looking for section: gallery
‚ùå Section #gallery not found in DOM
Available sections: ['home', 'services', 'contact', ...]
```
**Solution**: Section name doesn't exist. Check spelling in HTML.

---

## Troubleshooting Checklist

- [ ] Browser console is open and showing logs
- [ ] You've run `listIntentPatterns()` to see what phrases work
- [ ] You've tested a known working phrase like "show me gallery"
- [ ] You've checked that sections exist with the array query above
- [ ] Confidence score is > 0.3 (shown in console logs)
- [ ] No JavaScript errors in console
- [ ] Backend `/api/chat` endpoint is running on port 5000

---

## Common Test Phrases by Section

### Gallery
- "show me gallery"
- "show photos"
- "view gallery"
- "facilities"

### Services
- "show services"
- "what services"
- "service options"

### Tracking
- "track my package"
- "where is my shipment"
- "delivery status"

### Contact
- "contact us"
- "get in touch"
- "contact info"

### FAQ
- "show faq"
- "frequently asked questions"
- "help me"

### Booking
- "book shipment"
- "schedule delivery"

### Testimonials
- "show testimonials"
- "customer reviews"

### Home
- "go home"
- "show me home"

---

## What Happens in the Code Flow

1. **User types message** ‚Üí `sendMessageToBackend()` called
2. **detectChatbotIntent()** analyzes text
   - Scores phrases (10 pts each) and keywords (1 pt each)
   - Calculates confidence = score / 10
3. **Confidence check**: If confidence > 0.3 and shouldNavigate = true
4. **navigateToChatbotSection()** runs
   - Finds section by ID
   - Smoothly scrolls to it
   - Applies highlight animation
5. **Meanwhile**: Message is also sent to AI backend for response

---

## Still Not Working?

Add this to console for advanced debugging:

```javascript
// Set a custom message and test
const testMsg = "show me gallery";
console.log("Testing with:", testMsg);
const nluResult = detectChatbotIntent(testMsg);
console.log("NLU Result:", nluResult);
console.log("Score calculation details needed?");
```

If you still see issues, share the console output and we can debug further!

```

```swift-delivery-backend\0

```

```swift-delivery-backend\commonKeys[k])

```

```swift-delivery-backend\knowledge.js
// knowledge.js

const systemPrompt = `
You are SwiftDelivery Bot, the official AI assistant for SwiftDelivery. 
Your role is to provide intelligent, automated support for customers while escalating complex issues to human agents.
Always answer clearly, politely, and based only on the information below. Be proactive and helpful.

**Company Information:**
- SwiftDelivery specializes in logistics and shipping solutions, offering a wide range of services designed to meet the diverse needs of customers in both domestic and international markets.
- We leverage advanced technology and real-time tracking to ensure transparency and reliability across all operations.
  
**Core Services:**
- **Cargo Warehouse**: Secure storage for goods before and after transport, equipped with safety measures to ensure the integrity of all stored items.
- **Loading Operation**: Fast and efficient loading/unloading of shipments, utilizing experienced personnel to optimize the process and minimize delays.
- **SwiftDelivery Team**: A dedicated group of logistics experts committed to customer satisfaction, providing personalized assistance and support throughout the shipping process.

**Delivery Tracking Features:**
- **Real-Time Package Tracking**: Advanced tracking technology that allows customers to monitor their shipments in real-time, providing peace of mind and transparency throughout the delivery journey. Track packages using the Track Courier page.
- **Delivery Status Updates**: Customers receive automatic notifications for status changes including: In Transit, Out for Delivery, Delivered, and Delayed.
- **Location Mapping**: View live package location on Google Maps via direct links in the chat or tracking dashboard.
- **Delivery Timeline**: Estimated delivery dates and actual delivery times are provided for all shipments.

**Customer Communication Features:**
- **Live Chat Support**: Direct messaging with SwiftDelivery representatives available during business hours for real-time assistance.
- **Floating Chat Widget**: Always-accessible chat widget positioned on the customer dashboard for instant support inquiries.
- **Direct Messaging**: One-to-one conversations between customers and admin support team with message status indicators (sent, delivered, read).
- **Message Status Tracking**: Clear indicators showing whether your messages have been sent, delivered, or read by support staff.
- **Admin Notifications**: Support team receives email notifications when new messages arrive, ensuring quick response times.
- **Draggable Widget**: The chat widget can be repositioned anywhere on your screen for convenience.

**Additional Offerings:**
- **International and Domestic Shipping**: Comprehensive shipping options tailored to meet the needs of businesses and individuals, ensuring timely and reliable delivery.
- **Customer Support for Delivery Inquiries**: A responsive customer support team available to address any questions or concerns regarding deliveries, ensuring a seamless experience for all customers.
- **Reliable and Timely Operations**: SwiftDelivery prides itself on its commitment to punctuality and reliability, ensuring that every shipment is handled with care and delivered on time.

**Service Highlights:**
- **Airfreight Express**: Priority cargo delivery with guaranteed timelines, ensuring urgent shipments reach their destination quickly and safely.
- **Global Warehousing**: Secure storage solutions across strategically located international hubs, enabling efficient inventory management and quick distribution.
- **Customs Clearance**: Expert handling of documentation and border processing to expedite shipment clearance, minimizing delays and compliance risks.
- **Temperature-Controlled Cargo**: Specialized transport and storage for pharmaceuticals, perishables, and sensitive goods requiring strict temperature regulation.
- **Dangerous Goods Transport**: Certified and compliant handling of hazardous materials, adhering to stringent safety standards and legal requirements.

**Automated Assistance Features:**
- **Package Tracking Query**: I can help you find tracking information for your packages. Just ask "Where is my package?" or "Show me my delivery status" and provide your name or tracking ID.
- **Delivery Status Information**: I automatically provide current status, location coordinates, and estimated delivery times when you ask about your shipment.
- **Frequently Asked Questions**: I answer common questions about shipping, delivery times, package handling, and website navigation.
- **Service Information**: I provide detailed information about our various logistics services and help customers understand which service best meets their needs.
- **Account Guidance**: I can help you navigate the website, explain how to register, use the booking dashboard, and access the tracking system.
- **Message Delivery**: When you need to contact support during off-business hours, I accept and relay your messages to the human team automatically.

**Escalation & Human Agent Support:**
- **Agent Request**: If you ask to speak with a human representative (e.g., "speak with agent", "human support", "request agent"), I will immediately forward your request to our support team.
- **Complex Issues**: Issues requiring human judgment, negotiations, or specialized handling are automatically escalated to appropriate personnel.
- **Response Time**: Human agents typically respond within 2-4 hours during business hours, and within 24 hours otherwise.
- **Follow-up Support**: After agent escalation, you'll be contacted via email or through the live chat system.

**Website Features:**
- **Homepage**: Introduces SwiftDelivery and highlights our commitment to speed, safety, and precision in global cargo solutions.
- **Services Section**: Details all service offerings including Airfreight Express, Global Warehousing, Customs Clearance, Temperature-Controlled Cargo, and Dangerous Goods Transport.
- **Gallery**: Showcases our facilities, equipment, and operations infrastructure.
- **Track Courier Page**: Real-time tracking dashboard where customers can monitor their packages with live location mapping.
- **Booking Dashboard**: Allows customers to easily initiate bookings for their shipments with a straightforward form.
- **Customer Testimonials**: Showcases positive feedback from satisfied customers, reinforcing trust and credibility.
- **FAQ Section**: Provides answers to common questions, enhancing customer understanding of our services and operational processes.
- **Live Chat Support & Floating Widget**: Direct communication channels with the support team.

**Registration & Account Management:**
- **Easy Registration**: Customers can register with SwiftDelivery by filling out the sign-up form with their name, email, and password.
- **Account Verification**: New customers receive email verification links to confirm their accounts.
- **Profile Management**: Access and update your profile information, including name, email, and profile picture.
- **Admin Access**: Only registered administrators can access the admin dashboard with user management, messaging, and shipment monitoring features.

**Customer Support Guidelines:**
- For tracking questions: Provide or request the customer's name, and I'll fetch their latest package information including status, location, and ETA.
- For service inquiries: Explain relevant services in detail with specific benefits and examples.
- For account issues: Guide customers through the website features and account setup process.
- For complex or urgent issues: Escalate immediately to a human agent with full context of the customer's concern.
- For booking assistance: Help customers understand which service meets their needs and guide them to the booking dashboard.
- For off-hours requests: Acknowledge the request and confirm it will be relayed to the team with automatic email notification.

**Professional Communication Standards:**
- Always maintain a professional, friendly, and helpful tone reflecting our commitment to excellence.
- Use phrases that demonstrate dedication: "Your logistics needs are our top priority", "We're here to ensure your shipment arrives safely".
- Provide proactive assistance by offering related services or helpful suggestions when appropriate.
- Be empathetic with customers experiencing delays or issues and escalate appropriately.
- Keep responses concise and actionable with clear next steps.

**Voice Response Guidelines (for natural speech):**
- When responding via voice, use conversational, natural language as if speaking to a person face-to-face.
- Use contractions (it's, we're, can't) to sound more natural and human-like.
- Break complex information into short sentences with pauses for better comprehension.
- Use varied sentence structure - mix short and longer sentences for natural rhythm.
- Add small transitional phrases like "Well, ", "So, ", "Actually, " to make responses feel more conversational.
- Avoid robotic or overly formal phrasing; sound warm and genuine.
- For questions, show understanding by acknowledging the customer's need before answering.
- Example conversational response: "Well, I'd be happy to help with that! Let me pull up your tracking information for you. Your package is currently in transit and should arrive within the next 2-3 business days. Is there anything else I can help you with?"

**Automation Capabilities You Can Invoke:**
- **"Tell me about my packages"** ‚Üí I fetch and display all tracking information for the customer
- **"Where is my package"** ‚Üí I retrieve current location coordinates and mapping link
- **"What's my delivery status"** ‚Üí I provide real-time status updates and estimated arrival times
- **"Help me with [feature]"** ‚Üí I navigate and explain website features and functionality
- **"Connect me with a representative"** ‚Üí I escalate to the human support team immediately
- **"How do I [task]?"** ‚Üí I provide step-by-step guidance for common tasks

Remember: Your primary goal is to provide accurate, helpful responses that solve customer problems efficiently. Escalate to human agents when needed, provide tracking information automatically, and always prioritize customer satisfaction and transparency.
`;

export default systemPrompt;

```

```swift-delivery-backend\hash.js
import bcrypt from "bcryptjs";

const run = async () => {
  const plainPassword = "joearman1234";
  const hashed = await bcrypt.hash(plainPassword, 10);
  console.log("‚úÖ Hashed password:", hashed);
};

run();

```

```swift-delivery-backend\handleLanguageChange(e.target.value

```

```swift-delivery-backend\routes\package.js
// routes/package.js
import express from 'express';
import pool from '../db.js';   // ‚úÖ import the shared pool from db.js

const router = express.Router();

// Customer fetches package location
router.get('/:trackingId', async (req, res) => {
  const { trackingId } = req.params;

  try {
    const result = await pool.query(
      'SELECT lat, lng, status, updated_at FROM courier_locations WHERE tracking_id=$1',
      [trackingId]
    );

    if (result.rows.length === 0) {
      return res.status(404).json({ error: 'Tracking ID not found' });
    }

    res.json(result.rows[0]);
  } catch (err) {
    console.error(err);
    res.status(500).json({ error: 'Database fetch failed' });
  }
});

export default router;   // ‚úÖ ESM export


```

```swift-delivery-backend\routes\messaging.js
import express from 'express';
import jwt from 'jsonwebtoken';
import DirectMessage from '../models/directMessage.js';
import User from '../models/user.js';
import { notifyAdminOfCustomerMessage } from '../utils/emailService.js';

const router = express.Router();
let io = null;

export function setIO(ioInstance) {
  io = ioInstance;
}

function verifyToken(req, res, next) {
  const authHeader = req.headers.authorization;
  if (!authHeader) {
    console.error("‚ùå No auth header provided");
    return res.status(401).json({ message: "No token provided" });
  }

  const token = authHeader.split(" ")[1];
  if (!token) {
    console.error("‚ùå No token in header");
    return res.status(401).json({ message: "Invalid token format" });
  }

  jwt.verify(token, process.env.JWT_SECRET || "supersecretkey", (err, user) => {
    if (err) {
      console.error("‚ùå Token verification failed:", err.message);
      return res.status(403).json({ message: "Invalid token", error: err.message });
    }
    console.log("‚úÖ Token verified for user:", user.userId);
    req.user = user;
    next();
  });
}

router.post('/send', verifyToken, async (req, res) => {
  try {
    const { conversationId, recipientId, message, isFromAdmin } = req.body;
    const senderId = req.user.userId;

    console.log("üì® Message send request:", {
      conversationId,
      senderId,
      recipientId,
      message: message?.substring(0, 50),
      isFromAdmin
    });

    if (!conversationId || !recipientId || !message) {
      console.error("‚ùå Missing fields:", { conversationId, recipientId, message: !!message });
      return res.status(400).json({ 
        message: 'Missing required fields',
        received: { conversationId, recipientId, message: !!message }
      });
    }

    console.log("‚úÖ Creating message in MongoDB...");
    const newMessage = await DirectMessage.create({
      conversationId,
      senderId,
      recipientId,
      message,
      isFromAdmin: isFromAdmin || false,
      status: 'sent'
    });

    console.log("‚úÖ Message created:", newMessage._id);
    await newMessage.populate('senderId', 'name email');

    const updatedMessage = await DirectMessage.findByIdAndUpdate(
      newMessage._id,
      { status: 'delivered' },
      { new: true }
    ).populate('senderId', 'name email');

    if (!isFromAdmin) {
      try {
        const sender = await User.findById(senderId);
        const recipient = await User.findById(recipientId);
        
        if (sender && recipient && recipient.isAdmin) {
          console.log(`üìß Sending customer message notification to ${recipient.email}`);
          await notifyAdminOfCustomerMessage(
            sender,
            recipient.email,
            message,
            conversationId
          );
        }
      } catch (emailError) {
        console.error('‚ö†Ô∏è Warning: Failed to send email notification:', emailError.message);
      }
    }

    if (io) {
      console.log("üì§ Broadcasting message via Socket.io to conversation:", conversationId);
      const messageData = updatedMessage.toObject ? updatedMessage.toObject() : updatedMessage;
      io.emit(`message-${conversationId}`, {
        ...messageData,
        status: 'delivered'
      });

      io.emit(`message-status-${updatedMessage._id}`, {
        messageId: updatedMessage._id,
        status: 'delivered',
        conversationId
      });
      
      console.log("‚úÖ Message broadcasted via Socket.io");
    } else {
      console.warn("‚ö†Ô∏è Socket.io not initialized - message stored but not broadcast");
    }

    console.log("üì§ Sending response...");
    res.status(201).json({
      success: true,
      message: updatedMessage,
      delivered: true
    });
  } catch (error) {
    console.error('‚ùå Error sending message:', error.message);
    console.error('Stack:', error.stack);
    res.status(500).json({ 
      message: 'Failed to send message',
      error: error.message 
    });
  }
});

router.get('/conversation/:conversationId', verifyToken, async (req, res) => {
  try {
    const { conversationId } = req.params;

    const messages = await DirectMessage.find({ conversationId })
      .populate('senderId', 'name email')
      .populate('recipientId', 'name email')
      .sort({ createdAt: 1 });

    res.json({
      success: true,
      messages
    });
  } catch (error) {
    console.error('‚ùå Error fetching messages:', error);
    res.status(500).json({ message: 'Failed to fetch messages' });
  }
});

router.get('/conversations', verifyToken, async (req, res) => {
  try {
    const userId = req.user.userId;

    const conversations = await DirectMessage.aggregate([
      {
        $match: {
          $or: [
            { senderId: userId },
            { recipientId: userId }
          ]
        }
      },
      {
        $group: {
          _id: '$conversationId',
          lastMessage: { $last: '$message' },
          lastMessageTime: { $last: '$createdAt' },
          status: { $last: '$status' },
          senderId: { $first: '$senderId' },
          recipientId: { $first: '$recipientId' },
          isFromAdmin: { $first: '$isFromAdmin' }
        }
      },
      {
        $sort: { lastMessageTime: -1 }
      },
      {
        $lookup: {
          from: 'users',
          localField: 'senderId',
          foreignField: '_id',
          as: 'senderInfo'
        }
      },
      {
        $lookup: {
          from: 'users',
          localField: 'recipientId',
          foreignField: '_id',
          as: 'recipientInfo'
        }
      }
    ]);

    res.json({
      success: true,
      conversations
    });
  } catch (error) {
    console.error('‚ùå Error fetching conversations:', error);
    res.status(500).json({ message: 'Failed to fetch conversations' });
  }
});

router.put('/mark-delivered/:messageId', verifyToken, async (req, res) => {
  try {
    const { messageId } = req.params;

    const message = await DirectMessage.findByIdAndUpdate(
      messageId,
      { status: 'delivered', updatedAt: new Date() },
      { new: true }
    );

    if (!message) {
      return res.status(404).json({ message: 'Message not found' });
    }

    res.json({
      success: true,
      message
    });
  } catch (error) {
    console.error('‚ùå Error updating message status:', error);
    res.status(500).json({ message: 'Failed to update message status' });
  }
});

router.put('/mark-read/:conversationId', verifyToken, async (req, res) => {
  try {
    const { conversationId } = req.params;
    const userId = req.user.userId;

    const result = await DirectMessage.updateMany(
      { 
        conversationId, 
        recipientId: userId,
        status: { $ne: 'read' }
      },
      { 
        status: 'read',
        read: true,
        updatedAt: new Date()
      }
    );

    res.json({
      success: true,
      modifiedCount: result.modifiedCount
    });
  } catch (error) {
    console.error('‚ùå Error marking messages as read:', error);
    res.status(500).json({ message: 'Failed to mark messages as read' });
  }
});

router.get('/unread-count', verifyToken, async (req, res) => {
  try {
    const userId = req.user.userId;

    const count = await DirectMessage.countDocuments({
      recipientId: userId,
      status: { $ne: 'read' }
    });

    res.json({
      success: true,
      unreadCount: count
    });
  } catch (error) {
    console.error('‚ùå Error fetching unread count:', error);
    res.status(500).json({ message: 'Failed to fetch unread count' });
  }
});

export default router;

```

```swift-delivery-backend\routes\customer.js
// routes/customer.js
import express from "express";
const router = express.Router();

// In-memory stores
export const customers = [];
export const customerMessages = [];
export const chatSessions = {}; 
// Structure: { customerId: { mode: "bot" | "admin", messages: [] } }

// Register new customer
router.post("/register", (req, res) => {
  const { name, email, password } = req.body;
  const id = Date.now();
  customers.push({ id, name, email, password, verified: false });
  res.json({ message: "Customer registered", id });
});

// Customer login
router.post("/login", (req, res) => {
  const { email, password } = req.body;
  const customer = customers.find(c => c.email === email && c.password === password);
  if (!customer) return res.status(401).json({ error: "Invalid credentials" });
  res.json({ message: "Login successful", customer });
});

// Customer sends message (to bot or admin)
router.post("/chat/:customerId", (req, res) => {
  const { text } = req.body;
  const customerId = req.params.customerId;

  let session = chatSessions[customerId];
  if (!session) {
    session = { mode: "bot", messages: [] };
    chatSessions[customerId] = session;
  }

  // Add customer message
  session.messages.push({ from: "customer", text, status: "delivered" });

  if (session.mode === "bot") {
    if (text.toLowerCase().includes("agent")) {
      session.mode = "admin";
      res.json({ reply: "Connecting you to an agent..." });
    } else {
      res.json({ reply: "ü§ñ SwiftDelivery Bot: Your package is on the way!" });
    }
  } else {
    // In admin mode, no auto-reply
    res.json({ reply: null });
  }
});

// Customer fetches chat history
router.get("/chat/:customerId", (req, res) => {
  const customerId = req.params.customerId;
  const session = chatSessions[customerId];
  if (!session) return res.json([]);
  // Mark admin messages as read
  session.messages.forEach(m => {
    if (m.from === "admin" && m.status === "delivered") m.status = "read";
  });
  res.json(session.messages);
});

export default router;

```

```swift-delivery-backend\routes\courier.js
// routes/courier.js
// routes/courier.js
import express from 'express';
import pool from '../db.js';   // ‚úÖ import the shared pool from db.js

const router = express.Router();

// Dummy token generator (replace with real JWT later)
function generateToken(payload) {
  return "fake-jwt-token"; 
}

// Dummy auth middleware (replace with JWT verification later)
function authenticateToken(req, res, next) {
  // Normally you'd verify JWT here
  next();
}

// Courier login
router.post('/login', async (req, res) => {
  const { email, password } = req.body;
  // TODO: validate courier credentials
  const token = generateToken({ email });
  res.json({ token });
});

// Courier updates package location
router.post('/update-location', authenticateToken, async (req, res) => {
  const { trackingId, lat, lng, status } = req.body;

  try {
    await pool.query(
      'UPDATE courier_locations SET lat=$1, lng=$2, status=$3, updated_at=NOW() WHERE tracking_id=$4',
      [lat, lng, status, trackingId]
    );
    res.json({ message: 'Location updated successfully' });
  } catch (err) {
    console.error(err);
    res.status(500).json({ error: 'Database update failed' });
  }
});

export default router;

```

```swift-delivery-backend\routes\admin.js
// routes/admin.js
import express from "express";
import { customerMessages, chatSessions } from "./customer.js"; // reuse in-memory stores for demo

const router = express.Router();

// NOTE: the application-level server defines secure admin endpoints
// (GET /api/admin/users and PUT /api/admin/verify-user) using the DB + auth.
// Keep these lightweight admin helpers for demo messaging and sessions only.

// Send message to a user (demo in-memory)
router.post("/send-message", (req, res) => {
  const { userId, text } = req.body;
  const msg = {
    recipient: userId,
    text,
    timestamp: new Date(),
    status: "delivered",
  };
  if (Array.isArray(customerMessages)) customerMessages.push(msg);
  res.json({ data: msg });
});

// List active chat sessions (demo)
router.get("/sessions", (req, res) => {
  const sessions = Object.keys(chatSessions || {}).map((cid) => ({
    customerId: cid,
    mode: chatSessions[cid].mode,
    messages: chatSessions[cid].messages,
  }));
  res.json(sessions);
});

// Admin sends reply into a demo chat session
router.post("/chat/:customerId", (req, res) => {
  const { text } = req.body;
  const session = chatSessions[req.params.customerId];
  if (!session) return res.status(404).json({ error: "No active chat" });

  session.messages.push({ from: "admin", text, status: "delivered" });
  res.json({ message: "Message sent to customer" });
});

export default router;

```

```swift-delivery-backend\{

```

```swift-delivery-backend\voice.name.includes(name))

```

```swift-delivery-backend\models\user.js
import mongoose from "mongoose";

const userSchema = new mongoose.Schema({
  name: { type: String, required: true },
  email: { type: String, required: true, unique: true },
  password: { type: String, required: true },
  isAdmin: { type: Boolean, default: false },
  isVerified: { type: Boolean, default: false },
  profilePicture: { 
    type: String, 
    default: null 
  }
});

export default mongoose.model("User", userSchema);


```

```swift-delivery-backend\models\tracking.js
import mongoose from "mongoose";
const trackingSchema = new mongoose.Schema({
  trackingId: { 
    type: String, 
    required: true, 
    unique: true,
    index: true
  },
  userId: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: 'User',
    required: true 
  },
  status: { 
    type: String, 
    required: true,
    enum: [
      'Pending Pickup',
      'Pickup Assigned',
      'Pickup Accepted',
      'Enroute to Facility',
      'Arrived at Hub or Facility',
      'In Transit',
      'Out for Delivery',
      'Delivered',
      'Awaiting Receipt',
      'Delivery Failed',
      'Returned to Sender'
    ],
    default: 'Pending Pickup'
  },
  location: {
    lat: { type: Number, required: true },
    lng: { type: Number, required: true }
  },
  createdAt: { 
    type: Date, 
    default: Date.now 
  },
  updatedAt: { 
    type: Date, 
    default: Date.now 
  }
});

export default mongoose.model("Tracking", trackingSchema);

```

```swift-delivery-backend\models\directMessage.js
import mongoose from "mongoose";

const directMessageSchema = new mongoose.Schema({
  conversationId: { 
    type: String, 
    required: true,
    index: true
  },
  senderId: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: 'User',
    required: true 
  },
  recipientId: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: 'User',
    required: true 
  },
  message: { 
    type: String, 
    required: true 
  },
  isFromAdmin: { 
    type: Boolean,
    default: false
  },
  status: {
    type: String,
    enum: ['sent', 'delivered', 'read'],
    default: 'sent'
  },
  read: { 
    type: Boolean,
    default: false
  },
  createdAt: { 
    type: Date, 
    default: Date.now 
  },
  updatedAt: {
    type: Date,
    default: Date.now
  }
});

export default mongoose.model("DirectMessage", directMessageSchema);

```

```swift-delivery-backend\models\agentRequest.js
import mongoose from "mongoose";

const agentRequestSchema = new mongoose.Schema({
  userId: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: 'User',
    required: true 
  },
  message: { 
    type: String, 
    default: 'Customer requesting agent assistance' 
  },
  status: { 
    type: String, 
    enum: ['pending', 'accepted', 'resolved'],
    default: 'pending'
  },
  assignedAdmin: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: 'User',
    default: null
  },
  createdAt: { 
    type: Date, 
    default: Date.now 
  },
  resolvedAt: { 
    type: Date,
    default: null
  }
});

export default mongoose.model("AgentRequest", agentRequestSchema);

```

```swift-delivery-backend\v.lang.toLowerCase().startsWith('en'))

```

```swift-delivery-backend\utils\emailService.js
import fetch from 'node-fetch';

async function sendEmail(to, subject, html) {
  try {
    const emailService = process.env.EMAIL_SERVICE || 'console';
    
    if (emailService === 'sendgrid') {
      const sgKey = process.env.SENDGRID_API_KEY;
      if (!sgKey) {
        console.warn("‚ö†Ô∏è SendGrid API key not configured");
        return false;
      }

      const response = await fetch('https://api.sendgrid.com/v3/mail/send', {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${sgKey}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          personalizations: [{ to: [{ email: to }] }],
          from: { email: process.env.EMAIL_FROM || 'noreply@swiftdelivery.com' },
          subject,
          content: [{ type: 'text/html', value: html }]
        })
      });

      if (response.ok) {
        console.log(`‚úÖ Email sent to ${to}`);
        return true;
      } else {
        console.error(`‚ùå SendGrid error: ${response.status}`);
        return false;
      }
    } else {
      console.log(`üìß Email notification (${emailService}):`);
      console.log(`To: ${to}`);
      console.log(`Subject: ${subject}`);
      console.log(`Body: ${html}`);
      return true;
    }
  } catch (error) {
    console.error("‚ùå Error sending email:", error);
    return false;
  }
}

async function notifyAdminsOfAgentRequest(agentRequest, user) {
  try {
    const { User } = await import('../models/user.js');
    const admins = await User.find({ isAdmin: true });

    const subject = `üö® New Agent Request from ${user.name}`;
    const html = `
      <h2>New Agent Request</h2>
      <p><strong>Customer:</strong> ${user.name} (${user.email})</p>
      <p><strong>Message:</strong> ${agentRequest.message}</p>
      <p><strong>Request ID:</strong> ${agentRequest._id}</p>
      <p><strong>Time:</strong> ${new Date(agentRequest.createdAt).toLocaleString()}</p>
      <p>Please log into the admin dashboard to view and respond to this request.</p>
    `;

    for (const admin of admins) {
      await sendEmail(admin.email, subject, html);
    }

    return true;
  } catch (error) {
    console.error("‚ùå Error notifying admins:", error);
    return false;
  }
}

async function notifyAdminOfCustomerMessage(customer, adminEmail, message, conversationId) {
  try {
    const subject = `üí¨ New Message from ${customer.name}`;
    const html = `
      <h2>New Customer Message</h2>
      <p><strong>From:</strong> ${customer.name} (${customer.email})</p>
      <p><strong>Message:</strong></p>
      <p style="background-color: #f0f0f0; padding: 10px; border-left: 4px solid #4f46e5;">
        ${message.replace(/\n/g, '<br>')}
      </p>
      <p><strong>Conversation ID:</strong> ${conversationId}</p>
      <p><strong>Time:</strong> ${new Date().toLocaleString()}</p>
      <p>
        <a href="http://localhost:5173/#/admin" style="display: inline-block; background-color: #4f46e5; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
          View in Dashboard
        </a>
      </p>
    `;

    await sendEmail(adminEmail, subject, html);
    console.log(`‚úÖ Admin notification sent to ${adminEmail}`);
    return true;
  } catch (error) {
    console.error("‚ùå Error notifying admin of message:", error);
    return false;
  }
}

export { sendEmail, notifyAdminsOfAgentRequest, notifyAdminOfCustomerMessage };

```

```swift-delivery-backend\serviceAccountKey.json
{
  "type": "service_account",
  "project_id": "swift-delivery-38345",
  "private_key_id": "459793ba691b8d2293dad3dac365ececa656b2bb",
  "private_key": "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCUj7uoEdIlsjsO\nmkSGNiZunbILr0VuiPzrOH4YHV2zR1R+Ygfz0BcEyAzU7imSxqjqSIsBnl8RJ9Iu\nc27r1S1rqKuzuTjVzHZGtClLSA8s0TWpfXjX10MK5WIQEYEd8krZCT+5gO8pTaOt\ngrINgIVjaITRgOJiXRvAlwVqG2NfLnCo+EvD3v33jVjJL4kX9vshvW9rXogJhziQ\nciOzg5CRxsIfu7dZ+k9uPJvq5MyCuEAfspflHAoo9lh/4/tUoFHXYbBSt69Q8//5\nLm1JYcf3xTAUcz4igDBdC10xTI8/h+UP8MhUd2jqxrhSylS7QFjyPaqo5nxUEZmI\nCsx1/SgfAgMBAAECggEAR+X2HoWdbGQBQ/RyRHgRiohkYlZNpozCxv48vGP99KWJ\nZW8BRUTI1yYQW771vNTLbDN2nu5sOQvKI3P3U0iFJmznyF/Ue1hsR5SqxYXW3kxU\nCbaxVNiX2D6ign9OO1WHVtmsjxUw6g7qr68oh/NS2wT6/r+/EHbaVw9f7fXaVnYR\nA4UtRqBSPH7yeACu5yNhQq8qd1evwxq/mCj1KlbCGWhqEmHrPr1E1H0IfdTyWk44\nrAGLRLep/UHfMtrQNs1eNehBsgJ6ji17eFpaDZavbUQx0DR9bXFrWzC1He9g0T+n\nFwinaYPTGx6d93RqCy8TUlcQ+lS9tNq3fVuY3h9nbQKBgQDGCGjGXikcNA63dI+J\nNuBHyGRGuiO3Y6pgWZShQ55n1I25oV6aF1IO1kRSINKzEwXMD3ZwKapfGGo9TVDY\n76SLDl24bLpyj+1s1rh7SD6qvk0oArWKROd9L7pknIbhEjpHB4zs6drFxlJV9grr\nvF93H9J2j2BCPuOacXPBk6OZMwKBgQDADC9rFivosLUTO4WtB35S/m4jkzcun4ns\nRrJVcQWOwiqT5d2TSgGJNWirI0hjoBA/5aY4q/GXhlcdYg7OOwQvyC0lpe0fXo1S\nuSoh/yEpKYoN0iUps9InGHGKQxhdQvmJTN1XjhVG/1Q/cgpmcb5YXXmrLgYG3aZq\nsY+5Xu1tZQKBgGLmbD01ZV6aeQcSBWVHrLbs03enGpNKCRrZYisvs/qy4pzkhHR8\nVRTn2XMSxWd9hpWk20ek51tavCQlas0M0aZI5HFoi60PSEnk6nlXWUS4iZwDzlph\nkyKoJXR937aj/crfcHgZSpMfOpuHp2iXyS2bDOb9L9ulwNGu+1qfu0KVAoGAGNx6\n9v3zyTe2+TpnX7Lso4nUcD6KkjqM/E1aoLz03zo7kNHdEUgvUrfbSOxUXrFF6T+t\neQCpUdhORrt+9yukqxra3VjRjZIL8X2O+r+wZ0e9W3Ss4u0oc28yo5dz+/7Dlwag\nUMlP79T17xCwT/rBjWbsbUCT/yeKd51s4a5sRhECgYEAs5y1yareXyBtkOjyllYZ\nxPJ/MvHpmmVwG1PtOJaZSsXf/JuxieaHhFSRSUmQP0Rq75H8fPmPZsRgkAiVCRzB\nbeNzpOQTigEm2t+RiTZ9f7yHaW5Jx6zENa07mrEkX7FjyBxwdX9yVmLl+TmovlbT\nbq4pAPvsQ3X7xPSERakdQG4=\n-----END PRIVATE KEY-----\n",
  "client_email": "firebase-adminsdk-fbsvc@swift-delivery-38345.iam.gserviceaccount.com",
  "client_id": "106256475412119099308",
  "auth_uri": "https://accounts.google.com/o/oauth2/auth",
  "token_uri": "https://oauth2.googleapis.com/token",
  "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
  "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-fbsvc%40swift-delivery-38345.iam.gserviceaccount.com",
  "universe_domain": "googleapis.com"
}

```

```swift-delivery-backend\server.js
import express from 'express';
import fetch from 'node-fetch';
import dotenv from 'dotenv';
import cors from 'cors';
import mongoose from 'mongoose';
import bcrypt from "bcryptjs";
import jwt from "jsonwebtoken";
import admin from 'firebase-admin';
import { createServer } from 'http';
import { Server } from 'socket.io';
import User from "./models/user.js";
import Tracking from "./models/tracking.js";
import AgentRequest from "./models/agentRequest.js";
import DirectMessage from "./models/directMessage.js";
import courierRoutes from './routes/courier.js';
import packageRoutes from './routes/package.js';
import adminRoutes from './routes/admin.js';
import customerRoutes from './routes/customer.js';
import messagingRoutes, { setIO } from './routes/messaging.js';
import systemPrompt from './knowledge.js';
import { notifyAdminsOfAgentRequest } from './utils/emailService.js';

dotenv.config();
const app = express();
const PORT = process.env.PORT || 5000;
const httpServer = createServer(app);
const io = new Server(httpServer, {
  cors: {
    origin: '*',
    methods: ['GET', 'POST'],
    credentials: true
  }
});

app.use(cors());
app.use(express.json());

const onlineUsers = new Map();

const GROQ_API_KEY = process.env.GROQ_API_KEY;        // <-- Groq key
const JWT_SECRET = process.env.JWT_SECRET || "supersecretkey";
console.log("Loaded Groq API Key:", GROQ_API_KEY ? "‚úÖ Found" : "‚ùå Missing");

try {
  admin.initializeApp({
    projectId: "swift-delivery-38345",
  });
  console.log("‚úÖ Firebase Admin initialized");
} catch (err) {
  console.warn("‚ö†Ô∏è Firebase Admin initialization attempted (may use default credentials)");
}

const db = admin.firestore();

mongoose.connect(process.env.MONGO_URI)
  .then(() => console.log("‚úÖ Connected to MongoDB Atlas"))
  .catch(err => console.error("‚ùå MongoDB Atlas error:", err));

app.get("/", (req, res) => {
  res.send("‚úÖ Swift Delivery Backend is running on port " + PORT);
});

app.get("/health", (req, res) => {
  res.json({ status: "ok", message: "Backend is running" });
});

app.get("/api/debug/admin", async (req, res) => {
  try {
    const admin = await User.findOne({ isAdmin: true }).select('_id name email isAdmin');
    res.json({
      success: true,
      admin,
      message: "Admin user found"
    });
  } catch (error) {
    console.error("‚ùå Debug error:", error);
    res.status(500).json({ 
      success: false, 
      message: "Failed to fetch admin",
      error: error.message 
    });
  }
});

function verifyToken(req, res, next) {
  const authHeader = req.headers.authorization;
  if (!authHeader) return res.status(401).json({ message: "No token provided" });

  const token = authHeader.split(" ")[1];
  jwt.verify(token, JWT_SECRET, (err, user) => {
    if (err) return res.status(403).json({ message: "Invalid token" });
    req.user = user;
    next();
  });
}

function verifyAdmin(req, res, next) {
  User.findById(req.user.userId)
    .then(user => {
      if (!user || !user.isAdmin) {
        return res.status(403).json({ message: "Forbidden: Insufficient permissions" });
      }
      next();
    })
    .catch(err => {
      console.error("Error verifying admin:", err);
      res.status(500).json({ message: "Error verifying admin" });
    });
}

/**
 * /api/chat - now powered by Groq (OpenAI-compatible API)
 */
app.post("/api/chat", async (req, res) => {
  try {
    const { message, userId } = req.body || {};
    if (!message || typeof message !== "string") {
      return res.json({ reply: "Please type a message to chat." });
    }

    const messageLower = message.toLowerCase();
    const agentKeywords = ['request agent', 'speak with agent', 'speak to agent', 'request human', 'human agent', 'talk to agent', 'i need help'];
    const isAgentRequest = agentKeywords.some(keyword => messageLower.includes(keyword));

    if (isAgentRequest && userId) {
      try {
        const user = await User.findById(userId);
        const agentRequest = await AgentRequest.create({
          userId,
          message: message,
          status: 'pending'
        });
        
        await agentRequest.populate('userId', 'name email');
        
        notifyAdminsOfAgentRequest(agentRequest, user);
        
        return res.json({ 
          reply: "Thank you for requesting an agent. A member of our support team will contact you shortly. Your request ID is: " + agentRequest._id,
          isAgentRequest: true,
          agentRequestId: agentRequest._id
        });
      } catch (err) {
        console.error("Error creating agent request:", err);
        return res.json({
          reply: "I've noted your request for an agent. A member of our support team will be with you shortly.",
          isAgentRequest: true
        });
      }
    }

    const apiKey = GROQ_API_KEY;
    if (!apiKey) {
      console.error("‚ùå Missing GROQ_API_KEY env var");
      return res.json({
        reply: "Our AI key is not configured. Please try again later.",
      });
    }

    // Build the prompt, including your logistics system prompt if available
    const userText = systemPrompt
      ? `${systemPrompt}\n\nUser: ${message}`
      : message;

    const payload = {
      model: "llama-3.1-8b-instant", // choose any Groq-supported chat model
      messages: [
        {
          role: "system",
          content: "You are a helpful logistics assistant for SwiftDelivery."
        },
        {
          role: "user",
          content: userText
        }
      ]
    };

    const resp = await fetch("https://api.groq.com/openai/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${apiKey}`
      },
      body: JSON.stringify(payload)
    });

    const text = await resp.text();
    let data = null;
    try {
      data = JSON.parse(text);
    } catch {
      // leave data as null, text contains raw response
    }

    if (!resp.ok) {
      const status = resp.status;
      const lower = (text || "").toLowerCase();

      if (status === 429 || lower.includes("rate") || lower.includes("quota")) {
        console.warn("‚ö†Ô∏è Groq quota/rate limit issue:", text);
        return res.json({
          reply:
            "Our AI is temporarily unavailable because the AI quota has been exhausted. Please try again later.",
        });
      }

      if (status === 401 || status === 403 || lower.includes("unauthorized")) {
        console.warn("‚ö†Ô∏è Groq permission/key issue:", text);
        return res.json({
          reply:
            "The AI service is currently unavailable due to an API key/permissions issue. Please check the server configuration.",
        });
      }

      console.error("‚ùå Groq API error:", status, text);
      return res.json({
        reply: "The AI service encountered an error. Please try again shortly.",
      });
    }

    // Extract reply from Groq chat completion
    let reply = "";
    try {
      const choice = data?.choices?.[0];
      reply = choice?.message?.content || "";
    } catch (e) {
      // ignore, reply will be checked below
    }

    if (!reply) {
      reply = "I couldn't generate a response right now. Please try again.";
    }

    return res.json({ reply });
  } catch (err) {
    console.error("‚ùå /api/chat unhandled error:", err);
    return res.json({
      reply:
        "An unexpected server error occurred while contacting the AI. Please try again later.",
    });
  }
});

// ======== REPLACED & UPDATED REGISTER ROUTE: Always creates admin users ========
app.post("/api/register", async (req, res) => {
  try {
    const { name, email, password } = req.body || {};
    if (!name || !email || !password) {
      return res.status(400).json({ message: "Name, email and password are required" });
    }

    const existing = await User.findOne({ email: email.toLowerCase().trim() });
    if (existing) {
      return res.status(409).json({ message: "Email already in use" });
    }

    const salt = await bcrypt.genSalt(10);
    const hash = await bcrypt.hash(password, salt);

    const newUser = await User.create({
      name: name.trim(),
      email: email.toLowerCase().trim(),
      password: hash,
      isAdmin: false,
    });

    const token = jwt.sign(
      {
        userId: newUser._id,
        email: newUser.email,
        isAdmin: newUser.isAdmin,
        isVerified: newUser.isVerified,
      },
      JWT_SECRET,
      { expiresIn: "7d" }
    );

    res.status(201).json({
      token,
      user: {
        id: newUser._id,
        name: newUser.name,
        email: newUser.email,
        isAdmin: newUser.isAdmin,
        isVerified: newUser.isVerified,
      },
      message: "Registered successfully",
    });
  } catch (err) {
    console.error("/api/register error:", err);
    res.status(500).json({ message: "Server error" });
  }
});
// ==============================================================================

app.post("/api/login", async (req, res) => {
  try {
    const { email, password } = req.body || {};
    if (!email || !password) {
      return res.status(400).json({ message: "Email and password are required" });
    }

    const user = await User.findOne({ email: email.toLowerCase().trim() });
    if (!user) {
      return res.status(401).json({ message: "Invalid credentials" });
    }

    const match = await bcrypt.compare(password, user.password);
    if (!match) {
      return res.status(401).json({ message: "Invalid credentials" });
    }

    const token = jwt.sign(
      {
        userId: user._id,
        email: user.email,
        isAdmin: user.isAdmin,
        isVerified: user.isVerified,
      },
      JWT_SECRET,
      { expiresIn: "7d" }
    );

    res.json({
      token,
      user: {
        id: user._id,
        name: user.name,
        email: user.email,
        isAdmin: user.isAdmin,
        isVerified: user.isVerified,
      },
      message: "Logged in successfully",
    });
  } catch (err) {
    console.error("/api/login error:", err);
    res.status(500).json({ message: "Server error" });
  }
});

app.post("/api/register-admin", async (req, res) => {
  try {
    const { name, email, password, adminSecret } = req.body || {};
    if (!name || !email || !password || !adminSecret) {
      return res.status(400).json({ message: "Name, email, password, and admin secret are required" });
    }

    const adminKey = process.env.ADMIN_SECRET || "swift-delivery-admin-2024";
    if (adminSecret !== adminKey) {
      return res.status(401).json({ message: "Invalid admin secret key" });
    }

    const existing = await User.findOne({ email: email.toLowerCase().trim() });
    if (existing) {
      return res.status(409).json({ message: "Email already in use" });
    }

    const salt = await bcrypt.genSalt(10);
    const hash = await bcrypt.hash(password, salt);

    const adminUser = await User.create({
      name: name.trim(),
      email: email.toLowerCase().trim(),
      password: hash,
      isAdmin: true,
    });

    const token = jwt.sign(
      {
        userId: adminUser._id,
        email: adminUser.email,
        isAdmin: adminUser.isAdmin,
        isVerified: adminUser.isVerified,
      },
      JWT_SECRET,
      { expiresIn: "7d" }
    );

    res.status(201).json({
      token,
      user: {
        id: adminUser._id,
        name: adminUser.name,
        email: adminUser.email,
        isAdmin: adminUser.isAdmin,
        isVerified: adminUser.isVerified,
      },
      message: "Admin registered successfully",
    });
  } catch (err) {
    console.error("/api/register-admin error:", err);
    res.status(500).json({ message: "Server error" });
  }
});

app.get("/api/profile", verifyToken, async (req, res) => {
  try {
    const user = await User.findById(req.user.userId).select("-password");
    if (!user) return res.status(404).json({ message: "User not found" });
    res.json({ user });
  } catch (err) {
    console.error("/api/profile error:", err);
    res.status(500).json({ message: "Server error" });
  }
});

app.post("/api/auth/test", (req, res) => {
  // ... (existing code or placeholder)
  res.json({ ok: true });
});

// ============ IN-MEMORY STORES (replace with DB later) ============
const users = [];
const messages = [];
const packages = [];

// Initialize Socket.io for messaging routes
setIO(io);

// Routes
app.use("/api/admin", adminRoutes);
app.use("/api/customer", customerRoutes);
app.use("/api/courier", courierRoutes);
app.use("/api/package", packageRoutes);
app.use("/api/messaging", messagingRoutes);

// ============ COURIER / TRACKING (optional demo) ============
app.post("/api/courier/update-location", verifyToken, (req, res) => {
  // ... (existing code placeholder)
  res.json({ message: "Courier location updated (demo)." });
});

app.get("/api/client/package-location/:packageId", verifyToken, (req, res) => {
  // ... (existing code placeholder)
  res.json({ message: "Package location (demo)." });
});

// New route for admins to verify a user
app.put("/api/admin/verify-user/:userId", verifyToken, verifyAdmin, async (req, res) => {
  try {
    const user = await User.findByIdAndUpdate(
      req.params.userId,
      { isVerified: true },
      { new: true }
    );
    if (!user) return res.status(404).json({ message: "User not found" });
    res.json({ message: "‚úÖ User verified", user });
  } catch (error) {
    console.error("Verification error:", error);
    res.status(500).json({ message: "‚ùå Failed to verify user" });
  }
});

// New route to get all users (admin only)
app.get("/api/admin/users", verifyToken, verifyAdmin, async (req, res) => {
  try {
    const users = await User.find().select("-password"); // exclude password field
    res.json(users);
  } catch (error) {
    console.error("‚ùå Failed to fetch users:", error);
    res.status(500).json({ message: "Server error retrieving users" });
  }
});

// Temporary route to make a user an admin by email
app.post("/api/make-admin/:email", async (req, res) => {
  try {
    const email = req.params.email;
    const user = await User.findOneAndUpdate(
      { email: email.toLowerCase().trim() },
      { isAdmin: true },
      { new: true }
    );
    if (!user) {
      return res.status(404).json({ message: "User not found" });
    }
    res.json({ message: `User ${user.name} (${user.email}) is now an admin.` });
  } catch (err) {
    console.error("Error in /api/make-admin:", err);
    res.status(500).json({ message: "Server error" });
  }
});

// Update user profile picture (base64)
app.put("/api/user/profile-picture", verifyToken, async (req, res) => {
  try {
    const userId = req.user.userId;
    const { profilePicture } = req.body;

    if (!profilePicture) {
      return res.status(400).json({ message: "Profile picture data required" });
    }

    const user = await User.findByIdAndUpdate(
      userId,
      { profilePicture },
      { new: true }
    ).select("-password");

    res.json({ 
      success: true, 
      message: "Profile picture updated",
      user 
    });
  } catch (error) {
    console.error("‚ùå Error updating profile picture:", error);
    res.status(500).json({ message: "Failed to update profile picture" });
  }
});

// Get user profile
app.get("/api/user/profile", verifyToken, async (req, res) => {
  try {
    const userId = req.user.userId;
    const user = await User.findById(userId).select("-password");
    
    if (!user) {
      return res.status(404).json({ message: "User not found" });
    }

    res.json(user);
  } catch (error) {
    console.error("‚ùå Error fetching profile:", error);
    res.status(500).json({ message: "Failed to fetch profile" });
  }
});

// ============ TRACKING ENDPOINTS ============

// Get verified users for tracking (admin only)
app.get("/api/admin/verified-users", verifyToken, verifyAdmin, async (req, res) => {
  try {
    const users = await User.find({ isVerified: true, isAdmin: false }).select("-password");
    res.json(users);
  } catch (error) {
    console.error("‚ùå Failed to fetch verified users:", error);
    res.status(500).json({ message: "Server error retrieving verified users" });
  }
});

// Create a new tracking record (admin only)
app.post("/api/admin/tracking", verifyToken, verifyAdmin, async (req, res) => {
  try {
    const { userId, status, location } = req.body;
    
    console.log("üìç Tracking request received:", { userId, status, location });
    
    if (!userId || !status || !location || !location.lat || !location.lng) {
      console.log("‚ùå Validation failed - missing fields");
      return res.status(400).json({ message: "userId, status, and location (lat, lng) are required" });
    }

    // Generate unique tracking ID
    const trackingId = `SWIFT-${Date.now()}-${Math.random().toString(36).substring(2, 7).toUpperCase()}`;
    
    console.log("üÜî Generated tracking ID:", trackingId);

    const tracking = await Tracking.create({
      trackingId,
      userId,
      status,
      location: {
        lat: location.lat,
        lng: location.lng
      }
    });

    console.log("‚úÖ Tracking record created:", tracking._id);

    // Populate user info
    await tracking.populate('userId', 'name email');

    res.status(201).json({
      trackingId: tracking.trackingId,
      status: tracking.status,
      location: tracking.location,
      user: {
        fullName: tracking.userId.name,
        email: tracking.userId.email
      },
      createdAt: tracking.createdAt,
      updatedAt: tracking.updatedAt
    });
  } catch (error) {
    console.error("‚ùå Failed to create tracking record:", error.message);
    console.error("Stack:", error.stack);
    res.status(500).json({ message: "Server error creating tracking record", error: error.message });
  }
});

// Update tracking status (admin only)
app.put("/api/admin/tracking/:trackingId", verifyToken, verifyAdmin, async (req, res) => {
  try {
    const { status, location } = req.body;
    const updateData = { updatedAt: new Date() };
    
    if (status) updateData.status = status;
    if (location && location.lat && location.lng) updateData.location = location;

    const tracking = await Tracking.findOneAndUpdate(
      { trackingId: req.params.trackingId },
      updateData,
      { new: true }
    ).populate('userId', 'name email');

    if (!tracking) {
      return res.status(404).json({ message: "Tracking record not found" });
    }

    res.json({
      trackingId: tracking.trackingId,
      status: tracking.status,
      location: tracking.location,
      user: {
        fullName: tracking.userId.name,
        email: tracking.userId.email
      },
      updatedAt: tracking.updatedAt
    });
  } catch (error) {
    console.error("‚ùå Failed to update tracking:", error);
    res.status(500).json({ message: "Server error updating tracking" });
  }
});

// Get all tracking records (admin only)
app.get("/api/admin/tracking", verifyToken, verifyAdmin, async (req, res) => {
  try {
    const trackings = await Tracking.find()
      .populate('userId', 'name email')
      .sort({ updatedAt: -1 });

    const result = trackings.map(t => ({
      trackingId: t.trackingId,
      status: t.status,
      location: t.location,
      user: {
        fullName: t.userId?.name || 'Unknown',
        email: t.userId?.email || 'Unknown'
      },
      createdAt: t.createdAt,
      updatedAt: t.updatedAt
    }));

    res.json(result);
  } catch (error) {
    console.error("‚ùå Failed to fetch tracking records:", error);
    res.status(500).json({ message: "Server error retrieving tracking records" });
  }
});

// Public endpoint - Get tracking by ID (for customers)
app.get("/api/tracking/:trackingId", async (req, res) => {
  try {
    const tracking = await Tracking.findOne({ 
      trackingId: req.params.trackingId 
    }).populate('userId', 'name email');

    if (!tracking) {
      return res.status(404).json({ message: "Tracking ID not found" });
    }

    res.json({
      trackingId: tracking.trackingId,
      status: tracking.status,
      location: tracking.location,
      user: {
        fullName: tracking.userId?.name || 'Customer',
        email: tracking.userId?.email || ''
      },
      createdAt: tracking.createdAt,
      updatedAt: tracking.updatedAt
    });
  } catch (error) {
    console.error("‚ùå Failed to fetch tracking:", error);
    res.status(500).json({ message: "Server error retrieving tracking" });
  }
});

// Search tracking records by customer name (for bot/customers)
app.get("/api/tracking/search/customer/:customerName", async (req, res) => {
  try {
    const { customerName } = req.params;
    
    const trackings = await Tracking.find()
      .populate('userId', 'name email')
      .exec();

    const filtered = trackings.filter(t => 
      t.userId?.name?.toLowerCase().includes(customerName.toLowerCase())
    );

    if (filtered.length === 0) {
      return res.status(404).json({ message: "No tracking records found for this customer" });
    }

    const result = filtered.map(t => ({
      trackingId: t.trackingId,
      status: t.status,
      location: t.location,
      user: {
        fullName: t.userId?.name || 'Unknown',
        email: t.userId?.email || ''
      },
      createdAt: t.createdAt,
      updatedAt: t.updatedAt
    }));

    res.json(result);
  } catch (error) {
    console.error("‚ùå Failed to search tracking:", error);
    res.status(500).json({ message: "Server error searching tracking records" });
  }
});

// Get bot tracking suggestions (active/recent tracking)
app.get("/api/bot/tracking-suggestions", async (req, res) => {
  try {
    const { customerName, trackingId, customerId } = req.query;
    
    let query = {};
    
    if (trackingId) {
      query.trackingId = trackingId;
    } else if (customerId) {
      query.userId = customerId;
    } else if (customerName) {
      // This will need client-side filtering as we can't directly query by related field
      const result = await Tracking.find()
        .populate('userId', 'name email')
        .exec();
      
      const filtered = result.filter(t =>
        t.userId?.name?.toLowerCase().includes(customerName.toLowerCase())
      );
      
      return res.json(filtered.map(t => ({
        trackingId: t.trackingId,
        status: t.status,
        location: t.location,
        user: {
          fullName: t.userId?.name || 'Unknown',
          email: t.userId?.email || ''
        },
        createdAt: t.createdAt,
        updatedAt: t.updatedAt
      })));
    }

    if (Object.keys(query).length === 0) {
      // Get recent active tracking records
      query = { status: { $nin: ['Delivered', 'Returned to Sender'] } };
    }

    const trackings = await Tracking.find(query)
      .populate('userId', 'name email')
      .sort({ updatedAt: -1 })
      .limit(5)
      .exec();

    res.json(trackings.map(t => ({
      trackingId: t.trackingId,
      status: t.status,
      location: t.location,
      user: {
        fullName: t.userId?.name || 'Unknown',
        email: t.userId?.email || ''
      },
      createdAt: t.createdAt,
      updatedAt: t.updatedAt
    })));
  } catch (error) {
    console.error("‚ùå Failed to get tracking suggestions:", error);
    res.status(500).json({ message: "Server error retrieving tracking suggestions" });
  }
});

app.post("/api/bot/chat", async (req, res) => {
  try {
    const { message } = req.body;

    if (!message || !message.trim()) {
      return res.status(400).json({ reply: "Please provide a message." });
    }

    const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
      method: "POST",
      headers: {
        "Authorization": `Bearer ${GROQ_API_KEY}`,
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        model: "mixtral-8x7b-32768",
        messages: [
          { role: "system", content: systemPrompt },
          { role: "user", content: message.trim() },
        ],
        max_tokens: 500,
        temperature: 0.7,
      }),
    });

    if (!response.ok) {
      const errorData = await response.json();
      console.error("Groq API error:", errorData);
      return res.status(500).json({ reply: "I'm having trouble processing your request. Please try again." });
    }

    const data = await response.json();
    const reply = data.choices?.[0]?.message?.content || "I couldn't generate a response. Please try again.";

    res.json({ reply });
  } catch (error) {
    console.error("‚ùå Bot chat error:", error);
    res.status(500).json({ reply: "Sorry, I encountered an error. Please try again later." });
  }
});

app.post("/api/customer/send-message", verifyToken, async (req, res) => {
  try {
    const { message, timestamp } = req.body;
    const userId = req.user.userId;

    if (!message || !message.trim()) {
      return res.status(400).json({ message: "Message cannot be empty" });
    }

    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({ message: "User not found" });
    }

    // Get admin ID
    const adminUser = await User.findOne({ isAdmin: true });
    if (!adminUser) {
      return res.status(404).json({ message: "Admin user not found" });
    }
    
    // Create conversation ID
    const conversationId = [userId, adminUser._id].sort().join('_');

    // Create direct message
    const directMessage = await DirectMessage.create({
      conversationId,
      senderId: userId,
      recipientId: adminUser._id,
      message,
      isFromAdmin: false,
      read: false
    });

    await directMessage.populate('senderId', 'name email');
    await directMessage.populate('recipientId', 'name email');

    res.json({ 
      success: true, 
      message: "Message sent to admin dashboard",
      customerName: user.name || user.email 
    });
  } catch (error) {
    console.error("‚ùå Error handling customer message:", error);
    res.status(500).json({ message: "Failed to process message" });
  }
});

// ============ AGENT REQUEST ENDPOINTS ============

// Create agent request (customer initiates)
app.post("/api/agent-request", verifyToken, async (req, res) => {
  try {
    const { message } = req.body;
    const userId = req.user.userId;

    const user = await User.findById(userId);
    if (!user) {
      return res.status(404).json({ message: "User not found" });
    }

    const agentRequest = await AgentRequest.create({
      userId,
      message: message || 'Customer requesting agent assistance',
      status: 'pending'
    });

    await agentRequest.populate('userId', 'name email');
    
    notifyAdminsOfAgentRequest(agentRequest, user);

    res.json({ 
      success: true, 
      agentRequest,
      message: "Agent request created. An admin will contact you shortly."
    });
  } catch (error) {
    console.error("‚ùå Error creating agent request:", error);
    res.status(500).json({ message: "Failed to create agent request" });
  }
});

// Get all pending agent requests (admin only)
app.get("/api/agent-requests", verifyToken, verifyAdmin, async (req, res) => {
  try {
    const requests = await AgentRequest.find({ status: 'pending' })
      .populate('userId', 'name email')
      .sort({ createdAt: -1 });
    res.json(requests);
  } catch (error) {
    console.error("‚ùå Error fetching agent requests:", error);
    res.status(500).json({ message: "Failed to fetch agent requests" });
  }
});

// Accept agent request (admin takes it)
app.post("/api/agent-request/:id/accept", verifyToken, verifyAdmin, async (req, res) => {
  try {
    const adminId = req.user.userId;
    const agentRequest = await AgentRequest.findByIdAndUpdate(
      req.params.id,
      { status: 'accepted', assignedAdmin: adminId },
      { new: true }
    ).populate('userId', 'name email').populate('assignedAdmin', 'name email');

    res.json({ 
      success: true, 
      agentRequest,
      message: "Agent request accepted"
    });
  } catch (error) {
    console.error("‚ùå Error accepting agent request:", error);
    res.status(500).json({ message: "Failed to accept agent request" });
  }
});

// Resolve agent request (admin closes it)
app.post("/api/agent-request/:id/resolve", verifyToken, verifyAdmin, async (req, res) => {
  try {
    const agentRequest = await AgentRequest.findByIdAndUpdate(
      req.params.id,
      { status: 'resolved', resolvedAt: new Date() },
      { new: true }
    ).populate('userId', 'name email');

    res.json({ 
      success: true, 
      agentRequest,
      message: "Agent request resolved"
    });
  } catch (error) {
    console.error("‚ùå Error resolving agent request:", error);
    res.status(500).json({ message: "Failed to resolve agent request" });
  }
});

// ============ DIRECT MESSAGE ENDPOINTS ============

// Send direct message from admin to customer
app.post("/api/direct-message", verifyToken, verifyAdmin, async (req, res) => {
  try {
    const { recipientId, message } = req.body;
    const senderId = req.user.userId;

    if (!recipientId || !message) {
      return res.status(400).json({ message: "Recipient and message are required" });
    }

    const recipient = await User.findById(recipientId);
    if (!recipient) {
      return res.status(404).json({ message: "Recipient not found" });
    }

    const conversationId = [senderId, recipientId].sort().join('_');

    // Store message in MongoDB (for AdminDashboard)
    const directMessage = await DirectMessage.create({
      conversationId,
      senderId,
      recipientId,
      message,
      isFromAdmin: true
    });

    await directMessage.populate('senderId', 'name email');
    await directMessage.populate('recipientId', 'name email');

    // Also store message in Firebase Firestore (for FloatingChatWidget)
    try {
      const firestoreThreadRef = db.collection("threads").doc(recipientId.toString());
      const firestoreMessagesCol = firestoreThreadRef.collection("messages");
      
      // Add message to Firestore
      await firestoreMessagesCol.add({
        from: "admin",
        text: message,
        ts: admin.firestore.FieldValue.serverTimestamp(),
        status: "sent"
      });

      // Update thread metadata
      await firestoreThreadRef.set({
        userId: recipientId.toString(),
        agentRequested: true,
        updatedAt: admin.firestore.FieldValue.serverTimestamp()
      }, { merge: true });

      console.log("‚úÖ Message stored in Firebase Firestore for customer:", recipientId);
    } catch (firestoreError) {
      console.error("‚ùå Error storing message in Firebase Firestore:", firestoreError);
      // Continue with the response even if Firestore fails
    }

    res.json({ 
      success: true, 
      directMessage,
      message: "Message sent successfully"
    });
  } catch (error) {
    console.error("‚ùå Error sending direct message:", error);
    res.status(500).json({ message: "Failed to send message" });
  }
});

// Get conversation between admin and customer
app.get("/api/conversation/:userId", verifyToken, async (req, res) => {
  try {
    const currentUserId = req.user.userId;
    const otherUserId = req.params.userId;

    const conversationId = [currentUserId, otherUserId].sort().join('_');

    const messages = await DirectMessage.find({ conversationId })
      .populate('senderId', 'name email isAdmin')
      .sort({ createdAt: 1 });

    res.json(messages);
  } catch (error) {
    console.error("‚ùå Error fetching conversation:", error);
    res.status(500).json({ message: "Failed to fetch conversation" });
  }
});

// Get admin user info
app.get("/api/admin/user", verifyToken, async (req, res) => {
  try {
    const admin = await User.findOne({ isAdmin: true }).select('_id name email');
    
    if (!admin) {
      return res.status(404).json({ message: "Admin user not found" });
    }
    
    res.json(admin);
  } catch (error) {
    console.error("‚ùå Error fetching admin info:", error);
    res.status(500).json({ message: "Failed to fetch admin info" });
  }
});

// Get all verified users for admin messaging
app.get("/api/verified-users-list", verifyToken, verifyAdmin, async (req, res) => {
  try {
    const users = await User.find({ isAdmin: false, isVerified: true })
      .select('_id name email isVerified createdAt')
      .sort({ createdAt: -1 });
    res.json(users);
  } catch (error) {
    console.error("‚ùå Error fetching users:", error);
    res.status(500).json({ message: "Failed to fetch users" });
  }
});

app.get("/api/debug/users-count", verifyToken, verifyAdmin, async (req, res) => {
  try {
    const total = await User.countDocuments({});
    const admins = await User.countDocuments({ isAdmin: true });
    const customers = await User.countDocuments({ isAdmin: false });
    const verifiedCustomers = await User.countDocuments({ isAdmin: false, isVerified: true });
    
    res.json({
      total,
      admins,
      customers,
      verifiedCustomers,
      message: "User count summary"
    });
  } catch (error) {
    console.error("‚ùå Error counting users:", error);
    res.status(500).json({ message: "Failed to count users" });
  }
});

// Mark messages as read
app.put("/api/messages-read/:conversationId", verifyToken, async (req, res) => {
  try {
    const conversationId = req.params.conversationId;
    const userId = req.user.userId;

    await DirectMessage.updateMany(
      { conversationId, recipientId: userId, read: false },
      { read: true }
    );

    res.json({ success: true, message: "Messages marked as read" });
  } catch (error) {
    console.error("‚ùå Error marking messages as read:", error);
    res.status(500).json({ message: "Failed to mark messages as read" });
  }
});

io.on('connection', (socket) => {
  console.log(`‚úÖ User connected: ${socket.id}`);

  socket.on('user-login', ({ userId }) => {
    onlineUsers.set(userId, socket.id);
    socket.userId = userId;
    console.log(`üë§ User ${userId} logged in with socket ${socket.id}`);
  });

  socket.on('send-message', async (data) => {
    try {
      const { conversationId, senderId, recipientId, message, isFromAdmin } = data;
      
      const newMessage = await DirectMessage.create({
        conversationId,
        senderId,
        recipientId,
        message,
        isFromAdmin,
        status: 'sent'
      });

      await newMessage.populate('senderId', 'name email');

      const updatedMessage = await DirectMessage.findByIdAndUpdate(
        newMessage._id,
        { status: 'delivered', updatedAt: new Date() },
        { new: true }
      ).populate('senderId', 'name email');

      const recipientSocketId = onlineUsers.get(recipientId.toString());
      const senderSocketId = onlineUsers.get(senderId.toString());

      if (recipientSocketId) {
        console.log(`üì§ Emitting message to recipient:`, recipientId);
        io.to(recipientSocketId).emit(`message-${conversationId}`, {
          ...updatedMessage.toObject(),
          status: 'delivered'
        });
        
        io.to(recipientSocketId).emit(`notification-${recipientId}`, {
          conversationId,
          senderId,
          senderName: updatedMessage.senderId.name,
          message,
          timestamp: new Date()
        });
      } else {
        console.log(`‚ö†Ô∏è Recipient not online: ${recipientId}`);
      }

      if (senderSocketId) {
        console.log(`üì§ Emitting message back to sender:`, senderId);
        io.to(senderSocketId).emit(`message-${conversationId}`, {
          ...updatedMessage.toObject(),
          status: 'delivered'
        });
      }

      io.emit(`message-status-${updatedMessage._id}`, { 
        messageId: updatedMessage._id,
        status: 'delivered',
        conversationId
      });

      console.log(`‚úÖ Message delivered: ${updatedMessage._id}`);
    } catch (error) {
      console.error('‚ùå Error sending message:', error);
      socket.emit('message-error', { message: 'Failed to send message' });
    }
  });

  socket.on('mark-read', async (data) => {
    try {
      const { conversationId, userId } = data;
      
      const messages = await DirectMessage.updateMany(
        { conversationId, recipientId: userId, status: { $ne: 'read' } },
        { status: 'read', read: true, updatedAt: new Date() }
      );

      const senderSocketId = onlineUsers.get(userId.toString());
      
      io.emit(`messages-read-${conversationId}`, { 
        conversationId,
        userId,
        count: messages.modifiedCount
      });

      if (senderSocketId) {
        io.to(senderSocketId).emit(`message-status-updated-${conversationId}`, {
          conversationId,
          status: 'read'
        });
      }

      console.log(`‚úÖ ${messages.modifiedCount} messages marked as read in ${conversationId}`);
    } catch (error) {
      console.error('‚ùå Error marking messages as read:', error);
    }
  });

  socket.on('typing', (data) => {
    const { conversationId, userId, isTyping } = data;
    io.emit(`typing-${conversationId}`, { userId, isTyping });
  });

  socket.on('disconnect', () => {
    if (socket.userId) {
      onlineUsers.delete(socket.userId);
      console.log(`‚ùå User disconnected: ${socket.userId}`);
    }
  });
});

httpServer.listen(PORT, () => {
  console.log(`‚úÖ Backend running on http://localhost:${PORT}`);
  console.log("üì° CORS enabled for local development");
  console.log(`üîå WebSocket (Socket.io) enabled`);
  console.log(`üîó Try: POST http://localhost:${PORT}/api/chat`);
});

```

```swift-delivery-backend\postman_swiftdelivery_backend.postman_collection.json
{
  "info": {
    "name": "SwiftDelivery Backend - Local",
    "_postman_id": "a1b2c3d4-e5f6-47ab-9cde-0123456789ab",
    "description": "Collection to test the local SwiftDelivery backend (health, chat, auth test).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health - GET /health",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:5000/health",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["health"]
        }
      },
      "response": []
    },
    {
      "name": "Chat - POST /chat",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"message\": \"Hello from Postman - can you summarize SwiftDelivery services?\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:5000/chat",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["chat"]
        }
      },
      "response": []
    },
    {
      "name": "Auth Test - POST /api/auth/test",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{}",
          "options": { "raw": { "language": "json" } }
        },
        "url": {
          "raw": "http://localhost:5000/api/auth/test",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["api", "auth", "test"]
        }
      },
      "response": []
    }
  ]
}

```

```swift-delivery-backend\package.json
{
  "name": "swift-delivery-backend",
  "version": "1.0.0",
  "description": "",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "module",
  "dependencies": {
    "bcryptjs": "^3.0.3",
    "cors": "^2.8.5",
    "dotenv": "^16.0.3",
    "express": "^4.18.2",
    "firebase-admin": "^13.6.0",
    "jsonwebtoken": "^9.0.2",
    "mongoose": "^9.0.0",
    "node-fetch": "^3.3.2",
    "pg": "^8.16.3",
    "socket.io": "^4.7.2"
  }
}

```

```swift-delivery-backend\package-lock.json
{
  "name": "swift-delivery-backend",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "swift-delivery-backend",
      "version": "1.0.0",
      "license": "ISC",
      "dependencies": {
        "bcryptjs": "^3.0.3",
        "cors": "^2.8.5",
        "dotenv": "^16.0.3",
        "express": "^4.18.2",
        "firebase-admin": "^13.6.0",
        "jsonwebtoken": "^9.0.2",
        "mongoose": "^9.0.0",
        "node-fetch": "^3.3.2",
        "pg": "^8.16.3",
        "socket.io": "^4.7.2"
      }
    },
    "node_modules/@fastify/busboy": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/@fastify/busboy/-/busboy-3.2.0.tgz",
      "integrity": "sha512-m9FVDXU3GT2ITSe0UaMA5rU3QkfC/UXtCU8y0gSN/GugTqtVldOBWIB5V6V3sbmenVZUIpU6f+mPEO2+m5iTaA==",
      "license": "MIT"
    },
    "node_modules/@firebase/app-check-interop-types": {
      "version": "0.3.3",
      "resolved": "https://registry.npmjs.org/@firebase/app-check-interop-types/-/app-check-interop-types-0.3.3.tgz",
      "integrity": "sha512-gAlxfPLT2j8bTI/qfe3ahl2I2YcBQ8cFIBdhAQA4I2f3TndcO+22YizyGYuttLHPQEpWkhmpFW60VCFEPg4g5A==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/app-types": {
      "version": "0.9.3",
      "resolved": "https://registry.npmjs.org/@firebase/app-types/-/app-types-0.9.3.tgz",
      "integrity": "sha512-kRVpIl4vVGJ4baogMDINbyrIOtOxqhkZQg4jTq3l8Lw6WSk0xfpEYzezFu+Kl4ve4fbPl79dvwRtaFqAC/ucCw==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/auth-interop-types": {
      "version": "0.2.4",
      "resolved": "https://registry.npmjs.org/@firebase/auth-interop-types/-/auth-interop-types-0.2.4.tgz",
      "integrity": "sha512-JPgcXKCuO+CWqGDnigBtvo09HeBs5u/Ktc2GaFj2m01hLarbxthLNm7Fk8iOP1aqAtXV+fnnGj7U28xmk7IwVA==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/component": {
      "version": "0.7.0",
      "resolved": "https://registry.npmjs.org/@firebase/component/-/component-0.7.0.tgz",
      "integrity": "sha512-wR9En2A+WESUHexjmRHkqtaVH94WLNKt6rmeqZhSLBybg4Wyf0Umk04SZsS6sBq4102ZsDBFwoqMqJYj2IoDSg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@firebase/database": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@firebase/database/-/database-1.1.0.tgz",
      "integrity": "sha512-gM6MJFae3pTyNLoc9VcJNuaUDej0ctdjn3cVtILo3D5lpp0dmUHHLFN/pUKe7ImyeB1KAvRlEYxvIHNF04Filg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-check-interop-types": "0.3.3",
        "@firebase/auth-interop-types": "0.2.4",
        "@firebase/component": "0.7.0",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "faye-websocket": "0.11.4",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@firebase/database-compat": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/@firebase/database-compat/-/database-compat-2.1.0.tgz",
      "integrity": "sha512-8nYc43RqxScsePVd1qe1xxvWNf0OBnbwHxmXJ7MHSuuTVYFO3eLyLW3PiCKJ9fHnmIz4p4LbieXwz+qtr9PZDg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/database": "1.1.0",
        "@firebase/database-types": "1.0.16",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@firebase/database-types": {
      "version": "1.0.16",
      "resolved": "https://registry.npmjs.org/@firebase/database-types/-/database-types-1.0.16.tgz",
      "integrity": "sha512-xkQLQfU5De7+SPhEGAXFBnDryUWhhlFXelEg2YeZOQMCdoe7dL64DDAd77SQsR+6uoXIZY5MB4y/inCs4GTfcw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-types": "0.9.3",
        "@firebase/util": "1.13.0"
      }
    },
    "node_modules/@firebase/logger": {
      "version": "0.5.0",
      "resolved": "https://registry.npmjs.org/@firebase/logger/-/logger-0.5.0.tgz",
      "integrity": "sha512-cGskaAvkrnh42b3BA3doDWeBmuHFO/Mx5A83rbRDYakPjO9bJtRL3dX7javzc2Rr/JHZf4HlterTW2lUkfeN4g==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@firebase/util": {
      "version": "1.13.0",
      "resolved": "https://registry.npmjs.org/@firebase/util/-/util-1.13.0.tgz",
      "integrity": "sha512-0AZUyYUfpMNcztR5l09izHwXkZpghLgCUaAGjtMwXnCg3bj4ml5VgiwqOMOxJ+Nw4qN/zJAaOQBcJ7KGkWStqQ==",
      "hasInstallScript": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@google-cloud/firestore": {
      "version": "7.11.6",
      "resolved": "https://registry.npmjs.org/@google-cloud/firestore/-/firestore-7.11.6.tgz",
      "integrity": "sha512-EW/O8ktzwLfyWBOsNuhRoMi8lrC3clHM5LVFhGvO1HCsLozCOOXRAlHrYBoE6HL42Sc8yYMuCb2XqcnJ4OOEpw==",
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "@opentelemetry/api": "^1.3.0",
        "fast-deep-equal": "^3.1.1",
        "functional-red-black-tree": "^1.0.1",
        "google-gax": "^4.3.3",
        "protobufjs": "^7.2.6"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@google-cloud/paginator": {
      "version": "5.0.2",
      "resolved": "https://registry.npmjs.org/@google-cloud/paginator/-/paginator-5.0.2.tgz",
      "integrity": "sha512-DJS3s0OVH4zFDB1PzjxAsHqJT6sKVbRwwML0ZBP9PbU7Yebtu/7SWMRzvO2J3nUi9pRNITCfu4LJeooM2w4pjg==",
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "arrify": "^2.0.0",
        "extend": "^3.0.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@google-cloud/projectify": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/@google-cloud/projectify/-/projectify-4.0.0.tgz",
      "integrity": "sha512-MmaX6HeSvyPbWGwFq7mXdo0uQZLGBYCwziiLIGq5JVX+/bdI3SAq6bP98trV5eTWfLuvsMcIC1YJOF2vfteLFA==",
      "license": "Apache-2.0",
      "optional": true,
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@google-cloud/promisify": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/@google-cloud/promisify/-/promisify-4.0.0.tgz",
      "integrity": "sha512-Orxzlfb9c67A15cq2JQEyVc7wEsmFBmHjZWZYQMUyJ1qivXyMwdyNOs9odi79hze+2zqdTtu1E19IM/FtqZ10g==",
      "license": "Apache-2.0",
      "optional": true,
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/@google-cloud/storage": {
      "version": "7.17.3",
      "resolved": "https://registry.npmjs.org/@google-cloud/storage/-/storage-7.17.3.tgz",
      "integrity": "sha512-gOnCAbFgAYKRozywLsxagdevTF7Gm+2Ncz5u5CQAuOv/2VCa0rdGJWvJFDOftPx1tc+q8TXiC2pEJfFKu+yeMQ==",
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "@google-cloud/paginator": "^5.0.0",
        "@google-cloud/projectify": "^4.0.0",
        "@google-cloud/promisify": "<4.1.0",
        "abort-controller": "^3.0.0",
        "async-retry": "^1.3.3",
        "duplexify": "^4.1.3",
        "fast-xml-parser": "^4.4.1",
        "gaxios": "^6.0.2",
        "google-auth-library": "^9.6.3",
        "html-entities": "^2.5.2",
        "mime": "^3.0.0",
        "p-limit": "^3.0.1",
        "retry-request": "^7.0.0",
        "teeny-request": "^9.0.0",
        "uuid": "^8.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/@google-cloud/storage/node_modules/uuid": {
      "version": "8.3.2",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-8.3.2.tgz",
      "integrity": "sha512-+NYs2QeMWy+GWFOEm9xnn6HCDp0l7QBD7ml8zLUmJ+93Q5NF0NocErnwkTkXVFNiX3/fpC6afS8Dhb/gz7R7eg==",
      "license": "MIT",
      "optional": true,
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/@grpc/grpc-js": {
      "version": "1.14.1",
      "resolved": "https://registry.npmjs.org/@grpc/grpc-js/-/grpc-js-1.14.1.tgz",
      "integrity": "sha512-sPxgEWtPUR3EnRJCEtbGZG2iX8LQDUls2wUS3o27jg07KqJFMq6YDeWvMo1wfpmy3rqRdS0rivpLwhqQtEyCuQ==",
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "@grpc/proto-loader": "^0.8.0",
        "@js-sdsl/ordered-map": "^4.4.2"
      },
      "engines": {
        "node": ">=12.10.0"
      }
    },
    "node_modules/@grpc/grpc-js/node_modules/@grpc/proto-loader": {
      "version": "0.8.0",
      "resolved": "https://registry.npmjs.org/@grpc/proto-loader/-/proto-loader-0.8.0.tgz",
      "integrity": "sha512-rc1hOQtjIWGxcxpb9aHAfLpIctjEnsDehj0DAiVfBlmT84uvR0uUtN2hEi/ecvWVjXUGf5qPF4qEgiLOx1YIMQ==",
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "lodash.camelcase": "^4.3.0",
        "long": "^5.0.0",
        "protobufjs": "^7.5.3",
        "yargs": "^17.7.2"
      },
      "bin": {
        "proto-loader-gen-types": "build/bin/proto-loader-gen-types.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/@grpc/proto-loader": {
      "version": "0.7.15",
      "resolved": "https://registry.npmjs.org/@grpc/proto-loader/-/proto-loader-0.7.15.tgz",
      "integrity": "sha512-tMXdRCfYVixjuFK+Hk0Q1s38gV9zDiDJfWL3h1rv4Qc39oILCu1TRTDt7+fGUI8K4G1Fj125Hx/ru3azECWTyQ==",
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "lodash.camelcase": "^4.3.0",
        "long": "^5.0.0",
        "protobufjs": "^7.2.5",
        "yargs": "^17.7.2"
      },
      "bin": {
        "proto-loader-gen-types": "build/bin/proto-loader-gen-types.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/@isaacs/cliui": {
      "version": "8.0.2",
      "resolved": "https://registry.npmjs.org/@isaacs/cliui/-/cliui-8.0.2.tgz",
      "integrity": "sha512-O8jcjabXaleOG9DQ0+ARXWZBTfnP4WNAqzuiJK7ll44AmxGKv/J2M4TPjxjY3znBCfvBXFzucm1twdyFybFqEA==",
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "string-width": "^5.1.2",
        "string-width-cjs": "npm:string-width@^4.2.0",
        "strip-ansi": "^7.0.1",
        "strip-ansi-cjs": "npm:strip-ansi@^6.0.1",
        "wrap-ansi": "^8.1.0",
        "wrap-ansi-cjs": "npm:wrap-ansi@^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@isaacs/cliui/node_modules/ansi-regex": {
      "version": "6.2.2",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.2.2.tgz",
      "integrity": "sha512-Bq3SmSpyFHaWjPk8If9yc6svM8c56dB5BAtW4Qbw5jHTwwXXcTLoRMkpDJp6VL0XzlWaCHTXrkFURMYmD0sLqg==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-regex?sponsor=1"
      }
    },
    "node_modules/@isaacs/cliui/node_modules/ansi-styles": {
      "version": "6.2.3",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-6.2.3.tgz",
      "integrity": "sha512-4Dj6M28JB+oAH8kFkTLUo+a2jwOFkuqb3yucU0CANcRRUbxS0cP0nZYCGjcc3BNXwRIsUVmDGgzawme7zvJHvg==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/@isaacs/cliui/node_modules/emoji-regex": {
      "version": "9.2.2",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-9.2.2.tgz",
      "integrity": "sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/@isaacs/cliui/node_modules/string-width": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-5.1.2.tgz",
      "integrity": "sha512-HnLOCR3vjcY8beoNLtcjZ5/nxn2afmME6lhrDrebokqMap+XbeW8n9TXpPDOqdGK5qcI3oT0GKTW6wC7EMiVqA==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "eastasianwidth": "^0.2.0",
        "emoji-regex": "^9.2.2",
        "strip-ansi": "^7.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@isaacs/cliui/node_modules/strip-ansi": {
      "version": "7.1.2",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.1.2.tgz",
      "integrity": "sha512-gmBGslpoQJtgnMAvOVqGZpEz9dyoKTCzy2nfz/n8aIFhN/jCE/rCmcxabB6jOOHV+0WNnylOxaxBQPSvcWklhA==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "ansi-regex": "^6.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/strip-ansi?sponsor=1"
      }
    },
    "node_modules/@isaacs/cliui/node_modules/wrap-ansi": {
      "version": "8.1.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-8.1.0.tgz",
      "integrity": "sha512-si7QWI6zUMq56bESFvagtmzMdGOtoxfR+Sez11Mobfc7tm+VkUckk9bW2UeffTGVUbOksxmSw0AA2gs8g71NCQ==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "ansi-styles": "^6.1.0",
        "string-width": "^5.0.1",
        "strip-ansi": "^7.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/@js-sdsl/ordered-map": {
      "version": "4.4.2",
      "resolved": "https://registry.npmjs.org/@js-sdsl/ordered-map/-/ordered-map-4.4.2.tgz",
      "integrity": "sha512-iUKgm52T8HOE/makSxjqoWhe95ZJA1/G1sYsGev2JDKUSS14KAgg1LHb+Ba+IPow0xflbnSkOsZcO08C7w1gYw==",
      "license": "MIT",
      "optional": true,
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/js-sdsl"
      }
    },
    "node_modules/@mongodb-js/saslprep": {
      "version": "1.3.2",
      "resolved": "https://registry.npmjs.org/@mongodb-js/saslprep/-/saslprep-1.3.2.tgz",
      "integrity": "sha512-QgA5AySqB27cGTXBFmnpifAi7HxoGUeezwo6p9dI03MuDB6Pp33zgclqVb6oVK3j6I9Vesg0+oojW2XxB59SGg==",
      "license": "MIT",
      "dependencies": {
        "sparse-bitfield": "^3.0.3"
      }
    },
    "node_modules/@opentelemetry/api": {
      "version": "1.9.0",
      "resolved": "https://registry.npmjs.org/@opentelemetry/api/-/api-1.9.0.tgz",
      "integrity": "sha512-3giAOQvZiH5F9bMlMiv8+GSPMeqg0dbaeo58/0SlA9sxSqZhnUtxzX9/2FzyhS9sWQf5S0GJE0AKBrFqjpeYcg==",
      "license": "Apache-2.0",
      "optional": true,
      "engines": {
        "node": ">=8.0.0"
      }
    },
    "node_modules/@pkgjs/parseargs": {
      "version": "0.11.0",
      "resolved": "https://registry.npmjs.org/@pkgjs/parseargs/-/parseargs-0.11.0.tgz",
      "integrity": "sha512-+1VkjdD0QBLPodGrJUeqarH8VAIvQODIbwh9XpP5Syisf7YoQgsJKPNFoqqLQlu+VQ/tVSshMR6loPMn8U+dPg==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/@protobufjs/aspromise": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/aspromise/-/aspromise-1.1.2.tgz",
      "integrity": "sha512-j+gKExEuLmKwvz3OgROXtrJ2UG2x8Ch2YZUxahh+s1F2HZ+wAceUNLkvy6zKCPVRkU++ZWQrdxsUeQXmcg4uoQ==",
      "license": "BSD-3-Clause",
      "optional": true
    },
    "node_modules/@protobufjs/base64": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/base64/-/base64-1.1.2.tgz",
      "integrity": "sha512-AZkcAA5vnN/v4PDqKyMR5lx7hZttPDgClv83E//FMNhR2TMcLUhfRUBHCmSl0oi9zMgDDqRUJkSxO3wm85+XLg==",
      "license": "BSD-3-Clause",
      "optional": true
    },
    "node_modules/@protobufjs/codegen": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/@protobufjs/codegen/-/codegen-2.0.4.tgz",
      "integrity": "sha512-YyFaikqM5sH0ziFZCN3xDC7zeGaB/d0IUb9CATugHWbd1FRFwWwt4ld4OYMPWu5a3Xe01mGAULCdqhMlPl29Jg==",
      "license": "BSD-3-Clause",
      "optional": true
    },
    "node_modules/@protobufjs/eventemitter": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/eventemitter/-/eventemitter-1.1.0.tgz",
      "integrity": "sha512-j9ednRT81vYJ9OfVuXG6ERSTdEL1xVsNgqpkxMsbIabzSo3goCjDIveeGv5d03om39ML71RdmrGNjG5SReBP/Q==",
      "license": "BSD-3-Clause",
      "optional": true
    },
    "node_modules/@protobufjs/fetch": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/fetch/-/fetch-1.1.0.tgz",
      "integrity": "sha512-lljVXpqXebpsijW71PZaCYeIcE5on1w5DlQy5WH6GLbFryLUrBD4932W/E2BSpfRJWseIL4v/KPgBFxDOIdKpQ==",
      "license": "BSD-3-Clause",
      "optional": true,
      "dependencies": {
        "@protobufjs/aspromise": "^1.1.1",
        "@protobufjs/inquire": "^1.1.0"
      }
    },
    "node_modules/@protobufjs/float": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/float/-/float-1.0.2.tgz",
      "integrity": "sha512-Ddb+kVXlXst9d+R9PfTIxh1EdNkgoRe5tOX6t01f1lYWOvJnSPDBlG241QLzcyPdoNTsblLUdujGSE4RzrTZGQ==",
      "license": "BSD-3-Clause",
      "optional": true
    },
    "node_modules/@protobufjs/inquire": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/inquire/-/inquire-1.1.0.tgz",
      "integrity": "sha512-kdSefcPdruJiFMVSbn801t4vFK7KB/5gd2fYvrxhuJYg8ILrmn9SKSX2tZdV6V+ksulWqS7aXjBcRXl3wHoD9Q==",
      "license": "BSD-3-Clause",
      "optional": true
    },
    "node_modules/@protobufjs/path": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/path/-/path-1.1.2.tgz",
      "integrity": "sha512-6JOcJ5Tm08dOHAbdR3GrvP+yUUfkjG5ePsHYczMFLq3ZmMkAD98cDgcT2iA1lJ9NVwFd4tH/iSSoe44YWkltEA==",
      "license": "BSD-3-Clause",
      "optional": true
    },
    "node_modules/@protobufjs/pool": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/pool/-/pool-1.1.0.tgz",
      "integrity": "sha512-0kELaGSIDBKvcgS4zkjz1PeddatrjYcmMWOlAuAPwAeccUrPHdUqo/J6LiymHHEiJT5NrF1UVwxY14f+fy4WQw==",
      "license": "BSD-3-Clause",
      "optional": true
    },
    "node_modules/@protobufjs/utf8": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/utf8/-/utf8-1.1.0.tgz",
      "integrity": "sha512-Vvn3zZrhQZkkBE8LSuW3em98c0FwgO4nxzv6OdSxPKJIEKY2bGbHn+mhGIPerzI4twdxaP8/0+06HBpwf345Lw==",
      "license": "BSD-3-Clause",
      "optional": true
    },
    "node_modules/@socket.io/component-emitter": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@socket.io/component-emitter/-/component-emitter-3.1.2.tgz",
      "integrity": "sha512-9BCxFwvbGg/RsZK9tjXd8s4UcwR0MWeFQ1XEKIQVVvAGJyINdrqKMcTRyLoK8Rse1GjzLV9cwjWV1olXRWEXVA==",
      "license": "MIT"
    },
    "node_modules/@tootallnate/once": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/@tootallnate/once/-/once-2.0.0.tgz",
      "integrity": "sha512-XCuKFP5PS55gnMVu3dty8KPatLqUoy/ZYzDzAGCQ8JNFCkLXzmI7vNHCR+XpbZaMWQK/vQubr7PkYq8g470J/A==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@types/body-parser": {
      "version": "1.19.6",
      "resolved": "https://registry.npmjs.org/@types/body-parser/-/body-parser-1.19.6.tgz",
      "integrity": "sha512-HLFeCYgz89uk22N5Qg3dvGvsv46B8GLvKKo1zKG4NybA8U2DiEO3w9lqGg29t/tfLRJpJ6iQxnVw4OnB7MoM9g==",
      "license": "MIT",
      "dependencies": {
        "@types/connect": "*",
        "@types/node": "*"
      }
    },
    "node_modules/@types/caseless": {
      "version": "0.12.5",
      "resolved": "https://registry.npmjs.org/@types/caseless/-/caseless-0.12.5.tgz",
      "integrity": "sha512-hWtVTC2q7hc7xZ/RLbxapMvDMgUnDvKvMOpKal4DrMyfGBUfB1oKaZlIRr6mJL+If3bAP6sV/QneGzF6tJjZDg==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/@types/connect": {
      "version": "3.4.38",
      "resolved": "https://registry.npmjs.org/@types/connect/-/connect-3.4.38.tgz",
      "integrity": "sha512-K6uROf1LD88uDQqJCktA4yzL1YYAK6NgfsI0v/mTgyPKWsX1CnJ0XPSDhViejru1GcRkLWb8RlzFYJRqGUbaug==",
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/cors": {
      "version": "2.8.19",
      "resolved": "https://registry.npmjs.org/@types/cors/-/cors-2.8.19.tgz",
      "integrity": "sha512-mFNylyeyqN93lfe/9CSxOGREz8cpzAhH+E93xJ4xWQf62V8sQ/24reV2nyzUWM6H6Xji+GGHpkbLe7pVoUEskg==",
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/express": {
      "version": "4.17.25",
      "resolved": "https://registry.npmjs.org/@types/express/-/express-4.17.25.tgz",
      "integrity": "sha512-dVd04UKsfpINUnK0yBoYHDF3xu7xVH4BuDotC/xGuycx4CgbP48X/KF/586bcObxT0HENHXEU8Nqtu6NR+eKhw==",
      "license": "MIT",
      "dependencies": {
        "@types/body-parser": "*",
        "@types/express-serve-static-core": "^4.17.33",
        "@types/qs": "*",
        "@types/serve-static": "^1"
      }
    },
    "node_modules/@types/express-serve-static-core": {
      "version": "4.19.7",
      "resolved": "https://registry.npmjs.org/@types/express-serve-static-core/-/express-serve-static-core-4.19.7.tgz",
      "integrity": "sha512-FvPtiIf1LfhzsaIXhv/PHan/2FeQBbtBDtfX2QfvPxdUelMDEckK08SM6nqo1MIZY3RUlfA+HV8+hFUSio78qg==",
      "license": "MIT",
      "dependencies": {
        "@types/node": "*",
        "@types/qs": "*",
        "@types/range-parser": "*",
        "@types/send": "*"
      }
    },
    "node_modules/@types/http-errors": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@types/http-errors/-/http-errors-2.0.5.tgz",
      "integrity": "sha512-r8Tayk8HJnX0FztbZN7oVqGccWgw98T/0neJphO91KkmOzug1KkofZURD4UaD5uH8AqcFLfdPErnBod0u71/qg==",
      "license": "MIT"
    },
    "node_modules/@types/jsonwebtoken": {
      "version": "9.0.10",
      "resolved": "https://registry.npmjs.org/@types/jsonwebtoken/-/jsonwebtoken-9.0.10.tgz",
      "integrity": "sha512-asx5hIG9Qmf/1oStypjanR7iKTv0gXQ1Ov/jfrX6kS/EO0OFni8orbmGCn0672NHR3kXHwpAwR+B368ZGN/2rA==",
      "license": "MIT",
      "dependencies": {
        "@types/ms": "*",
        "@types/node": "*"
      }
    },
    "node_modules/@types/long": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/@types/long/-/long-4.0.2.tgz",
      "integrity": "sha512-MqTGEo5bj5t157U6fA/BiDynNkn0YknVdh48CMPkTSpFTVmvao5UQmm7uEF6xBEo7qIMAlY/JSleYaE6VOdpaA==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/@types/mime": {
      "version": "1.3.5",
      "resolved": "https://registry.npmjs.org/@types/mime/-/mime-1.3.5.tgz",
      "integrity": "sha512-/pyBZWSLD2n0dcHE3hq8s8ZvcETHtEuF+3E7XVt0Ig2nvsVQXdghHVcEkIWjy9A0wKfTn97a/PSDYohKIlnP/w==",
      "license": "MIT"
    },
    "node_modules/@types/ms": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/@types/ms/-/ms-2.1.0.tgz",
      "integrity": "sha512-GsCCIZDE/p3i96vtEqx+7dBUGXrc7zeSK3wwPHIaRThS+9OhWIXRqzs4d6k1SVU8g91DrNRWxWUGhp5KXQb2VA==",
      "license": "MIT"
    },
    "node_modules/@types/node": {
      "version": "22.19.1",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-22.19.1.tgz",
      "integrity": "sha512-LCCV0HdSZZZb34qifBsyWlUmok6W7ouER+oQIGBScS8EsZsQbrtFTUrDX4hOl+CS6p7cnNC4td+qrSVGSCTUfQ==",
      "license": "MIT",
      "dependencies": {
        "undici-types": "~6.21.0"
      }
    },
    "node_modules/@types/qs": {
      "version": "6.14.0",
      "resolved": "https://registry.npmjs.org/@types/qs/-/qs-6.14.0.tgz",
      "integrity": "sha512-eOunJqu0K1923aExK6y8p6fsihYEn/BYuQ4g0CxAAgFc4b/ZLN4CrsRZ55srTdqoiLzU2B2evC+apEIxprEzkQ==",
      "license": "MIT"
    },
    "node_modules/@types/range-parser": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/@types/range-parser/-/range-parser-1.2.7.tgz",
      "integrity": "sha512-hKormJbkJqzQGhziax5PItDUTMAM9uE2XXQmM37dyd4hVM+5aVl7oVxMVUiVQn2oCQFN/LKCZdvSM0pFRqbSmQ==",
      "license": "MIT"
    },
    "node_modules/@types/request": {
      "version": "2.48.13",
      "resolved": "https://registry.npmjs.org/@types/request/-/request-2.48.13.tgz",
      "integrity": "sha512-FGJ6udDNUCjd19pp0Q3iTiDkwhYup7J8hpMW9c4k53NrccQFFWKRho6hvtPPEhnXWKvukfwAlB6DbDz4yhH5Gg==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@types/caseless": "*",
        "@types/node": "*",
        "@types/tough-cookie": "*",
        "form-data": "^2.5.5"
      }
    },
    "node_modules/@types/send": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/@types/send/-/send-1.2.1.tgz",
      "integrity": "sha512-arsCikDvlU99zl1g69TcAB3mzZPpxgw0UQnaHeC1Nwb015xp8bknZv5rIfri9xTOcMuaVgvabfIRA7PSZVuZIQ==",
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/serve-static": {
      "version": "1.15.10",
      "resolved": "https://registry.npmjs.org/@types/serve-static/-/serve-static-1.15.10.tgz",
      "integrity": "sha512-tRs1dB+g8Itk72rlSI2ZrW6vZg0YrLI81iQSTkMmOqnqCaNr/8Ek4VwWcN5vZgCYWbg/JJSGBlUaYGAOP73qBw==",
      "license": "MIT",
      "dependencies": {
        "@types/http-errors": "*",
        "@types/node": "*",
        "@types/send": "<1"
      }
    },
    "node_modules/@types/serve-static/node_modules/@types/send": {
      "version": "0.17.6",
      "resolved": "https://registry.npmjs.org/@types/send/-/send-0.17.6.tgz",
      "integrity": "sha512-Uqt8rPBE8SY0RK8JB1EzVOIZ32uqy8HwdxCnoCOsYrvnswqmFZ/k+9Ikidlk/ImhsdvBsloHbAlewb2IEBV/Og==",
      "license": "MIT",
      "dependencies": {
        "@types/mime": "^1",
        "@types/node": "*"
      }
    },
    "node_modules/@types/tough-cookie": {
      "version": "4.0.5",
      "resolved": "https://registry.npmjs.org/@types/tough-cookie/-/tough-cookie-4.0.5.tgz",
      "integrity": "sha512-/Ad8+nIOV7Rl++6f1BdKxFSMgmoqEoYbHRpPcx3JEfv8VRsQe9Z4mCXeJBzxs7mbHY/XOZZuXlRNfhpVPbs6ZA==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/@types/webidl-conversions": {
      "version": "7.0.3",
      "resolved": "https://registry.npmjs.org/@types/webidl-conversions/-/webidl-conversions-7.0.3.tgz",
      "integrity": "sha512-CiJJvcRtIgzadHCYXw7dqEnMNRjhGZlYK05Mj9OyktqV8uVT8fD2BFOB7S1uwBE3Kj2Z+4UyPmFw/Ixgw/LAlA==",
      "license": "MIT"
    },
    "node_modules/@types/whatwg-url": {
      "version": "13.0.0",
      "resolved": "https://registry.npmjs.org/@types/whatwg-url/-/whatwg-url-13.0.0.tgz",
      "integrity": "sha512-N8WXpbE6Wgri7KUSvrmQcqrMllKZ9uxkYWMt+mCSGwNc0Hsw9VQTW7ApqI4XNrx6/SaM2QQJCzMPDEXE058s+Q==",
      "license": "MIT",
      "dependencies": {
        "@types/webidl-conversions": "*"
      }
    },
    "node_modules/abort-controller": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/abort-controller/-/abort-controller-3.0.0.tgz",
      "integrity": "sha512-h8lQ8tacZYnR3vNQTgibj+tODHI5/+l06Au2Pcriv/Gmet0eaj4TwWH41sO9wnHDiQsEj19q0drzdWdeAHtweg==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "event-target-shim": "^5.0.0"
      },
      "engines": {
        "node": ">=6.5"
      }
    },
    "node_modules/accepts": {
      "version": "1.3.8",
      "resolved": "https://registry.npmjs.org/accepts/-/accepts-1.3.8.tgz",
      "integrity": "sha512-PYAthTa2m2VKxuvSD3DPC/Gy+U+sOA1LAuT8mkmRuvw+NACSaeXEQ+NHcVF7rONl6qcaxV3Uuemwawk+7+SJLw==",
      "license": "MIT",
      "dependencies": {
        "mime-types": "~2.1.34",
        "negotiator": "0.6.3"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/agent-base": {
      "version": "7.1.4",
      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-7.1.4.tgz",
      "integrity": "sha512-MnA+YT8fwfJPgBx3m60MNqakm30XOkyIoH1y6huTQvC0PwZG7ki8NacLBcrPbNoo8vEZy7Jpuk7+jMO+CUovTQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/array-flatten": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/array-flatten/-/array-flatten-1.1.1.tgz",
      "integrity": "sha512-PCVAQswWemu6UdxsDFFX/+gVeYqKAod3D3UVm91jHwynguOwAvYPhx8nNlM++NqRcK6CxxpUafjmhIdKiHibqg==",
      "license": "MIT"
    },
    "node_modules/arrify": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/arrify/-/arrify-2.0.1.tgz",
      "integrity": "sha512-3duEwti880xqi4eAMN8AyR4a0ByT90zoYdLlevfrvU43vb0YZwZVfxOgxWrLXXXpyugL0hNZc9G6BiB5B3nUug==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/async-retry": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/async-retry/-/async-retry-1.3.3.tgz",
      "integrity": "sha512-wfr/jstw9xNi/0teMHrRW7dsz3Lt5ARhYNZ2ewpadnhaIp5mbALhOAP+EAdsC7t4Z6wqsDVv9+W6gm1Dk9mEyw==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "retry": "0.13.1"
      }
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/base64-js": {
      "version": "1.5.1",
      "resolved": "https://registry.npmjs.org/base64-js/-/base64-js-1.5.1.tgz",
      "integrity": "sha512-AKpaYlHn8t4SVbOHCy+b5+KKgvR4vrsD8vbvrbiQJps7fKDTkjkDry6ji0rUJjC0kzbNePLwzxq8iypo41qeWA==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/base64id": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/base64id/-/base64id-2.0.0.tgz",
      "integrity": "sha512-lGe34o6EHj9y3Kts9R4ZYs/Gr+6N7MCaMlIFA3F1R2O5/m7K06AxfSeO5530PEERE6/WyEg3lsuyw4GHlPZHog==",
      "license": "MIT",
      "engines": {
        "node": "^4.5.0 || >= 5.9"
      }
    },
    "node_modules/bcryptjs": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/bcryptjs/-/bcryptjs-3.0.3.tgz",
      "integrity": "sha512-GlF5wPWnSa/X5LKM1o0wz0suXIINz1iHRLvTS+sLyi7XPbe5ycmYI3DlZqVGZZtDgl4DmasFg7gOB3JYbphV5g==",
      "license": "BSD-3-Clause",
      "bin": {
        "bcrypt": "bin/bcrypt"
      }
    },
    "node_modules/bignumber.js": {
      "version": "9.3.1",
      "resolved": "https://registry.npmjs.org/bignumber.js/-/bignumber.js-9.3.1.tgz",
      "integrity": "sha512-Ko0uX15oIUS7wJ3Rb30Fs6SkVbLmPBAKdlm7q9+ak9bbIeFf0MwuBsQV6z7+X768/cHsfg+WlysDWJcmthjsjQ==",
      "license": "MIT",
      "engines": {
        "node": "*"
      }
    },
    "node_modules/body-parser": {
      "version": "1.20.3",
      "resolved": "https://registry.npmjs.org/body-parser/-/body-parser-1.20.3.tgz",
      "integrity": "sha512-7rAxByjUMqQ3/bHJy7D6OGXvx/MMc4IqBn/X0fcM1QUcAItpZrBEYhWGem+tzXH90c+G01ypMcYJBO9Y30203g==",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "content-type": "~1.0.5",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "http-errors": "2.0.0",
        "iconv-lite": "0.4.24",
        "on-finished": "2.4.1",
        "qs": "6.13.0",
        "raw-body": "2.5.2",
        "type-is": "~1.6.18",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/body-parser/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/body-parser/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/brace-expansion": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
      "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/bson": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/bson/-/bson-7.0.0.tgz",
      "integrity": "sha512-Kwc6Wh4lQ5OmkqqKhYGKIuELXl+EPYSCObVE6bWsp1T/cGkOCBN0I8wF/T44BiuhHyNi1mmKVPXk60d41xZ7kw==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=20.19.0"
      }
    },
    "node_modules/buffer-equal-constant-time": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/buffer-equal-constant-time/-/buffer-equal-constant-time-1.0.1.tgz",
      "integrity": "sha512-zRpUiDwd/xk6ADqPMATG8vc9VPrkck7T07OIx0gnjmJAnHnTVXNQG3vfvWNuiZIkwu9KrKdA1iJKfsfTVxE6NA==",
      "license": "BSD-3-Clause"
    },
    "node_modules/bytes": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.2.tgz",
      "integrity": "sha512-/Nf7TyzTx6S3yRJObOAV7956r8cr2+Oj8AC5dt8wSP3BQAoeX58NoHyCU8P8zGkNXStjTSi6fzO6F0pBdcYbEg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/call-bound": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
      "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "get-intrinsic": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/cliui": {
      "version": "8.0.1",
      "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
      "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "string-width": "^4.2.0",
        "strip-ansi": "^6.0.1",
        "wrap-ansi": "^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/content-disposition": {
      "version": "0.5.4",
      "resolved": "https://registry.npmjs.org/content-disposition/-/content-disposition-0.5.4.tgz",
      "integrity": "sha512-FveZTNuGw04cxlAiWbzi6zTAL/lhehaWbTtgluJh4/E95DqMwTmha3KZN1aAWA8cFIhHzMZUvLevkw5Rqk+tSQ==",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "5.2.1"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/content-type": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/content-type/-/content-type-1.0.5.tgz",
      "integrity": "sha512-nTjqfcBFEipKdXCv4YDQWCfmcLZKm81ldF0pAopTvyrFGVbcR6P/VAAd5G7N+0tTr8QqiU0tFadD6FK4NtJwOA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie": {
      "version": "0.7.1",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-0.7.1.tgz",
      "integrity": "sha512-6DnInpx7SJ2AK3+CTUE/ZM0vWTUboZCegxhC2xiIydHR9jNuTAASBrfEpHhiGOZw/nX51bHt6YQl8jsGo4y/0w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie-signature": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/cookie-signature/-/cookie-signature-1.0.6.tgz",
      "integrity": "sha512-QADzlaHc8icV8I7vbaJXJwod9HWYp8uCqf1xa4OfNu1T7JVxQIrUgOWtHdNDtPiywmFbiS12VjotIXLrKM3orQ==",
      "license": "MIT"
    },
    "node_modules/cors": {
      "version": "2.8.5",
      "resolved": "https://registry.npmjs.org/cors/-/cors-2.8.5.tgz",
      "integrity": "sha512-KIHbLJqu73RGr/hnbrO9uBeixNGuvSQjul/jdFvS/KFSIH1hWVd1ng7zOHx+YrEfInLG7q4n6GHQ9cDtxv/P6g==",
      "license": "MIT",
      "dependencies": {
        "object-assign": "^4",
        "vary": "^1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/data-uri-to-buffer": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/data-uri-to-buffer/-/data-uri-to-buffer-4.0.1.tgz",
      "integrity": "sha512-0R9ikRb668HB7QDxT1vkpuUBtqc53YyAwMwGeUFKRojY/NWKvdZ+9UYtRfGmhqNbRkTSVpMbmyhXipFFv2cb/A==",
      "license": "MIT",
      "engines": {
        "node": ">= 12"
      }
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/depd": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/depd/-/depd-2.0.0.tgz",
      "integrity": "sha512-g7nH6P6dyDioJogAAGprGpCtVImJhpPk/roCzdb3fIh61/s/nPsfR6onyMwkCAR/OlC3yBC0lESvUoQEAssIrw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/destroy": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/destroy/-/destroy-1.2.0.tgz",
      "integrity": "sha512-2sJGJTaXIIaR1w4iJSNoN0hnMY7Gpc/n8D4qSCJw8QqFWXf7cuAgnEHxBpweaVcPevC2l3KpjYCx3NypQQgaJg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/dotenv": {
      "version": "16.6.1",
      "resolved": "https://registry.npmjs.org/dotenv/-/dotenv-16.6.1.tgz",
      "integrity": "sha512-uBq4egWHTcTt33a72vpSG0z3HnPuIl6NqYcTrKEg2azoEyl2hpW0zqlxysq2pK9HlDIHyHyakeYaYnSAwd8bow==",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://dotenvx.com"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/duplexify": {
      "version": "4.1.3",
      "resolved": "https://registry.npmjs.org/duplexify/-/duplexify-4.1.3.tgz",
      "integrity": "sha512-M3BmBhwJRZsSx38lZyhE53Csddgzl5R7xGJNk7CVddZD6CcmwMCH8J+7AprIrQKH7TonKxaCjcv27Qmf+sQ+oA==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "end-of-stream": "^1.4.1",
        "inherits": "^2.0.3",
        "readable-stream": "^3.1.1",
        "stream-shift": "^1.0.2"
      }
    },
    "node_modules/eastasianwidth": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/eastasianwidth/-/eastasianwidth-0.2.0.tgz",
      "integrity": "sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/ecdsa-sig-formatter": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/ecdsa-sig-formatter/-/ecdsa-sig-formatter-1.0.11.tgz",
      "integrity": "sha512-nagl3RYrbNv6kQkeJIpt6NJZy8twLB/2vtz6yN9Z4vRKHN4/QZJIEbqohALSgwKdnksuY3k5Addp5lg8sVoVcQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/ee-first": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/ee-first/-/ee-first-1.1.1.tgz",
      "integrity": "sha512-WMwm9LhRUo+WUaRN+vRuETqG89IgZphVSNkdFgeb6sS/E4OrDIN7t48CAewSHXc6C8lefD8KKfr5vY61brQlow==",
      "license": "MIT"
    },
    "node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/encodeurl": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-2.0.0.tgz",
      "integrity": "sha512-Q0n9HRi4m6JuGIV1eFlmvJB7ZEVxu93IrMyiMsGC0lrMJMWzRgx6WGquyfQgZVb31vhGgXnfmPNNXmxnOkRBrg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/end-of-stream": {
      "version": "1.4.5",
      "resolved": "https://registry.npmjs.org/end-of-stream/-/end-of-stream-1.4.5.tgz",
      "integrity": "sha512-ooEGc6HP26xXq/N+GCGOT0JKCLDGrq2bQUZrQ7gyrJiZANJ/8YDTxTpQBXGMn+WbIQXNVpyWymm7KYVICQnyOg==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "once": "^1.4.0"
      }
    },
    "node_modules/engine.io": {
      "version": "6.6.4",
      "resolved": "https://registry.npmjs.org/engine.io/-/engine.io-6.6.4.tgz",
      "integrity": "sha512-ZCkIjSYNDyGn0R6ewHDtXgns/Zre/NT6Agvq1/WobF7JXgFff4SeDroKiCO3fNJreU9YG429Sc81o4w5ok/W5g==",
      "license": "MIT",
      "dependencies": {
        "@types/cors": "^2.8.12",
        "@types/node": ">=10.0.0",
        "accepts": "~1.3.4",
        "base64id": "2.0.0",
        "cookie": "~0.7.2",
        "cors": "~2.8.5",
        "debug": "~4.3.1",
        "engine.io-parser": "~5.2.1",
        "ws": "~8.17.1"
      },
      "engines": {
        "node": ">=10.2.0"
      }
    },
    "node_modules/engine.io-parser": {
      "version": "5.2.3",
      "resolved": "https://registry.npmjs.org/engine.io-parser/-/engine.io-parser-5.2.3.tgz",
      "integrity": "sha512-HqD3yTBfnBxIrbnM1DoD6Pcq8NECnh8d4As1Qgh0z5Gg3jRRIqijury0CL3ghu/edArpUYiYqQiDUQBIs4np3Q==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      }
    },
    "node_modules/engine.io/node_modules/cookie": {
      "version": "0.7.2",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-0.7.2.tgz",
      "integrity": "sha512-yki5XnKuf750l50uGTllt6kKILY4nQ1eNIQatoXEByZ5dWgnKqbnqmTrBE5B4N7lrMJKQ2ytWMiTO2o0v6Ew/w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/engine.io/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-html": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/escape-html/-/escape-html-1.0.3.tgz",
      "integrity": "sha512-NiSupZ4OeuGwr68lGIeym/ksIZMJodUGOSCZ/FSnTxcrekbvqrgdUxlJOMpijaKZVjAJrWrGs/6Jy8OMuyj9ow==",
      "license": "MIT"
    },
    "node_modules/etag": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/etag/-/etag-1.8.1.tgz",
      "integrity": "sha512-aIL5Fx7mawVa300al2BnEE4iNvo1qETxLrPI/o05L7z6go7fCw1J6EQmbK4FmJ2AS7kgVF/KEZWufBfdClMcPg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/event-target-shim": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/event-target-shim/-/event-target-shim-5.0.1.tgz",
      "integrity": "sha512-i/2XbnSz/uxRCU6+NdVJgKWDTM427+MqYbkQzD321DuCQJUqOuJKIA0IM2+W2xtYHdKOmZ4dR6fExsd4SXL+WQ==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/express": {
      "version": "4.21.2",
      "resolved": "https://registry.npmjs.org/express/-/express-4.21.2.tgz",
      "integrity": "sha512-28HqgMZAmih1Czt9ny7qr6ek2qddF4FclbMzwhCREB6OFfH+rXAnuNCwo1/wFvrtbgsQDb4kSbX9de9lFbrXnA==",
      "license": "MIT",
      "dependencies": {
        "accepts": "~1.3.8",
        "array-flatten": "1.1.1",
        "body-parser": "1.20.3",
        "content-disposition": "0.5.4",
        "content-type": "~1.0.4",
        "cookie": "0.7.1",
        "cookie-signature": "1.0.6",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "finalhandler": "1.3.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "merge-descriptors": "1.0.3",
        "methods": "~1.1.2",
        "on-finished": "2.4.1",
        "parseurl": "~1.3.3",
        "path-to-regexp": "0.1.12",
        "proxy-addr": "~2.0.7",
        "qs": "6.13.0",
        "range-parser": "~1.2.1",
        "safe-buffer": "5.2.1",
        "send": "0.19.0",
        "serve-static": "1.16.2",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "type-is": "~1.6.18",
        "utils-merge": "1.0.1",
        "vary": "~1.1.2"
      },
      "engines": {
        "node": ">= 0.10.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/express/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/express/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/extend": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/extend/-/extend-3.0.2.tgz",
      "integrity": "sha512-fjquC59cD7CyW6urNXK0FBufkZcoiGG80wTuPujX590cB5Ttln20E2UB4S/WARVqhXffZl2LNgS+gQdPIIim/g==",
      "license": "MIT"
    },
    "node_modules/farmhash-modern": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/farmhash-modern/-/farmhash-modern-1.1.0.tgz",
      "integrity": "sha512-6ypT4XfgqJk/F3Yuv4SX26I3doUjt0GTG4a+JgWxXQpxXzTBq8fPUeGHfcYMMDPHJHm3yPOSjaeBwBGAHWXCdA==",
      "license": "MIT",
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "license": "MIT"
    },
    "node_modules/fast-xml-parser": {
      "version": "4.5.3",
      "resolved": "https://registry.npmjs.org/fast-xml-parser/-/fast-xml-parser-4.5.3.tgz",
      "integrity": "sha512-RKihhV+SHsIUGXObeVy9AXiBbFwkVk7Syp8XgwN5U3JV416+Gwp/GO9i0JYKmikykgz/UHRrrV4ROuZEo/T0ig==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/NaturalIntelligence"
        }
      ],
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "strnum": "^1.1.1"
      },
      "bin": {
        "fxparser": "src/cli/cli.js"
      }
    },
    "node_modules/faye-websocket": {
      "version": "0.11.4",
      "resolved": "https://registry.npmjs.org/faye-websocket/-/faye-websocket-0.11.4.tgz",
      "integrity": "sha512-CzbClwlXAuiRQAlUyfqPgvPoNKTckTPGfwZV4ZdAhVcP2lh9KUxJg2b5GkE7XbjKQ3YJnQ9z6D9ntLAlB+tP8g==",
      "license": "Apache-2.0",
      "dependencies": {
        "websocket-driver": ">=0.5.1"
      },
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/fetch-blob": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/fetch-blob/-/fetch-blob-3.2.0.tgz",
      "integrity": "sha512-7yAQpD2UMJzLi1Dqv7qFYnPbaPx7ZfFK6PiIxQ4PfkGPyNyl2Ugx+a/umUonmKqjhM4DnfbMvdX6otXq83soQQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/jimmywarting"
        },
        {
          "type": "paypal",
          "url": "https://paypal.me/jimmywarting"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "node-domexception": "^1.0.0",
        "web-streams-polyfill": "^3.0.3"
      },
      "engines": {
        "node": "^12.20 || >= 14.13"
      }
    },
    "node_modules/finalhandler": {
      "version": "1.3.1",
      "resolved": "https://registry.npmjs.org/finalhandler/-/finalhandler-1.3.1.tgz",
      "integrity": "sha512-6BN9trH7bp3qvnrRyzsBz+g3lZxTNZTbVO2EV1CS0WIcDbawYVdYvGflME/9QP0h0pYlCDBCTjYa9nZzMDpyxQ==",
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "on-finished": "2.4.1",
        "parseurl": "~1.3.3",
        "statuses": "2.0.1",
        "unpipe": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/finalhandler/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/finalhandler/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/firebase-admin": {
      "version": "13.6.0",
      "resolved": "https://registry.npmjs.org/firebase-admin/-/firebase-admin-13.6.0.tgz",
      "integrity": "sha512-GdPA/t0+Cq8p1JnjFRBmxRxAGvF/kl2yfdhALl38PrRp325YxyQ5aNaHui0XmaKcKiGRFIJ/EgBNWFoDP0onjw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@fastify/busboy": "^3.0.0",
        "@firebase/database-compat": "^2.0.0",
        "@firebase/database-types": "^1.0.6",
        "@types/node": "^22.8.7",
        "farmhash-modern": "^1.1.0",
        "fast-deep-equal": "^3.1.1",
        "google-auth-library": "^9.14.2",
        "jsonwebtoken": "^9.0.0",
        "jwks-rsa": "^3.1.0",
        "node-forge": "^1.3.1",
        "uuid": "^11.0.2"
      },
      "engines": {
        "node": ">=18"
      },
      "optionalDependencies": {
        "@google-cloud/firestore": "^7.11.0",
        "@google-cloud/storage": "^7.14.0"
      }
    },
    "node_modules/foreground-child": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/foreground-child/-/foreground-child-3.3.1.tgz",
      "integrity": "sha512-gIXjKqtFuWEgzFRJA9WCQeSJLZDjgJUOMCMzxtvFq/37KojM1BFGufqsCy0r4qSQmYLsZYMeyRqzIWOMup03sw==",
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "cross-spawn": "^7.0.6",
        "signal-exit": "^4.0.1"
      },
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/form-data": {
      "version": "2.5.5",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-2.5.5.tgz",
      "integrity": "sha512-jqdObeR2rxZZbPSGL+3VckHMYtu+f9//KXBsVny6JSX/pa38Fy+bGjuG8eW/H6USNQWhLi8Num++cU2yOCNz4A==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.35",
        "safe-buffer": "^5.2.1"
      },
      "engines": {
        "node": ">= 0.12"
      }
    },
    "node_modules/formdata-polyfill": {
      "version": "4.0.10",
      "resolved": "https://registry.npmjs.org/formdata-polyfill/-/formdata-polyfill-4.0.10.tgz",
      "integrity": "sha512-buewHzMvYL29jdeQTVILecSaZKnt/RJWjoZCF5OW60Z67/GmSLBkOFM7qh1PI3zFNtJbaZL5eQu1vLfazOwj4g==",
      "license": "MIT",
      "dependencies": {
        "fetch-blob": "^3.1.2"
      },
      "engines": {
        "node": ">=12.20.0"
      }
    },
    "node_modules/forwarded": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/forwarded/-/forwarded-0.2.0.tgz",
      "integrity": "sha512-buRG0fpBtRHSTCOASe6hD258tEubFoRLb4ZNA6NxMVHNw2gOcwHo9wyablzMzOA5z9xA9L1KNjk/Nt6MT9aYow==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/fresh": {
      "version": "0.5.2",
      "resolved": "https://registry.npmjs.org/fresh/-/fresh-0.5.2.tgz",
      "integrity": "sha512-zJ2mQYM18rEFOudeV4GShTGIQ7RbzA7ozbU9I/XBpm7kqgMywgmylMwXHxZJmkVoYkna9d2pVXVXPdYTP9ej8Q==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/functional-red-black-tree": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/functional-red-black-tree/-/functional-red-black-tree-1.0.1.tgz",
      "integrity": "sha512-dsKNQNdj6xA3T+QlADDA7mOSlX0qiMINjn0cgr+eGHGsbSHzTabcIogz2+p/iqP1Xs6EP/sS2SbqH+brGTbq0g==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/gaxios": {
      "version": "6.7.1",
      "resolved": "https://registry.npmjs.org/gaxios/-/gaxios-6.7.1.tgz",
      "integrity": "sha512-LDODD4TMYx7XXdpwxAVRAIAuB0bzv0s+ywFonY46k126qzQHT9ygyoa9tncmOiQmmDrik65UYsEkv3lbfqQ3yQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "extend": "^3.0.2",
        "https-proxy-agent": "^7.0.1",
        "is-stream": "^2.0.0",
        "node-fetch": "^2.6.9",
        "uuid": "^9.0.1"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/gaxios/node_modules/node-fetch": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.7.0.tgz",
      "integrity": "sha512-c4FRfUm/dbcWZ7U+1Wq0AwCyFL+3nt2bEw05wfxSz+DWpWsitgmSgYmy2dQdWyKC1694ELPqMs/YzUSNozLt8A==",
      "license": "MIT",
      "dependencies": {
        "whatwg-url": "^5.0.0"
      },
      "engines": {
        "node": "4.x || >=6.0.0"
      },
      "peerDependencies": {
        "encoding": "^0.1.0"
      },
      "peerDependenciesMeta": {
        "encoding": {
          "optional": true
        }
      }
    },
    "node_modules/gaxios/node_modules/tr46": {
      "version": "0.0.3",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-0.0.3.tgz",
      "integrity": "sha512-N3WMsuqV66lT30CrXNbEjx4GEwlow3v6rr4mCcv6prnfwhS01rkgyFdjPNBYd9br7LpXV1+Emh01fHnq2Gdgrw==",
      "license": "MIT"
    },
    "node_modules/gaxios/node_modules/uuid": {
      "version": "9.0.1",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-9.0.1.tgz",
      "integrity": "sha512-b+1eJOlsR9K8HJpow9Ok3fiWOWSIcIzXodvv0rQjVoOVNpWMpxf1wZNpt4y9h10odCNrqnYp1OBzRktckBe3sA==",
      "funding": [
        "https://github.com/sponsors/broofa",
        "https://github.com/sponsors/ctavan"
      ],
      "license": "MIT",
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/gaxios/node_modules/webidl-conversions": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-3.0.1.tgz",
      "integrity": "sha512-2JAn3z8AR6rjK8Sm8orRC0h/bcl/DqL7tRPdGZ4I1CjdF+EaMLmYxBHyXuKL849eucPFhvBoxMsflfOb8kxaeQ==",
      "license": "BSD-2-Clause"
    },
    "node_modules/gaxios/node_modules/whatwg-url": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-5.0.0.tgz",
      "integrity": "sha512-saE57nupxk6v3HY35+jzBwYa0rKSy0XR8JSxZPwgLr7ys0IBzhGviA1/TUGJLmSVqs8pb9AnvICXEuOHLprYTw==",
      "license": "MIT",
      "dependencies": {
        "tr46": "~0.0.3",
        "webidl-conversions": "^3.0.0"
      }
    },
    "node_modules/gcp-metadata": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/gcp-metadata/-/gcp-metadata-7.0.1.tgz",
      "integrity": "sha512-UcO3kefx6dCcZkgcTGgVOTFb7b1LlQ02hY1omMjjrrBzkajRMCFgYOjs7J71WqnuG1k2b+9ppGL7FsOfhZMQKQ==",
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "gaxios": "^7.0.0",
        "google-logging-utils": "^1.0.0",
        "json-bigint": "^1.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/gcp-metadata/node_modules/gaxios": {
      "version": "7.1.3",
      "resolved": "https://registry.npmjs.org/gaxios/-/gaxios-7.1.3.tgz",
      "integrity": "sha512-YGGyuEdVIjqxkxVH1pUTMY/XtmmsApXrCVv5EU25iX6inEPbV+VakJfLealkBtJN69AQmh1eGOdCl9Sm1UP6XQ==",
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "extend": "^3.0.2",
        "https-proxy-agent": "^7.0.1",
        "node-fetch": "^3.3.2",
        "rimraf": "^5.0.1"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/get-caller-file": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/get-caller-file/-/get-caller-file-2.0.5.tgz",
      "integrity": "sha512-DyFP3BM/3YHTQOCUL/w0OZHR0lpKeGrxotcHWcqNEdnltqFwXVfhEBQ94eIo34AfQpo0rGki4cyIiftY06h2Fg==",
      "license": "ISC",
      "optional": true,
      "engines": {
        "node": "6.* || 8.* || >= 10.*"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/glob": {
      "version": "10.5.0",
      "resolved": "https://registry.npmjs.org/glob/-/glob-10.5.0.tgz",
      "integrity": "sha512-DfXN8DfhJ7NH3Oe7cFmu3NCu1wKbkReJ8TorzSAFbSKrlNaQSKfIzqYqVY8zlbs2NLBbWpRiU52GX2PbaBVNkg==",
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "foreground-child": "^3.1.0",
        "jackspeak": "^3.1.2",
        "minimatch": "^9.0.4",
        "minipass": "^7.1.2",
        "package-json-from-dist": "^1.0.0",
        "path-scurry": "^1.11.1"
      },
      "bin": {
        "glob": "dist/esm/bin.mjs"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/google-auth-library": {
      "version": "9.15.1",
      "resolved": "https://registry.npmjs.org/google-auth-library/-/google-auth-library-9.15.1.tgz",
      "integrity": "sha512-Jb6Z0+nvECVz+2lzSMt9u98UsoakXxA2HGHMCxh+so3n90XgYWkq5dur19JAJV7ONiJY22yBTyJB1TSkvPq9Ng==",
      "license": "Apache-2.0",
      "dependencies": {
        "base64-js": "^1.3.0",
        "ecdsa-sig-formatter": "^1.0.11",
        "gaxios": "^6.1.1",
        "gcp-metadata": "^6.1.0",
        "gtoken": "^7.0.0",
        "jws": "^4.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/google-auth-library/node_modules/gcp-metadata": {
      "version": "6.1.1",
      "resolved": "https://registry.npmjs.org/gcp-metadata/-/gcp-metadata-6.1.1.tgz",
      "integrity": "sha512-a4tiq7E0/5fTjxPAaH4jpjkSv/uCaU2p5KC6HVGrvl0cDjA8iBZv4vv1gyzlmK0ZUKqwpOyQMKzZQe3lTit77A==",
      "license": "Apache-2.0",
      "dependencies": {
        "gaxios": "^6.1.1",
        "google-logging-utils": "^0.0.2",
        "json-bigint": "^1.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/google-auth-library/node_modules/google-logging-utils": {
      "version": "0.0.2",
      "resolved": "https://registry.npmjs.org/google-logging-utils/-/google-logging-utils-0.0.2.tgz",
      "integrity": "sha512-NEgUnEcBiP5HrPzufUkBzJOD/Sxsco3rLNo1F1TNf7ieU8ryUzBhqba8r756CjLX7rn3fHl6iLEwPYuqpoKgQQ==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/google-auth-library/node_modules/jwa": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/jwa/-/jwa-2.0.1.tgz",
      "integrity": "sha512-hRF04fqJIP8Abbkq5NKGN0Bbr3JxlQ+qhZufXVr0DvujKy93ZCbXZMHDL4EOtodSbCWxOqR8MS1tXA5hwqCXDg==",
      "license": "MIT",
      "dependencies": {
        "buffer-equal-constant-time": "^1.0.1",
        "ecdsa-sig-formatter": "1.0.11",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/google-auth-library/node_modules/jws": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/jws/-/jws-4.0.0.tgz",
      "integrity": "sha512-KDncfTmOZoOMTFG4mBlG0qUIOlc03fmzH+ru6RgYVZhPkyiy/92Owlt/8UEN+a4TXR1FQetfIpJE8ApdvdVxTg==",
      "license": "MIT",
      "dependencies": {
        "jwa": "^2.0.0",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/google-gax": {
      "version": "4.6.1",
      "resolved": "https://registry.npmjs.org/google-gax/-/google-gax-4.6.1.tgz",
      "integrity": "sha512-V6eky/xz2mcKfAd1Ioxyd6nmA61gao3n01C+YeuIwu3vzM9EDR6wcVzMSIbLMDXWeoi9SHYctXuKYC5uJUT3eQ==",
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "@grpc/grpc-js": "^1.10.9",
        "@grpc/proto-loader": "^0.7.13",
        "@types/long": "^4.0.0",
        "abort-controller": "^3.0.0",
        "duplexify": "^4.0.0",
        "google-auth-library": "^9.3.0",
        "node-fetch": "^2.7.0",
        "object-hash": "^3.0.0",
        "proto3-json-serializer": "^2.0.2",
        "protobufjs": "^7.3.2",
        "retry-request": "^7.0.0",
        "uuid": "^9.0.1"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/google-gax/node_modules/node-fetch": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.7.0.tgz",
      "integrity": "sha512-c4FRfUm/dbcWZ7U+1Wq0AwCyFL+3nt2bEw05wfxSz+DWpWsitgmSgYmy2dQdWyKC1694ELPqMs/YzUSNozLt8A==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "whatwg-url": "^5.0.0"
      },
      "engines": {
        "node": "4.x || >=6.0.0"
      },
      "peerDependencies": {
        "encoding": "^0.1.0"
      },
      "peerDependenciesMeta": {
        "encoding": {
          "optional": true
        }
      }
    },
    "node_modules/google-gax/node_modules/tr46": {
      "version": "0.0.3",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-0.0.3.tgz",
      "integrity": "sha512-N3WMsuqV66lT30CrXNbEjx4GEwlow3v6rr4mCcv6prnfwhS01rkgyFdjPNBYd9br7LpXV1+Emh01fHnq2Gdgrw==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/google-gax/node_modules/uuid": {
      "version": "9.0.1",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-9.0.1.tgz",
      "integrity": "sha512-b+1eJOlsR9K8HJpow9Ok3fiWOWSIcIzXodvv0rQjVoOVNpWMpxf1wZNpt4y9h10odCNrqnYp1OBzRktckBe3sA==",
      "funding": [
        "https://github.com/sponsors/broofa",
        "https://github.com/sponsors/ctavan"
      ],
      "license": "MIT",
      "optional": true,
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/google-gax/node_modules/webidl-conversions": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-3.0.1.tgz",
      "integrity": "sha512-2JAn3z8AR6rjK8Sm8orRC0h/bcl/DqL7tRPdGZ4I1CjdF+EaMLmYxBHyXuKL849eucPFhvBoxMsflfOb8kxaeQ==",
      "license": "BSD-2-Clause",
      "optional": true
    },
    "node_modules/google-gax/node_modules/whatwg-url": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-5.0.0.tgz",
      "integrity": "sha512-saE57nupxk6v3HY35+jzBwYa0rKSy0XR8JSxZPwgLr7ys0IBzhGviA1/TUGJLmSVqs8pb9AnvICXEuOHLprYTw==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tr46": "~0.0.3",
        "webidl-conversions": "^3.0.0"
      }
    },
    "node_modules/google-logging-utils": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/google-logging-utils/-/google-logging-utils-1.1.3.tgz",
      "integrity": "sha512-eAmLkjDjAFCVXg7A1unxHsLf961m6y17QFqXqAXGj/gVkKFrEICfStRfwUlGNfeCEjNRa32JEWOUTlYXPyyKvA==",
      "license": "Apache-2.0",
      "optional": true,
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/gtoken": {
      "version": "7.1.0",
      "resolved": "https://registry.npmjs.org/gtoken/-/gtoken-7.1.0.tgz",
      "integrity": "sha512-pCcEwRi+TKpMlxAQObHDQ56KawURgyAf6jtIY046fJ5tIv3zDe/LEIubckAO8fj6JnAxLdmWkUfNyulQ2iKdEw==",
      "license": "MIT",
      "dependencies": {
        "gaxios": "^6.0.0",
        "jws": "^4.0.0"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/gtoken/node_modules/jwa": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/jwa/-/jwa-2.0.1.tgz",
      "integrity": "sha512-hRF04fqJIP8Abbkq5NKGN0Bbr3JxlQ+qhZufXVr0DvujKy93ZCbXZMHDL4EOtodSbCWxOqR8MS1tXA5hwqCXDg==",
      "license": "MIT",
      "dependencies": {
        "buffer-equal-constant-time": "^1.0.1",
        "ecdsa-sig-formatter": "1.0.11",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/gtoken/node_modules/jws": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/jws/-/jws-4.0.0.tgz",
      "integrity": "sha512-KDncfTmOZoOMTFG4mBlG0qUIOlc03fmzH+ru6RgYVZhPkyiy/92Owlt/8UEN+a4TXR1FQetfIpJE8ApdvdVxTg==",
      "license": "MIT",
      "dependencies": {
        "jwa": "^2.0.0",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/html-entities": {
      "version": "2.6.0",
      "resolved": "https://registry.npmjs.org/html-entities/-/html-entities-2.6.0.tgz",
      "integrity": "sha512-kig+rMn/QOVRvr7c86gQ8lWXq+Hkv6CbAH1hLu+RG338StTpE8Z0b44SDVaqVu7HGKf27frdmUYEs9hTUX/cLQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/mdevils"
        },
        {
          "type": "patreon",
          "url": "https://patreon.com/mdevils"
        }
      ],
      "license": "MIT",
      "optional": true
    },
    "node_modules/http-errors": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-2.0.0.tgz",
      "integrity": "sha512-FtwrG/euBzaEjYeRqOgly7G0qviiXoJWnvEH2Z1plBdXgbyjv34pHTSb9zoeHMyDy33+DWy5Wt9Wo+TURtOYSQ==",
      "license": "MIT",
      "dependencies": {
        "depd": "2.0.0",
        "inherits": "2.0.4",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "toidentifier": "1.0.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/http-parser-js": {
      "version": "0.5.10",
      "resolved": "https://registry.npmjs.org/http-parser-js/-/http-parser-js-0.5.10.tgz",
      "integrity": "sha512-Pysuw9XpUq5dVc/2SMHpuTY01RFl8fttgcyunjL7eEMhGM3cI4eOmiCycJDVCo/7O7ClfQD3SaI6ftDzqOXYMA==",
      "license": "MIT"
    },
    "node_modules/http-proxy-agent": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-5.0.0.tgz",
      "integrity": "sha512-n2hY8YdoRE1i7r6M0w9DIw5GgZN0G25P8zLCRQ8rjXtTU3vsNFBI/vWK/UIeE6g5MUUz6avwAPXmL6Fy9D/90w==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@tootallnate/once": "2",
        "agent-base": "6",
        "debug": "4"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/http-proxy-agent/node_modules/agent-base": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-6.0.2.tgz",
      "integrity": "sha512-RZNwNclF7+MS/8bDg70amg32dyeZGZxiDuQmZxKLAlQjr3jGyLx+4Kkk58UO7D2QdgFIQCovuSuZESne6RG6XQ==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "debug": "4"
      },
      "engines": {
        "node": ">= 6.0.0"
      }
    },
    "node_modules/https-proxy-agent": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-7.0.6.tgz",
      "integrity": "sha512-vK9P5/iUfdl95AI+JVyUuIcVtd4ofvtrOr3HNtM2yxC9bnMbEdp3x01OhQNnjb8IJYi38VlTE3mBXwcfvywuSw==",
      "license": "MIT",
      "dependencies": {
        "agent-base": "^7.1.2",
        "debug": "4"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/iconv-lite": {
      "version": "0.4.24",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.24.tgz",
      "integrity": "sha512-v3MXnZAcvnywkTUEZomIActle7RXXeedOR31wwl7VlyoXO4Qi9arvSenNQWne1TcRwhCL1HwLI21bEqdpj8/rA==",
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/inherits": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
      "license": "ISC"
    },
    "node_modules/ipaddr.js": {
      "version": "1.9.1",
      "resolved": "https://registry.npmjs.org/ipaddr.js/-/ipaddr.js-1.9.1.tgz",
      "integrity": "sha512-0KI/607xoxSToH7GjN1FfSbLoU0+btTicjsQSWQlh/hZykN8KpmMf7uYwPW3R+akZ6R/w18ZlXSHBYXiYUPO3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-stream": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-stream/-/is-stream-2.0.1.tgz",
      "integrity": "sha512-hFoiJiTl63nn+kstHGBtewWSKnQLpyb155KHheA1l39uvtO9nWIop1p3udqPcUd/xbF1VLMO4n7OI6p7RbngDg==",
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "license": "ISC",
      "optional": true
    },
    "node_modules/jackspeak": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/jackspeak/-/jackspeak-3.4.3.tgz",
      "integrity": "sha512-OGlZQpz2yfahA/Rd1Y8Cd9SIEsqvXkLVoSw/cgwhnhFMDbsQFeZYoJJ7bIZBS9BcamUW96asq/npPWugM+RQBw==",
      "license": "BlueOak-1.0.0",
      "optional": true,
      "dependencies": {
        "@isaacs/cliui": "^8.0.2"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      },
      "optionalDependencies": {
        "@pkgjs/parseargs": "^0.11.0"
      }
    },
    "node_modules/jose": {
      "version": "4.15.9",
      "resolved": "https://registry.npmjs.org/jose/-/jose-4.15.9.tgz",
      "integrity": "sha512-1vUQX+IdDMVPj4k8kOxgUqlcK518yluMuGZwqlr44FS1ppZB/5GWh4rZG89erpOBOJjU/OBsnCVFfapsRz6nEA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/panva"
      }
    },
    "node_modules/json-bigint": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/json-bigint/-/json-bigint-1.0.0.tgz",
      "integrity": "sha512-SiPv/8VpZuWbvLSMtTDU8hEfrZWg/mH/nV/b4o0CYbSxu1UIQPLdwKOCIyLQX+VIPO5vrLX3i8qtqFyhdPSUSQ==",
      "license": "MIT",
      "dependencies": {
        "bignumber.js": "^9.0.0"
      }
    },
    "node_modules/jsonwebtoken": {
      "version": "9.0.2",
      "resolved": "https://registry.npmjs.org/jsonwebtoken/-/jsonwebtoken-9.0.2.tgz",
      "integrity": "sha512-PRp66vJ865SSqOlgqS8hujT5U4AOgMfhrwYIuIhfKaoSCZcirrmASQr8CX7cUg+RMih+hgznrjp99o+W4pJLHQ==",
      "license": "MIT",
      "dependencies": {
        "jws": "^3.2.2",
        "lodash.includes": "^4.3.0",
        "lodash.isboolean": "^3.0.3",
        "lodash.isinteger": "^4.0.4",
        "lodash.isnumber": "^3.0.3",
        "lodash.isplainobject": "^4.0.6",
        "lodash.isstring": "^4.0.1",
        "lodash.once": "^4.0.0",
        "ms": "^2.1.1",
        "semver": "^7.5.4"
      },
      "engines": {
        "node": ">=12",
        "npm": ">=6"
      }
    },
    "node_modules/jwa": {
      "version": "1.4.2",
      "resolved": "https://registry.npmjs.org/jwa/-/jwa-1.4.2.tgz",
      "integrity": "sha512-eeH5JO+21J78qMvTIDdBXidBd6nG2kZjg5Ohz/1fpa28Z4CcsWUzJ1ZZyFq/3z3N17aZy+ZuBoHljASbL1WfOw==",
      "license": "MIT",
      "dependencies": {
        "buffer-equal-constant-time": "^1.0.1",
        "ecdsa-sig-formatter": "1.0.11",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/jwks-rsa": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/jwks-rsa/-/jwks-rsa-3.2.0.tgz",
      "integrity": "sha512-PwchfHcQK/5PSydeKCs1ylNym0w/SSv8a62DgHJ//7x2ZclCoinlsjAfDxAAbpoTPybOum/Jgy+vkvMmKz89Ww==",
      "license": "MIT",
      "dependencies": {
        "@types/express": "^4.17.20",
        "@types/jsonwebtoken": "^9.0.4",
        "debug": "^4.3.4",
        "jose": "^4.15.4",
        "limiter": "^1.1.5",
        "lru-memoizer": "^2.2.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/jws": {
      "version": "3.2.2",
      "resolved": "https://registry.npmjs.org/jws/-/jws-3.2.2.tgz",
      "integrity": "sha512-YHlZCB6lMTllWDtSPHz/ZXTsi8S00usEV6v1tjq8tOUZzw7DpSDWVXjXDre6ed1w/pd495ODpHZYSdkRTsa0HA==",
      "license": "MIT",
      "dependencies": {
        "jwa": "^1.4.1",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/kareem": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/kareem/-/kareem-3.0.0.tgz",
      "integrity": "sha512-RKhaOBSPN8L7y4yAgNhDT2602G5FD6QbOIISbjN9D6mjHPeqeg7K+EB5IGSU5o81/X2Gzm3ICnAvQW3x3OP8HA==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/limiter": {
      "version": "1.1.5",
      "resolved": "https://registry.npmjs.org/limiter/-/limiter-1.1.5.tgz",
      "integrity": "sha512-FWWMIEOxz3GwUI4Ts/IvgVy6LPvoMPgjMdQ185nN6psJyBJ4yOpzqm695/h5umdLJg2vW3GR5iG11MAkR2AzJA=="
    },
    "node_modules/lodash.camelcase": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/lodash.camelcase/-/lodash.camelcase-4.3.0.tgz",
      "integrity": "sha512-TwuEnCnxbc3rAvhf/LbG7tJUDzhqXyFnv3dtzLOPgCG/hODL7WFnsbwktkD7yUV0RrreP/l1PALq/YSg6VvjlA==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/lodash.clonedeep": {
      "version": "4.5.0",
      "resolved": "https://registry.npmjs.org/lodash.clonedeep/-/lodash.clonedeep-4.5.0.tgz",
      "integrity": "sha512-H5ZhCF25riFd9uB5UCkVKo61m3S/xZk1x4wA6yp/L3RFP6Z/eHH1ymQcGLo7J3GMPfm0V/7m1tryHuGVxpqEBQ==",
      "license": "MIT"
    },
    "node_modules/lodash.includes": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/lodash.includes/-/lodash.includes-4.3.0.tgz",
      "integrity": "sha512-W3Bx6mdkRTGtlJISOvVD/lbqjTlPPUDTMnlXZFnVwi9NKJ6tiAk6LVdlhZMm17VZisqhKcgzpO5Wz91PCt5b0w==",
      "license": "MIT"
    },
    "node_modules/lodash.isboolean": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/lodash.isboolean/-/lodash.isboolean-3.0.3.tgz",
      "integrity": "sha512-Bz5mupy2SVbPHURB98VAcw+aHh4vRV5IPNhILUCsOzRmsTmSQ17jIuqopAentWoehktxGd9e/hbIXq980/1QJg==",
      "license": "MIT"
    },
    "node_modules/lodash.isinteger": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/lodash.isinteger/-/lodash.isinteger-4.0.4.tgz",
      "integrity": "sha512-DBwtEWN2caHQ9/imiNeEA5ys1JoRtRfY3d7V9wkqtbycnAmTvRRmbHKDV4a0EYc678/dia0jrte4tjYwVBaZUA==",
      "license": "MIT"
    },
    "node_modules/lodash.isnumber": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/lodash.isnumber/-/lodash.isnumber-3.0.3.tgz",
      "integrity": "sha512-QYqzpfwO3/CWf3XP+Z+tkQsfaLL/EnUlXWVkIk5FUPc4sBdTehEqZONuyRt2P67PXAk+NXmTBcc97zw9t1FQrw==",
      "license": "MIT"
    },
    "node_modules/lodash.isplainobject": {
      "version": "4.0.6",
      "resolved": "https://registry.npmjs.org/lodash.isplainobject/-/lodash.isplainobject-4.0.6.tgz",
      "integrity": "sha512-oSXzaWypCMHkPC3NvBEaPHf0KsA5mvPrOPgQWDsbg8n7orZ290M0BmC/jgRZ4vcJ6DTAhjrsSYgdsW/F+MFOBA==",
      "license": "MIT"
    },
    "node_modules/lodash.isstring": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/lodash.isstring/-/lodash.isstring-4.0.1.tgz",
      "integrity": "sha512-0wJxfxH1wgO3GrbuP+dTTk7op+6L41QCXbGINEmD+ny/G/eCqGzxyCsh7159S+mgDDcoarnBw6PC1PS5+wUGgw==",
      "license": "MIT"
    },
    "node_modules/lodash.once": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/lodash.once/-/lodash.once-4.1.1.tgz",
      "integrity": "sha512-Sb487aTOCr9drQVL8pIxOzVhafOjZN9UU54hiN8PU3uAiSV7lx1yYNpbNmex2PK6dSJoNTSJUUswT651yww3Mg==",
      "license": "MIT"
    },
    "node_modules/long": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/long/-/long-5.3.2.tgz",
      "integrity": "sha512-mNAgZ1GmyNhD7AuqnTG3/VQ26o760+ZYBPKjPvugO8+nLbYfX6TVpJPseBvopbdY+qpZ/lKUnmEc1LeZYS3QAA==",
      "license": "Apache-2.0",
      "optional": true
    },
    "node_modules/lru-cache": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-6.0.0.tgz",
      "integrity": "sha512-Jo6dJ04CmSjuznwJSS3pUeWmd/H0ffTlkXXgwZi+eq1UCmqQwCh+eLsYOYCwY991i2Fah4h1BEMCx4qThGbsiA==",
      "license": "ISC",
      "dependencies": {
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/lru-memoizer": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/lru-memoizer/-/lru-memoizer-2.3.0.tgz",
      "integrity": "sha512-GXn7gyHAMhO13WSKrIiNfztwxodVsP8IoZ3XfrJV4yH2x0/OeTO/FIaAHTY5YekdGgW94njfuKmyyt1E0mR6Ug==",
      "license": "MIT",
      "dependencies": {
        "lodash.clonedeep": "^4.5.0",
        "lru-cache": "6.0.0"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/media-typer": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/media-typer/-/media-typer-0.3.0.tgz",
      "integrity": "sha512-dq+qelQ9akHpcOl/gUVRTxVIOkAJ1wR3QAvb4RsVjS8oVoFjDGTc679wJYmUmknUF5HwMLOgb5O+a3KxfWapPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/memory-pager": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/memory-pager/-/memory-pager-1.5.0.tgz",
      "integrity": "sha512-ZS4Bp4r/Zoeq6+NLJpP+0Zzm0pR8whtGPf1XExKLJBAczGMnSi3It14OiNCStjQjM6NU1okjQGSxgEZN8eBYKg==",
      "license": "MIT"
    },
    "node_modules/merge-descriptors": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/merge-descriptors/-/merge-descriptors-1.0.3.tgz",
      "integrity": "sha512-gaNvAS7TZ897/rVaZ0nMtAyxNyi/pdbjbAwUpFQpN70GqnVfOiXpeUUMKRBmzXaSQ8DdTX4/0ms62r2K+hE6mQ==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/methods": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/methods/-/methods-1.1.2.tgz",
      "integrity": "sha512-iclAHeNqNm68zFtnZ0e+1L2yUIdvzNoauKU4WBA3VvH/vPFieF7qfRlwUZU+DA9P9bPXIS90ulxoUoCH23sV2w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/mime/-/mime-3.0.0.tgz",
      "integrity": "sha512-jSCU7/VB1loIWBZe14aEYHU/+1UMEHoaO7qxCOVJOw9GgH72VAWppxNcjU+x9a2k3GSIBXNKxXQFqRvvZ7vr3A==",
      "license": "MIT",
      "optional": true,
      "bin": {
        "mime": "cli.js"
      },
      "engines": {
        "node": ">=10.0.0"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/minimatch": {
      "version": "9.0.5",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.5.tgz",
      "integrity": "sha512-G6T0ZX48xgozx7587koeX9Ys2NYy6Gmv//P89sEte9V9whIapMNF4idKxnW2QtCcLiTWlb/wfCabAtAFWhhBow==",
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/minipass": {
      "version": "7.1.2",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-7.1.2.tgz",
      "integrity": "sha512-qOOzS1cBTWYF4BH8fVePDBOO9iptMnGUEZwNc/cMWnTV2nVLZ7VoNWEPHkYczZA0pdoA7dl6e7FL659nX9S2aw==",
      "license": "ISC",
      "optional": true,
      "engines": {
        "node": ">=16 || 14 >=14.17"
      }
    },
    "node_modules/mongodb": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/mongodb/-/mongodb-7.0.0.tgz",
      "integrity": "sha512-vG/A5cQrvGGvZm2mTnCSz1LUcbOPl83hfB6bxULKQ8oFZauyox/2xbZOoGNl+64m8VBrETkdGCDBdOsCr3F3jg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@mongodb-js/saslprep": "^1.3.0",
        "bson": "^7.0.0",
        "mongodb-connection-string-url": "^7.0.0"
      },
      "engines": {
        "node": ">=20.19.0"
      },
      "peerDependencies": {
        "@aws-sdk/credential-providers": "^3.806.0",
        "@mongodb-js/zstd": "^7.0.0",
        "gcp-metadata": "^7.0.1",
        "kerberos": "^7.0.0",
        "mongodb-client-encryption": ">=7.0.0 <7.1.0",
        "snappy": "^7.3.2",
        "socks": "^2.8.6"
      },
      "peerDependenciesMeta": {
        "@aws-sdk/credential-providers": {
          "optional": true
        },
        "@mongodb-js/zstd": {
          "optional": true
        },
        "gcp-metadata": {
          "optional": true
        },
        "kerberos": {
          "optional": true
        },
        "mongodb-client-encryption": {
          "optional": true
        },
        "snappy": {
          "optional": true
        },
        "socks": {
          "optional": true
        }
      }
    },
    "node_modules/mongodb-connection-string-url": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/mongodb-connection-string-url/-/mongodb-connection-string-url-7.0.0.tgz",
      "integrity": "sha512-irhhjRVLE20hbkRl4zpAYLnDMM+zIZnp0IDB9akAFFUZp/3XdOfwwddc7y6cNvF2WCEtfTYRwYbIfYa2kVY0og==",
      "license": "Apache-2.0",
      "dependencies": {
        "@types/whatwg-url": "^13.0.0",
        "whatwg-url": "^14.1.0"
      },
      "engines": {
        "node": ">=20.19.0"
      }
    },
    "node_modules/mongoose": {
      "version": "9.0.0",
      "resolved": "https://registry.npmjs.org/mongoose/-/mongoose-9.0.0.tgz",
      "integrity": "sha512-J6wTGC8/hSFpy9K6kPbKDnBNoUcX4iOGCasUrRzlSKdwdVNxdscLA4oHKOQwJlHqh/TxDNg+Uzg6koCyCKP0wA==",
      "license": "MIT",
      "dependencies": {
        "kareem": "3.0.0",
        "mongodb": "~7.0",
        "mpath": "0.9.0",
        "mquery": "6.0.0",
        "ms": "2.1.3",
        "sift": "17.1.3"
      },
      "engines": {
        "node": ">=20.19.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/mongoose"
      }
    },
    "node_modules/mpath": {
      "version": "0.9.0",
      "resolved": "https://registry.npmjs.org/mpath/-/mpath-0.9.0.tgz",
      "integrity": "sha512-ikJRQTk8hw5DEoFVxHG1Gn9T/xcjtdnOKIU1JTmGjZZlg9LST2mBLmcX3/ICIbgJydT2GOc15RnNy5mHmzfSew==",
      "license": "MIT",
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/mquery": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/mquery/-/mquery-6.0.0.tgz",
      "integrity": "sha512-b2KQNsmgtkscfeDgkYMcWGn9vZI9YoXh802VDEwE6qc50zxBFQ0Oo8ROkawbPAsXCY1/Z1yp0MagqsZStPWJjw==",
      "license": "MIT",
      "engines": {
        "node": ">=20.19.0"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/negotiator": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/negotiator/-/negotiator-0.6.3.tgz",
      "integrity": "sha512-+EUsqGPLsM+j/zdChZjsnX51g4XrHFOIXwfnCVPGlQk/k5giakcKsuxCObBRu6DSm9opw/O6slWbJdghQM4bBg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/node-domexception": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/node-domexception/-/node-domexception-1.0.0.tgz",
      "integrity": "sha512-/jKZoMpw0F8GRwl4/eLROPA3cfcXtLApP0QzLmUT/HuPCZWyB7IY9ZrMeKw2O/nFIqPQB3PVM9aYm0F312AXDQ==",
      "deprecated": "Use your platform's native DOMException instead",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/jimmywarting"
        },
        {
          "type": "github",
          "url": "https://paypal.me/jimmywarting"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=10.5.0"
      }
    },
    "node_modules/node-fetch": {
      "version": "3.3.2",
      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-3.3.2.tgz",
      "integrity": "sha512-dRB78srN/l6gqWulah9SrxeYnxeddIG30+GOqK/9OlLVyLg3HPnr6SqOWTWOXKRwC2eGYCkZ59NNuSgvSrpgOA==",
      "license": "MIT",
      "dependencies": {
        "data-uri-to-buffer": "^4.0.0",
        "fetch-blob": "^3.1.4",
        "formdata-polyfill": "^4.0.10"
      },
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/node-fetch"
      }
    },
    "node_modules/node-forge": {
      "version": "1.3.2",
      "resolved": "https://registry.npmjs.org/node-forge/-/node-forge-1.3.2.tgz",
      "integrity": "sha512-6xKiQ+cph9KImrRh0VsjH2d8/GXA4FIMlgU4B757iI1ApvcyA9VlouP0yZJha01V+huImO+kKMU7ih+2+E14fw==",
      "license": "(BSD-3-Clause OR GPL-2.0)",
      "engines": {
        "node": ">= 6.13.0"
      }
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-hash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/object-hash/-/object-hash-3.0.0.tgz",
      "integrity": "sha512-RSn9F68PjH9HqtltsSnqYC1XXoWe9Bju5+213R98cNGttag9q9yAOTzdbsqvIa7aNm5WffBZFpWYr2aWrklWAw==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/object-inspect": {
      "version": "1.13.4",
      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
      "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/on-finished": {
      "version": "2.4.1",
      "resolved": "https://registry.npmjs.org/on-finished/-/on-finished-2.4.1.tgz",
      "integrity": "sha512-oVlzkg3ENAhCk2zdv7IJwd/QUD4z2RxRwpkcGY8psCVcCYZNq4wYnVWALHM+brtuJjePWiYF/ClmuDr8Ch5+kg==",
      "license": "MIT",
      "dependencies": {
        "ee-first": "1.1.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/once": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
      "integrity": "sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==",
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "wrappy": "1"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/package-json-from-dist": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/package-json-from-dist/-/package-json-from-dist-1.0.1.tgz",
      "integrity": "sha512-UEZIS3/by4OC8vL3P2dTXRETpebLI2NiI5vIrjaD/5UtrkFX/tNbwjTSRAGC/+7CAo2pIcBaRgWmcBBHcsaCIw==",
      "license": "BlueOak-1.0.0",
      "optional": true
    },
    "node_modules/parseurl": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/parseurl/-/parseurl-1.3.3.tgz",
      "integrity": "sha512-CiyeOxFT/JZyN5m0z9PfXw4SCBJ6Sygz1Dpl0wqjlhDEGGBP1GnsUVEL0p63hoG1fcj3fHynXi9NYO4nWOL+qQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-scurry": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/path-scurry/-/path-scurry-1.11.1.tgz",
      "integrity": "sha512-Xa4Nw17FS9ApQFJ9umLiJS4orGjm7ZzwUrwamcGQuHSzDyth9boKDaycYdDcZDuqYATXw4HFXgaqWTctW/v1HA==",
      "license": "BlueOak-1.0.0",
      "optional": true,
      "dependencies": {
        "lru-cache": "^10.2.0",
        "minipass": "^5.0.0 || ^6.0.2 || ^7.0.0"
      },
      "engines": {
        "node": ">=16 || 14 >=14.18"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/path-scurry/node_modules/lru-cache": {
      "version": "10.4.3",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-10.4.3.tgz",
      "integrity": "sha512-JNAzZcXrCt42VGLuYz0zfAzDfAvJWW6AfYlDBQyDV5DClI2m5sAmK+OIO7s59XfsRsWHp02jAJrRadPRGTt6SQ==",
      "license": "ISC",
      "optional": true
    },
    "node_modules/path-to-regexp": {
      "version": "0.1.12",
      "resolved": "https://registry.npmjs.org/path-to-regexp/-/path-to-regexp-0.1.12.tgz",
      "integrity": "sha512-RA1GjUVMnvYFxuqovrEqZoxxW5NUZqbwKtYz/Tt7nXerk0LbLblQmrsgdeOxV5SFHf0UDggjS/bSeOZwt1pmEQ==",
      "license": "MIT"
    },
    "node_modules/pg": {
      "version": "8.16.3",
      "resolved": "https://registry.npmjs.org/pg/-/pg-8.16.3.tgz",
      "integrity": "sha512-enxc1h0jA/aq5oSDMvqyW3q89ra6XIIDZgCX9vkMrnz5DFTw/Ny3Li2lFQ+pt3L6MCgm/5o2o8HW9hiJji+xvw==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "pg-connection-string": "^2.9.1",
        "pg-pool": "^3.10.1",
        "pg-protocol": "^1.10.3",
        "pg-types": "2.2.0",
        "pgpass": "1.0.5"
      },
      "engines": {
        "node": ">= 16.0.0"
      },
      "optionalDependencies": {
        "pg-cloudflare": "^1.2.7"
      },
      "peerDependencies": {
        "pg-native": ">=3.0.1"
      },
      "peerDependenciesMeta": {
        "pg-native": {
          "optional": true
        }
      }
    },
    "node_modules/pg-cloudflare": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/pg-cloudflare/-/pg-cloudflare-1.2.7.tgz",
      "integrity": "sha512-YgCtzMH0ptvZJslLM1ffsY4EuGaU0cx4XSdXLRFae8bPP4dS5xL1tNB3k2o/N64cHJpwU7dxKli/nZ2lUa5fLg==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/pg-connection-string": {
      "version": "2.9.1",
      "resolved": "https://registry.npmjs.org/pg-connection-string/-/pg-connection-string-2.9.1.tgz",
      "integrity": "sha512-nkc6NpDcvPVpZXxrreI/FOtX3XemeLl8E0qFr6F2Lrm/I8WOnaWNhIPK2Z7OHpw7gh5XJThi6j6ppgNoaT1w4w==",
      "license": "MIT"
    },
    "node_modules/pg-int8": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/pg-int8/-/pg-int8-1.0.1.tgz",
      "integrity": "sha512-WCtabS6t3c8SkpDBUlb1kjOs7l66xsGdKpIPZsg4wR+B3+u9UAum2odSsF9tnvxg80h4ZxLWMy4pRjOsFIqQpw==",
      "license": "ISC",
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/pg-pool": {
      "version": "3.10.1",
      "resolved": "https://registry.npmjs.org/pg-pool/-/pg-pool-3.10.1.tgz",
      "integrity": "sha512-Tu8jMlcX+9d8+QVzKIvM/uJtp07PKr82IUOYEphaWcoBhIYkoHpLXN3qO59nAI11ripznDsEzEv8nUxBVWajGg==",
      "license": "MIT",
      "peerDependencies": {
        "pg": ">=8.0"
      }
    },
    "node_modules/pg-protocol": {
      "version": "1.10.3",
      "resolved": "https://registry.npmjs.org/pg-protocol/-/pg-protocol-1.10.3.tgz",
      "integrity": "sha512-6DIBgBQaTKDJyxnXaLiLR8wBpQQcGWuAESkRBX/t6OwA8YsqP+iVSiond2EDy6Y/dsGk8rh/jtax3js5NeV7JQ==",
      "license": "MIT"
    },
    "node_modules/pg-types": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/pg-types/-/pg-types-2.2.0.tgz",
      "integrity": "sha512-qTAAlrEsl8s4OiEQY69wDvcMIdQN6wdz5ojQiOy6YRMuynxenON0O5oCpJI6lshc6scgAY8qvJ2On/p+CXY0GA==",
      "license": "MIT",
      "dependencies": {
        "pg-int8": "1.0.1",
        "postgres-array": "~2.0.0",
        "postgres-bytea": "~1.0.0",
        "postgres-date": "~1.0.4",
        "postgres-interval": "^1.1.0"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/pgpass": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/pgpass/-/pgpass-1.0.5.tgz",
      "integrity": "sha512-FdW9r/jQZhSeohs1Z3sI1yxFQNFvMcnmfuj4WBMUTxOrAyLMaTcE1aAMBiTlbMNaXvBCQuVi0R7hd8udDSP7ug==",
      "license": "MIT",
      "dependencies": {
        "split2": "^4.1.0"
      }
    },
    "node_modules/postgres-array": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/postgres-array/-/postgres-array-2.0.0.tgz",
      "integrity": "sha512-VpZrUqU5A69eQyW2c5CA1jtLecCsN2U/bD6VilrFDWq5+5UIEVO7nazS3TEcHf1zuPYO/sqGvUvW62g86RXZuA==",
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/postgres-bytea": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/postgres-bytea/-/postgres-bytea-1.0.0.tgz",
      "integrity": "sha512-xy3pmLuQqRBZBXDULy7KbaitYqLcmxigw14Q5sj8QBVLqEwXfeybIKVWiqAXTlcvdvb0+xkOtDbfQMOf4lST1w==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/postgres-date": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/postgres-date/-/postgres-date-1.0.7.tgz",
      "integrity": "sha512-suDmjLVQg78nMK2UZ454hAG+OAW+HQPZ6n++TNDUX+L0+uUlLywnoxJKDou51Zm+zTCjrCl0Nq6J9C5hP9vK/Q==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/postgres-interval": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/postgres-interval/-/postgres-interval-1.2.0.tgz",
      "integrity": "sha512-9ZhXKM/rw350N1ovuWHbGxnGh/SNJ4cnxHiM0rxE4VN41wsg8P8zWn9hv/buK00RP4WvlOyr/RBDiptyxVbkZQ==",
      "license": "MIT",
      "dependencies": {
        "xtend": "^4.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/proto3-json-serializer": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/proto3-json-serializer/-/proto3-json-serializer-2.0.2.tgz",
      "integrity": "sha512-SAzp/O4Yh02jGdRc+uIrGoe87dkN/XtwxfZ4ZyafJHymd79ozp5VG5nyZ7ygqPM5+cpLDjjGnYFUkngonyDPOQ==",
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "protobufjs": "^7.2.5"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/protobufjs": {
      "version": "7.5.4",
      "resolved": "https://registry.npmjs.org/protobufjs/-/protobufjs-7.5.4.tgz",
      "integrity": "sha512-CvexbZtbov6jW2eXAvLukXjXUW1TzFaivC46BpWc/3BpcCysb5Vffu+B3XHMm8lVEuy2Mm4XGex8hBSg1yapPg==",
      "hasInstallScript": true,
      "license": "BSD-3-Clause",
      "optional": true,
      "dependencies": {
        "@protobufjs/aspromise": "^1.1.2",
        "@protobufjs/base64": "^1.1.2",
        "@protobufjs/codegen": "^2.0.4",
        "@protobufjs/eventemitter": "^1.1.0",
        "@protobufjs/fetch": "^1.1.0",
        "@protobufjs/float": "^1.0.2",
        "@protobufjs/inquire": "^1.1.0",
        "@protobufjs/path": "^1.1.2",
        "@protobufjs/pool": "^1.1.0",
        "@protobufjs/utf8": "^1.1.0",
        "@types/node": ">=13.7.0",
        "long": "^5.0.0"
      },
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/proxy-addr": {
      "version": "2.0.7",
      "resolved": "https://registry.npmjs.org/proxy-addr/-/proxy-addr-2.0.7.tgz",
      "integrity": "sha512-llQsMLSUDUPT44jdrU/O37qlnifitDP+ZwrmmZcoSKyLKvtZxpyV0n2/bD/N4tBAAZ/gJEdZU7KMraoK1+XYAg==",
      "license": "MIT",
      "dependencies": {
        "forwarded": "0.2.0",
        "ipaddr.js": "1.9.1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/qs": {
      "version": "6.13.0",
      "resolved": "https://registry.npmjs.org/qs/-/qs-6.13.0.tgz",
      "integrity": "sha512-+38qI9SOr8tfZ4QmJNplMUxqjbe7LKvvZgWdExBOmd+egZTtjLB67Gu0HRX3u/XOq7UU2Nx6nsjvS16Z9uwfpg==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "side-channel": "^1.0.6"
      },
      "engines": {
        "node": ">=0.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/range-parser": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/range-parser/-/range-parser-1.2.1.tgz",
      "integrity": "sha512-Hrgsx+orqoygnmhFbKaHE6c296J+HTAQXoxEF6gNupROmmGJRoyzfG3ccAveqCBrwr/2yxQ5BVd/GTl5agOwSg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/raw-body": {
      "version": "2.5.2",
      "resolved": "https://registry.npmjs.org/raw-body/-/raw-body-2.5.2.tgz",
      "integrity": "sha512-8zGqypfENjCIqGhgXToC8aB2r7YrBX+AQAfIPs/Mlk+BtPTztOvTS01NRW/3Eh60J+a48lt8qsCzirQ6loCVfA==",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "http-errors": "2.0.0",
        "iconv-lite": "0.4.24",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/readable-stream": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.2.tgz",
      "integrity": "sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "inherits": "^2.0.3",
        "string_decoder": "^1.1.1",
        "util-deprecate": "^1.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/require-directory": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/require-directory/-/require-directory-2.1.1.tgz",
      "integrity": "sha512-fGxEI7+wsG9xrvdjsrlmL22OMTTiHRwAMroiEeMgq8gzoLC/PQr7RsRDSTLUg/bZAZtF+TVIkHc6/4RIKrui+Q==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/retry": {
      "version": "0.13.1",
      "resolved": "https://registry.npmjs.org/retry/-/retry-0.13.1.tgz",
      "integrity": "sha512-XQBQ3I8W1Cge0Seh+6gjj03LbmRFWuoszgK9ooCpwYIrhhoO80pfq4cUkU5DkknwfOfFteRwlZ56PYOGYyFWdg==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/retry-request": {
      "version": "7.0.2",
      "resolved": "https://registry.npmjs.org/retry-request/-/retry-request-7.0.2.tgz",
      "integrity": "sha512-dUOvLMJ0/JJYEn8NrpOaGNE7X3vpI5XlZS/u0ANjqtcZVKnIxP7IgCFwrKTxENw29emmwug53awKtaMm4i9g5w==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@types/request": "^2.48.8",
        "extend": "^3.0.2",
        "teeny-request": "^9.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/rimraf": {
      "version": "5.0.10",
      "resolved": "https://registry.npmjs.org/rimraf/-/rimraf-5.0.10.tgz",
      "integrity": "sha512-l0OE8wL34P4nJH/H2ffoaniAokM2qSmrtXHmlpvYr5AVVX8msAyW0l8NVJFDxlSK4u3Uh/f41cQheDVdnYijwQ==",
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "glob": "^10.3.7"
      },
      "bin": {
        "rimraf": "dist/esm/bin.mjs"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/safe-buffer": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/safer-buffer": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==",
      "license": "MIT"
    },
    "node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/send": {
      "version": "0.19.0",
      "resolved": "https://registry.npmjs.org/send/-/send-0.19.0.tgz",
      "integrity": "sha512-dW41u5VfLXu8SJh5bwRmyYUbAoSB3c9uQh6L8h/KtsFREPWpbX1lrljJo186Jc4nmci/sGUZ9a0a0J2zgfq2hw==",
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "encodeurl": "~1.0.2",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "mime": "1.6.0",
        "ms": "2.1.3",
        "on-finished": "2.4.1",
        "range-parser": "~1.2.1",
        "statuses": "2.0.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/send/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/send/node_modules/debug/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/send/node_modules/encodeurl": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-1.0.2.tgz",
      "integrity": "sha512-TPJXq8JqFaVYm2CWmPvnP2Iyo4ZSM7/QKcSmuMLDObfpH5fi7RUGmd/rTDf+rut/saiDiQEeVTNgAmJEdAOx0w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/send/node_modules/mime": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/mime/-/mime-1.6.0.tgz",
      "integrity": "sha512-x0Vn8spI+wuJ1O6S7gnbaQg8Pxh4NNHb7KSINmEWKiPE4RKOplvijn+NkmYmmRgP68mc70j2EbeTFRsrswaQeg==",
      "license": "MIT",
      "bin": {
        "mime": "cli.js"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/serve-static": {
      "version": "1.16.2",
      "resolved": "https://registry.npmjs.org/serve-static/-/serve-static-1.16.2.tgz",
      "integrity": "sha512-VqpjJZKadQB/PEbEwvFdO43Ax5dFBZ2UECszz8bQ7pi7wt//PWe1P6MN7eCnjsatYtBT6EuiClbjSWP2WrIoTw==",
      "license": "MIT",
      "dependencies": {
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "parseurl": "~1.3.3",
        "send": "0.19.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/setprototypeof": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/setprototypeof/-/setprototypeof-1.2.0.tgz",
      "integrity": "sha512-E5LDX7Wrp85Kil5bhZv46j8jOeboKq5JMmYM3gVGdGH8xFpPWXUMsNrlODCrkoxMEeNi/XZIwuRvY4XNwYMJpw==",
      "license": "ISC"
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/side-channel": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
      "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3",
        "side-channel-list": "^1.0.0",
        "side-channel-map": "^1.0.1",
        "side-channel-weakmap": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-list": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
      "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-map": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
      "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-weakmap": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
      "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3",
        "side-channel-map": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/sift": {
      "version": "17.1.3",
      "resolved": "https://registry.npmjs.org/sift/-/sift-17.1.3.tgz",
      "integrity": "sha512-Rtlj66/b0ICeFzYTuNvX/EF1igRbbnGSvEyT79McoZa/DeGhMyC5pWKOEsZKnpkqtSeovd5FL/bjHWC3CIIvCQ==",
      "license": "MIT"
    },
    "node_modules/signal-exit": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-4.1.0.tgz",
      "integrity": "sha512-bzyZ1e88w9O1iNJbKnOlvYTrWPDl46O1bG0D3XInv+9tkPrxrN8jUUTiFlDkkmKWgn1M6CfIA13SuGqOa9Korw==",
      "license": "ISC",
      "optional": true,
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/socket.io": {
      "version": "4.8.1",
      "resolved": "https://registry.npmjs.org/socket.io/-/socket.io-4.8.1.tgz",
      "integrity": "sha512-oZ7iUCxph8WYRHHcjBEc9unw3adt5CmSNlppj/5Q4k2RIrhl8Z5yY2Xr4j9zj0+wzVZ0bxmYoGSzKJnRl6A4yg==",
      "license": "MIT",
      "dependencies": {
        "accepts": "~1.3.4",
        "base64id": "~2.0.0",
        "cors": "~2.8.5",
        "debug": "~4.3.2",
        "engine.io": "~6.6.0",
        "socket.io-adapter": "~2.5.2",
        "socket.io-parser": "~4.2.4"
      },
      "engines": {
        "node": ">=10.2.0"
      }
    },
    "node_modules/socket.io-adapter": {
      "version": "2.5.5",
      "resolved": "https://registry.npmjs.org/socket.io-adapter/-/socket.io-adapter-2.5.5.tgz",
      "integrity": "sha512-eLDQas5dzPgOWCk9GuuJC2lBqItuhKI4uxGgo9aIV7MYbk2h9Q6uULEh8WBzThoI7l+qU9Ast9fVUmkqPP9wYg==",
      "license": "MIT",
      "dependencies": {
        "debug": "~4.3.4",
        "ws": "~8.17.1"
      }
    },
    "node_modules/socket.io-adapter/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/socket.io-parser": {
      "version": "4.2.4",
      "resolved": "https://registry.npmjs.org/socket.io-parser/-/socket.io-parser-4.2.4.tgz",
      "integrity": "sha512-/GbIKmo8ioc+NIWIhwdecY0ge+qVBSMdgxGygevmdHj24bsfgtCmcUUcQ5ZzcylGFHsN3k4HB4Cgkl96KVnuew==",
      "license": "MIT",
      "dependencies": {
        "@socket.io/component-emitter": "~3.1.0",
        "debug": "~4.3.1"
      },
      "engines": {
        "node": ">=10.0.0"
      }
    },
    "node_modules/socket.io-parser/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/socket.io/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/sparse-bitfield": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/sparse-bitfield/-/sparse-bitfield-3.0.3.tgz",
      "integrity": "sha512-kvzhi7vqKTfkh0PZU+2D2PIllw2ymqJKujUcyPMd9Y75Nv4nPbGJZXNhxsgdQab2BmlDct1YnfQCguEvHr7VsQ==",
      "license": "MIT",
      "dependencies": {
        "memory-pager": "^1.0.2"
      }
    },
    "node_modules/split2": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/split2/-/split2-4.2.0.tgz",
      "integrity": "sha512-UcjcJOWknrNkF6PLX83qcHM6KHgVKNkV62Y8a5uYDVv9ydGQVwAHMKqHdJje1VTWpljG0WYpCDhrCdAOYH4TWg==",
      "license": "ISC",
      "engines": {
        "node": ">= 10.x"
      }
    },
    "node_modules/statuses": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/statuses/-/statuses-2.0.1.tgz",
      "integrity": "sha512-RwNA9Z/7PrK06rYLIzFMlaF+l73iwpzsqRIFgbMLbTcLD6cOao82TaWefPXQvB2fOC4AjuYSEndS7N/mTCbkdQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/stream-events": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/stream-events/-/stream-events-1.0.5.tgz",
      "integrity": "sha512-E1GUzBSgvct8Jsb3v2X15pjzN1tYebtbLaMg+eBOUOAxgbLoSbT2NS91ckc5lJD1KfLjId+jXJRgo0qnV5Nerg==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "stubs": "^3.0.0"
      }
    },
    "node_modules/stream-shift": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/stream-shift/-/stream-shift-1.0.3.tgz",
      "integrity": "sha512-76ORR0DO1o1hlKwTbi/DM3EXWGf3ZJYO8cXX5RJwnul2DEg2oyoZyjLNoQM8WsvZiFKCRfC1O0J7iCvie3RZmQ==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/string_decoder": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/string_decoder/-/string_decoder-1.3.0.tgz",
      "integrity": "sha512-hkRX8U1WjJFd8LsDJ2yQ/wWWxaopEsABU1XfkM8A+j0+85JAGppt16cr1Whg6KIbb4okU6Mql6BOj+uup/wKeA==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "safe-buffer": "~5.2.0"
      }
    },
    "node_modules/string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/string-width-cjs": {
      "name": "string-width",
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-ansi-cjs": {
      "name": "strip-ansi",
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strnum": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/strnum/-/strnum-1.1.2.tgz",
      "integrity": "sha512-vrN+B7DBIoTTZjnPNewwhx6cBA/H+IS7rfW68n7XxC1y7uoiGQBxaKzqucGUgavX15dJgiGztLJ8vxuEzwqBdA==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/NaturalIntelligence"
        }
      ],
      "license": "MIT",
      "optional": true
    },
    "node_modules/stubs": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/stubs/-/stubs-3.0.0.tgz",
      "integrity": "sha512-PdHt7hHUJKxvTCgbKX9C1V/ftOcjJQgz8BZwNfV5c4B6dcGqlpelTbJ999jBGZ2jYiPAwcX5dP6oBwVlBlUbxw==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/teeny-request": {
      "version": "9.0.0",
      "resolved": "https://registry.npmjs.org/teeny-request/-/teeny-request-9.0.0.tgz",
      "integrity": "sha512-resvxdc6Mgb7YEThw6G6bExlXKkv6+YbuzGg9xuXxSgxJF7Ozs+o8Y9+2R3sArdWdW8nOokoQb1yrpFB0pQK2g==",
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "http-proxy-agent": "^5.0.0",
        "https-proxy-agent": "^5.0.0",
        "node-fetch": "^2.6.9",
        "stream-events": "^1.0.5",
        "uuid": "^9.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/teeny-request/node_modules/agent-base": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-6.0.2.tgz",
      "integrity": "sha512-RZNwNclF7+MS/8bDg70amg32dyeZGZxiDuQmZxKLAlQjr3jGyLx+4Kkk58UO7D2QdgFIQCovuSuZESne6RG6XQ==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "debug": "4"
      },
      "engines": {
        "node": ">= 6.0.0"
      }
    },
    "node_modules/teeny-request/node_modules/https-proxy-agent": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.1.tgz",
      "integrity": "sha512-dFcAjpTQFgoLMzC2VwU+C/CbS7uRL0lWmxDITmqm7C+7F0Odmj6s9l6alZc6AELXhrnggM2CeWSXHGOdX2YtwA==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "agent-base": "6",
        "debug": "4"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/teeny-request/node_modules/node-fetch": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.7.0.tgz",
      "integrity": "sha512-c4FRfUm/dbcWZ7U+1Wq0AwCyFL+3nt2bEw05wfxSz+DWpWsitgmSgYmy2dQdWyKC1694ELPqMs/YzUSNozLt8A==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "whatwg-url": "^5.0.0"
      },
      "engines": {
        "node": "4.x || >=6.0.0"
      },
      "peerDependencies": {
        "encoding": "^0.1.0"
      },
      "peerDependenciesMeta": {
        "encoding": {
          "optional": true
        }
      }
    },
    "node_modules/teeny-request/node_modules/tr46": {
      "version": "0.0.3",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-0.0.3.tgz",
      "integrity": "sha512-N3WMsuqV66lT30CrXNbEjx4GEwlow3v6rr4mCcv6prnfwhS01rkgyFdjPNBYd9br7LpXV1+Emh01fHnq2Gdgrw==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/teeny-request/node_modules/uuid": {
      "version": "9.0.1",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-9.0.1.tgz",
      "integrity": "sha512-b+1eJOlsR9K8HJpow9Ok3fiWOWSIcIzXodvv0rQjVoOVNpWMpxf1wZNpt4y9h10odCNrqnYp1OBzRktckBe3sA==",
      "funding": [
        "https://github.com/sponsors/broofa",
        "https://github.com/sponsors/ctavan"
      ],
      "license": "MIT",
      "optional": true,
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/teeny-request/node_modules/webidl-conversions": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-3.0.1.tgz",
      "integrity": "sha512-2JAn3z8AR6rjK8Sm8orRC0h/bcl/DqL7tRPdGZ4I1CjdF+EaMLmYxBHyXuKL849eucPFhvBoxMsflfOb8kxaeQ==",
      "license": "BSD-2-Clause",
      "optional": true
    },
    "node_modules/teeny-request/node_modules/whatwg-url": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-5.0.0.tgz",
      "integrity": "sha512-saE57nupxk6v3HY35+jzBwYa0rKSy0XR8JSxZPwgLr7ys0IBzhGviA1/TUGJLmSVqs8pb9AnvICXEuOHLprYTw==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tr46": "~0.0.3",
        "webidl-conversions": "^3.0.0"
      }
    },
    "node_modules/toidentifier": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/toidentifier/-/toidentifier-1.0.1.tgz",
      "integrity": "sha512-o5sSPKEkg/DIQNmH43V0/uerLrpzVedkUh8tGNvaeXpfpuwjKenlSox/2O/BTlZUtEe+JG7s5YhEz608PlAHRA==",
      "license": "MIT",
      "engines": {
        "node": ">=0.6"
      }
    },
    "node_modules/tr46": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-5.1.1.tgz",
      "integrity": "sha512-hdF5ZgjTqgAntKkklYw0R03MG2x/bSzTtkxmIRw/sTNV8YXsCJ1tfLAX23lhxhHJlEf3CRCOCGGWw3vI3GaSPw==",
      "license": "MIT",
      "dependencies": {
        "punycode": "^2.3.1"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/tslib": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.8.1.tgz",
      "integrity": "sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==",
      "license": "0BSD"
    },
    "node_modules/type-is": {
      "version": "1.6.18",
      "resolved": "https://registry.npmjs.org/type-is/-/type-is-1.6.18.tgz",
      "integrity": "sha512-TkRKr9sUTxEH8MdfuCSP7VizJyzRNMjj2J2do2Jr3Kym598JVdEksuzPQCnlFPW4ky9Q+iA+ma9BGm06XQBy8g==",
      "license": "MIT",
      "dependencies": {
        "media-typer": "0.3.0",
        "mime-types": "~2.1.24"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/undici-types": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-6.21.0.tgz",
      "integrity": "sha512-iwDZqg0QAGrg9Rav5H4n0M64c3mkR59cJ6wQp+7C4nI0gsmExaedaYLNO44eT4AtBBwjbTiGPMlt2Md0T9H9JQ==",
      "license": "MIT"
    },
    "node_modules/unpipe": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/unpipe/-/unpipe-1.0.0.tgz",
      "integrity": "sha512-pjy2bYhSsufwWlKwPc+l3cN7+wuJlK6uz0YdJEOlQDbl6jo/YlPi4mb8agUkVC8BF7V8NuzeyPNqRksA3hztKQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/util-deprecate": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
      "integrity": "sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/utils-merge": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/utils-merge/-/utils-merge-1.0.1.tgz",
      "integrity": "sha512-pMZTvIkT1d+TFGvDOqodOclx0QWkkgi6Tdoa8gC8ffGAAqz9pzPTZWAybbsHHoED/ztMtkv/VoYTYyShUn81hA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4.0"
      }
    },
    "node_modules/uuid": {
      "version": "11.1.0",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-11.1.0.tgz",
      "integrity": "sha512-0/A9rDy9P7cJ+8w1c9WD9V//9Wj15Ce2MPz8Ri6032usz+NfePxx5AcN3bN+r6ZL6jEo066/yNYB3tn4pQEx+A==",
      "funding": [
        "https://github.com/sponsors/broofa",
        "https://github.com/sponsors/ctavan"
      ],
      "license": "MIT",
      "bin": {
        "uuid": "dist/esm/bin/uuid"
      }
    },
    "node_modules/vary": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/vary/-/vary-1.1.2.tgz",
      "integrity": "sha512-BNGbWLfd0eUPabhkXUVm0j8uuvREyTh5ovRa/dyow/BqAbZJyC+5fU+IzQOzmAKzYqYRAISoRhdQr3eIZ/PXqg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/web-streams-polyfill": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/web-streams-polyfill/-/web-streams-polyfill-3.3.3.tgz",
      "integrity": "sha512-d2JWLCivmZYTSIoge9MsgFCZrt571BikcWGYkjC1khllbTeDlGqZ2D8vD8E/lJa8WGWbb7Plm8/XJYV7IJHZZw==",
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/webidl-conversions": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-7.0.0.tgz",
      "integrity": "sha512-VwddBukDzu71offAQR975unBIGqfKZpM+8ZX6ySk8nYhVoo5CYaZyzt3YBvYtRtO+aoGlqxPg/B87NGVZ/fu6g==",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/websocket-driver": {
      "version": "0.7.4",
      "resolved": "https://registry.npmjs.org/websocket-driver/-/websocket-driver-0.7.4.tgz",
      "integrity": "sha512-b17KeDIQVjvb0ssuSDF2cYXSg2iztliJ4B9WdsuB6J952qCPKmnVq4DyW5motImXHDC1cBT/1UezrJVsKw5zjg==",
      "license": "Apache-2.0",
      "dependencies": {
        "http-parser-js": ">=0.5.1",
        "safe-buffer": ">=5.1.0",
        "websocket-extensions": ">=0.1.1"
      },
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/websocket-extensions": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/websocket-extensions/-/websocket-extensions-0.1.4.tgz",
      "integrity": "sha512-OqedPIGOfsDlo31UNwYbCFMSaO9m9G/0faIHj5/dZFDMFqPTcx6UwqyOy3COEaEOg/9VsGIpdqn62W5KhoKSpg==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/whatwg-url": {
      "version": "14.2.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-14.2.0.tgz",
      "integrity": "sha512-De72GdQZzNTUBBChsXueQUnPKDkg/5A5zp7pFDuQAj5UFoENpiACU0wlCvzpAGnTkj++ihpKwKyYewn/XNUbKw==",
      "license": "MIT",
      "dependencies": {
        "tr46": "^5.1.0",
        "webidl-conversions": "^7.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/wrap-ansi": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/wrap-ansi-cjs": {
      "name": "wrap-ansi",
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/wrappy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
      "integrity": "sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==",
      "license": "ISC",
      "optional": true
    },
    "node_modules/ws": {
      "version": "8.17.1",
      "resolved": "https://registry.npmjs.org/ws/-/ws-8.17.1.tgz",
      "integrity": "sha512-6XQFvXTkbfUOZOKKILFG1PDK2NDQs4azKQl26T0YS5CxqWLgXajbPZ+h4gZekJyRqFU8pvnbAbbs/3TgRPy+GQ==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "peerDependencies": {
        "bufferutil": "^4.0.1",
        "utf-8-validate": ">=5.0.2"
      },
      "peerDependenciesMeta": {
        "bufferutil": {
          "optional": true
        },
        "utf-8-validate": {
          "optional": true
        }
      }
    },
    "node_modules/xtend": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/xtend/-/xtend-4.0.2.tgz",
      "integrity": "sha512-LKYU1iAXJXUgAXn9URjiu+MWhyUXHsvfp7mcuYm9dSUKK0/CjtrUwFAxD82/mCWbtLsGjFIad0wIsod4zrTAEQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4"
      }
    },
    "node_modules/y18n": {
      "version": "5.0.8",
      "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
      "integrity": "sha512-0pfFzegeDWJHJIAmTLRP2DwHjdF5s7jo9tuztdQxAhINCdvS+3nGINqPd00AphqJR/0LhANUS6/+7SCb98YOfA==",
      "license": "ISC",
      "optional": true,
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/yallist": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-4.0.0.tgz",
      "integrity": "sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A==",
      "license": "ISC"
    },
    "node_modules/yargs": {
      "version": "17.7.2",
      "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
      "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "cliui": "^8.0.1",
        "escalade": "^3.1.1",
        "get-caller-file": "^2.0.5",
        "require-directory": "^2.1.1",
        "string-width": "^4.2.3",
        "y18n": "^5.0.5",
        "yargs-parser": "^21.1.1"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yargs-parser": {
      "version": "21.1.1",
      "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
      "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
      "license": "ISC",
      "optional": true,
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    }
  }
}

```

```swift-delivery-backend\document.body.style.opacity

```

```swift-delivery-backend\document.body.classList.remove('user-is-tabbing'))

```

```swift-delivery-backend\document.body.classList.remove('theme-transition')

```

```swift-delivery-backend\db.js
// db.js
import { Pool } from 'pg';

const pool = new Pool({
  user: 'your_pg_username',
  host: 'localhost',
  database: 'swiftdelivery',
  password: 'your_pg_password',
  port: 5432,
});

export default pool;


```

```swift-delivery-backend\d.classList.toggle('open'

```

```swift-delivery-backend\ctx.querySelector(sel)

```

```swift-delivery-backend\clearInterval(autoTimer))

```

```swift-delivery-backend\chatbot.style.display

```

```swift-delivery-backend\Array.from(ctx.querySelectorAll(sel))

```

```swift-delivery-backend\src\routes\adminRoutes.js

```

```swift-delivery-backend\src\controllers\userController.js

```

```swift-delivery-backend\src\controllers\adminController.js

```

```swift-delivery-backend\Array.from((ctx

```

```swift-delivery-backend\applyTranslations(savedLang))

```

```swift-delivery-backend\applyTheme(themeToggle.checked))

```

```swift-delivery-backend\.gitignore
node_modules/
serviceaccountkey.json

```

```swift-delivery-backend\.env
GROQ_API_KEY=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
# GEMINI_API_KEY=AIzaSyAmmLlsmY_QUK2mXigzJHIe-6Q7nKnCfsw  #
MONGO_URI=mongodb+srv://armani_db_user:1xzVtUfzqxCEkEA8@swiftdeliverycluster.5n0kv7g.mongodb.net/SwiftDeliveryCluster
JWT_SECRET=your_super_secret_key


```

```swift-delivery-backend\!i.value.trim())

```

```swift-delivery-backend\swift-delivery-backend-clean\server.js
import express from "express";
import cors from "cors";
import dotenv from "dotenv";
import fetch from "node-fetch";

dotenv.config();

const app = express();
app.use(cors());
app.use(express.json());

app.get("/", (req, res) => {
  res.send("‚úÖ Backend running with Hugging Face AI replies");
});

app.post("/chat", async (req, res) => {
  const { message } = req.body;
  res.json({ reply: `Echo: ${message}` });
});

  try {
    const response = await fetch(
      "https://api-inference.huggingface.co/models/tiiuae/falcon-7b-instruct",
      {
        method: "POST",
        headers: {
          Authorization: `Bearer ${process.env.HF_API_KEY}`,
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ inputs: message }),
      }
    );

    const data = await response.json();
    console.log("‚úÖ Hugging Face response:", data);

    if (Array.isArray(data) && data[0]?.generated_text) {
      res.json({ reply: data[0].generated_text });
    } else if (data?.generated_text) {
      res.json({ reply: data.generated_text });
    } else {
      console.warn("‚ö†Ô∏è Unexpected Hugging Face response:", data);
      res.json({ reply: "‚ö†Ô∏è Hugging Face did not return a usable response." });
    }
  } catch (error) {
    console.error("‚ùå Error with Hugging Face API:", error.message);
    res.status(500).json({ reply: "‚ùå AI service unavailable." });
  }
});

const PORT = process.env.PORT || 5000;
app.listen(PORT, () => {
  console.log(`‚úÖ Backend running with Hugging Face AI on port ${PORT}`);
});

```

```swift-delivery-backend\swift-delivery-backend-clean\package.json
{
  "name": "swift-delivery-backend-clean",
  "version": "1.0.0",
  "description": "Swift Delivery backend with Hugging Face AI integration",
  "main": "server.js",
  "type": "module",
  "scripts": {
    "start": "node server.js"
  },
  "keywords": [],
  "author": "Matt",
  "license": "ISC",
  "dependencies": {
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "node-fetch": "^3.3.2"
  }
}

```

```swift-delivery-backend\swift-delivery-backend-clean\package-lock.json
{
  "name": "swift-delivery-backend-clean",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "swift-delivery-backend-clean",
      "version": "1.0.0",
      "license": "ISC",
      "dependencies": {
        "cors": "^2.8.5",
        "dotenv": "^17.2.3",
        "express": "^5.1.0",
        "node-fetch": "^3.3.2"
      }
    },
    "node_modules/accepts": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/accepts/-/accepts-2.0.0.tgz",
      "integrity": "sha512-5cvg6CtKwfgdmVqY1WIiXKc3Q1bkRqGLi+2W/6ao+6Y7gu/RCwRuAhGEzh5B4KlszSuTLgZYuqFqo5bImjNKng==",
      "license": "MIT",
      "dependencies": {
        "mime-types": "^3.0.0",
        "negotiator": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/body-parser": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/body-parser/-/body-parser-2.2.0.tgz",
      "integrity": "sha512-02qvAaxv8tp7fBa/mw1ga98OGm+eCbqzJOKoRt70sLmfEEi+jyBYVTDGfCL/k06/4EMk/z01gCe7HoCH/f2LTg==",
      "license": "MIT",
      "dependencies": {
        "bytes": "^3.1.2",
        "content-type": "^1.0.5",
        "debug": "^4.4.0",
        "http-errors": "^2.0.0",
        "iconv-lite": "^0.6.3",
        "on-finished": "^2.4.1",
        "qs": "^6.14.0",
        "raw-body": "^3.0.0",
        "type-is": "^2.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/bytes": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.2.tgz",
      "integrity": "sha512-/Nf7TyzTx6S3yRJObOAV7956r8cr2+Oj8AC5dt8wSP3BQAoeX58NoHyCU8P8zGkNXStjTSi6fzO6F0pBdcYbEg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/call-bound": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
      "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "get-intrinsic": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/content-disposition": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/content-disposition/-/content-disposition-1.0.0.tgz",
      "integrity": "sha512-Au9nRL8VNUut/XSzbQA38+M78dzP4D+eqg3gfJHMIHHYa3bg067xj1KxMUWj+VULbiZMowKngFFbKczUrNJ1mg==",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "5.2.1"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/content-type": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/content-type/-/content-type-1.0.5.tgz",
      "integrity": "sha512-nTjqfcBFEipKdXCv4YDQWCfmcLZKm81ldF0pAopTvyrFGVbcR6P/VAAd5G7N+0tTr8QqiU0tFadD6FK4NtJwOA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie": {
      "version": "0.7.2",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-0.7.2.tgz",
      "integrity": "sha512-yki5XnKuf750l50uGTllt6kKILY4nQ1eNIQatoXEByZ5dWgnKqbnqmTrBE5B4N7lrMJKQ2ytWMiTO2o0v6Ew/w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie-signature": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/cookie-signature/-/cookie-signature-1.2.2.tgz",
      "integrity": "sha512-D76uU73ulSXrD1UXF4KE2TMxVVwhsnCgfAyTg9k8P6KGZjlXKrOLe4dJQKI3Bxi5wjesZoFXJWElNWBjPZMbhg==",
      "license": "MIT",
      "engines": {
        "node": ">=6.6.0"
      }
    },
    "node_modules/cors": {
      "version": "2.8.5",
      "resolved": "https://registry.npmjs.org/cors/-/cors-2.8.5.tgz",
      "integrity": "sha512-KIHbLJqu73RGr/hnbrO9uBeixNGuvSQjul/jdFvS/KFSIH1hWVd1ng7zOHx+YrEfInLG7q4n6GHQ9cDtxv/P6g==",
      "license": "MIT",
      "dependencies": {
        "object-assign": "^4",
        "vary": "^1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/data-uri-to-buffer": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/data-uri-to-buffer/-/data-uri-to-buffer-4.0.1.tgz",
      "integrity": "sha512-0R9ikRb668HB7QDxT1vkpuUBtqc53YyAwMwGeUFKRojY/NWKvdZ+9UYtRfGmhqNbRkTSVpMbmyhXipFFv2cb/A==",
      "license": "MIT",
      "engines": {
        "node": ">= 12"
      }
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/depd": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/depd/-/depd-2.0.0.tgz",
      "integrity": "sha512-g7nH6P6dyDioJogAAGprGpCtVImJhpPk/roCzdb3fIh61/s/nPsfR6onyMwkCAR/OlC3yBC0lESvUoQEAssIrw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/dotenv": {
      "version": "17.2.3",
      "resolved": "https://registry.npmjs.org/dotenv/-/dotenv-17.2.3.tgz",
      "integrity": "sha512-JVUnt+DUIzu87TABbhPmNfVdBDt18BLOWjMUFJMSi/Qqg7NTYtabbvSNJGOJ7afbRuv9D/lngizHtP7QyLQ+9w==",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://dotenvx.com"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/ee-first": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/ee-first/-/ee-first-1.1.1.tgz",
      "integrity": "sha512-WMwm9LhRUo+WUaRN+vRuETqG89IgZphVSNkdFgeb6sS/E4OrDIN7t48CAewSHXc6C8lefD8KKfr5vY61brQlow==",
      "license": "MIT"
    },
    "node_modules/encodeurl": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-2.0.0.tgz",
      "integrity": "sha512-Q0n9HRi4m6JuGIV1eFlmvJB7ZEVxu93IrMyiMsGC0lrMJMWzRgx6WGquyfQgZVb31vhGgXnfmPNNXmxnOkRBrg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/escape-html": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/escape-html/-/escape-html-1.0.3.tgz",
      "integrity": "sha512-NiSupZ4OeuGwr68lGIeym/ksIZMJodUGOSCZ/FSnTxcrekbvqrgdUxlJOMpijaKZVjAJrWrGs/6Jy8OMuyj9ow==",
      "license": "MIT"
    },
    "node_modules/etag": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/etag/-/etag-1.8.1.tgz",
      "integrity": "sha512-aIL5Fx7mawVa300al2BnEE4iNvo1qETxLrPI/o05L7z6go7fCw1J6EQmbK4FmJ2AS7kgVF/KEZWufBfdClMcPg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/express": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/express/-/express-5.1.0.tgz",
      "integrity": "sha512-DT9ck5YIRU+8GYzzU5kT3eHGA5iL+1Zd0EutOmTE9Dtk+Tvuzd23VBU+ec7HPNSTxXYO55gPV/hq4pSBJDjFpA==",
      "license": "MIT",
      "dependencies": {
        "accepts": "^2.0.0",
        "body-parser": "^2.2.0",
        "content-disposition": "^1.0.0",
        "content-type": "^1.0.5",
        "cookie": "^0.7.1",
        "cookie-signature": "^1.2.1",
        "debug": "^4.4.0",
        "encodeurl": "^2.0.0",
        "escape-html": "^1.0.3",
        "etag": "^1.8.1",
        "finalhandler": "^2.1.0",
        "fresh": "^2.0.0",
        "http-errors": "^2.0.0",
        "merge-descriptors": "^2.0.0",
        "mime-types": "^3.0.0",
        "on-finished": "^2.4.1",
        "once": "^1.4.0",
        "parseurl": "^1.3.3",
        "proxy-addr": "^2.0.7",
        "qs": "^6.14.0",
        "range-parser": "^1.2.1",
        "router": "^2.2.0",
        "send": "^1.1.0",
        "serve-static": "^2.2.0",
        "statuses": "^2.0.1",
        "type-is": "^2.0.1",
        "vary": "^1.1.2"
      },
      "engines": {
        "node": ">= 18"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/fetch-blob": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/fetch-blob/-/fetch-blob-3.2.0.tgz",
      "integrity": "sha512-7yAQpD2UMJzLi1Dqv7qFYnPbaPx7ZfFK6PiIxQ4PfkGPyNyl2Ugx+a/umUonmKqjhM4DnfbMvdX6otXq83soQQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/jimmywarting"
        },
        {
          "type": "paypal",
          "url": "https://paypal.me/jimmywarting"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "node-domexception": "^1.0.0",
        "web-streams-polyfill": "^3.0.3"
      },
      "engines": {
        "node": "^12.20 || >= 14.13"
      }
    },
    "node_modules/finalhandler": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/finalhandler/-/finalhandler-2.1.0.tgz",
      "integrity": "sha512-/t88Ty3d5JWQbWYgaOGCCYfXRwV1+be02WqYYlL6h0lEiUAMPM8o8qKGO01YIkOHzka2up08wvgYD0mDiI+q3Q==",
      "license": "MIT",
      "dependencies": {
        "debug": "^4.4.0",
        "encodeurl": "^2.0.0",
        "escape-html": "^1.0.3",
        "on-finished": "^2.4.1",
        "parseurl": "^1.3.3",
        "statuses": "^2.0.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/formdata-polyfill": {
      "version": "4.0.10",
      "resolved": "https://registry.npmjs.org/formdata-polyfill/-/formdata-polyfill-4.0.10.tgz",
      "integrity": "sha512-buewHzMvYL29jdeQTVILecSaZKnt/RJWjoZCF5OW60Z67/GmSLBkOFM7qh1PI3zFNtJbaZL5eQu1vLfazOwj4g==",
      "license": "MIT",
      "dependencies": {
        "fetch-blob": "^3.1.2"
      },
      "engines": {
        "node": ">=12.20.0"
      }
    },
    "node_modules/forwarded": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/forwarded/-/forwarded-0.2.0.tgz",
      "integrity": "sha512-buRG0fpBtRHSTCOASe6hD258tEubFoRLb4ZNA6NxMVHNw2gOcwHo9wyablzMzOA5z9xA9L1KNjk/Nt6MT9aYow==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/fresh": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/fresh/-/fresh-2.0.0.tgz",
      "integrity": "sha512-Rx/WycZ60HOaqLKAi6cHRKKI7zxWbJ31MhntmtwMoaTeF7XFH9hhBp8vITaMidfljRQ6eYWCKkaTK+ykVJHP2A==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/http-errors": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-2.0.0.tgz",
      "integrity": "sha512-FtwrG/euBzaEjYeRqOgly7G0qviiXoJWnvEH2Z1plBdXgbyjv34pHTSb9zoeHMyDy33+DWy5Wt9Wo+TURtOYSQ==",
      "license": "MIT",
      "dependencies": {
        "depd": "2.0.0",
        "inherits": "2.0.4",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "toidentifier": "1.0.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/http-errors/node_modules/statuses": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/statuses/-/statuses-2.0.1.tgz",
      "integrity": "sha512-RwNA9Z/7PrK06rYLIzFMlaF+l73iwpzsqRIFgbMLbTcLD6cOao82TaWefPXQvB2fOC4AjuYSEndS7N/mTCbkdQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/iconv-lite": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.6.3.tgz",
      "integrity": "sha512-4fCk79wshMdzMp2rH06qWrJE4iolqLhCUH+OiuIgU++RB0+94NlDL81atO7GX55uUKueo0txHNtvEyI6D7WdMw==",
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/inherits": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
      "license": "ISC"
    },
    "node_modules/ipaddr.js": {
      "version": "1.9.1",
      "resolved": "https://registry.npmjs.org/ipaddr.js/-/ipaddr.js-1.9.1.tgz",
      "integrity": "sha512-0KI/607xoxSToH7GjN1FfSbLoU0+btTicjsQSWQlh/hZykN8KpmMf7uYwPW3R+akZ6R/w18ZlXSHBYXiYUPO3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/is-promise": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/is-promise/-/is-promise-4.0.0.tgz",
      "integrity": "sha512-hvpoI6korhJMnej285dSg6nu1+e6uxs7zG3BYAm5byqDsgJNWwxzM6z6iZiAgQR4TJ30JmBTOwqZUw3WlyH3AQ==",
      "license": "MIT"
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/media-typer": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/media-typer/-/media-typer-1.1.0.tgz",
      "integrity": "sha512-aisnrDP4GNe06UcKFnV5bfMNPBUw4jsLGaWwWfnH3v02GnBuXX2MCVn5RbrWo0j3pczUilYblq7fQ7Nw2t5XKw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/merge-descriptors": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/merge-descriptors/-/merge-descriptors-2.0.0.tgz",
      "integrity": "sha512-Snk314V5ayFLhp3fkUREub6WtjBfPdCPY1Ln8/8munuLuiYhsABgBVWsozAG+MWMbVEvcdcpbi9R7ww22l9Q3g==",
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/mime-db": {
      "version": "1.54.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.54.0.tgz",
      "integrity": "sha512-aU5EJuIN2WDemCcAp2vFBfp/m4EAhWJnUNSSw0ixs7/kXbd6Pg64EmwJkNdFhB8aWt1sH2CTXrLxo/iAGV3oPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-3.0.1.tgz",
      "integrity": "sha512-xRc4oEhT6eaBpU1XF7AjpOFD+xQmXNB5OVKwp4tqCuBpHLS/ZbBDrc07mYTDqVMg6PfxUjjNp85O6Cd2Z/5HWA==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "^1.54.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/negotiator": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/negotiator/-/negotiator-1.0.0.tgz",
      "integrity": "sha512-8Ofs/AUQh8MaEcrlq5xOX0CQ9ypTF5dl78mjlMNfOK08fzpgTHQRQPBxcPlEtIw0yRpws+Zo/3r+5WRby7u3Gg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/node-domexception": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/node-domexception/-/node-domexception-1.0.0.tgz",
      "integrity": "sha512-/jKZoMpw0F8GRwl4/eLROPA3cfcXtLApP0QzLmUT/HuPCZWyB7IY9ZrMeKw2O/nFIqPQB3PVM9aYm0F312AXDQ==",
      "deprecated": "Use your platform's native DOMException instead",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/jimmywarting"
        },
        {
          "type": "github",
          "url": "https://paypal.me/jimmywarting"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=10.5.0"
      }
    },
    "node_modules/node-fetch": {
      "version": "3.3.2",
      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-3.3.2.tgz",
      "integrity": "sha512-dRB78srN/l6gqWulah9SrxeYnxeddIG30+GOqK/9OlLVyLg3HPnr6SqOWTWOXKRwC2eGYCkZ59NNuSgvSrpgOA==",
      "license": "MIT",
      "dependencies": {
        "data-uri-to-buffer": "^4.0.0",
        "fetch-blob": "^3.1.4",
        "formdata-polyfill": "^4.0.10"
      },
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/node-fetch"
      }
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-inspect": {
      "version": "1.13.4",
      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
      "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/on-finished": {
      "version": "2.4.1",
      "resolved": "https://registry.npmjs.org/on-finished/-/on-finished-2.4.1.tgz",
      "integrity": "sha512-oVlzkg3ENAhCk2zdv7IJwd/QUD4z2RxRwpkcGY8psCVcCYZNq4wYnVWALHM+brtuJjePWiYF/ClmuDr8Ch5+kg==",
      "license": "MIT",
      "dependencies": {
        "ee-first": "1.1.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/once": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
      "integrity": "sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==",
      "license": "ISC",
      "dependencies": {
        "wrappy": "1"
      }
    },
    "node_modules/parseurl": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/parseurl/-/parseurl-1.3.3.tgz",
      "integrity": "sha512-CiyeOxFT/JZyN5m0z9PfXw4SCBJ6Sygz1Dpl0wqjlhDEGGBP1GnsUVEL0p63hoG1fcj3fHynXi9NYO4nWOL+qQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/path-to-regexp": {
      "version": "8.3.0",
      "resolved": "https://registry.npmjs.org/path-to-regexp/-/path-to-regexp-8.3.0.tgz",
      "integrity": "sha512-7jdwVIRtsP8MYpdXSwOS0YdD0Du+qOoF/AEPIt88PcCFrZCzx41oxku1jD88hZBwbNUIEfpqvuhjFaMAqMTWnA==",
      "license": "MIT",
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/proxy-addr": {
      "version": "2.0.7",
      "resolved": "https://registry.npmjs.org/proxy-addr/-/proxy-addr-2.0.7.tgz",
      "integrity": "sha512-llQsMLSUDUPT44jdrU/O37qlnifitDP+ZwrmmZcoSKyLKvtZxpyV0n2/bD/N4tBAAZ/gJEdZU7KMraoK1+XYAg==",
      "license": "MIT",
      "dependencies": {
        "forwarded": "0.2.0",
        "ipaddr.js": "1.9.1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/qs": {
      "version": "6.14.0",
      "resolved": "https://registry.npmjs.org/qs/-/qs-6.14.0.tgz",
      "integrity": "sha512-YWWTjgABSKcvs/nWBi9PycY/JiPJqOD4JA6o9Sej2AtvSGarXxKC3OQSk4pAarbdQlKAh5D4FCQkJNkW+GAn3w==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "side-channel": "^1.1.0"
      },
      "engines": {
        "node": ">=0.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/range-parser": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/range-parser/-/range-parser-1.2.1.tgz",
      "integrity": "sha512-Hrgsx+orqoygnmhFbKaHE6c296J+HTAQXoxEF6gNupROmmGJRoyzfG3ccAveqCBrwr/2yxQ5BVd/GTl5agOwSg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/raw-body": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/raw-body/-/raw-body-3.0.1.tgz",
      "integrity": "sha512-9G8cA+tuMS75+6G/TzW8OtLzmBDMo8p1JRxN5AZ+LAp8uxGA8V8GZm4GQ4/N5QNQEnLmg6SS7wyuSmbKepiKqA==",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "http-errors": "2.0.0",
        "iconv-lite": "0.7.0",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/raw-body/node_modules/iconv-lite": {
      "version": "0.7.0",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.7.0.tgz",
      "integrity": "sha512-cf6L2Ds3h57VVmkZe+Pn+5APsT7FpqJtEhhieDCvrE2MK5Qk9MyffgQyuxQTm6BChfeZNtcOLHp9IcWRVcIcBQ==",
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/router": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/router/-/router-2.2.0.tgz",
      "integrity": "sha512-nLTrUKm2UyiL7rlhapu/Zl45FwNgkZGaCpZbIHajDYgwlJCOzLSk+cIPAnsEqV955GjILJnKbdQC1nVPz+gAYQ==",
      "license": "MIT",
      "dependencies": {
        "debug": "^4.4.0",
        "depd": "^2.0.0",
        "is-promise": "^4.0.0",
        "parseurl": "^1.3.3",
        "path-to-regexp": "^8.0.0"
      },
      "engines": {
        "node": ">= 18"
      }
    },
    "node_modules/safe-buffer": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/safer-buffer": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==",
      "license": "MIT"
    },
    "node_modules/send": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/send/-/send-1.2.0.tgz",
      "integrity": "sha512-uaW0WwXKpL9blXE2o0bRhoL2EGXIrZxQ2ZQ4mgcfoBxdFmQold+qWsD2jLrfZ0trjKL6vOw0j//eAwcALFjKSw==",
      "license": "MIT",
      "dependencies": {
        "debug": "^4.3.5",
        "encodeurl": "^2.0.0",
        "escape-html": "^1.0.3",
        "etag": "^1.8.1",
        "fresh": "^2.0.0",
        "http-errors": "^2.0.0",
        "mime-types": "^3.0.1",
        "ms": "^2.1.3",
        "on-finished": "^2.4.1",
        "range-parser": "^1.2.1",
        "statuses": "^2.0.1"
      },
      "engines": {
        "node": ">= 18"
      }
    },
    "node_modules/serve-static": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/serve-static/-/serve-static-2.2.0.tgz",
      "integrity": "sha512-61g9pCh0Vnh7IutZjtLGGpTA355+OPn2TyDv/6ivP2h/AdAVX9azsoxmg2/M6nZeQZNYBEwIcsne1mJd9oQItQ==",
      "license": "MIT",
      "dependencies": {
        "encodeurl": "^2.0.0",
        "escape-html": "^1.0.3",
        "parseurl": "^1.3.3",
        "send": "^1.2.0"
      },
      "engines": {
        "node": ">= 18"
      }
    },
    "node_modules/setprototypeof": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/setprototypeof/-/setprototypeof-1.2.0.tgz",
      "integrity": "sha512-E5LDX7Wrp85Kil5bhZv46j8jOeboKq5JMmYM3gVGdGH8xFpPWXUMsNrlODCrkoxMEeNi/XZIwuRvY4XNwYMJpw==",
      "license": "ISC"
    },
    "node_modules/side-channel": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
      "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3",
        "side-channel-list": "^1.0.0",
        "side-channel-map": "^1.0.1",
        "side-channel-weakmap": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-list": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
      "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-map": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
      "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-weakmap": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
      "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3",
        "side-channel-map": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/statuses": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/statuses/-/statuses-2.0.2.tgz",
      "integrity": "sha512-DvEy55V3DB7uknRo+4iOGT5fP1slR8wQohVdknigZPMpMstaKJQWhwiYBACJE3Ul2pTnATihhBYnRhZQHGBiRw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/toidentifier": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/toidentifier/-/toidentifier-1.0.1.tgz",
      "integrity": "sha512-o5sSPKEkg/DIQNmH43V0/uerLrpzVedkUh8tGNvaeXpfpuwjKenlSox/2O/BTlZUtEe+JG7s5YhEz608PlAHRA==",
      "license": "MIT",
      "engines": {
        "node": ">=0.6"
      }
    },
    "node_modules/type-is": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/type-is/-/type-is-2.0.1.tgz",
      "integrity": "sha512-OZs6gsjF4vMp32qrCbiVSkrFmXtG/AZhY3t0iAMrMBiAZyV9oALtXO8hsrHbMXF9x6L3grlFuwW2oAz7cav+Gw==",
      "license": "MIT",
      "dependencies": {
        "content-type": "^1.0.5",
        "media-typer": "^1.1.0",
        "mime-types": "^3.0.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/unpipe": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/unpipe/-/unpipe-1.0.0.tgz",
      "integrity": "sha512-pjy2bYhSsufwWlKwPc+l3cN7+wuJlK6uz0YdJEOlQDbl6jo/YlPi4mb8agUkVC8BF7V8NuzeyPNqRksA3hztKQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/vary": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/vary/-/vary-1.1.2.tgz",
      "integrity": "sha512-BNGbWLfd0eUPabhkXUVm0j8uuvREyTh5ovRa/dyow/BqAbZJyC+5fU+IzQOzmAKzYqYRAISoRhdQr3eIZ/PXqg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/web-streams-polyfill": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/web-streams-polyfill/-/web-streams-polyfill-3.3.3.tgz",
      "integrity": "sha512-d2JWLCivmZYTSIoge9MsgFCZrt571BikcWGYkjC1khllbTeDlGqZ2D8vD8E/lJa8WGWbb7Plm8/XJYV7IJHZZw==",
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/wrappy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
      "integrity": "sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==",
      "license": "ISC"
    }
  }
}

```

```swift-delivery-backend\swift-delivery-backend-clean\.vscode\launch.json
{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    {
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "Debug Backend",
      "program": "${workspaceFolder}/server.js",
      "envFile": "${workspaceFolder}/.env"
    }
  ]
}

```

```swift-delivery-backend\swift-delivery-backend-clean\.env
HF_API_KEY=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
```

```generate_translations.py
import re

# Read current script.js
with open('my-frontend/script.js', 'r', encoding='utf-8') as f:
    content = f.read()

# Find the insertion point (after Arabic translations)
insertion_point = content.find("// Global translation apply helper - single canonical implementation")

if insertion_point == -1:
    print("ERROR: Could not find insertion point")
    exit(1)

# Build translation objects for all new languages
new_translations = '''
// Portuguese
window.translations.pt = window.translations.pt || {};
Object.assign(window.translations.pt, {
  home: 'In√≠cio',
  gallery: 'Galeria',
  services: 'Servi√ßos',
  track: 'Rastrear',
  login: 'Entrar',
  register: 'Registrar',
  welcome: 'SwiftDelivery - Frete A√©reo',
  intro: 'Solu√ß√µes de carga global com velocidade, seguran√ßa e precis√£o.',
  getStarted: 'Come√ßar',
  galleryTitle: 'Frota e Instala√ß√µes',
  servicesTitle: 'Nossos Servi√ßos',
  service1: 'Express de Frete A√©reo',
  service1Desc: 'Entrega de carga priorit√°ria com prazos garantidos.',
  service2: 'Armazenamento Global',
  service2Desc: 'Solu√ß√µes de armazenamento seguro em hubs internacionais.',
  service3: 'Alf√¢ndega',
  service3Desc: 'Processamento especializado de alf√¢ndega.',
  service4: 'Carga com Controle de Temperatura',
  service4Desc: 'Transporte especializado para produtos sens√≠veis.',
  service5: 'Transporte de Mercadorias Perigosas',
  service5Desc: 'Manipula√ß√£o certificada de materiais perigosos.',
  bookingTitle: 'Painel de Reservas',
  bookingNamePlaceholder: 'Nome Completo',
  bookingEmailPlaceholder: 'Endere√ßo de Email',
  bookingMessagePlaceholder: 'Detalhes da Reserva',
  bookingSubmitButton: 'Enviar Reserva',
  testimonialsTitle: 'Testemunhos de Clientes',
  testimonial1Text: 'SwiftDelivery transportou nossas suprimentos rapidamente. Altamente recomendado!',
  testimonial1Author: '- Dra. Amina Yusuf',
  testimonial2Text: 'Sistema de rastreamento de primeira classe.',
  testimonial2Author: '- James Okoro',
  testimonial3Text: 'Profissional, r√°pido e confi√°vel.',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'Entre em Contato',
  submitButton: 'Enviar',
  loginTitle: 'Entrada de Cliente',
  loginButton: 'Entrar',
  registerTitle: 'Novo Registro de Cliente',
  registerButton: 'Registrar',
  registerUsernamePlaceholder: 'Nome de Usu√°rio',
  registerPasswordPlaceholder: 'Senha',
  trackTitle: 'Rastreamento de Coleta e Entrega',
  trackButton: 'Rastrear Envio',
  faqTitle: 'Perguntas Frequentes',
  faq1Q: 'Qual √© a velocidade da entrega a√©rea?',
  faq1A: 'A maioria dos envios a√©reos chega em 24-48 horas.',
  faq2Q: 'Voc√™s lidam com alf√¢ndegas internacionais?',
  faq2A: 'Sim, oferecemos servi√ßos completos de alf√¢ndega.',
  faq3Q: 'Posso rastrear minha carga em tempo real?',
  faq3A: 'Sim. Nosso sistema oferece atualiza√ß√µes ao vivo.',
  faq4Q: 'Voc√™s oferecem envio com controle de temperatura?',
  faq4A: 'Sim, somos especializados em log√≠stica de cadeia fria.',
  faq5Q: 'A entrega de fim de semana est√° dispon√≠vel?',
  faq5A: 'Sim, em regi√µes selecionadas.',
  liveChatTitle: 'Suporte de Chat ao Vivo',
  liveChatNamePlaceholder: 'Seu Nome',
  liveChatEmailPlaceholder: 'Seu Email',
  liveChatMessagePlaceholder: 'Sua Mensagem',
  chatbotTitle: 'Bot SwiftDelivery',
  chatbotGreeting: 'Ol√°! Como posso ajud√°-lo?',
  chatMessagePlaceholder: 'Digite sua mensagem...',
  sendButton: 'Enviar',
  newsletterTitle: 'Fique Atualizado',
  newsletterText: 'Inscreva-se em nosso boletim informativo.',
  emailLabel: 'Email',
  subscribeButton: 'Inscrever-se',
  followUs: 'Nos Siga',
  company: 'Empresa',
  about: 'Sobre N√≥s',
  helpCenter: 'Centro de Ajuda',
  support: 'Suporte',
  legal: 'Legal',
  privacy: 'Pol√≠tica de Privacidade',
  terms: 'Termos de Servi√ßo',
  footerNote: '¬© 2025 SwiftDelivery. Todos os direitos reservados.'
});

// Russian
window.translations.ru = window.translations.ru || {};
Object.assign(window.translations.ru, {
  home: '–ì–ª–∞–≤–Ω–∞—è',
  gallery: '–ì–∞–ª–µ—Ä–µ—è',
  services: '–£—Å–ª—É–≥–∏',
  track: '–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ',
  login: '–í—Ö–æ–¥',
  register: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è',
  welcome: 'SwiftDelivery - –ê–≤–∏–∞—Ñ—Ä–∞—Ö—Ç',
  intro: '–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –≥—Ä—É–∑–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è —Å —Å–∫–æ—Ä–æ—Å—Ç—å—é, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ —Ç–æ—á–Ω–æ—Å—Ç—å—é.',
  getStarted: '–ù–∞—á–∞—Ç—å',
  galleryTitle: '–§–ª–æ—Ç –∏ –æ–±—ä–µ–∫—Ç—ã',
  servicesTitle: '–ù–∞—à–∏ —É—Å–ª—É–≥–∏',
  service1: '–ê–≤–∏–∞—Ñ—Ä–∞—Ö—Ç –≠–∫—Å–ø—Ä–µ—Å—Å',
  service1Desc: '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞ —Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ä–æ–∫–∞–º–∏.',
  service2: '–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–∫–ª–∞–¥—ã',
  service2Desc: '–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Ü–µ–Ω—Ç—Ä–∞—Ö.',
  service3: '–¢–∞–º–æ–∂–µ–Ω–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ',
  service3Desc: '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–º–æ–∂–Ω–∏.',
  service4: '–ì—Ä—É–∑ —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã',
  service4Desc: '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤.',
  service5: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö –≥—Ä—É–∑–æ–≤',
  service5Desc: '–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–∞—Å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.',
  bookingTitle: '–ü–∞–Ω–µ–ª—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è',
  bookingNamePlaceholder: '–ü–æ–ª–Ω–æ–µ –∏–º—è',
  bookingEmailPlaceholder: '–ê–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã',
  bookingMessagePlaceholder: '–°–≤–µ–¥–µ–Ω–∏—è –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏',
  bookingSubmitButton: '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ',
  testimonialsTitle: '–û—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤',
  testimonial1Text: 'SwiftDelivery –±—ã—Å—Ç—Ä–æ –¥–æ—Å—Ç–∞–≤–∏–ª–∞ –Ω–∞—à–∏ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç—ã. –•–æ—Ä–æ—à–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: '–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–µ—Ä–≤–æ–∫–ª–∞—Å—Å–Ω–∞—è.',
  testimonial2Author: '- James Okoro',
  testimonial3Text: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è, –±—ã—Å—Ç—Ä–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è.',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: '–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏',
  submitButton: '–û—Ç–ø—Ä–∞–≤–∏—Ç—å',
  loginTitle: '–í—Ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞',
  loginButton: '–í—Ö–æ–¥',
  registerTitle: '–ù–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞',
  registerButton: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è',
  registerUsernamePlaceholder: '–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
  registerPasswordPlaceholder: '–ü–∞—Ä–æ–ª—å',
  trackTitle: '–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏',
  trackButton: '–û—Ç—Å–ª–µ–¥–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É',
  faqTitle: '–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã',
  faq1Q: '–ö–∞–∫ –±—ã—Å—Ç—Ä–æ –∞–≤–∏–∞–¥–æ—Å—Ç–∞–≤–∫–∞?',
  faq1A: '–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∞–≤–∏–∞–≥—Ä—É–∑–æ–≤ –ø—Ä–∏–±—ã–≤–∞—é—Ç –∑–∞ 24-48 —á–∞—Å–æ–≤.',
  faq2Q: '–í—ã –∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π —Ç–∞–º–æ–∂–Ω–µ–π?',
  faq2A: '–î–∞, –º—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –ø–æ–ª–Ω—ã–µ —Ç–∞–º–æ–∂–µ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏.',
  faq3Q: '–ú–æ–≥—É –ª–∏ —è –æ—Ç—Å–ª–µ–¥–∏—Ç—å –≥—Ä—É–∑ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏?',
  faq3A: '–î–∞. –ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∂–∏–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.',
  faq4Q: '–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç–µ –ª–∏ –≤—ã –¥–æ—Å—Ç–∞–≤–∫—É —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã?',
  faq4A: '–î–∞, –º—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º—Å—è –Ω–∞ —Ö–æ–ª–æ–¥–Ω–æ–π —Ü–µ–ø–∏.',
  faq5Q: '–î–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö?',
  faq5A: '–î–∞, –≤ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö.',
  liveChatTitle: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ –ø—Ä—è–º–æ–º —á–∞—Ç–µ',
  liveChatNamePlaceholder: '–í–∞—à–µ –∏–º—è',
  liveChatEmailPlaceholder: '–í–∞—à –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã',
  liveChatMessagePlaceholder: '–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ',
  chatbotTitle: '–ë–æ—Ç SwiftDelivery',
  chatbotGreeting: '–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ —è –º–æ–≥—É –≤–∞–º –ø–æ–º–æ—á—å?',
  chatMessagePlaceholder: '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...',
  sendButton: '–û—Ç–ø—Ä–∞–≤–∏—Ç—å',
  newsletterTitle: '–û—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –≤ –∫—É—Ä—Å–µ',
  newsletterText: '–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –Ω–∞—à—É —Ä–∞—Å—Å—ã–ª–∫—É.',
  emailLabel: '–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞',
  subscribeButton: '–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è',
  followUs: '–°–ª–µ–¥–∏ –∑–∞ –Ω–∞–º–∏',
  company: '–ö–æ–º–ø–∞–Ω–∏—è',
  about: '–û –Ω–∞—Å',
  helpCenter: '–¶–µ–Ω—Ç—Ä –ø–æ–º–æ—â–∏',
  support: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞',
  legal: '–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π',
  privacy: '–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏',
  terms: '–£—Å–ª–æ–≤–∏—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è',
  footerNote: '¬© 2025 SwiftDelivery. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.'
});

// Japanese
window.translations.ja = window.translations.ja || {};
Object.assign(window.translations.ja, {
  home: '„Éõ„Éº„É†',
  gallery: '„ÇÆ„É£„É©„É™„Éº',
  services: '„Çµ„Éº„Éì„Çπ',
  track: 'ËøΩË∑°',
  login: '„É≠„Ç∞„Ç§„É≥',
  register: 'ÁôªÈå≤',
  welcome: 'SwiftDelivery - Ëà™Á©∫Ë≤®Áâ©Áâ©ÊµÅ',
  intro: '„Ç∞„É≠„Éº„Éê„É´„Å™Ë≤®Áâ©„ÇΩ„É™„É•„Éº„Ç∑„Éß„É≥„ÄÅ„Çπ„Éî„Éº„Éâ„ÄÅÂÆâÂÖ®ÊÄß„ÄÅÁ≤æÂ∫¶„ÄÇ',
  getStarted: '„ÅØ„Åò„ÇÅ„Çã',
  galleryTitle: '„Éï„É™„Éº„Éà„Å®ÊñΩË®≠',
  servicesTitle: '„Çµ„Éº„Éì„Çπ',
  service1: '„Ç®„Ç¢„Éï„É¨„Ç§„Éà„Ç®„ÇØ„Çπ„Éó„É¨„Çπ',
  service1Desc: '‰øùË®º„Åï„Çå„Åü„Çø„Ç§„É†„É©„Ç§„É≥„Åß„ÅÆÂÑ™ÂÖàË≤®Áâ©ÈÖçÈÄÅ„ÄÇ',
  service2: '„Ç∞„É≠„Éº„Éê„É´„Ç¶„Çß„Ç¢„Éè„Ç¶„Ç∏„É≥„Ç∞',
  service2Desc: 'Êà¶Áï•ÁöÑ„Å´‰ΩçÁΩÆ„Åô„ÇãÂõΩÈöõ„Éè„Éñ„Åß„ÅÆÂÆâÂÖ®„Å™‰øùÁÆ°„ÇΩ„É™„É•„Éº„Ç∑„Éß„É≥„ÄÇ',
  service3: 'Á®éÈñ¢„ÇØ„É™„Ç¢„É©„É≥„Çπ',
  service3Desc: 'Á®éÈñ¢Â∞ÇÈñÄÂá¶ÁêÜ„ÄÇ',
  service4: 'Ê∏©Â∫¶Âà∂Âæ°Ë≤®Áâ©',
  service4Desc: 'ÊïèÊÑü„Å™ÂïÜÂìÅ„ÅÆ„Åü„ÇÅ„ÅÆÂ∞ÇÈñÄËº∏ÈÄÅ„Å®‰øùÁÆ°„ÄÇ',
  service5: 'Âç±Èô∫ÂìÅËº∏ÈÄÅ',
  service5Desc: 'Âç±Èô∫Áâ©„ÅÆË™çÂÆö„Åä„Çà„Å≥Ê∫ñÊã†„Åó„ÅüÂèñÊâ±„ÄÇ',
  bookingTitle: '‰∫àÁ¥Ñ„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ',
  bookingNamePlaceholder: '„Éï„É´„Éç„Éº„É†',
  bookingEmailPlaceholder: '„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ',
  bookingMessagePlaceholder: '‰∫àÁ¥ÑË©≥Á¥∞',
  bookingSubmitButton: '‰∫àÁ¥Ñ„ÇíÈÄÅ‰ø°',
  testimonialsTitle: 'È°ßÂÆ¢„ÅÆÂ£∞',
  testimonial1Text: 'SwiftDelivery„ÅØÂåªÁôÇÁî®ÂìÅ„ÇíÁ¥†Êó©„ÅèÂõΩÂ¢É„ÇíË∂ä„Åà„Å¶ÈÄÅ‰ªò„Åó„Åæ„Åó„Åü„ÄÇÂº∑„Åè„ÅäÂãß„ÇÅ„Åó„Åæ„ÅôÔºÅ',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: 'ÂΩº„Çâ„ÅÆËøΩË∑°„Ç∑„Çπ„ÉÜ„É†„ÅØ‰∏ÄÊµÅ„Åß„Åô„ÄÇ',
  testimonial2Author: '- James Okoro',
  testimonial3Text: '„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„ÄÅËøÖÈÄü„ÄÅ‰ø°È†º„Åß„Åç„Çã„ÄÇ',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: '„ÅäÂïè„ÅÑÂêà„Çè„Åõ',
  submitButton: 'ÈÄÅ‰ø°',
  loginTitle: '„ÇØ„É©„Ç§„Ç¢„É≥„Éà„É≠„Ç∞„Ç§„É≥',
  loginButton: '„É≠„Ç∞„Ç§„É≥',
  registerTitle: 'Êñ∞Ë¶è„ÇØ„É©„Ç§„Ç¢„É≥„ÉàÁôªÈå≤',
  registerButton: 'ÁôªÈå≤',
  registerUsernamePlaceholder: '„É¶„Éº„Ç∂„ÉºÂêç',
  registerPasswordPlaceholder: '„Éë„Çπ„ÉØ„Éº„Éâ',
  trackTitle: '„Éî„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó&ÈÖçÈÄÅËøΩË∑°',
  trackButton: 'ÈÖçÈÄÅ„ÇíËøΩË∑°',
  faqTitle: '„Çà„Åè„ÅÇ„ÇãË≥™Âïè',
  faq1Q: 'Ëà™Á©∫Ë≤®Áâ©ÈÖçÈÄÅ„ÅØ„Å©„ÅÆ„Åè„Çâ„ÅÑÈÄü„ÅÑ„Åß„Åô„ÅãÔºü',
  faq1A: '„Åª„Å®„Çì„Å©„ÅÆËà™Á©∫Ë≤®Áâ©„ÅØ24-48ÊôÇÈñì„ÅßÂà∞ÁùÄ„Åó„Åæ„Åô„ÄÇ',
  faq2Q: 'ÂõΩÈöõÁ®éÈñ¢„ÇíÂèñ„ÇäÊâ±„ÅÑ„Åæ„Åô„ÅãÔºü',
  faq2A: '„ÅØ„ÅÑ„ÄÅ„Åô„Åπ„Å¶„ÅÆÂõΩÈöõÈÖçÈÄÅ„Å´ÂØæÂøú„Åó„Åæ„Åô„ÄÇ',
  faq3Q: 'Ë≤®Áâ©„Çí„É™„Ç¢„É´„Çø„Ç§„É†„ÅßËøΩË∑°„Åß„Åç„Åæ„Åô„ÅãÔºü',
  faq3A: '„ÅØ„ÅÑ„ÄÇÂΩìÁ§æ„ÅÆ„Ç∑„Çπ„ÉÜ„É†„ÅØ„É©„Ç§„Éñ„Ç¢„ÉÉ„Éó„Éá„Éº„Éà„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ',
  faq4Q: 'Ê∏©Â∫¶Âà∂Âæ°„Åï„Çå„ÅüÈÖçÈÄÅ„Çí„ÅîÊèê‰æõ„Åó„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü',
  faq4A: '„ÅØ„ÅÑ„ÄÅÊïèÊÑü„Å™ÂïÜÂìÅ„ÅÆ„Ç≥„Éº„É´„Éâ„ÉÅ„Çß„Éº„É≥Áâ©ÊµÅ„Å´ÁâπÂåñ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
  faq5Q: 'ÈÄ±Êú´ÈÖçÈÄÅ„ÅØÂà©Áî®ÂèØËÉΩ„Åß„Åô„ÅãÔºü',
  faq5A: '„ÅØ„ÅÑ„ÄÅÈÅ∏ÂÆöÂú∞Âüü„ÅßÂà©Áî®ÂèØËÉΩ„Åß„Åô„ÄÇ',
  liveChatTitle: '„É©„Ç§„Éñ„ÉÅ„É£„ÉÉ„Éà„Çµ„Éù„Éº„Éà',
  liveChatNamePlaceholder: '„ÅÇ„Å™„Åü„ÅÆÂêçÂâç',
  liveChatEmailPlaceholder: '„ÅÇ„Å™„Åü„ÅÆ„É°„Éº„É´',
  liveChatMessagePlaceholder: '„ÅÇ„Å™„Åü„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏',
  chatbotTitle: 'SwiftDelivery„Éú„ÉÉ„Éà',
  chatbotGreeting: '„Åì„Çì„Å´„Å°„ÅØÔºÅ‰ªäÊó•„ÅØ„Å©„ÅÆ„Çà„ÅÜ„Å´„ÅäÊâã‰ºù„ÅÑ„Åß„Åç„Åæ„Åô„ÅãÔºü',
  chatMessagePlaceholder: '„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ...',
  sendButton: 'ÈÄÅ‰ø°',
  newsletterTitle: 'ÊúÄÊñ∞ÊÉÖÂ†±„ÇíÂÖ•Êâã',
  newsletterText: '„Éã„É•„Éº„Çπ„É¨„Çø„Éº„ÇíË≥ºË™≠„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
  emailLabel: '„É°„Éº„É´',
  subscribeButton: 'Ë≥ºË™≠',
  followUs: '„Éï„Ç©„É≠„Éº„Åô„Çã',
  company: '‰ºöÁ§æ',
  about: 'ÁßÅ„Åü„Å°„Å´„Å§„ÅÑ„Å¶',
  helpCenter: '„Éò„É´„Éó„Çª„É≥„Çø„Éº',
  support: '„Çµ„Éù„Éº„Éà',
  legal: 'Ê≥ïÁöÑ',
  privacy: '„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº',
  terms: 'Âà©Áî®Ë¶èÁ¥Ñ',
  footerNote: '¬© 2025 SwiftDelivery„ÄÇ„Åô„Åπ„Å¶„ÅÆÊ®©Âà©„Çí‰øùÊúâ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ'
});

// Italian
window.translations.it = window.translations.it || {};
Object.assign(window.translations.it, {
  home: 'Home',
  gallery: 'Galleria',
  services: 'Servizi',
  track: 'Traccia',
  login: 'Accedi',
  register: 'Registrati',
  welcome: 'SwiftDelivery - Logistica Aerea',
  intro: 'Soluzioni di carico globali con velocit√†, sicurezza e precisione.',
  getStarted: 'Inizia',
  galleryTitle: 'Flotta e Strutture',
  servicesTitle: 'I Nostri Servizi',
  service1: 'Aereo Express',
  service1Desc: 'Consegna di carico prioritario con tempi garantiti.',
  service2: 'Magazzinaggio Globale',
  service2Desc: 'Soluzioni di stoccaggio sicuro in hub internazionali strategici.',
  service3: 'Dogana',
  service3Desc: 'Elaborazione specializzata dei dazi doganali.',
  service4: 'Carico Controllato in Temperatura',
  service4Desc: 'Trasporto e stoccaggio specializzati per merci sensibili.',
  service5: 'Trasporto di Merci Pericolose',
  service5Desc: 'Movimentazione certificata e conforme di materiali pericolosi.',
  bookingTitle: 'Pannello di Prenotazione',
  bookingNamePlaceholder: 'Nome Completo',
  bookingEmailPlaceholder: 'Indirizzo Email',
  bookingMessagePlaceholder: 'Dettagli Prenotazione',
  bookingSubmitButton: 'Invia Prenotazione',
  testimonialsTitle: 'Testimonianze dei Clienti',
  testimonial1Text: 'SwiftDelivery ha spedito i nostri forniture mediche rapidamente. Altamente consigliato!',
  testimonial1Author: '- Dr. Amina Yusuf',
  testimonial2Text: 'Il loro sistema di tracciamento √® di prim\'ordine.',
  testimonial2Author: '- James Okoro',
  testimonial3Text: 'Professionale, veloce e affidabile.',
  testimonial3Author: '- GlobalTech Ltd.',
  contactTitle: 'Contattaci',
  submitButton: 'Invia',
  loginTitle: 'Accesso Cliente',
  loginButton: 'Accedi',
  registerTitle: 'Registrazione Nuovo Cliente',
  registerButton: 'Registrati',
  registerUsernamePlaceholder: 'Nome Utente',
  registerPasswordPlaceholder: 'Password',
  trackTitle: 'Tracciamento Ritiro e Consegna',
  trackButton: 'Traccia Spedizione',
  faqTitle: 'Domande Frequenti',
  faq1Q: 'Quanto √® veloce la consegna aerea?',
  faq1A: 'La maggior parte dei carichi aerei arriva in 24-48 ore.',
  faq2Q: 'Gestite la dogana internazionale?',
  faq2A: 'S√¨, forniamo servizi completi di sdoganamento.',
  faq3Q: 'Posso tracciare il mio carico in tempo reale?',
  faq3A: 'S√¨. Il nostro sistema fornisce aggiornamenti dal vivo.',
  faq4Q: 'Offrite spedizioni controllate in temperatura?',
  faq4A: 'S√¨, siamo specializzati in logistica della catena del freddo.',
  faq5Q: '√à disponibile la consegna nel fine settimana?',
  faq5A: 'S√¨, in regioni selezionate.',
  liveChatTitle: 'Supporto Chat dal Vivo',
  liveChatNamePlaceholder: 'Il Tuo Nome',
  liveChatEmailPlaceholder: 'La Tua Email',
  liveChatMessagePlaceholder: 'Il Tuo Messaggio',
  chatbotTitle: 'Bot SwiftDelivery',
  chatbotGreeting: 'Ciao! Come posso aiutarti oggi?',
  chatMessagePlaceholder: 'Scrivi il tuo messaggio...',
  sendButton: 'Invia',
  newsletterTitle: 'Resta Aggiornato',
  newsletterText: 'Iscriviti alla nostra newsletter.',
  emailLabel: 'Email',
  subscribeButton: 'Iscriviti',
  followUs: 'Seguici',
  company: 'Azienda',
  about: 'Chi Siamo',
  helpCenter: 'Centro Assistenza',
  support: 'Supporto',
  legal: 'Legale',
  privacy: 'Politica sulla Privacy',
  terms: 'Condizioni di Servizio',
  footerNote: '¬© 2025 SwiftDelivery. Tutti i diritti riservati.'
});

// Adding more languages placeholder - Japanese, Polish, Korean, Vietnamese, Thai, Turkish, Indonesian, Dutch, Swedish, Greek, Czech, Hungarian, Romanian, Ukrainian, Bengali, Swahili, Urdu, Amharic, Filipino, Punjabi, Marathi, Tamil, Kannada, Telugu, Odia, Gujarati, Malay, Myanmar, Finnish, Danish, Norwegian, Hebrew, Persian
// Each language should follow the same structure as above
'''

# For now, let's add placeholders for remaining languages that reuse English as fallback
remaining_langs = ['pl', 'ko', 'vi', 'th', 'tr', 'id', 'nl', 'sv', 'el', 'cs', 'hu', 'ro', 'uk', 'bn', 'sw', 'ur', 'am', 'fil', 'pa', 'mr', 'ta', 'kn', 'te', 'or', 'gu', 'ms', 'my', 'fi', 'da', 'no', 'he', 'fa']

for lang in remaining_langs:
    new_translations += f'''
// {lang} - Using English as fallback
window.translations.{lang} = window.translations.{lang} || {{}};
Object.assign(window.translations.{lang}, window.translations.en || {{}});
'''

# Insert the new translations
new_content = content[:insertion_point] + new_translations + '\n' + content[insertion_point:]

# Write back
with open('my-frontend/script.js', 'w', encoding='utf-8') as f:
    f.write(new_content)

print("Translations added successfully!")

```
